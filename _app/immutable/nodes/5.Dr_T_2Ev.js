import"../chunks/DsnmJJEf.js";import{p as E,C as y,D as A,a as u,b as G,as as C,aq as L,g as t,u as P,H as q,ar as i,ap as M,J as d,G as z}from"../chunks/BwdvgNQo.js";import{s as I}from"../chunks/HTLptRgQ.js";import{s as H}from"../chunks/DYy3QkOc.js";import{i as R}from"../chunks/CKH9F0ww.js";import{t as J,f as U}from"../chunks/BjiNJ5CV.js";import{b as j,s as F}from"../chunks/08d27X49.js";import{w as K}from"../chunks/2OzU4e1W.js";import{l as N}from"../chunks/Bd7_h5c3.js";import{L as O}from"../chunks/72YJCPe-.js";import{P as Q}from"../chunks/BRQ5Qhft.js";import{u as o}from"../chunks/BPJfxdhi.js";import{t as T}from"../chunks/BYqiwRWy.js";import{q as V}from"../chunks/Don2Ydo1.js";const W=g=>{var n=y(),v=A(n);{var c=a=>{const m=P(()=>{const{model:f}=o.cropModels[o.selectedCropModel];return{model:f}}),p=P(()=>new URL(typeof t(m).model=="string"?t(m).model:t(m).model?.url));var s=X(),_=i(s),b=i(_,!0);d(_),d(s),z((f,r)=>{F(s,"href",f),I(b,r)},[()=>t(p).toString(),()=>t(p).pathname.split("/").at(-1)]),u(a,s)};R(v,a=>{o.cropInferenceAvailable&&a(c)})}u(g,n)};var X=q('<a target="_blank"><code> </code></a>'),Y=q('<section class="loading svelte-9zb7ys"><!> <p> </p> <p class="source svelte-9zb7ys"><!></p> <div class="progressbar svelte-9zb7ys"><!></div></section>');function pr(g,n){E(n,!0);let v=L(0),c=L(!1),a=new AbortController;async function m(r){if(!o.currentProtocol||!o.cropInferenceAvailable)return;const e=o.cropModels[r]?.model;e&&(a.abort(),a=new AbortController,await N(n.data.swarpc,"detection",{abortSignal:a.signal,protocolId:o.currentProtocol.id,requests:{model:e,classmapping:void 0},onProgress(l){C(v,l,!0)}}))}const p=P(()=>j("main"));K(()=>o.selectedCropModel,()=>{C(c,!1),m(o.selectedCropModel).catch(r=>{V(r)||(console.error(r),T.error(t(p)(89)))}).then(()=>{C(c,!0)})});var s=y(),_=A(s);{var b=r=>{var e=Y(),l=i(e);O(l,{loading:!0});var h=M(l,2),S=i(h,!0);d(h);var w=M(h,2),k=i(w);W(k),d(w);var x=M(w,2),B=i(x);Q(B,{percentage:!0,alwaysActive:!0,get progress(){return t(v)}}),d(x),d(e),z(D=>I(S,D),[()=>t(p)(55)]),J(1,e,()=>U,()=>({duration:100})),u(r,e)},f=r=>{var e=y(),l=A(e);H(l,()=>n.children),u(r,e)};R(_,r=>{t(c)?r(f,!1):r(b)})}u(g,s),G()}export{pr as component};
