import"../chunks/DsnmJJEf.js";import{f as ct,a as p,p as tt,aR as ht,b as et,H as z,D as K,ap as f,g as t,u as a,F as Y,G as q,at as Z,C as dt,I as ut,ar as d,J as l,as as j,aq as Q}from"../chunks/BwdvgNQo.js";import{s as H}from"../chunks/HTLptRgQ.js";import{r as vt,p as mt,i as L,s as wt}from"../chunks/CKH9F0ww.js";import{e as xt}from"../chunks/CuPIRSst.js";import{t as Pt,f as bt}from"../chunks/BjiNJ5CV.js";import{a as _t,b as rt}from"../chunks/08d27X49.js";import{B as N}from"../chunks/DgJA6oA6.js";import{t as W,n as $t,e as kt,ac as yt,a1 as Bt,v as Mt}from"../chunks/Don2Ydo1.js";import{e as St,c as It}from"../chunks/Xiow3_xo.js";import{t as T}from"../chunks/BYqiwRWy.js";import{B as Dt}from"../chunks/CayOuDVJ.js";import{F as ot}from"../chunks/CfpiF-ni.js";import{I as at}from"../chunks/BWUfZxGx.js";import{M as Ct}from"../chunks/5g7xaRkA.js";import{g as pt}from"../chunks/DyfjURbU.js";import{R as V}from"../chunks/DWCXZatK.js";import{S as Rt,M as Ut}from"../chunks/BohlEgEy.js";import{A as At}from"../chunks/G4wa9As3.js";import{D as Ft}from"../chunks/DBaFXsNm.js";import{P as Ht}from"../chunks/BLgTCby7.js";import{B as zt}from"../chunks/CrYFLP04.js";import{B as st}from"../chunks/LNwaZJFt.js";import{B as nt}from"../chunks/Bga-pN0V.js";import{O as qt}from"../chunks/gmcJWo7k.js";import{a as lt,s as Ot}from"../chunks/CEoeiZ5P.js";import{u as it}from"../chunks/BPJfxdhi.js";import{S as Tt}from"../chunks/qerflRe8.js";import{r as Vt}from"../chunks/BRmTdaxr.js";var Et=ct('<svg><path fill="currentColor" d="M11 11V7h2v4h4v2h-4v4h-2v-4H7v-2zm1 11C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10m0-2a8 8 0 1 0 0-16a8 8 0 0 0 0 16"></path></svg>');function Gt(R,e){const r=vt(e,["$$slots","$$events","$$legacy"]);var P=Et();_t(P,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),p(R,P)}var Jt=ct('<svg><path fill="currentColor" d="M13 10h5l-6 6l-6-6h5V3h2zm-9 9h16v-7h2v8a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-8h2z"></path></svg>');function jt(R,e){const r=vt(e,["$$slots","$$events","$$legacy"]);var P=Jt();_t(P,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...r})),p(R,P)}var Kt=z("<!> <!>",1),Lt=z("<p> </p>"),Nt=z("<code>.</code>"),Qt=z("<code>_</code>"),Wt=z("<em> </em>"),Xt=z("<!> <!>",1);function Yt(R,e){tt(e,!0);const r=a(()=>rt("main"));let P=mt(e,"open",15),g=ht({name:"",id:""});{const U=(b,A)=>{let y=()=>A?.().close;var B=Kt(),M=K(B);N(M,{onclick:()=>y()?.(),children:(w,u)=>{Z();var i=Y();q(_=>H(i,_),[()=>t(r)(30)]),p(w,i)},$$slots:{default:!0}});var S=f(M,2);Dt(S,{onclick:async()=>{T.clear();const w=u=>$t(g.id,u);try{await W.Metadata.set({id:w("crop"),description:"",label:"",mergeMethod:"union",type:"boundingbox",required:!1}),await W.Protocol.set({id:g.id,name:g.name,metadata:["crop"].map(w),description:"",authors:[],crop:{metadata:w("crop")}}),await pt("/(app)/protocols/[id]/infos",{id:g.id})}catch(u){T.error(kt(u))}},children:(w,u)=>{Z();var i=Y();q(_=>H(i,_),[()=>t(r)(211)]),p(w,i)},$$slots:{default:!0}}),p(b,B)};let D=a(()=>t(r)(71));Ct(R,{key:"modal_create_protocol",get title(){return t(D)},toasts:"protocolcreator",get open(){return P()},set open(b){P(b)},footer:U,children:(b,A)=>{var y=Xt(),B=K(y);{let S=a(()=>t(r)(208));ot(B,{get label(){return t(S)},children:(w,u)=>{at(w,{label:"",value:"",onblur:i=>{g.name=i}})},$$slots:{default:!0}})}var M=f(B,2);ot(M,{label:u=>{const i=(_,C=ut)=>{var n=Lt(),c=d(n,!0);l(n),q($=>H(c,$),[()=>t(r).x(C())]),p(_,n)};{let _=a(()=>[i]),C=a(()=>t(r).c(209));V(u,{get t(){return t(_)},get x(){return t(C)}})}},error:u=>{const i=a(()=>W.Protocol.getFromState(g.id));var _=dt(),C=K(_);{var n=s=>{const x=v=>{var I=Nt();p(v,I)},k=v=>{var I=Qt();p(v,I)};{let v=a(()=>[x,k]),I=a(()=>t(r).c(333));V(s,{get t(){return t(v)},get x(){return t(I)}})}},c=a(()=>g.id&&!yt.allows(g.id)),$=s=>{const x=k=>{var v=Wt(),I=d(v,!0);l(v),q(()=>H(I,t(i).name)),p(k,v)};{let k=a(()=>[x]),v=a(()=>t(r).c(210));V(s,{get t(){return t(k)},get x(){return t(v)}})}};L(C,s=>{t(c)?s(n):t(i)&&s($,1)})}p(u,_)},children:(u,i)=>{at(u,{label:"",value:"",get onerror(){return T.error},onblur:_=>{g.id=_}})},$$slots:{label:!0,error:!0,default:!0}}),p(b,y)},$$slots:{footer:!0,default:!0}})}et()}var Zt=z('<label class="auto-updates svelte-1aw9mnt"><!> <div class="text svelte-1aw9mnt"><p> </p> <p class="via svelte-1aw9mnt"><!></p></div></label>'),te=z('<li class="svelte-1aw9mnt"><details class="svelte-1aw9mnt"><summary class="svelte-1aw9mnt"><section class="text"><h3> </h3> <small><code> </code></small></section> <section class="actions svelte-1aw9mnt"><!> <!></section></summary> <!> <div class="more-actions svelte-1aw9mnt"><!> <!> <!></div></details></li>');function ee(R,e){tt(e,!0);const r=a(()=>rt("main"));let P=mt(e,"expanded",11,!1);const g=a(()=>{const o=lt().autoUpdateProtocols;return e.id in o?o[e.id]:e.updates==="automatic"});var U=te(),D=d(U),b=d(D),A=d(b),y=d(A),B=d(y,!0);l(y);var M=f(y,2),S=d(M),w=d(S,!0);l(S),l(M),l(A);var u=f(A,2),i=d(u);{let o=a(()=>t(r)(90));st(i,{get help(){return t(o)},onclick:async()=>{await St(Bt(),Vt("/"),e.id).catch(m=>T.error(m))},children:(m,h)=>{Rt(m,{})},$$slots:{default:!0}})}var _=f(i,2);{var C=o=>{nt(o,{compact:!0,get version(){return e.version},get source(){return e.source},get id(){return e.id}})},n=o=>{{let m=a(()=>t(r)(49));st(o,{crossout:!0,onclick:()=>{},get help(){return t(m)},children:(h,O)=>{At(h,{})},$$slots:{default:!0}})}};L(_,o=>{e.version&&e.source?o(C):o(n,!1)})}l(u),l(b);var c=f(b,2);{var $=o=>{var m=Zt(),h=d(m);{let J=a(()=>t(r)(412));Tt(h,{get value(){return t(g)},get label(){return t(J)},onchange:async ft=>{const gt=lt().autoUpdateProtocols;await Ot("autoUpdateProtocols",{...gt,[e.id]:ft})}})}var O=f(h,2),F=d(O),E=d(F,!0);l(F);var G=f(F,2),X=d(G);{let J=a(()=>t(r)(414,[e.source]));qt(X,{get text(){return t(J)}})}l(G),l(O),l(m),q(J=>H(E,J),[()=>t(r)(413)]),p(o,m)};L(c,o=>{e.version&&e.source&&o($)})}var s=f(c,2),x=d(s);{const o=h=>{Ft(h,{})};let m=a(()=>e.id===it.currentProtocolId&&it.processing.total>0);N(x,{danger:!0,get disabled(){return t(m)},onclick:()=>{e.ondelete()},_w_snippet_0:o,children:(h,O)=>{{let F=a(()=>[o]),E=a(()=>t(r).c(15));V(h,{get t(){return t(F)},get x(){return t(E)}})}},$$slots:{_w_snippet_0:!0,default:!0}})}var k=f(x,2);{const o=h=>{Ht(h,{})},m=(h,O=ut)=>{zt(h,{children:(F,E)=>{Z();var G=Y();q(X=>H(G,X),[()=>t(r).x(O())]),p(F,G)}})};N(k,{onclick:()=>pt("/(app)/protocols/[id]/infos",{id:e.id}),_w_snippet_1:o,_w_snippet_2:m,children:(h,O)=>{{let F=a(()=>[o,m]),E=a(()=>t(r).c(415));V(h,{get t(){return t(F)},get x(){return t(E)}})}},$$slots:{_w_snippet_1:!0,_w_snippet_2:!0,default:!0}})}var v=f(k,2);{var I=o=>{nt(o,{get version(){return e.version},get source(){return e.source},get id(){return e.id}})};L(v,o=>{e.version&&e.source&&o(I)})}l(s),l(D),l(U),q(()=>{D.open=P(),H(B,e.name),H(w,e.id)}),p(R,U),et()}var re=z('<!> <!> <div class="page svelte-1fvkkcr"><header class="svelte-1fvkkcr"><h1 class="svelte-1fvkkcr"> </h1> <section class="actions svelte-1fvkkcr"><!> <!></section></header> <ul class="protocols svelte-1fvkkcr"></ul></div>',1);function Re(R,e){tt(e,!0);const r=a(()=>rt("main"));let P=Q(""),g=Q(void 0),U=Q(void 0),D=Q("");var b=re(),A=K(b);Ut(A,{get id(){return t(P)},get open(){return t(g)},set open(n){j(g,n,!0)}});var y=f(A,2);Yt(y,{get open(){return t(U)},set open(n){j(U,n,!0)}});var B=f(y,2),M=d(B),S=d(M),w=d(S,!0);l(S);var u=f(S,2),i=d(u);N(i,{loading:!0,onclick:async(c,$)=>{await It({allowMultiple:!0,onInput:$.loadingStarted,importProtocol:e.data.swarpc.importProtocol}).catch(s=>T.error(s)).then(s=>{!s||typeof s=="string"||s.length===0||(s.length===1?T.success(t(r)(133,[s[0].name])):T.success(Mt(s.length,t(r).p(194),t(r)._.p)))})},children:(c,$)=>{let s=()=>$?.().loading;const x=k=>{var v=dt(),I=K(v);{var o=m=>{jt(m,{})};L(I,m=>{s()||m(o)})}p(k,v)};{let k=a(()=>[x]),v=a(()=>t(r).c(5));V(c,{get t(){return t(k)},get x(){return t(v)}})}},$$slots:{default:!0}});var _=f(i,2);{const n=c=>{Gt(c,{})};N(_,{onclick:()=>t(U)?.(),_w_snippet_1:n,children:(c,$)=>{{let s=a(()=>[n]),x=a(()=>t(r).c(3));V(c,{get t(){return t(s)},get x(){return t(x)}})}},$$slots:{_w_snippet_1:!0,default:!0}})}l(u),l(M);var C=f(M,2);xt(C,21,()=>W.Protocol.state,n=>n.id,(n,c)=>{var $=()=>t(D)===t(c).id,s=x=>{x?j(D,t(c).id,!0):t(D)===t(c).id&&j(D,"")};ee(n,wt(()=>t(c),{get expanded(){return $()},set expanded(x){s(x)},ondelete:()=>{j(P,t(c).id,!0),t(g)?.()}}))}),l(C),l(B),q(n=>H(w,n),[()=>t(r)(134)]),Pt(1,B,()=>bt,()=>({duration:100})),p(R,b),et()}export{Re as component};
