import"../chunks/DsnmJJEf.js";import{p as O,C as z,D as S,a as p,b as D,H as b,ar as h,J as w,G as L,at as N,ap as H,g as t,u as a,b2 as T,I as W,as as M,aq as $}from"../chunks/BwdvgNQo.js";import{s as d}from"../chunks/HTLptRgQ.js";import{i as U}from"../chunks/CKH9F0ww.js";import{b as A}from"../chunks/BDV6zAFm.js";import{p as j}from"../chunks/BzM0mbGE.js";import{s as B,b as E}from"../chunks/08d27X49.js";import{t as q}from"../chunks/Don2Ydo1.js";import{M as F}from"../chunks/xKLuMKKQ.js";import{g as C}from"../chunks/DyfjURbU.js";import{t as I}from"../chunks/BYqiwRWy.js";import{R as K}from"../chunks/DWCXZatK.js";const Q="ignore",pt=Object.freeze(Object.defineProperty({__proto__:null,trailingSlash:Q},Symbol.toStringTag,{value:"Module"}));var V=b(" <strong> </strong> ",1),X=b("<a><!></a>");function Y(x,l){O(l,!0);const i=r=>{N();var e=V(),o=S(e,!0),n=H(o),c=h(n,!0);w(n);var _=H(n,1,!0);L(()=>{d(o,t(u)),d(c,t(g)),d(_,t(f))}),p(r,e)},g=a(()=>URL.canParse(l.url)?new URL(l.url).hostname:""),y=a(()=>l.url.toString().split(t(g),2)),m=a(()=>T(t(y),2)),u=a(()=>t(m)[0]),f=a(()=>t(m)[1]);var s=z(),v=S(s);{var R=r=>{var e=X(),o=h(e);i(o),w(e),L(n=>B(e,"href",n),[()=>l.url.toString()]),p(r,e)},P=r=>{i(r)};U(v,r=>{l.linkify?r(R):r(P,!1)})}p(x,s),D()}var Z=b("<p> </p>"),tt=b('<section class="modal-import-loading svelte-dq2kpr"><!></section>');function _t(x,l){O(l,!0);const i=a(()=>E("main")),g=a(()=>j.data),y=a(()=>t(g).swarpc);let m=$(!1);const u=a(()=>{const s=j.params.url;return s&&s.startsWith("https:")&&URL.canParse(s)?new URL(s):null});let f=$(void 0);A(()=>{t(f)&&t(u)&&!t(m)&&t(f)()});{const s=r=>{var e=z(),o=S(e);{var n=c=>{Y(c,{linkify:!0,get url(){return t(u)}})};U(o,c=>{t(u)&&c(n)})}p(r,e)},v=(r,e=W)=>{var o=tt(),n=h(o);{var c=_=>{var k=Z(),G=h(k,!0);w(k),L(J=>d(G,J),[()=>t(i).x(e())]),p(_,k)};U(n,_=>{t(m)&&_(c)})}w(o),p(r,o)};let R=a(()=>t(i)(106)),P=a(()=>t(i)(103));F(x,{get title(){return t(R)},key:"modal_import_remote_protocol",get confirm(){return t(P)},oncancel:async()=>{await C("/")},onconfirm:async()=>{if(!t(u))return;M(m,!0);const r=await fetch(t(u)).then(e=>e.text()).catch(e=>(I.error(t(i)(87,[e])),null));if(r)try{await t(y).importProtocol({contents:r}),await q.Protocol.refresh(null),await q.Metadata.refresh(null),await C("/protocols")}catch(e){I.error(t(i)(87,[e]))}finally{M(m,!1)}},get open(){return t(f)},set open(r){M(f,r,!0)},_w_snippet_0:s,_w_snippet_1:v,children:(r,e)=>{{let o=a(()=>[s,v]),n=a(()=>t(i).c(47));K(r,{get t(){return t(o)},get x(){return t(n)}})}},$$slots:{_w_snippet_0:!0,_w_snippet_1:!0,default:!0}})}D()}export{_t as component,pt as universal};
