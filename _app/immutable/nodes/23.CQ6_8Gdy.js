import"../chunks/DsnmJJEf.js";import{p as K,H as c,a as v,b as O,ar as o,g as e,u as n,J as i,D as Q,ap as y,G as g}from"../chunks/BwdvgNQo.js";import{s as V}from"../chunks/CuKI1hs9.js";import{s as k,e as W}from"../chunks/HTLptRgQ.js";import{i as Y}from"../chunks/CKH9F0ww.js";import{e as Z}from"../chunks/CuPIRSst.js";import{t as $,f as ee}from"../chunks/BjiNJ5CV.js";import{r as ae,e as te,b as re}from"../chunks/08d27X49.js";import{t as w,w as ne,E as M,x as ie,y as se,A as oe}from"../chunks/Don2Ydo1.js";import{a as E}from"../chunks/BDV6zAFm.js";import{F as le}from"../chunks/D5nc91ck.js";import{R as ue}from"../chunks/DoUkWLbC.js";import{t as fe}from"../chunks/BYqiwRWy.js";var de=c("<option> </option>"),me=c('<div class="field svelte-s8isad"><label><span class="label"> </span> <input type="text" list="exif-fields"/> <datalist id="exif-fields"></datalist></label></div>'),pe=c('<h3 class="svelte-s8isad"> </h3> <!>',1),ve=c('<div class="content"><!></div>');function Se(N,_){K(_,!0);const x=n(()=>re("main")),F=n(()=>_.data.metadata),a=n(()=>e(F).infer),R=n(()=>e(F).id),T=[{key:"none",label:"Pas d'inférence"},{key:"neural",label:"Réseau neuronal"},{key:"exif",label:"EXIF"}],U=n(()=>!e(a)||!("neural"in e(a))||!e(a).neural.model?"":typeof e(a).neural.model=="string"?e(a).neural.model:e(a).neural.model.url),z={model:"http://example.com/model.onnx",input:{width:224,height:224,normalized:!0}},I=n(()=>e(a)?"exif"in e(a)?"exif":"neural"in e(a)?"neural":"none":"none");var m=ve(),B=o(m);ue(B,{get options(){return T},get value(){return e(I)},onchange:async h=>{h==="none"&&e(I)!=="none"&&(await w.Metadata.set(ne(_.data.metadata,"infer")),await E())},children:(h,A)=>{let S=()=>A?.().key,G=()=>A?.().label;var X=pe(),b=Q(X),H=o(b,!0);i(b);var J=y(b,2);{var P=s=>{{let l=n(()=>e(x)(290));le(s,{check:!0,get label(){return e(l)},get value(){return e(U)},onblur:async u=>{if(!u)return;const f=V(e(a)&&"neural"in e(a)&&e(a).neural?e(a).neural:{});await w.Metadata.update(e(R),"infer",{neural:{...z,...f,model:u}}),await E()}})}},j=s=>{var l=me(),u=o(l),f=o(u),q=o(f,!0);i(f);var p=y(f,2);ae(p);var D=y(p,2);Z(D,20,()=>ie(M),t=>t,(t,r)=>{var d=de(),C=o(d,!0);i(d);var L={};g(()=>{k(C,M[r]),L!==(L=r)&&(d.value=(d.__value=r)??"")}),v(t,d)}),i(D),i(u),i(l),g(t=>{k(q,t),te(p,e(a)&&"exif"in e(a)?e(a).exif:"")},[()=>e(x)(291)]),W("blur",p,async({currentTarget:t})=>{const r=se(t.value);if(r instanceof oe){fe.error(e(x)(292,[r.summary]));return}await w.Metadata.update(e(R),"infer",{exif:r}),await E()}),v(s,l)};Y(J,s=>{S()==="neural"?s(P):S()==="exif"&&s(j,1)})}g(()=>k(H,G())),v(h,X)},$$slots:{default:!0}}),i(m),$(1,m,()=>ee,()=>({duration:100})),v(N,m),O()}export{Se as component};
