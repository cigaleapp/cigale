import"./DsnmJJEf.js";import{p as A,H as b,ar as E,ap as y,g as t,u as o,J as G,G as g,a as h,b as I,aq as J,as as L}from"./BwdvgNQo.js";import{r as T}from"./HTLptRgQ.js";import{p as R,i as C,r as X}from"./CKH9F0ww.js";import{a as B,S as D,c as F,s as H,d as K}from"./08d27X49.js";import{b as N}from"./lhkQGyGN.js";import{a as O}from"./Bd7_h5c3.js";var P=b('<img data-is-blur="true" class="blur svelte-gh0xrt" alt="" aria-hidden="true"/>'),Q=b('<img alt="" aria-hidden="true" data-is-background="true" class="background svelte-gh0xrt"/>'),U=b("<picture><!> <!> <img/></picture>");function st(j,a){A(a,!0);const M=R(a,"class",3,""),S=R(a,"transitions",3,!1),W=X(a,["$$slots","$$events","$$legacy","src","box","blurfill","background","dimensions","class","transitions"]),s=o(()=>O(a.box)),l=o(()=>a.box.width*a.dimensions.width/(a.box.height*a.dimensions.height));function i(e){return e?.map(r=>r*100+"%").join(" ")}let u=J(void 0);const c=o(()=>{if(!t(u))return;const{width:e,height:r}=t(u);return e/r}),d=o(()=>{if(!t(c))return;const[e,r]=[1/a.box.width*Math.min(t(l),1),1/a.box.height*Math.min(1/t(l),1)];return t(c)>t(l)?[e/t(c),r]:[e,r*t(c)]}),v=o(()=>{if(!t(d))return;const[e,r]=t(s).topleft,[f,m]=t(d),[w,z]=[f*a.box.width,m*a.box.height];return t(l)>1?[-e+1/2-w/2,-r+1/2-z/2]:[-e+1/2-w/2,-r]});var n=U();let _;var x=E(n);{var Y=e=>{var r=P();g(()=>H(r,"src",a.src)),h(e,r)};C(x,e=>{a.blurfill&&e(Y)})}var p=y(x,2);{var q=e=>{var r=Q();let f;g(m=>{H(r,"src",a.src),f=K(r,"",f,m)},[()=>({"transform-origin":i(t(s).topleft),translate:i(t(v)),scale:i(t(d))})]),h(e,r)};C(p,e=>{a.background&&e(q)})}var k=y(p,2);B(k,e=>({src:a.src,...W,[D]:e}),[()=>({"transform-origin":i(t(s).topleft),translate:i(t(v)),scale:i(t(d)),"clip-path":`polygon(${[t(s).topleft,t(s).topright,t(s).bottomright,t(s).bottomleft].map(i).join(", ")??""})`})],void 0,void 0,"svelte-gh0xrt"),G(n),g(()=>_=F(n,1,`cropped ${M()??""}`,"svelte-gh0xrt",_,{transitions:S()})),T(k),N(n,"contentRect",e=>L(u,e)),h(j,n),I()}export{st as C};
