import{aR as _h}from"./BwdvgNQo.js";import{r as Ih}from"./BAHerLWL.js";import{_ as ro}from"./PPVm8Dsz.js";class gs extends Error{constructor(e,r,n,i){super(e),this.name="DevalueError",this.path=r.join(""),this.value=n,this.root=i}}function no(t){return Object(t)!==t}const Ah=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Eh(t){const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null||Object.getPrototypeOf(e)===null||Object.getOwnPropertyNames(e).sort().join("\0")===Ah}function Oh(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ph(t){switch(t){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t<" "?`\\u${t.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function ar(t){let e="",r=0;const n=t.length;for(let i=0;i<n;i+=1){const s=t[i],o=Ph(s);o&&(e+=t.slice(r,i)+o,r=i+1)}return`"${r===0?t:e+t.slice(r)}"`}function Mh(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.getOwnPropertyDescriptor(t,e).enumerable)}const Ch=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function io(t){return Ch.test(t)?"."+t:"["+JSON.stringify(t)+"]"}function Nh(t){const e=new DataView(t);let r="";for(let n=0;n<t.byteLength;n++)r+=String.fromCharCode(e.getUint8(n));return Rh(r)}function $h(t){const e=Dh(t),r=new ArrayBuffer(e.length),n=new DataView(r);for(let i=0;i<r.byteLength;i++)n.setUint8(i,e.charCodeAt(i));return r}const gc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Dh(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",r=0,n=0;for(let i=0;i<t.length;i++)r<<=6,r|=gc.indexOf(t[i]),n+=6,n===24&&(e+=String.fromCharCode((r&16711680)>>16),e+=String.fromCharCode((r&65280)>>8),e+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,e+=String.fromCharCode(r)):n===18&&(r>>=2,e+=String.fromCharCode((r&65280)>>8),e+=String.fromCharCode(r&255)),e}function Rh(t){let e="";for(let r=0;r<t.length;r+=3){const n=[void 0,void 0,void 0,void 0];n[0]=t.charCodeAt(r)>>2,n[1]=(t.charCodeAt(r)&3)<<4,t.length>r+1&&(n[1]|=t.charCodeAt(r+1)>>4,n[2]=(t.charCodeAt(r+1)&15)<<2),t.length>r+2&&(n[2]|=t.charCodeAt(r+2)>>6,n[3]=t.charCodeAt(r+2)&63);for(let i=0;i<n.length;i++)typeof n[i]>"u"?e+="=":e+=gc[n[i]]}return e}const pa=-1,yc=-2,bc=-3,xc=-4,vc=-5,ma=-6;function Lh(t,e){return Th(JSON.parse(t),e)}function Th(t,e){if(typeof t=="number")return s(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const r=t,n=Array(r.length);let i=null;function s(o,u=!1){if(o===pa)return;if(o===bc)return NaN;if(o===xc)return 1/0;if(o===vc)return-1/0;if(o===ma)return-0;if(u||typeof o!="number")throw new Error("Invalid input");if(o in n)return n[o];const l=r[o];if(!l||typeof l!="object")n[o]=l;else if(Array.isArray(l))if(typeof l[0]=="string"){const d=l[0],f=e&&Object.hasOwn(e,d)?e[d]:void 0;if(f){let p=l[1];if(typeof p!="number"&&(p=r.push(l[1])-1),i??=new Set,i.has(p))throw new Error("Invalid circular reference");return i.add(p),n[o]=f(s(p)),i.delete(p),n[o]}switch(d){case"Date":n[o]=new Date(l[1]);break;case"Set":const p=new Set;n[o]=p;for(let a=1;a<l.length;a+=1)p.add(s(l[a]));break;case"Map":const h=new Map;n[o]=h;for(let a=1;a<l.length;a+=2)h.set(s(l[a]),s(l[a+1]));break;case"RegExp":n[o]=new RegExp(l[1],l[2]);break;case"Object":n[o]=Object(l[1]);break;case"BigInt":n[o]=BigInt(l[1]);break;case"null":const c=Object.create(null);n[o]=c;for(let a=1;a<l.length;a+=2)c[l[a]]=s(l[a+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{if(r[l[1]][0]!=="ArrayBuffer")throw new Error("Invalid data");const a=globalThis[d],g=s(l[1]),m=new a(g);n[o]=l[2]!==void 0?m.subarray(l[2],l[3]):m;break}case"ArrayBuffer":{const a=l[1];if(typeof a!="string")throw new Error("Invalid ArrayBuffer encoding");const g=$h(a);n[o]=g;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const a=d.slice(9);n[o]=Temporal[a].from(l[1]);break}case"URL":{const a=new URL(l[1]);n[o]=a;break}case"URLSearchParams":{const a=new URLSearchParams(l[1]);n[o]=a;break}default:throw new Error(`Unknown type ${d}`)}}else{const d=new Array(l.length);n[o]=d;for(let f=0;f<l.length;f+=1){const p=l[f];p!==yc&&(d[f]=s(p))}}else{const d={};n[o]=d;for(const f in l){if(f==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const p=l[f];d[f]=s(p)}}return n[o]}return s(0)}function Bh(t,e){const r=[],n=new Map,i=[];if(e)for(const d of Object.getOwnPropertyNames(e))i.push({key:d,fn:e[d]});const s=[];let o=0;function u(d){if(d===void 0)return pa;if(Number.isNaN(d))return bc;if(d===1/0)return xc;if(d===-1/0)return vc;if(d===0&&1/d<0)return ma;if(n.has(d))return n.get(d);const f=o++;n.set(d,f);for(const{key:h,fn:c}of i){const a=c(d);if(a)return r[f]=`["${h}",${u(a)}]`,f}if(typeof d=="function")throw new gs("Cannot stringify a function",s,d,t);let p="";if(no(d))p=ys(d);else{const h=Oh(d);switch(h){case"Number":case"String":case"Boolean":p=`["Object",${ys(d)}]`;break;case"BigInt":p=`["BigInt",${d}]`;break;case"Date":p=`["Date","${!isNaN(d.getDate())?d.toISOString():""}"]`;break;case"URL":p=`["URL",${ar(d.toString())}]`;break;case"URLSearchParams":p=`["URLSearchParams",${ar(d.toString())}]`;break;case"RegExp":const{source:a,flags:g}=d;p=g?`["RegExp",${ar(a)},"${g}"]`:`["RegExp",${ar(a)}]`;break;case"Array":p="[";for(let m=0;m<d.length;m+=1)m>0&&(p+=","),m in d?(s.push(`[${m}]`),p+=u(d[m]),s.pop()):p+=yc;p+="]";break;case"Set":p='["Set"';for(const m of d)p+=`,${u(m)}`;p+="]";break;case"Map":p='["Map"';for(const[m,b]of d)s.push(`.get(${no(m)?ys(m):"..."})`),p+=`,${u(m)},${u(b)}`,s.pop();p+="]";break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const m=d;p='["'+h+'",'+u(m.buffer);const b=d.byteOffset,x=b+d.byteLength;if(b>0||x!==m.buffer.byteLength){const w=+/(\d+)/.exec(h)[1]/8;p+=`,${b/w},${x/w}`}p+="]";break}case"ArrayBuffer":{p=`["ArrayBuffer","${Nh(d)}"]`;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":p=`["${h}",${ar(d.toString())}]`;break;default:if(!Eh(d))throw new gs("Cannot stringify arbitrary non-POJOs",s,d,t);if(Mh(d).length>0)throw new gs("Cannot stringify POJOs with symbolic keys",s,d,t);if(Object.getPrototypeOf(d)===null){p='["null"';for(const m in d)s.push(io(m)),p+=`,${ar(m)},${u(d[m])}`,s.pop();p+="]"}else{p="{";let m=!1;for(const b in d)m&&(p+=","),m=!0,s.push(io(b)),p+=`${ar(b)}:${u(d[b])}`,s.pop();p+="}"}}}return r[f]=p,f}const l=u(t);return l<0?`${l}`:`[${r.join(",")}]`}function ys(t){const e=typeof t;return e==="string"?ar(t):t instanceof String?ar(t.toString()):t===void 0?pa.toString():t===0&&1/t<0?ma.toString():e==="bigint"?`["BigInt","${t}"]`:String(t)}const Fs=(t,e)=>e.some(r=>t instanceof r);let so,ao;function qh(){return so||(so=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fh(){return ao||(ao=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Us=new WeakMap,bs=new WeakMap,Yi=new WeakMap;function Uh(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(Tr(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return Yi.set(e,t),e}function Vh(t){if(Us.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Us.set(t,e)}let Vs={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Us.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Tr(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wc(t){Vs=t(Vs)}function jh(t){return Fh().includes(t)?function(...e){return t.apply(js(this),e),Tr(this.request)}:function(...e){return Tr(t.apply(js(this),e))}}function Kh(t){return typeof t=="function"?jh(t):(t instanceof IDBTransaction&&Vh(t),Fs(t,qh())?new Proxy(t,Vs):t)}function Tr(t){if(t instanceof IDBRequest)return Uh(t);if(bs.has(t))return bs.get(t);const e=Kh(t);return e!==t&&(bs.set(t,e),Yi.set(e,t)),e}const js=t=>Yi.get(t);function Hh(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),u=Tr(o);return n&&o.addEventListener("upgradeneeded",l=>{n(Tr(o.result),l.oldVersion,l.newVersion,Tr(o.transaction),l)}),r&&o.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),u.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const zh=["get","getKey","getAll","getAllKeys","count"],Gh=["put","add","delete","clear"],xs=new Map;function oo(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xs.get(e))return xs.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=Gh.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||zh.includes(r)))return;const s=async function(o,...u){const l=this.transaction(o,i?"readwrite":"readonly");let d=l.store;return n&&(d=d.index(u.shift())),(await Promise.all([d[r](...u),i&&l.done]))[0]};return xs.set(e,s),s}wc(t=>({...t,get:(e,r,n)=>oo(e,r)||t.get(e,r,n),has:(e,r)=>!!oo(e,r)||t.has(e,r)}));const Wh=["continue","continuePrimaryKey","advance"],uo={},Ks=new WeakMap,kc=new WeakMap,Yh={get(t,e){if(!Wh.includes(e))return t[e];let r=uo[e];return r||(r=uo[e]=function(...n){Ks.set(this,kc.get(this)[e](...n))}),r}};async function*Jh(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const r=new Proxy(e,Yh);for(kc.set(r,e),Yi.set(r,js(e));e;)yield r,e=await(Ks.get(r)||e.continue()),Ks.delete(r)}function co(t,e){return e===Symbol.asyncIterator&&Fs(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&Fs(t,[IDBIndex,IDBObjectStore])}wc(t=>({...t,get(e,r,n){return co(e,r)?Jh:t.get(e,r,n)},has(e,r){return co(e,r)||t.has(e,r)}}));const Zh="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Sc=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=Zh[r[t]&63];return e};const On=t=>Array.isArray(t)?t:[t],Xh=(t,e)=>{const r=[[],[]];for(const n of t)e(n)?r[0].push(n):r[1].push(n);return r},_c=Array,or=(t,e)=>t.includes(e),Qh=(t,e=0)=>[...new Array(t)].map((r,n)=>n+e),Q=(t,e,r)=>t===void 0?e===void 0?[]:Array.isArray(e)?e:[e]:(Array.isArray(e)?t.push(...e):t.push(e),t),Rr=(t,e)=>e==null?t??[]:t==null?On(e):t.concat(e),ef=(...t)=>t.reduce(Rr,[]),Br=(t,e,r)=>{if(t===void 0)return Array.isArray(e)?e:[e];const n=r?.isEqual??((i,s)=>i===s);for(const i of On(e))t.some(s=>n(s,i))||t.push(i);return t},tf=(t,e)=>t.reduce((r,n)=>{const i=n[e];return r[i]=Q(r[i],n),r},{}),tn=(t,e,r)=>t.length===e.length&&t.every(r?.isEqual?(n,i)=>r.isEqual(n,e[i]):(n,i)=>n===e[i]),Fr=(t,e)=>Ht(t)===e,Ht=t=>{const e=typeof t;return e==="object"?t===null?"null":"object":e==="function"?"object":e},ur={boolean:"boolean",null:"null",undefined:"undefined",bigint:"a bigint",number:"a number",object:"an object",string:"a string",symbol:"a symbol"},rf={...ur,function:"a function"};class nf extends Error{}const de=t=>rn(t,nf),rn=(t,e=Error)=>{throw new e(t)};class sf extends Error{name="ParseError"}const P=t=>rn(t,sf),Ic=t=>` ${t}`,af="​",ee=(t,e)=>{const r={},n=Array.isArray(t);let i=!1;for(const[s,o]of Object.entries(t).entries()){const u=n?e(s,o[1]):e(...o,s);i||=typeof u[0]=="number";const l=Array.isArray(u[0])||u.length===0?u:[u];for(const[d,f]of l)typeof d=="object"?r[d.group]=Q(r[d.group],f):r[d]=f}return i?Object.values(r):r},Ac=Object.entries,Qt=(t,e)=>t in e,ga=(t,e)=>e in t;class of{constructor(e){Object.assign(this,e)}}const uf=class{};class Ec extends uf{}const cf=(t,e)=>{const r={},n={};let i;for(i in t)i in e?r[i]=t[i]:n[i]=t[i];return[r,n]},Oc=(t,e)=>cf(t,e)[1],Pn=t=>Object.keys(t).length===0,Ri=t=>[...Object.entries(t),...Object.getOwnPropertySymbols(t).map(e=>[e,t[e]])],lf=(t,e)=>Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)),df=t=>{const e=Object.keys(t).sort(),r={};for(let n=0;n<e.length;n++)r[e[n]]=t[e[n]];return r},Yt=Ic(`unset${af}`),hf=t=>Object.values(t).filter(e=>typeof e=="number"?!0:typeof t[e]!="number"),Pc={Array,Boolean,Date,Error,Function,Map,Number,Promise,RegExp,Set,String,WeakMap,WeakSet},Mc=globalThis.File??Blob,Cc={ArrayBuffer,Blob,File:Mc,FormData,Headers,Request,Response,URL},ff={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array},nn={...Pc,...Cc,...ff,String,Number,Boolean},ya=t=>{let e=Object.getPrototypeOf(t);for(;e?.constructor&&(!Qt(e.constructor.name,nn)||!(t instanceof nn[e.constructor.name]));)e=Object.getPrototypeOf(e);const r=e?.constructor?.name;if(!(r===void 0||r==="Object"))return r},Hs=t=>typeof t=="object"&&t!==null?ya(t)??"object":Ht(t),He=Array.isArray,pf={Array:"an array",Function:"a function",Date:"a Date",RegExp:"a RegExp",Error:"an Error",Map:"a Map",Set:"a Set",String:"a String object",Number:"a Number object",Boolean:"a Boolean object",Promise:"a Promise",WeakMap:"a WeakMap",WeakSet:"a WeakSet"},mf={ArrayBuffer:"an ArrayBuffer instance",Blob:"a Blob instance",File:"a File instance",FormData:"a FormData instance",Headers:"a Headers instance",Request:"a Request instance",Response:"a Response instance",URL:"a URL instance"},gf={Int8Array:"an Int8Array",Uint8Array:"a Uint8Array",Uint8ClampedArray:"a Uint8ClampedArray",Int16Array:"an Int16Array",Uint16Array:"a Uint16Array",Int32Array:"an Int32Array",Uint32Array:"a Uint32Array",Float32Array:"a Float32Array",Float64Array:"a Float64Array",BigInt64Array:"a BigInt64Array",BigUint64Array:"a BigUint64Array"},yf={...pf,...mf,...gf},ba=t=>{const e=Object(t).name??null;return e&&Qt(e,nn)&&nn[e]===t?e:null},lo=(t,e)=>{let r=t.prototype;for(;r!==null;){if(r===e.prototype)return!0;r=Object.getPrototypeOf(r)}return!1},bf=t=>Nc(t,new Map),Nc=(t,e)=>{if(typeof t!="object"||t===null)return t;if(e?.has(t))return e.get(t);const r=ba(t.constructor);if(r==="Date")return new Date(t.getTime());if(r&&r!=="Array")return t;const n=Array.isArray(t)?t.slice():Object.create(Object.getPrototypeOf(t)),i=Object.getOwnPropertyDescriptors(t);if(e){e.set(t,n);for(const s in i){const o=i[s];"get"in o||"set"in o||(o.value=Nc(o.value,e))}}return Object.defineProperties(n,i),n},xf=t=>{let e=Yt;return()=>e===Yt?e=t():e},Ji=t=>typeof t=="function"&&t.length===0,vf=class extends Function{constructor(...t){const e=t.slice(0,-1),r=t[t.length-1];try{super(...e,r)}catch(n){return de(`Encountered an unexpected error while compiling your definition:
                Message: ${n} 
                Source: (${t.slice(0,-1)}) => {
                    ${t[t.length-1]}
                }`)}}};class Ar{constructor(e,...[r]){return Object.assign(Object.setPrototypeOf(e.bind(r?.bind??this),this.constructor.prototype),r?.attach)}}const wf=xf(()=>{try{return new Function("return false")()}catch{return!0}});class er{constructor(){}}var kf={};const Sf=()=>{try{return((new Error().stack?.split(`
`)[2]?.trim()||"").match(/\(?(.+?)(?::\d+:\d+)?\)?$/)?.[1]||"unknown").replace(/^file:\/\//,"")}catch{return"unknown"}},_f=kf??{},If={fileName:Sf,env:_f},Af=t=>t[0].toUpperCase()+t.slice(1),Ef=t=>t[0].toLowerCase()+t.slice(1),$c=t=>new RegExp(Of(t),typeof t=="string"?"":t.flags),Of=t=>`^(?:${typeof t=="string"?t:t.source})$`,vr={negativeLookahead:t=>`(?!${t})`,nonCapturingGroup:t=>`(?:${t})`},wn="\\",Zi={" ":1,"\n":1,"	":1},Pf=/^-0\.?0*$/.source,Dc=/[1-9]\d*/.source,Mf=/\.\d+/.source,Cf=/\.\d*[1-9]/.source,Rc=t=>$c(vr.negativeLookahead(Pf)+vr.nonCapturingGroup("-?"+vr.nonCapturingGroup(vr.nonCapturingGroup("0|"+Dc)+vr.nonCapturingGroup(t.decimalPattern)+"?")+(t.allowDecimalOnly?"|"+t.decimalPattern:"")+"?")),ho=Rc({decimalPattern:Cf,allowDecimalOnly:!1}),Nf=ho.test.bind(ho),zs=Rc({decimalPattern:Mf,allowDecimalOnly:!0});zs.test.bind(zs);const $f=/^-?\d*\.?\d*$/,Df=t=>t.length!==0&&$f.test(t),Li=$c(vr.negativeLookahead("^-0$")+"-?"+vr.nonCapturingGroup(vr.nonCapturingGroup("0|"+Dc))),Rf=Li.test.bind(Li),Gs=/^-?\d+$/,Lf=Gs.test.bind(Gs),Lc={number:"a number",bigint:"a bigint",integer:"an integer"},Tc=(t,e)=>`'${t}' was parsed as ${Lc[e]} but could not be narrowed to a literal value. Avoid unnecessary leading or trailing zeros and other abnormal notation`,Tf=(t,e)=>e==="number"?Nf(t):Rf(t),Bf=(t,e)=>e==="number"?Number(t):Number.parseInt(t),qf=(t,e)=>e==="number"?Df(t):Lf(t),Ff=(t,e)=>xa(t,"number",e),Uf=(t,e)=>xa(t,"number",{...e,strict:!0}),Vf=(t,e)=>xa(t,"integer",e),xa=(t,e,r)=>{const n=Bf(t,e);return!Number.isNaN(n)&&qf(t,e)?r?.strict?Tf(t,e)?n:P(Tc(t,e)):n:r?.errorOnFail?P(r?.errorOnFail===!0?`Failed to parse ${Lc[e]} from '${t}'`:r?.errorOnFail):void 0},jf=t=>{if(t[t.length-1]!=="n")return;const e=t.slice(0,-1);let r;try{r=BigInt(e)}catch{return}if(Li.test(e))return r;if(Gs.test(e))return P(Tc(t,"bigint"))},Kf="0.56.0",Hf={version:Kf,filename:If.fileName(),FileConstructor:Mc},Mn=Hf,fo=new Map,vs=Object.create(null),Ws=t=>{const e=fo.get(t);if(e)return e;let r=zf(t);return vs[r]?r=`${r}${vs[r]++}`:vs[r]=1,Mn[r]=t,fo.set(t,r),r},In=t=>/^[$A-Z_a-z][\w$]*$/.test(t),zf=t=>{switch(typeof t){case"object":{if(t===null)break;const e=ya(t)??"object";return e[0].toLowerCase()+e.slice(1)}case"function":return In(t.name)?t.name:"fn";case"symbol":return t.description&&In(t.description)?t.description:"symbol"}return de(`Unexpected attempt to register serializable value of type ${Ht(t)}`)},va=t=>typeof t=="string"?JSON.stringify(t):typeof t=="bigint"?`${t}n`:`${t}`,Gf=(t,e={})=>kn(t,{onUndefined:"$ark.undefined",onBigInt:r=>`$ark.bigint-${r}`,...e},[]),X=(t,e)=>{switch(Ht(t)){case"object":const r=t,n=r.constructor?.name??"Object";return n==="Object"||n==="Array"?e?.quoteKeys===!1?Ti(r,e?.indent??0,""):JSON.stringify(kn(r,sn,[]),null,e?.indent):Ti(r,e?.indent??0,"");case"symbol":return sn.onSymbol(t);default:return va(t)}},Ti=(t,e,r)=>{if(typeof t=="function")return sn.onFunction(t);if(typeof t!="object"||t===null)return va(t);const n=r+" ".repeat(e);if(Array.isArray(t)){if(t.length===0)return"[]";const s=t.map(o=>Ti(o,e,n)).join(`,
`+n);return e?`[
${n}${s}
${r}]`:`[${s}]`}const i=t.constructor?.name??"Object";if(i==="Object"){const s=Ri(t).map(([o,u])=>{const l=typeof o=="symbol"?sn.onSymbol(o):In(o)?o:JSON.stringify(o),d=Ti(u,e,n);return`${n}${l}: ${d}`});return s.length===0?"{}":e?`{
${s.join(`,
`)}
${r}}`:`{${s.join(", ")}}`}return t instanceof Date?Cn(t):"expression"in t&&typeof t.expression=="string"?t.expression:i},sn={onCycle:()=>"(cycle)",onSymbol:t=>`Symbol(${Ws(t)})`,onFunction:t=>`Function(${Ws(t)})`},kn=(t,e,r)=>{switch(Ht(t)){case"object":{const n=t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();if(typeof n=="function")return sn.onFunction(n);if(r.includes(n))return"(cycle)";const i=[...r,n];if(Array.isArray(n))return n.map(o=>kn(o,e,i));if(n instanceof Date)return n.toDateString();const s={};for(const o in n)s[o]=kn(n[o],e,i);for(const o of Object.getOwnPropertySymbols(n))s[e.onSymbol?.(o)??o.toString()]=kn(n[o],e,i);return s}case"symbol":return sn.onSymbol(t);case"bigint":return e.onBigInt?.(t)??`${t}n`;case"undefined":return e.onUndefined??"undefined";case"string":return t.replace(/\\/g,"\\\\");default:return t}},Cn=t=>{const e=t.getFullYear(),r=t.getMonth(),n=t.getDate(),i=t.getHours(),s=t.getMinutes(),o=t.getSeconds(),u=t.getMilliseconds();if(r===0&&n===1&&i===0&&s===0&&o===0&&u===0)return`${e}`;const l=`${Wf[r]} ${n}, ${e}`;if(i===0&&s===0&&o===0&&u===0)return l;let d=t.toLocaleTimeString();const f=d.endsWith(" AM")||d.endsWith(" PM")?d.slice(-3):"";return f&&(d=d.slice(0,-f.length)),u?d+=`.${Jf(u,3)}`:Yf.test(d)&&(d=d.slice(0,-3)),`${d+f}, ${l}`},Wf=["January","February","March","April","May","June","July","August","September","October","November","December"],Yf=/:\d\d:00$/,Jf=(t,e)=>String(t).padStart(e,"0"),Bc=(t,e,...[r])=>{const n=r?.stringifySymbol??X;let i=t;switch(typeof e){case"string":i=In(e)?t===""?e:`${t}.${e}`:`${t}[${JSON.stringify(e)}]`;break;case"number":i=`${t}[${e}]`;break;case"symbol":i=`${t}[${n(e)}]`;break;default:r?.stringifyNonKey?i=`${t}[${r.stringifyNonKey(e)}]`:P(`${X(e)} must be a PropertyKey or stringifyNonKey must be passed to options`)}return i},Nn=(t,...e)=>t.reduce((r,n)=>Bc(r,n,...e),"");class qc extends _c{cache={};constructor(...e){super(),this.push(...e)}toJSON(){if(this.cache.json)return this.cache.json;this.cache.json=[];for(let e=0;e<this.length;e++)this.cache.json.push(typeof this[e]=="symbol"?X(this[e]):this[e]);return this.cache.json}stringify(){return this.cache.stringify?this.cache.stringify:this.cache.stringify=Nn(this)}stringifyAncestors(){if(this.cache.stringifyAncestors)return this.cache.stringifyAncestors;let e="";const r=[e];for(const n of this)e=Bc(e,n),r.push(e);return this.cache.stringifyAncestors=r}}class Fc{chars;i;def;constructor(e){this.def=e,this.chars=[...e],this.i=0}shift(){return this.chars[this.i++]??""}get lookahead(){return this.chars[this.i]??""}get nextLookahead(){return this.chars[this.i+1]??""}get length(){return this.chars.length}shiftUntil(e){let r="";for(;this.lookahead&&!e(this,r);)r+=this.shift();return r}shiftUntilEscapable(e){let r="";for(;this.lookahead;)if(this.lookahead===wn)this.shift(),e(this,r)?r+=this.shift():this.lookahead===wn?r+=this.shift():r+=`${wn}${this.shift()}`;else{if(e(this,r))break;r+=this.shift()}return r}shiftUntilLookahead(e){return typeof e=="string"?this.shiftUntil(r=>r.lookahead===e):this.shiftUntil(r=>r.lookahead in e)}shiftUntilNonWhitespace(){return this.shiftUntil(()=>!(this.lookahead in Zi))}jumpToIndex(e){this.i=e<0?this.length+e:e}jumpForward(e){this.i+=e}get location(){return this.i}get unscanned(){return this.chars.slice(this.i,this.length).join("")}get scanned(){return this.chars.slice(0,this.i).join("")}sliceChars(e,r){return this.chars.slice(e,r).join("")}lookaheadIs(e){return this.lookahead===e}lookaheadIsIn(e){return this.lookahead in e}}const Zf=(t,e)=>`Unmatched ${t}${e===""?"":` before ${e}`}`,Uc=t=>`Missing ${t}`;let Ys="$ark",Xf=2;for(;Ys in globalThis;)Ys=`$ark${Xf++}`;const Vc=Ys;globalThis[Vc]=Mn;const C=Mn,Qf=t=>`${Vc}.${t}`,We=t=>Qf(Ws(t));class jc extends Ec{argNames;body="";constructor(...e){super(),this.argNames=e;for(const r of e){if(r in this)throw new Error(`Arg name '${r}' would overwrite an existing property on FunctionBody`);this[r]=r}}indentation=0;indent(){return this.indentation+=4,this}dedent(){return this.indentation-=4,this}prop(e,r=!1){return Kc(e,r)}index(e,r=!1){return Hc(`${e}`,r)}line(e){return this.body+=`${" ".repeat(this.indentation)}${e}
`,this}const(e,r){return this.line(`const ${e} = ${r}`),this}let(e,r){return this.line(`let ${e} = ${r}`)}set(e,r){return this.line(`${e} = ${r}`)}if(e,r){return this.block(`if (${e})`,r)}elseIf(e,r){return this.block(`else if (${e})`,r)}else(e){return this.block("else",e)}for(e,r,n=0){return this.block(`for (let i = ${n}; ${e}; i++)`,r)}forIn(e,r){return this.block(`for (const k in ${e})`,r)}block(e,r,n=""){return this.line(`${e} {`),this.indent(),r(this),this.dedent(),this.line(`}${n}`)}return(e=""){return this.line(`return ${e}`)}write(e="anonymous",r=0){return`${e}(${this.argNames.join(", ")}) { ${r?this.body.split(`
`).map(n=>" ".repeat(r)+`${n}`).join(`
`):this.body} }`}compile(){return new vf(...this.argNames,this.body)}}const un=t=>Fr(t,"object")||typeof t=="symbol"?We(t):va(t),Kc=(t,e=!1)=>typeof t=="string"&&In(t)?`${e?"?":""}.${t}`:Hc(ep(t),e),ep=t=>typeof t=="symbol"?We(t):JSON.stringify(t),Hc=(t,e=!1)=>`${e?"?.":""}[${t}]`;class ws extends jc{traversalKind;optimistic;constructor(e){super("data","ctx"),this.traversalKind=e.kind,this.optimistic=e.optimistic===!0}invoke(e,r){const n=r?.arg??this.data,i=typeof e=="string"?!0:this.requiresContextFor(e),s=typeof e=="string"?e:e.id;return i?`${this.referenceToId(s,r)}(${n}, ${this.ctx})`:`${this.referenceToId(s,r)}(${n})`}referenceToId(e,r){const n=r?.kind??this.traversalKind,i=`this.${e}${n}`;return r?.bind?`${i}.bind(${r?.bind})`:i}requiresContextFor(e){return this.traversalKind==="Apply"||e.allowsRequiresContext}initializeErrorCount(){return this.const("errorCount","ctx.currentErrorCount")}returnIfFail(){return this.if("ctx.currentErrorCount > errorCount",()=>this.return())}returnIfFailFast(){return this.if("ctx.failFast && ctx.currentErrorCount > errorCount",()=>this.return())}traverseKey(e,r,n){const i=this.requiresContextFor(n);return i&&this.line(`${this.ctx}.path.push(${e})`),this.check(n,{arg:r}),i&&this.line(`${this.ctx}.path.pop()`),this}check(e,r){return this.traversalKind==="Allows"?this.if(`!${this.invoke(e,r)}`,()=>this.return(!1)):this.line(this.invoke(e,r))}}const zc=t=>ee(t,(e,r)=>[e,He(r)?[...r]:r]),cr=Ic("arkKind"),B=(t,e)=>t?.[cr]===e,Ge=t=>B(t,"root")||B(t,"constraint"),tp=["unit","proto","domain"],Xi=["required","optional","index","sequence"],Gc=["pattern","divisor","exactLength","max","min","maxLength","minLength","before","after"],Wc=[...Gc,"structure","predicate"],wa=[...Wc,...Xi],Qi=["alias","union","morph","unit","intersection","proto","domain"],rp=[...Qi,...wa],Yc=ee(wa,(t,e)=>[e,1]),np=ee([...Xi,"undeclared"],(t,e)=>[e,1]),Jc=ee(rp,(t,e)=>[e,t]),Ci=t=>typeof t=="string"&&t in Jc,Bi=t=>Jc[t],ka=t=>Qi.slice(Bi(t)+1);[...ka("union")];[...ka("morph")];const qr=t=>typeof t=="string"||typeof t=="boolean"||t===null?t:typeof t=="number"?Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t:un(t),es=t=>{let e="{ ";for(const[r,n]of Object.entries(t))e+=`${r}: ${un(n)}, `;return e+" }"},ae=t=>{const e=t;return e.hasAssociatedError&&(e.defaults.expected??=r=>"description"in r?r.description:e.defaults.description(r),e.defaults.actual??=r=>X(r),e.defaults.problem??=r=>`must be ${r.expected}${r.actual?` (was ${r.actual})`:""}`,e.defaults.message??=r=>{if(r.path.length===0)return r.problem;const n=`${r.propString} ${r.problem}`;return n[0]==="["?`value at ${n}`:n}),e};class ip extends Error{name="ToJsonSchemaError";code;context;constructor(e,r){super(X(r,{quoteKeys:!1,indent:4})),this.code=e,this.context=r}hasCode(e){return this.code===e}}const sp={target:"draft-2020-12",dialect:"https://json-schema.org/draft/2020-12/schema",useRefs:!1,fallback:{arrayObject:t=>fe.throw("arrayObject",t),arrayPostfix:t=>fe.throw("arrayPostfix",t),defaultValue:t=>fe.throw("defaultValue",t),domain:t=>fe.throw("domain",t),morph:t=>fe.throw("morph",t),patternIntersection:t=>fe.throw("patternIntersection",t),predicate:t=>fe.throw("predicate",t),proto:t=>fe.throw("proto",t),symbolKey:t=>fe.throw("symbolKey",t),unit:t=>fe.throw("unit",t),date:t=>fe.throw("date",t)}},fe={Error:ip,throw:(...t)=>{throw new fe.Error(...t)},throwInternalOperandError:(t,e)=>de(`Unexpected JSON Schema input for ${t}: ${X(e)}`),defaultConfig:sp};C.config??={};const Js=(t,e)=>{if(!e)return t;const r={...t};let n;for(n in e){const i={...t.keywords};if(n==="keywords"){for(const s in e[n]){const o=e.keywords[s];o!==void 0&&(i[s]=typeof o=="string"?{description:o}:o)}r.keywords=i}else n==="toJsonSchema"?r[n]=Zc(t.toJsonSchema,e.toJsonSchema):Ci(n)?r[n]={...t[n],...e[n]}:r[n]=e[n]}return r},ap={"draft-2020-12":"https://json-schema.org/draft/2020-12/schema","draft-07":"http://json-schema.org/draft-07/schema#"},Zc=((t,e)=>{if(!t)return po(e??{},void 0);if(!e)return t;const r={...t};let n;for(n in e)n==="fallback"?r.fallback=op(t.fallback,e.fallback):r[n]=e[n];return po(r,e)}),po=(t,e)=>e?.dialect!==void 0?t:e?.target!==void 0?{...t,dialect:ap[e.target]}:t,op=(t,e)=>{t=mo(t),e=mo(e);const r={};let n;for(n in fe.defaultConfig.fallback)r[n]=e[n]??e.default??t[n]??t.default??fe.defaultConfig.fallback[n];return r},mo=t=>typeof t=="function"?{default:t}:t??{};class an extends Ec{[cr]="error";path;data;nodeConfig;input;ctx;constructor({prefixPath:e,relativePath:r,...n},i){super(),this.input=n,this.ctx=i,lf(this,n);const s=i.data;n.code==="union"&&(n.errors=n.errors.flatMap(u=>{const l=u.hasCode("union")?u.errors:[u];return!e&&!r?l:l.map(d=>d.transform(f=>({...f,path:ef(e,f.path,r)})))})),this.nodeConfig=i.config[this.code];const o=[...n.path??i.path];r&&o.push(...r),e&&o.unshift(...e),this.path=new qc(...o),this.data="data"in n?n.data:s}transform(e){return new an(e({data:this.data,path:this.path,...this.input}),this.ctx)}hasCode(e){return this.code===e}get propString(){return Nn(this.path)}get expected(){if(this.input.expected)return this.input.expected;const e=this.meta?.expected??this.nodeConfig.expected;return typeof e=="function"?e(this.input):e}get actual(){if(this.input.actual)return this.input.actual;const e=this.meta?.actual??this.nodeConfig.actual;return typeof e=="function"?e(this.data):e}get problem(){if(this.input.problem)return this.input.problem;const e=this.meta?.problem??this.nodeConfig.problem;return typeof e=="function"?e(this):e}get message(){if(this.input.message)return this.input.message;const e=this.meta?.message??this.nodeConfig.message;return typeof e=="function"?e(this):e}get flat(){return this.hasCode("intersection")?[...this.errors]:[this]}toJSON(){return{data:this.data,path:this.path,...this.input,expected:this.expected,actual:this.actual,problem:this.problem,message:this.message}}toString(){return this.message}throw(){throw this}}class lr extends _c{[cr]="errors";ctx;constructor(e){super(),this.ctx=e}byPath=Object.create(null);get flatByPath(){return ee(this.byPath,(e,r)=>[e,r.flat])}get flatProblemsByPath(){return ee(this.byPath,(e,r)=>[e,r.flat.map(n=>n.problem)])}byAncestorPath=Object.create(null);count=0;mutable=this;throw(){throw this.toTraversalError()}toTraversalError(){return new up(this)}add(e){const r=this.byPath[e.propString];if(r){if(e===r||r.hasCode("union")&&r.errors.length===0)return;const n=e.hasCode("union")&&e.errors.length===0?e:new an({code:"intersection",errors:r.hasCode("intersection")?[...r.errors,e]:[r,e]},this.ctx),i=this.indexOf(r);this.mutable[i===-1?this.length:i]=n,this.byPath[e.propString]=n,this.addAncestorPaths(e)}else this.byPath[e.propString]=e,this.addAncestorPaths(e),this.mutable.push(e);this.count++}transform(e){const r=new lr(this.ctx);for(const n of this)r.add(e(n));return r}merge(e){for(const r of e)this.add(new an({...r,path:[...this.ctx.path,...r.path]},this.ctx))}affectsPath(e){return this.length===0?!1:e.stringifyAncestors().some(r=>r in this.byPath)||e.stringify()in this.byAncestorPath}get summary(){return this.toString()}get issues(){return this}toJSON(){return[...this.map(e=>e.toJSON())]}toString(){return this.join(`
`)}addAncestorPaths(e){for(const r of e.path.stringifyAncestors())this.byAncestorPath[r]=Q(this.byAncestorPath[r],e)}}class up extends Error{name="TraversalError";constructor(e){e.length===1?super(e.summary):super(`
`+e.map(r=>`  • ${cp(r)}`).join(`
`)),Object.defineProperty(this,"arkErrors",{value:e,enumerable:!1})}}const cp=t=>t.toString().split(`
`).join(`
  `);class Xr{path=[];errors=new lr(this);root;config;queuedMorphs=[];branches=[];seen={};constructor(e,r){this.root=e,this.config=r}get data(){let e=this.root;for(const r of this.path)e=e?.[r];return e}get propString(){return Nn(this.path)}reject(e){return this.error(e),!1}mustBe(e){return this.error(e),!1}error(e){const r=typeof e=="object"?e.code?e:{...e,code:"predicate"}:{code:"predicate",expected:e};return this.errorFromContext(r)}hasError(){return this.currentErrorCount!==0}get currentBranch(){return this.branches[this.branches.length-1]}queueMorphs(e){const r={path:new qc(...this.path),morphs:e};this.currentBranch?this.currentBranch.queuedMorphs.push(r):this.queuedMorphs.push(r)}finalize(e){return this.queuedMorphs.length&&(typeof this.root=="object"&&this.root!==null&&this.config.clone&&(this.root=this.config.clone(this.root)),this.applyQueuedMorphs()),this.hasError()?e?e(this.errors):this.errors:this.root}get currentErrorCount(){return this.currentBranch?this.currentBranch.error?1:0:this.errors.count}get failFast(){return this.branches.length!==0}pushBranch(){this.branches.push({error:void 0,queuedMorphs:[]})}popBranch(){return this.branches.pop()}get external(){return this}errorFromNodeContext(e){return this.errorFromContext(e)}errorFromContext(e){const r=new an(e,this);return this.currentBranch?this.currentBranch.error=r:this.errors.add(r),r}applyQueuedMorphs(){for(;this.queuedMorphs.length;){const e=this.queuedMorphs;this.queuedMorphs=[];for(const{path:r,morphs:n}of e)this.errors.affectsPath(r)||this.applyMorphsAtPath(r,n)}}applyMorphsAtPath(e,r){const n=e[e.length-1];let i;if(n!==void 0){i=this.root;for(let s=0;s<e.length-1;s++)i=i[e[s]]}for(const s of r){this.path=[...e];const o=Ge(s),u=s(i===void 0?this.root:i[n],this);if(u instanceof an){this.errors.includes(u)||this.errors.add(u);break}if(u instanceof lr){o||this.errors.merge(u),this.queuedMorphs=[];break}i===void 0?this.root=u:i[n]=u,this.applyQueuedMorphs()}}}const dr=(t,e,r)=>{if(!r)return e();r.path.push(t);const n=e();return r.path.pop(),n};class Xc extends Ar{attachments;$;onFail;includesTransform;includesContextualPredicate;isCyclic;allowsRequiresContext;rootApplyStrategy;contextFreeMorph;rootApply;referencesById;shallowReferences;flatRefs;flatMorphs;allows;get shallowMorphs(){return[]}constructor(e,r){super((i,s,o=this.onFail)=>s?(this.traverseApply(i,s),s.hasError()?s.errors:s.data):this.rootApply(i,o),{attach:e}),this.attachments=e,this.$=r,this.onFail=this.meta.onFail??this.$.resolvedConfig.onFail,this.includesTransform=this.hasKind("morph")||this.hasKind("structure")&&this.structuralMorph!==void 0||this.hasKind("sequence")&&this.inner.defaultables!==void 0,this.includesContextualPredicate=this.hasKind("predicate")&&this.inner.predicate.length!==1,this.isCyclic=this.kind==="alias",this.referencesById={[this.id]:this},this.shallowReferences=this.hasKind("structure")?[this,...this.children]:this.children.reduce((i,s)=>fp(i,s.shallowReferences),[this]);const n=this.isStructural();this.flatRefs=[],this.flatMorphs=[];for(let i=0;i<this.children.length;i++){if(this.includesTransform||=this.children[i].includesTransform,this.includesContextualPredicate||=this.children[i].includesContextualPredicate,this.isCyclic||=this.children[i].isCyclic,!n){const s=this.children[i].flatRefs;for(let o=0;o<s.length;o++){const u=s[o];if(!this.flatRefs.some(l=>Qc(l,u))){this.flatRefs.push(u);for(const l of u.node.branches)(l.hasKind("morph")||l.hasKind("intersection")&&l.structure?.structuralMorph!==void 0)&&this.flatMorphs.push({path:u.path,propString:u.propString,node:l})}}}Object.assign(this.referencesById,this.children[i].referencesById)}this.flatRefs.sort((i,s)=>i.path.length>s.path.length?1:i.path.length<s.path.length?-1:i.propString>s.propString?1:i.propString<s.propString||i.node.expression<s.node.expression?-1:1),this.allowsRequiresContext=this.includesContextualPredicate||this.isCyclic,this.rootApplyStrategy=!this.allowsRequiresContext&&this.flatMorphs.length===0?this.shallowMorphs.length===0?"allows":this.shallowMorphs.every(i=>i.length===1||i.name==="$arkStructuralMorph")?this.hasKind("union")?this.branches.some(i=>i.shallowMorphs.length>1)?"contextual":"branchedOptimistic":this.shallowMorphs.length>1?"contextual":"optimistic":"contextual":"contextual",this.rootApply=this.createRootApply(),this.allows=this.allowsRequiresContext?i=>this.traverseAllows(i,new Xr(i,this.$.resolvedConfig)):i=>this.traverseAllows(i)}createRootApply(){switch(this.rootApplyStrategy){case"allows":return(r,n)=>{if(this.allows(r))return r;const i=new Xr(r,this.$.resolvedConfig);return this.traverseApply(r,i),i.finalize(n)};case"contextual":return(r,n)=>{const i=new Xr(r,this.$.resolvedConfig);return this.traverseApply(r,i),i.finalize(n)};case"optimistic":this.contextFreeMorph=this.shallowMorphs[0];const e=this.$.resolvedConfig.clone;return(r,n)=>{if(this.allows(r))return this.contextFreeMorph(e&&(typeof r=="object"&&r!==null||typeof r=="function")?e(r):r);const i=new Xr(r,this.$.resolvedConfig);return this.traverseApply(r,i),i.finalize(n)};case"branchedOptimistic":return this.createBranchedOptimisticRootApply();default:return this.rootApplyStrategy,de(`Unexpected rootApplyStrategy ${this.rootApplyStrategy}`)}}compiledMeta=hp(this.metaJson);cacheGetter(e,r){return Object.defineProperty(this,e,{value:r}),r}get description(){return this.cacheGetter("description",this.meta?.description??this.$.resolvedConfig[this.kind].description(this))}get references(){return Object.values(this.referencesById)}precedence=Bi(this.kind);precompilation;assert=(e,r)=>this(e,r,n=>n.throw());traverse(e,r){return this(e,r,null)}get in(){return this.cacheGetter("in",this.rawIn.isRoot()?this.$.finalize(this.rawIn):this.rawIn)}get rawIn(){return this.cacheGetter("rawIn",this.getIo("in"))}get out(){return this.cacheGetter("out",this.rawOut.isRoot()?this.$.finalize(this.rawOut):this.rawOut)}get rawOut(){return this.cacheGetter("rawOut",this.getIo("out"))}getIo(e){if(!this.includesTransform)return this;const r={};for(const[n,i]of this.innerEntries){const s=this.impl.keys[n];if(s.reduceIo)s.reduceIo(e,r,i);else if(s.child){const o=i;r[n]=He(o)?o.map(u=>e==="in"?u.rawIn:u.rawOut):e==="in"?o.rawIn:o.rawOut}else r[n]=i}return this.$.node(this.kind,r)}toJSON(){return this.json}toString(){return`Type<${this.expression}>`}equals(e){const r=Ge(e)?e:this.$.parseDefinition(e);return this.innerHash===r.innerHash}ifEquals(e){return this.equals(e)?this:void 0}hasKind(e){return this.kind===e}assertHasKind(e){return this.kind!==e&&rn(`${this.kind} node was not of asserted kind ${e}`),this}hasKindIn(...e){return e.includes(this.kind)}assertHasKindIn(...e){return or(e,this.kind)||rn(`${this.kind} node was not one of asserted kinds ${e}`),this}isBasis(){return or(tp,this.kind)}isConstraint(){return or(wa,this.kind)}isStructural(){return or(Xi,this.kind)}isRefinement(){return or(Wc,this.kind)}isRoot(){return or(Qi,this.kind)}isUnknown(){return this.hasKind("intersection")&&this.children.length===0}isNever(){return this.hasKind("union")&&this.children.length===0}hasUnit(e){return this.hasKind("unit")&&this.allows(e)}hasOpenIntersection(){return this.impl.intersectionIsOpen}get nestableExpression(){return this.expression}select(e){const r=xn.normalize(e);return this._select(r)}_select(e){let r=xn.applyBoundary[e.boundary??"references"](this);return e.kind&&(r=r.filter(n=>n.kind===e.kind)),e.where&&(r=r.filter(e.where)),xn.applyMethod[e.method??"filter"](r,this,e)}transform(e,r){return this._transform(e,this._createTransformContext(r))}_createTransformContext(e){return{root:this,selected:void 0,seen:{},path:[],parseOptions:{prereduced:e?.prereduced??!1},undeclaredKeyHandling:void 0,...e}}_transform(e,r){const n=r.bindScope??this.$;if(r.seen[this.id])return this.$.lazilyResolve(r.seen[this.id]);if(r.shouldTransform?.(this,r)===!1)return this;let i;r.seen[this.id]=()=>i,this.hasKind("structure")&&this.undeclared!==r.undeclaredKeyHandling&&(r={...r,undeclaredKeyHandling:this.undeclared});const s=ee(this.inner,(f,p)=>{if(!this.impl.keys[f].child)return[f,p];const h=p;if(!He(h)){const a=h._transform(e,r);return a?[f,a]:[]}if(h.length===0)return[f,p];const c=h.flatMap(a=>a._transform(e,r)??[]);return c.length?[f,c]:[]});delete r.seen[this.id];const o=Object.assign(s,{meta:this.meta}),u=r.selected&&!r.selected.includes(this)?o:e(this.kind,o,r);if(u===null)return null;if(Ge(u))return i=u;const l=Object.keys(u);return(l.length===0||l.length===1&&l[0]==="meta")&&!Pn(this.inner)?null:(this.kind==="required"||this.kind==="optional"||this.kind==="index")&&!("value"in u)?r.undeclaredKeyHandling?{...u,value:C.intrinsic.unknown}:null:(this.kind==="morph"&&(u.in??=C.intrinsic.unknown),i=n.node(this.kind,u,r.parseOptions))}configureReferences(e,r="references"){const n=xn.normalize(r),i=typeof e=="string"?(l,d)=>({...d,meta:{...d.meta,description:e}}):typeof e=="function"?(l,d)=>({...d,meta:e(d.meta)}):(l,d)=>({...d,meta:{...d.meta,...e}});if(n.boundary==="self")return this.$.node(this.kind,i(this.kind,{...this.inner,meta:this.meta}));const s=this._select(n),o=s&&On(s),u=n.boundary==="child"?(l,d)=>d.root.children.includes(l):n.boundary==="shallow"?l=>l.kind!=="structure":()=>!0;return this.$.finalize(this.transform(i,{shouldTransform:u,selected:o}))}}const xn={applyBoundary:{self:t=>[t],child:t=>[...t.children],shallow:t=>[...t.shallowReferences],references:t=>[...t.references]},applyMethod:{filter:t=>t,assertFilter:(t,e,r)=>(t.length===0&&rn(go(e,r)),t),find:t=>t[0],assertFind:(t,e,r)=>(t.length===0&&rn(go(e,r)),t[0])},normalize:t=>typeof t=="function"?{boundary:"references",method:"filter",where:t}:typeof t=="string"?Qt(t,xn.applyBoundary)?{method:"filter",boundary:t}:{boundary:"references",method:"filter",kind:t}:{boundary:"references",method:"filter",...t}},go=(t,e)=>`${t} had no references matching ${X(e)}.`,lp=t=>Nn(t,{stringifyNonKey:e=>e.expression}),dp=/"(\$ark\.[^"]+)"/g,hp=t=>JSON.stringify(t).replace(dp,"$1"),wr=(t,e)=>({path:t,node:e,propString:lp(t)}),Qc=(t,e)=>t.propString===e.propString&&t.node.equals(e.node),yo=(t,e)=>Br(t,e,{isEqual:Qc}),fp=(t,e)=>Br(t,e,{isEqual:(r,n)=>r.equals(n)});class T extends Array{static init(e,r,n,i){return new T({kind:e,l:r,r:n,path:i?.path??[],optional:i?.optional??!1})}add(e,r,n,i){return this.push({kind:e,l:r,r:n,path:i?.path??[],optional:i?.optional??!1}),this}get summary(){return this.describeReasons()}describeReasons(){if(this.length===1){const{path:e,l:r,r:n}=this[0],i=Nn(e);return el(`Intersection${i&&` at ${i}`} of ${bo(r,n)}`)}return`The following intersections result in unsatisfiable types:
• ${this.map(({path:e,l:r,r:n})=>`${e}: ${bo(r,n)}`).join(`
• `)}`}throw(){return P(this.describeReasons())}invert(){const e=this.map(r=>({...r,l:r.r,r:r.l}));return e instanceof T?e:new T(...e)}withPrefixKey(e,r){return this.map(n=>({...n,path:[e,...n.path],optional:n.optional||r==="optional"}))}toNeverIfDisjoint(){return C.intrinsic.never}}const bo=(t,e)=>`${Zs(t)} and ${Zs(e)}`,Zs=t=>Ge(t)?t.expression:He(t)?t.map(Zs).join(" | ")||"never":String(t),el=t=>`${t} results in an unsatisfiable type`,Hr={},hr=(t,e,r)=>Ve(t,e,{$:r,invert:!1,pipe:!1}),Xs=(t,e,r)=>Ve(t,e,{$:r,invert:!1,pipe:!0}),Ve=((t,e,r)=>{const n=r.pipe?"|>":"&",i=`${t.hash}${n}${e.hash}`;if(Hr[i]!==void 0)return Hr[i];if(!r.pipe){const u=`${e.hash}${n}${t.hash}`;if(Hr[u]!==void 0){const l=Hr[u],d=l instanceof T?l.invert():l;return Hr[i]=d,d}}const s=!r.pipe||!t.includesTransform&&!e.includesTransform;if(s&&t.equals(e))return t;let o=s?Qs(t,e,r):t.hasKindIn(...Qi)?pp(t,e,r):Qs(t,e,r);return Ge(o)&&(t.equals(o)?o=t:e.equals(o)&&(o=e)),Hr[i]=o,o}),Qs=(t,e,r)=>{const n=t.precedence<e.precedence?t.kind:e.kind,i=t.impl.intersections[e.kind]??e.impl.intersections[t.kind];if(i===void 0)return null;if(n===t.kind)return i(t,e,r);{let s=i(e,t,{...r,invert:!r.invert});return s instanceof T&&(s=s.invert()),s}},pp=(t,e,r)=>t.includesTransform||e.includesTransform?r.invert?xo(e,t,r):xo(t,e,r):Qs(t,e,r),xo=(t,e,r)=>t.distribute(n=>mp(n,e,r),n=>{const i=n.filter(Ge);if(i.length===0)return T.init("union",t.branches,e.branches);if(i.length<t.branches.length||!t.branches.every((o,u)=>o.rawIn.equals(i[u].rawIn)))return r.$.parseSchema(i);if(i.length===1)return i[0];const s={branches:i};return r.$.parseSchema(s)}),mp=(t,e,r)=>{if(t.hasKind("morph")){const i=[...t.morphs];if(t.lastMorphIfNode){const s=Ve(t.lastMorphIfNode,e,r);if(s instanceof T)return s;i[i.length-1]=s}else i.push(e);return r.$.node("morph",{morphs:i,in:t.inner.in})}if(e.hasKind("morph")){const i=Ve(t,e.rawIn,r);return i instanceof T?i:r.$.node("morph",{morphs:[e],in:i})}return r.$.node("morph",{morphs:[e],in:t})};class cn extends Xc{constructor(e,r){super(e,r),Object.defineProperty(this,cr,{value:"constraint",enumerable:!1})}impliedSiblings;intersect(e){return hr(this,e,this.$)}}class ts extends cn{traverseApply=(e,r)=>{this.traverseAllows(e,r)||r.errorFromNodeContext(this.errorContext)};compile(e){e.traversalKind==="Allows"?e.return(this.compiledCondition):e.if(this.compiledNegation,()=>e.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`))}get errorContext(){return{code:this.kind,description:this.description,meta:this.meta,...this.inner}}get compiledErrorContext(){return es(this.errorContext)}}const $t=t=>(e,r)=>{if(He(e)){if(e.length===0)return;const i=e.map(s=>r.$.node(t,s));return t==="predicate"?i:i.sort((s,o)=>s.hash<o.hash?-1:1)}const n=r.$.node(t,e);return n.hasOpenIntersection()?[n]:n},qi=t=>{const e=t.r.shift();if(!e){let n=t.l.length===0&&t.kind==="structure"?C.intrinsic.unknown.internal:t.ctx.$.node(t.kind,Object.assign(t.baseInner,gp(t.l)),{prereduced:!0});for(const i of t.roots){if(n instanceof T)return n;n=Ve(i,n,t.ctx)}return n}let r=!1;for(let n=0;n<t.l.length;n++){const i=Ve(t.l[n],e,t.ctx);if(i!==null){if(i instanceof T)return i;if(i.isRoot())return t.roots.push(i),t.l.splice(n),qi(t);if(!r)t.l[n]=i,r=!0;else if(!t.l.includes(i))return de(`Unexpectedly encountered multiple distinct intersection results for refinement ${e}`)}}if(r||t.l.push(e),t.kind==="intersection"&&e.impliedSiblings)for(const n of e.impliedSiblings)Br(t.r,n);return qi(t)},Fi=t=>Object.entries(t).flatMap(([r,n])=>r in Yc?n:[]).sort((r,n)=>r.precedence<n.precedence?-1:r.precedence>n.precedence?1:r.kind==="predicate"&&n.kind==="predicate"?0:r.hash<n.hash?-1:1),gp=t=>{const e={};for(const r of t)if(r.hasOpenIntersection())e[r.kind]=Q(e[r.kind],r);else{if(e[r.kind])return de(`Unexpected intersection of closed refinements of kind ${r.kind}`);e[r.kind]=r}return e},yp=(...t)=>P(bp(...t)),bp=(t,e,r)=>{const n=r.hasKind("morph")?"a morph":r.isUnknown()?"unknown":r.exclude(e).defaultShortDescription;return`${Af(t)} operand must be ${e.description} (was ${n})`},xp=(t,e,r)=>new Ui(t,e,r,r,null);class tl extends Ar{}class Ui extends Ar{[cr]="generic";paramDefs;bodyDef;$;arg$;baseInstantiation;hkt;description;constructor(e,r,n,i,s){super((...o)=>{const u=ee(this.names,(l,d)=>{const f=this.arg$.parse(o[l]);return f.extends(this.constraints[l])||P(vp(d,this.constraints[l].expression,f.expression)),[d,f]});if(this.defIsLazy()){const l=this.bodyDef(u);return this.$.parse(l)}return this.$.parse(r,{args:u})}),this.paramDefs=e,this.bodyDef=r,this.$=n,this.arg$=i,this.hkt=s,this.description=s?new s().description??`a generic type for ${s.constructor.name}`:"a generic type",this.baseInstantiation=this(...this.constraints)}defIsLazy(){return this.bodyDef instanceof tl}cacheGetter(e,r){return Object.defineProperty(this,e,{value:r}),r}get json(){return this.cacheGetter("json",{params:this.params.map(e=>e[1].isUnknown()?e[0]:[e[0],e[1].json]),body:Gf(this.bodyDef)})}get params(){return this.cacheGetter("params",this.paramDefs.map(e=>typeof e=="string"?[e,C.intrinsic.unknown]:[e[0],this.$.parse(e[1])]))}get names(){return this.cacheGetter("names",this.params.map(e=>e[0]))}get constraints(){return this.cacheGetter("constraints",this.params.map(e=>e[1]))}get internal(){return this}get referencesById(){return this.baseInstantiation.internal.referencesById}get references(){return this.baseInstantiation.internal.references}}const vp=(t,e,r)=>`${t} must be assignable to ${e} (was ${r})`,wp=ae({kind:"predicate",hasAssociatedError:!0,collapsibleKey:"predicate",keys:{predicate:{}},normalize:t=>typeof t=="function"?{predicate:t}:t,defaults:{description:t=>`valid according to ${t.predicate.name||"an anonymous predicate"}`},intersectionIsOpen:!0,intersections:{predicate:()=>null}});class kp extends cn{serializedPredicate=We(this.predicate);compiledCondition=`${this.serializedPredicate}(data, ctx)`;compiledNegation=`!${this.compiledCondition}`;impliedBasis=null;expression=this.serializedPredicate;traverseAllows=this.predicate;errorContext={code:"predicate",description:this.description,meta:this.meta};compiledErrorContext=es(this.errorContext);traverseApply=(e,r)=>{const n=r.currentErrorCount;!this.predicate(e,r.external)&&r.currentErrorCount===n&&r.errorFromNodeContext(this.errorContext)};compile(e){if(e.traversalKind==="Allows"){e.return(this.compiledCondition);return}e.initializeErrorCount(),e.if(`${this.compiledNegation} && ctx.currentErrorCount === errorCount`,()=>e.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`))}reduceJsonSchema(e,r){return r.fallback.predicate({code:"predicate",base:e,predicate:this.predicate})}}const rl={implementation:wp,Node:kp},Sp=ae({kind:"divisor",collapsibleKey:"rule",keys:{rule:{parse:t=>Number.isInteger(t)?t:P(Ip(t))}},normalize:t=>typeof t=="number"?{rule:t}:t,hasAssociatedError:!0,defaults:{description:t=>t.rule===1?"an integer":t.rule===2?"even":`a multiple of ${t.rule}`},intersections:{divisor:(t,e,r)=>r.$.node("divisor",{rule:Math.abs(t.rule*e.rule/Ap(t.rule,e.rule))})},obviatesBasisDescription:!0});class _p extends ts{traverseAllows=e=>e%this.rule===0;compiledCondition=`data % ${this.rule} === 0`;compiledNegation=`data % ${this.rule} !== 0`;impliedBasis=C.intrinsic.number.internal;expression=`% ${this.rule}`;reduceJsonSchema(e){return e.type="integer",this.rule===1||(e.multipleOf=this.rule),e}}const nl={implementation:Sp,Node:_p},Ip=t=>`divisor must be an integer (was ${t})`,Ap=(t,e)=>{let r,n=t,i=e;for(;i!==0;)r=i,i=n%i,n=r;return n};class ln extends ts{boundOperandKind=Mp[this.kind];compiledActual=this.boundOperandKind==="value"?"data":this.boundOperandKind==="length"?"data.length":"data.valueOf()";comparator=Cp(this.kind,this.exclusive);numericLimit=this.rule.valueOf();expression=`${this.comparator} ${this.rule}`;compiledCondition=`${this.compiledActual} ${this.comparator} ${this.numericLimit}`;compiledNegation=`${this.compiledActual} ${Ep[this.comparator]} ${this.numericLimit}`;stringLimit=this.boundOperandKind==="date"?Np(this.numericLimit):`${this.numericLimit}`;limitKind=this.comparator[0]==="<"?"upper":"lower";isStricterThan(e){return(this.limitKind==="upper"?this.numericLimit<e.numericLimit:this.numericLimit>e.numericLimit)||this.numericLimit===e.numericLimit&&this.exclusive===!0&&!e.exclusive}overlapsRange(e){return!(this.isStricterThan(e)||this.numericLimit===e.numericLimit&&(this.exclusive||e.exclusive))}overlapIsUnit(e){return this.numericLimit===e.numericLimit&&!this.exclusive&&!e.exclusive}}const Ep={"<":">=","<=":">",">":"<=",">=":"<"},Op={min:"max",minLength:"maxLength",after:"before"},il={parse:t=>t||void 0},sl=t=>e=>{if(typeof e=="number")return{rule:e};const{exclusive:r,...n}=e;return r?{...n,rule:t==="minLength"?n.rule+1:n.rule-1}:n},al=t=>e=>{if(typeof e=="number"||typeof e=="string"||e instanceof Date)return{rule:e};const{exclusive:r,...n}=e;if(!r)return n;const i=typeof n.rule=="number"?n.rule:typeof n.rule=="string"?new Date(n.rule).valueOf():n.rule.valueOf();return r?{...n,rule:t==="after"?i+1:i-1}:n},ol=t=>typeof t=="string"||typeof t=="number"?new Date(t):t,Pp=(t,e)=>`${t} bound must be a positive integer (was ${e})`,Sa=t=>e=>((!Number.isInteger(e)||e<0)&&P(Pp(t,e)),e),Mp={min:"value",max:"value",minLength:"length",maxLength:"length",after:"date",before:"date"},Cp=(t,e)=>`${Qt(t,Op)?">":"<"}${e?"":"="}`,Np=t=>typeof t=="string"?t:new Date(t).toLocaleString(),$p=t=>`Bounded expression ${t} must be exactly one of number, string, Array, or Date`,Dp=ae({kind:"after",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:ol,serialize:t=>t.toISOString()}},normalize:al("after"),defaults:{description:t=>`${t.collapsibleLimitString} or later`,actual:Cn},intersections:{after:(t,e)=>t.isStricterThan(e)?t:e}});class Rp extends ln{impliedBasis=C.intrinsic.Date.internal;collapsibleLimitString=Cn(this.rule);traverseAllows=e=>e>=this.rule;reduceJsonSchema(e,r){return r.fallback.date({code:"date",base:e,after:this.rule})}}const ul={implementation:Dp,Node:Rp},Lp=ae({kind:"before",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:ol,serialize:t=>t.toISOString()}},normalize:al("before"),defaults:{description:t=>`${t.collapsibleLimitString} or earlier`,actual:Cn},intersections:{before:(t,e)=>t.isStricterThan(e)?t:e,after:(t,e,r)=>t.overlapsRange(e)?t.overlapIsUnit(e)?r.$.node("unit",{unit:t.rule}):null:T.init("range",t,e)}});class Tp extends ln{collapsibleLimitString=Cn(this.rule);traverseAllows=e=>e<=this.rule;impliedBasis=C.intrinsic.Date.internal;reduceJsonSchema(e,r){return r.fallback.date({code:"date",base:e,before:this.rule})}}const cl={implementation:Lp,Node:Tp},Bp=ae({kind:"exactLength",collapsibleKey:"rule",keys:{rule:{parse:Sa("exactLength")}},normalize:t=>typeof t=="number"?{rule:t}:t,hasAssociatedError:!0,defaults:{description:t=>`exactly length ${t.rule}`,actual:t=>`${t.length}`},intersections:{exactLength:(t,e,r)=>T.init("unit",r.$.node("unit",{unit:t.rule}),r.$.node("unit",{unit:e.rule}),{path:["length"]}),minLength:(t,e)=>t.rule>=e.rule?t:T.init("range",t,e),maxLength:(t,e)=>t.rule<=e.rule?t:T.init("range",t,e)}});class qp extends ts{traverseAllows=e=>e.length===this.rule;compiledCondition=`data.length === ${this.rule}`;compiledNegation=`data.length !== ${this.rule}`;impliedBasis=C.intrinsic.lengthBoundable.internal;expression=`== ${this.rule}`;reduceJsonSchema(e){switch(e.type){case"string":return e.minLength=this.rule,e.maxLength=this.rule,e;case"array":return e.minItems=this.rule,e.maxItems=this.rule,e;default:return fe.throwInternalOperandError("exactLength",e)}}}const ll={implementation:Bp,Node:qp},Fp=ae({kind:"max",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{},exclusive:il},normalize:t=>typeof t=="number"?{rule:t}:t,defaults:{description:t=>t.rule===0?t.exclusive?"negative":"non-positive":`${t.exclusive?"less than":"at most"} ${t.rule}`},intersections:{max:(t,e)=>t.isStricterThan(e)?t:e,min:(t,e,r)=>t.overlapsRange(e)?t.overlapIsUnit(e)?r.$.node("unit",{unit:t.rule}):null:T.init("range",t,e)},obviatesBasisDescription:!0});class Up extends ln{impliedBasis=C.intrinsic.number.internal;traverseAllows=this.exclusive?e=>e<this.rule:e=>e<=this.rule;reduceJsonSchema(e){return this.exclusive?e.exclusiveMaximum=this.rule:e.maximum=this.rule,e}}const dl={implementation:Fp,Node:Up},Vp=ae({kind:"maxLength",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:Sa("maxLength")}},reduce:(t,e)=>t.rule===0?e.node("exactLength",t):void 0,normalize:sl("maxLength"),defaults:{description:t=>`at most length ${t.rule}`,actual:t=>`${t.length}`},intersections:{maxLength:(t,e)=>t.isStricterThan(e)?t:e,minLength:(t,e,r)=>t.overlapsRange(e)?t.overlapIsUnit(e)?r.$.node("exactLength",{rule:t.rule}):null:T.init("range",t,e)}});class jp extends ln{impliedBasis=C.intrinsic.lengthBoundable.internal;traverseAllows=e=>e.length<=this.rule;reduceJsonSchema(e){switch(e.type){case"string":return e.maxLength=this.rule,e;case"array":return e.maxItems=this.rule,e;default:return fe.throwInternalOperandError("maxLength",e)}}}const hl={implementation:Vp,Node:jp},Kp=ae({kind:"min",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{},exclusive:il},normalize:t=>typeof t=="number"?{rule:t}:t,defaults:{description:t=>t.rule===0?t.exclusive?"positive":"non-negative":`${t.exclusive?"more than":"at least"} ${t.rule}`},intersections:{min:(t,e)=>t.isStricterThan(e)?t:e},obviatesBasisDescription:!0});class Hp extends ln{impliedBasis=C.intrinsic.number.internal;traverseAllows=this.exclusive?e=>e>this.rule:e=>e>=this.rule;reduceJsonSchema(e){return this.exclusive?e.exclusiveMinimum=this.rule:e.minimum=this.rule,e}}const fl={implementation:Kp,Node:Hp},zp=ae({kind:"minLength",collapsibleKey:"rule",hasAssociatedError:!0,keys:{rule:{parse:Sa("minLength")}},reduce:t=>t.rule===0?C.intrinsic.unknown:void 0,normalize:sl("minLength"),defaults:{description:t=>t.rule===1?"non-empty":`at least length ${t.rule}`,actual:t=>t.length===0?"":`${t.length}`},intersections:{minLength:(t,e)=>t.isStricterThan(e)?t:e}});class Gp extends ln{impliedBasis=C.intrinsic.lengthBoundable.internal;traverseAllows=e=>e.length>=this.rule;reduceJsonSchema(e){switch(e.type){case"string":return e.minLength=this.rule,e;case"array":return e.minItems=this.rule,e;default:return fe.throwInternalOperandError("minLength",e)}}}const pl={implementation:zp,Node:Gp},Wp={min:fl.implementation,max:dl.implementation,minLength:pl.implementation,maxLength:hl.implementation,exactLength:ll.implementation,after:ul.implementation,before:cl.implementation},Yp={min:fl.Node,max:dl.Node,minLength:pl.Node,maxLength:hl.Node,exactLength:ll.Node,after:ul.Node,before:cl.Node},Jp=ae({kind:"pattern",collapsibleKey:"rule",keys:{rule:{},flags:{}},normalize:t=>typeof t=="string"?{rule:t}:t instanceof RegExp?t.flags?{rule:t.source,flags:t.flags}:{rule:t.source}:t,obviatesBasisDescription:!0,obviatesBasisExpression:!0,hasAssociatedError:!0,intersectionIsOpen:!0,defaults:{description:t=>`matched by ${t.rule}`},intersections:{pattern:()=>null}});class Zp extends ts{instance=new RegExp(this.rule,this.flags);expression=`${this.instance}`;traverseAllows=this.instance.test.bind(this.instance);compiledCondition=`${this.expression}.test(data)`;compiledNegation=`!${this.compiledCondition}`;impliedBasis=C.intrinsic.string.internal;reduceJsonSchema(e,r){return e.pattern?r.fallback.patternIntersection({code:"patternIntersection",base:e,pattern:this.rule}):(e.pattern=this.rule,e)}}const ml={implementation:Jp,Node:Zp},Ni=(t,e)=>{const r=Xp(t);return e&&!e.includes(r)?P(`Root of kind ${r} should be one of ${e}`):r},Xp=t=>{if(B(t,"root"))return t.kind;if(typeof t=="string")return t[0]==="$"?"alias":t in ur?"domain":"proto";if(typeof t=="function")return"proto";if(typeof t!="object"||t===null)return P(vo(t));if("morphs"in t)return"morph";if("branches"in t||He(t))return"union";if("unit"in t)return"unit";if("reference"in t)return"alias";const e=Object.keys(t);return e.length===0||e.some(r=>r in Yc)?"intersection":"proto"in t?"proto":"domain"in t?"domain":P(vo(t))},vo=t=>`${X(t)} is not a valid type schema`,wo={},Qp=t=>He(t)?t.map(e=>e.collapsibleJson):t.collapsibleJson,Ut={};C.nodesByRegisteredId=Ut;const gl=t=>(wo[t]??=0,`${t}${++wo[t]}`),yl=t=>{const e=rs[t.kind],r=e.applyConfig?.(t.def,t.$.resolvedConfig)??t.def,n={},{meta:i,...s}=r,o=i===void 0?{}:typeof i=="string"?{description:i}:i,u=Ac(s).sort(([d],[f])=>Ci(d)?Ci(f)?Bi(d)-Bi(f):1:Ci(f)||d<f?-1:1).filter(([d,f])=>{if(d.startsWith("meta.")){const p=d.slice(5);return o[p]=f,!1}return!0});for(const d of u){const f=d[0],p=e.keys[f];if(!p)return P(`Key ${f} is not valid on ${t.kind} schema`);const h=p.parse?p.parse(d[1],t):d[1];h!==Yt&&(h!==void 0||p.preserveUndefined)&&(n[f]=h)}if(e.reduce&&!t.prereduced){const d=e.reduce(n,t.$);if(d)return d instanceof T?d.throw():tm(d,o)}return _a({id:t.id,kind:t.kind,inner:n,meta:o,$:t.$})},_a=({id:t,kind:e,inner:r,meta:n,$:i,ignoreCache:s})=>{const o=rs[e],u=Ac(r),l=[];let d={};for(const[b,x]of u){const w=o.keys[b],y=w.serialize??(w.child?Qp:qr);if(d[b]=y(x),w.child===!0){const v=x;He(v)?l.push(...v):l.push(v)}else typeof w.child=="function"&&l.push(...w.child(x))}o.finalizeInnerJson&&(d=o.finalizeInnerJson(d));let f={...d},p={};Pn(n)||(p=ee(n,(b,x)=>[b,b==="examples"?x:qr(x)]),f.meta=ei(p,"description",!0)),d=ei(d,o.collapsibleKey,!1);const h=JSON.stringify({kind:e,...d});f=ei(f,o.collapsibleKey,!1);const c=ei(f,o.collapsibleKey,!0),a=JSON.stringify({kind:e,...f});if(i.nodesByHash[a]&&!s)return i.nodesByHash[a];const g={id:t,kind:e,impl:o,inner:r,innerEntries:u,innerJson:d,innerHash:h,meta:n,metaJson:p,json:f,hash:a,collapsibleJson:c,children:l};if(e!=="intersection")for(const b in r)b!=="in"&&b!=="out"&&(g[b]=r[b]);const m=new u1[e](g,i);return i.nodesByHash[a]=m},em=(t,e)=>t.id===e?t:(Ge(Ut[e])&&de(`Unexpected attempt to overwrite node id ${e}`),_a({id:e,kind:t.kind,inner:t.inner,meta:t.meta,$:t.$,ignoreCache:!0})),tm=(t,e,r)=>_a({id:gl(e.alias??t.kind),kind:t.kind,inner:t.inner,meta:e,$:t.$}),ei=(t,e,r)=>{const n=Object.keys(t);if(n.length===1&&n[0]===e){const i=t[e];if(r||Fr(i,"object")&&(Object.keys(i).length===1||Array.isArray(i)))return i}return t},ea=(t,e,r)=>{if(t.key!==e.key)return null;const n=t.key;let i=Ve(t.value,e.value,r);const s=t.required||e.required?"required":"optional";if(i instanceof T)if(s==="optional")i=C.intrinsic.never.internal;else return i.withPrefixKey(t.key,t.required&&e.required?"required":"optional");if(s==="required")return r.$.node("required",{key:n,value:i});const o=t.hasDefault()?e.hasDefault()?t.default===e.default?t.default:P(xl(t.default,e.default)):t.default:e.hasDefault()?e.default:Yt;return r.$.node("optional",{key:n,value:i,default:o})};class bl extends cn{required=this.kind==="required";optional=this.kind==="optional";impliedBasis=C.intrinsic.object.internal;serializedKey=un(this.key);compiledKey=typeof this.key=="string"?this.key:this.serializedKey;flatRefs=Q(this.value.flatRefs.map(e=>wr([this.key,...e.path],e.node)),wr([this.key],this.value));_transform(e,r){r.path.push(this.key);const n=super._transform(e,r);return r.path.pop(),n}hasDefault(){return"default"in this.inner}traverseAllows=(e,r)=>this.key in e?dr(this.key,()=>this.value.traverseAllows(e[this.key],r),r):this.optional;traverseApply=(e,r)=>{this.key in e?dr(this.key,()=>this.value.traverseApply(e[this.key],r),r):this.hasKind("required")&&r.errorFromNodeContext(this.errorContext)};compile(e){e.if(`${this.serializedKey} in data`,()=>e.traverseKey(this.serializedKey,`data${e.prop(this.key)}`,this.value)),this.hasKind("required")&&e.else(()=>e.traversalKind==="Apply"?e.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`):e.return(!1)),e.traversalKind==="Allows"&&e.return(!0)}}const xl=(t,e)=>`Invalid intersection of default values ${X(t)} & ${X(e)}`,rm=ae({kind:"optional",hasAssociatedError:!1,intersectionIsOpen:!0,keys:{key:{},value:{child:!0,parse:(t,e)=>e.$.parseSchema(t)},default:{preserveUndefined:!0}},normalize:t=>t,reduce:(t,e)=>{if(e.resolvedConfig.exactOptionalPropertyTypes===!1&&!t.value.allows(void 0))return e.node("optional",{...t,value:t.value.or(F.undefined)},{prereduced:!0})},defaults:{description:t=>`${t.compiledKey}?: ${t.value.description}`},intersections:{optional:ea}});class nm extends bl{constructor(...e){super(...e),"default"in this.inner&&Aa(this.value,this.inner.default,this.key)}get rawIn(){const e=super.rawIn;return this.hasDefault()?this.$.node("optional",Oc(e.inner,{default:!0}),{prereduced:!0}):e}get outProp(){if(!this.hasDefault())return this;const{default:e,...r}=this.inner;return this.cacheGetter("outProp",this.$.node("required",r,{prereduced:!0}))}expression=this.hasDefault()?`${this.compiledKey}: ${this.value.expression} = ${X(this.inner.default)}`:`${this.compiledKey}?: ${this.value.expression}`;defaultValueMorph=sm(this);defaultValueMorphRef=this.defaultValueMorph&&We(this.defaultValueMorph)}const Ia={implementation:rm,Node:nm},im={},sm=t=>{if(!t.hasDefault())return;const e=`{${t.compiledKey}: ${t.value.id} = ${qr(t.default)}}`;return im[e]??=vl(t.key,t.value,t.default)},vl=(t,e,r)=>{if(typeof r=="function")return e.includesTransform?(i,s)=>(dr(t,()=>e(i[t]=r(),s),s),i):i=>(i[t]=r(),i);const n=e.includesTransform?e.assert(r):r;return Fr(n,"object")?(i,s)=>(dr(t,()=>e(i[t]=r,s),s),i):i=>(i[t]=n,i)},Aa=(t,e,r)=>{const n=Ji(e);Fr(e,"object")&&!n&&P(am(r));const i=t.in(n?e():e);if(i instanceof lr){r===null&&P(`Default ${i.summary}`);const s=i.transform(o=>o.transform(u=>({...u,prefixPath:[r]})));P(`Default for ${s.summary}`)}return e},am=t=>`Non-primitive default ${t===null?"":typeof t=="number"?`for value at [${t}] `:`for ${un(t)} `}must be specified as a function like () => ({my: 'object'})`;class $n extends Xc{constructor(e,r){super(e,r),Object.defineProperty(this,cr,{value:"root",enumerable:!1})}get rawIn(){return super.rawIn}get rawOut(){return super.rawOut}get internal(){return this}get"~standard"(){return{vendor:"arktype",version:1,validate:e=>{const r=this(e);return r instanceof lr?r:{value:r}},jsonSchema:{input:e=>this.rawIn.toJsonSchema({target:ko(e.target),...e.libraryOptions}),output:e=>this.rawOut.toJsonSchema({target:ko(e.target),...e.libraryOptions})}}}as(){return this}brand(e){return e===""?P(om):this}readonly(){return this}branches=this.hasKind("union")?this.inner.branches:[this];distribute(e,r){const n=this.branches.map(e);return r?.(n)??n}get shortDescription(){return this.meta.description??this.defaultShortDescription}toJsonSchema(e={}){const r=Zc(this.$.resolvedConfig.toJsonSchema,e);r.useRefs||=this.isCyclic;const n=typeof r.dialect=="string"?{$schema:r.dialect}:{};if(Object.assign(n,this.toJsonSchemaRecurse(r)),r.useRefs){const i=ee(this.references,(s,o)=>o.isRoot()&&!o.alwaysExpandJsonSchema?[o.id,o.toResolvedJsonSchema(r)]:[]);r.target==="draft-07"?Object.assign(n,{definitions:i}):n.$defs=i}return n}toJsonSchemaRecurse(e){return e.useRefs&&!this.alwaysExpandJsonSchema?{$ref:`#/${e.target==="draft-07"?"definitions":"$defs"}/${this.id}`}:this.toResolvedJsonSchema(e)}get alwaysExpandJsonSchema(){return this.isBasis()||this.kind==="alias"||this.hasKind("union")&&this.isBoolean}toResolvedJsonSchema(e){const r=this.innerToJsonSchema(e);return Object.assign(r,this.metaJson)}intersect(e){const r=this.$.parseDefinition(e),n=this.rawIntersect(r);return n instanceof T?n:this.$.finalize(n)}rawIntersect(e){return hr(this,e,this.$)}toNeverIfDisjoint(){return this}and(e){const r=this.intersect(e);return r instanceof T?r.throw():r}rawAnd(e){const r=this.rawIntersect(e);return r instanceof T?r.throw():r}or(e){const r=this.$.parseDefinition(e);return this.$.finalize(this.rawOr(r))}rawOr(e){const r=[...this.branches,...e.branches];return this.$.node("union",r)}map(e){return this.$.schema(this.applyStructuralOperation("map",[e]))}pick(...e){return this.$.schema(this.applyStructuralOperation("pick",e))}omit(...e){return this.$.schema(this.applyStructuralOperation("omit",e))}required(){return this.$.schema(this.applyStructuralOperation("required",[]))}partial(){return this.$.schema(this.applyStructuralOperation("partial",[]))}_keyof;keyof(){if(this._keyof)return this._keyof;const e=this.applyStructuralOperation("keyof",[]).reduce((r,n)=>r.intersect(n).toNeverIfDisjoint(),C.intrinsic.unknown.internal);return e.branches.length===0&&P(el(`keyof ${this.expression}`)),this._keyof=this.$.finalize(e)}get props(){return this.branches.length!==1?P(cm(this.expression)):[...this.applyStructuralOperation("props",[])[0]]}merge(e){const r=this.$.parseDefinition(e);return this.$.schema(r.distribute(n=>this.applyStructuralOperation("merge",[So(n)??P(_o("merge",n.expression))])))}applyStructuralOperation(e,r){return this.distribute(n=>{if(n.equals(C.intrinsic.object)&&e!=="merge")return n;const i=So(n);if(i||P(_o(e,n.expression)),e==="keyof")return i.keyof();if(e==="get")return i.get(...r);if(e==="props")return i.props;const s=e==="required"?"require":e==="partial"?"optionalize":e;return this.$.node("intersection",{domain:"object",structure:i[s](...r)})})}get(...e){return e[0]===void 0?this:this.$.schema(this.applyStructuralOperation("get",e))}extract(e){const r=this.$.parseDefinition(e);return this.$.schema(this.branches.filter(n=>n.extends(r)))}exclude(e){const r=this.$.parseDefinition(e);return this.$.schema(this.branches.filter(n=>!n.extends(r)))}array(){return this.$.schema(this.isUnknown()?{proto:Array}:{proto:Array,sequence:this},{prereduced:!0})}overlaps(e){return!(this.intersect(e)instanceof T)}extends(e){if(this.isNever())return!0;const r=this.intersect(e);return!(r instanceof T)&&this.equals(r)}ifExtends(e){return this.extends(e)?this:void 0}subsumes(e){return this.$.parseDefinition(e).extends(this)}configure(e,r="shallow"){return this.configureReferences(e,r)}describe(e,r="shallow"){return this.configure({description:e},r)}optional(){return[this,"?"]}default(e){return Aa(this,e,null),[this,"=",e]}from(e){return this.assert(e)}_pipe(...e){const r=e.reduce((n,i)=>n.rawPipeOnce(i),this);return this.$.finalize(r)}tryPipe(...e){const r=e.reduce((n,i)=>n.rawPipeOnce(B(i,"root")?i:((s,o)=>{try{return i(s,o)}catch(u){return o.error({code:"predicate",predicate:i,actual:`aborted due to error:
    ${u}
`})}})),this);return this.$.finalize(r)}pipe=Object.assign(this._pipe.bind(this),{try:this.tryPipe.bind(this)});to(e){return this.$.finalize(this.toNode(this.$.parseDefinition(e)))}toNode(e){const r=Xs(this,e,this.$);return r instanceof T?r.throw():r}rawPipeOnce(e){return B(e,"root")?this.toNode(e):this.distribute(r=>r.hasKind("morph")?this.$.node("morph",{in:r.inner.in,morphs:[...r.morphs,e]}):this.$.node("morph",{in:r,morphs:[e]}),this.$.parseSchema)}narrow(e){return this.constrainOut("predicate",e)}constrain(e,r){return this._constrain("root",e,r)}constrainIn(e,r){return this._constrain("in",e,r)}constrainOut(e,r){return this._constrain("out",e,r)}_constrain(e,r,n){const i=this.$.node(r,n);if(i.isRoot())return i.isUnknown()?this:de(`Unexpected constraint node ${i}`);const s=e==="root"?this:e==="in"?this.rawIn:this.rawOut;if(s.hasKind("morph")||i.impliedBasis&&!s.extends(i.impliedBasis))return yp(r,i.impliedBasis,this);const o=this.$.node("intersection",{[i.kind]:i}),u=e==="out"?Xs(this,o,this.$):hr(this,o,this.$);return u instanceof T&&u.throw(),this.$.finalize(u)}onUndeclaredKey(e){const r=typeof e=="string"?e:e.rule,n=typeof e=="string"?!1:e.deep;return this.$.finalize(this.transform((i,s)=>i==="structure"?r==="ignore"?Oc(s,{undeclared:1}):{...s,undeclared:r}:s,n?void 0:{shouldTransform:i=>!or(Xi,i.kind)}))}hasEqualMorphs(e){return!this.includesTransform&&!e.includesTransform?!0:!(!tn(this.shallowMorphs,e.shallowMorphs)||!tn(this.flatMorphs,e.flatMorphs,{isEqual:(r,n)=>r.propString===n.propString&&(r.node.hasKind("morph")&&n.node.hasKind("morph")?r.node.hasEqualMorphs(n.node):r.node.hasKind("intersection")&&n.node.hasKind("intersection")?r.node.structure?.structuralMorphRef===n.node.structure?.structuralMorphRef:!1)}))}onDeepUndeclaredKey(e){return this.onUndeclaredKey({rule:e,deep:!0})}filter(e){return this.constrainIn("predicate",e)}divisibleBy(e){return this.constrain("divisor",e)}matching(e){return this.constrain("pattern",e)}atLeast(e){return this.constrain("min",e)}atMost(e){return this.constrain("max",e)}moreThan(e){return this.constrain("min",zr(e))}lessThan(e){return this.constrain("max",zr(e))}atLeastLength(e){return this.constrain("minLength",e)}atMostLength(e){return this.constrain("maxLength",e)}moreThanLength(e){return this.constrain("minLength",zr(e))}lessThanLength(e){return this.constrain("maxLength",zr(e))}exactlyLength(e){return this.constrain("exactLength",e)}atOrAfter(e){return this.constrain("after",e)}atOrBefore(e){return this.constrain("before",e)}laterThan(e){return this.constrain("after",zr(e))}earlierThan(e){return this.constrain("before",zr(e))}}const om="Expected a non-empty brand name after #",wl=["draft-2020-12","draft-07"],um=t=>`JSONSchema target '${t}' is not supported (must be ${wl.map(e=>`"${e}"`).join(" or ")})`,ko=t=>(or(wl,t)||P(um(t)),t),zr=t=>typeof t=="object"&&!(t instanceof Date)?{...t,exclusive:!0}:{rule:t,exclusive:!0},ti=(t,e)=>B(e,"root")?B(t,"root")?t.extends(e):e.allows(t):B(t,"root")?t.hasUnit(e):e===t,So=t=>t.hasKind("morph")?null:t.hasKind("intersection")?t.inner.structure??(t.basis?.domain==="object"?t.$.bindReference(C.intrinsic.emptyStructure):null):t.isBasis()&&t.domain==="object"?t.$.bindReference(C.intrinsic.emptyStructure):null,cm=t=>`Props cannot be extracted from a union. Use .distribute to extract props from each branch instead. Received:
${t}`,_o=(t,e)=>`${t} operand must be an object (was ${e})`,Dn=(t,e)=>ee(ka(t),(r,n)=>[n,e]),lm=t=>typeof t=="string"?{reference:t}:t,Io=t=>t instanceof T?C.intrinsic.never.internal:t,dm=ae({kind:"alias",hasAssociatedError:!1,collapsibleKey:"reference",keys:{reference:{serialize:t=>t.startsWith("$")?t:`$ark.${t}`},resolve:{}},normalize:lm,defaults:{description:t=>t.reference},intersections:{alias:(t,e,r)=>r.$.lazilyResolve(()=>Io(Ve(t.resolution,e.resolution,r)),`${t.reference}${r.pipe?"=>":"&"}${e.reference}`),...Dn("alias",(t,e,r)=>e.isUnknown()?t:e.isNever()?e:e.isBasis()&&!e.overlaps(C.intrinsic.object)?T.init("assignability",C.intrinsic.object,e):r.$.lazilyResolve(()=>Io(Ve(t.resolution,e,r)),`${t.reference}${r.pipe?"=>":"&"}${e.id}`))}});class hm extends $n{expression=this.reference;structure=void 0;get resolution(){const e=this._resolve();return Ut[this.id]=e}_resolve(){if(this.resolve)return this.resolve();if(this.reference[0]==="$")return this.$.resolveRoot(this.reference.slice(1));const e=this.reference;let r=Ut[e];const n=[];for(;B(r,"context");){if(n.includes(r.id))return P(fm(r.id,n));n.push(r.id),r=Ut[r.id]}return B(r,"root")?r:de(`Unexpected resolution for reference ${this.reference}
Seen: [${n.join("->")}] 
Resolution: ${X(r)}`)}get resolutionId(){if(this.reference.includes("&")||this.reference.includes("=>"))return this.resolution.id;if(this.reference[0]!=="$")return this.reference;const e=this.reference.slice(1),r=this.$.resolutions[e];return typeof r=="string"?r:B(r,"root")?r.id:de(`Unexpected resolution for reference ${this.reference}: ${X(r)}`)}get defaultShortDescription(){return ur.object}innerToJsonSchema(e){return this.resolution.toJsonSchemaRecurse(e)}traverseAllows=(e,r)=>{const n=r.seen[this.reference];return n?.includes(e)?!0:(r.seen[this.reference]=Q(n,e),this.resolution.traverseAllows(e,r))};traverseApply=(e,r)=>{const n=r.seen[this.reference];n?.includes(e)||(r.seen[this.reference]=Q(n,e),this.resolution.traverseApply(e,r))};compile(e){const r=this.resolutionId;e.if(`ctx.seen.${r} && ctx.seen.${r}.includes(data)`,()=>e.return(!0)),e.if(`!ctx.seen.${r}`,()=>e.line(`ctx.seen.${r} = []`)),e.line(`ctx.seen.${r}.push(data)`),e.return(e.invoke(r))}}const fm=(t,e)=>`Alias '${t}' has a shallow resolution cycle: ${[...e,t].join("->")}`,Ea={implementation:dm,Node:hm};class Oa extends $n{traverseApply=(e,r)=>{this.traverseAllows(e,r)||r.errorFromNodeContext(this.errorContext)};get errorContext(){return{code:this.kind,description:this.description,meta:this.meta,...this.inner}}get compiledErrorContext(){return es(this.errorContext)}compile(e){e.traversalKind==="Allows"?e.return(this.compiledCondition):e.if(this.compiledNegation,()=>e.line(`ctx.errorFromNodeContext(${this.compiledErrorContext})`))}}const pm=ae({kind:"domain",hasAssociatedError:!0,collapsibleKey:"domain",keys:{domain:{},numberAllowsNaN:{}},normalize:t=>typeof t=="string"?{domain:t}:ga(t,"numberAllowsNaN")&&t.domain!=="number"?P(Pa.writeBadAllowNanMessage(t.domain)):t,applyConfig:(t,e)=>t.numberAllowsNaN===void 0&&t.domain==="number"&&e.numberAllowsNaN?{...t,numberAllowsNaN:!0}:t,defaults:{description:t=>ur[t.domain],actual:t=>Number.isNaN(t)?"NaN":ur[Ht(t)]},intersections:{domain:(t,e)=>t.domain==="number"&&e.domain==="number"?t.numberAllowsNaN?e:t:T.init("domain",t,e)}});class mm extends Oa{requiresNaNCheck=this.domain==="number"&&!this.numberAllowsNaN;traverseAllows=this.requiresNaNCheck?e=>typeof e=="number"&&!Number.isNaN(e):e=>Ht(e)===this.domain;compiledCondition=this.domain==="object"?'((typeof data === "object" && data !== null) || typeof data === "function")':`typeof data === "${this.domain}"${this.requiresNaNCheck?" && !Number.isNaN(data)":""}`;compiledNegation=this.domain==="object"?'((typeof data !== "object" || data === null) && typeof data !== "function")':`typeof data !== "${this.domain}"${this.requiresNaNCheck?" || Number.isNaN(data)":""}`;expression=this.numberAllowsNaN?"number | NaN":this.domain;get nestableExpression(){return this.numberAllowsNaN?`(${this.expression})`:this.expression}get defaultShortDescription(){return ur[this.domain]}innerToJsonSchema(e){return this.domain==="bigint"||this.domain==="symbol"?e.fallback.domain({code:"domain",base:{},domain:this.domain}):{type:this.domain}}}const Pa={implementation:pm,Node:mm,writeBadAllowNanMessage:t=>`numberAllowsNaN may only be specified with domain "number" (was ${t})`},gm=ae({kind:"intersection",hasAssociatedError:!0,normalize:t=>{if(Ge(t))return t;const{structure:e,...r}=t,n=!!e,i=e??{},s=ee(r,(o,u)=>Qt(o,np)?(n&&P(`Flattened structure key ${o} cannot be specified alongside a root 'structure' key.`),i[o]=u,[]):[o,u]);return(B(i,"constraint")||!Pn(i))&&(s.structure=i),s},finalizeInnerJson:({structure:t,...e})=>Fr(t,"object")?{...t,...e}:e,keys:{domain:{child:!0,parse:(t,e)=>e.$.node("domain",t)},proto:{child:!0,parse:(t,e)=>e.$.node("proto",t)},structure:{child:!0,parse:(t,e)=>e.$.node("structure",t),serialize:t=>{if(!t.sequence?.minLength)return t.collapsibleJson;const{sequence:e,...r}=t.collapsibleJson,{minVariadicLength:n,...i}=e,s=i.variadic&&Object.keys(i).length===1?i.variadic:i;return{...r,sequence:s}}},divisor:{child:!0,parse:$t("divisor")},max:{child:!0,parse:$t("max")},min:{child:!0,parse:$t("min")},maxLength:{child:!0,parse:$t("maxLength")},minLength:{child:!0,parse:$t("minLength")},exactLength:{child:!0,parse:$t("exactLength")},before:{child:!0,parse:$t("before")},after:{child:!0,parse:$t("after")},pattern:{child:!0,parse:$t("pattern")},predicate:{child:!0,parse:$t("predicate")}},reduce:(t,e)=>Ao({},t,{$:e,invert:!1,pipe:!1}),defaults:{description:t=>{if(t.children.length===0)return"unknown";if(t.structure)return t.structure.description;const e=[];if(t.basis&&!t.prestructurals.some(r=>r.impl.obviatesBasisDescription)&&e.push(t.basis.description),t.prestructurals.length){const r=t.prestructurals.slice().sort((n,i)=>n.kind==="min"&&i.kind==="max"?-1:0).map(n=>n.description);e.push(...r)}return t.inner.predicate&&e.push(...t.inner.predicate.map(r=>r.description)),e.join(" and ")},expected:t=>`  ◦ ${t.errors.map(e=>e.expected).join(`
  ◦ `)}`,problem:t=>`(${t.actual}) must be...
${t.expected}`},intersections:{intersection:(t,e,r)=>Ao(t.inner,e.inner,r),...Dn("intersection",(t,e,r)=>{if(t.children.length===0)return e;const{domain:n,proto:i,...s}=t.inner,o=i??n,u=o?Ve(o,e,r):e;return u instanceof T?u:t?.basis?.equals(u)?t:t.$.node("intersection",{...s,[u.kind]:u},{prereduced:!0})})}});class ym extends $n{basis=this.inner.domain??this.inner.proto??null;prestructurals=[];refinements=this.children.filter(e=>e.isRefinement()?(or(Gc,e.kind)&&this.prestructurals.push(e),!0):!1);structure=this.inner.structure;expression=bm(this);get shallowMorphs(){return this.inner.structure?.structuralMorph?[this.inner.structure.structuralMorph]:[]}get defaultShortDescription(){return this.basis?.defaultShortDescription??"present"}innerToJsonSchema(e){return this.children.reduce((r,n)=>n.isBasis()?n.toJsonSchemaRecurse(e):n.reduceJsonSchema(r,e),{})}traverseAllows=(e,r)=>this.children.every(n=>n.traverseAllows(e,r));traverseApply=(e,r)=>{const n=r.currentErrorCount;if(!(this.basis&&(this.basis.traverseApply(e,r),r.currentErrorCount>n))){if(this.prestructurals.length){for(let i=0;i<this.prestructurals.length-1;i++)if(this.prestructurals[i].traverseApply(e,r),r.failFast&&r.currentErrorCount>n)return;if(this.prestructurals[this.prestructurals.length-1].traverseApply(e,r),r.currentErrorCount>n)return}if(!(this.structure&&(this.structure.traverseApply(e,r),r.currentErrorCount>n))&&this.inner.predicate){for(let i=0;i<this.inner.predicate.length-1;i++)if(this.inner.predicate[i].traverseApply(e,r),r.failFast&&r.currentErrorCount>n)return;this.inner.predicate[this.inner.predicate.length-1].traverseApply(e,r)}}};compile(e){if(e.traversalKind==="Allows"){for(const r of this.children)e.check(r);e.return(!0);return}if(e.initializeErrorCount(),this.basis&&(e.check(this.basis),this.children.length>1&&e.returnIfFail()),this.prestructurals.length){for(let r=0;r<this.prestructurals.length-1;r++)e.check(this.prestructurals[r]),e.returnIfFailFast();e.check(this.prestructurals[this.prestructurals.length-1]),(this.structure||this.inner.predicate)&&e.returnIfFail()}if(this.structure&&(e.check(this.structure),this.inner.predicate&&e.returnIfFail()),this.inner.predicate){for(let r=0;r<this.inner.predicate.length-1;r++)e.check(this.inner.predicate[r]),e.returnIfFail();e.check(this.inner.predicate[this.inner.predicate.length-1])}}}const kl={implementation:gm,Node:ym},bm=t=>{if(t.structure?.expression)return t.structure.expression;const e=t.basis&&!t.prestructurals.some(i=>i.impl.obviatesBasisExpression)?t.basis.nestableExpression:"",r=t.prestructurals.map(i=>i.expression).join(" & "),n=`${e}${e?" ":""}${r}`;return n==="Array == 0"?"[]":n||"unknown"},Ao=(t,e,r)=>{const n={},i=t.proto??t.domain,s=e.proto??e.domain,o=i?s?Ve(i,s,r):i:s;return o instanceof T?o:(o&&(n[o.kind]=o),qi({kind:"intersection",baseInner:n,l:Fi(t),r:Fi(e),roots:[],ctx:r}))},xm=ae({kind:"morph",hasAssociatedError:!1,keys:{in:{child:!0,parse:(t,e)=>e.$.parseSchema(t)},morphs:{parse:On,serialize:t=>t.map(e=>B(e,"root")?e.json:We(e))},declaredIn:{child:!1,serialize:t=>t.json},declaredOut:{child:!1,serialize:t=>t.json}},normalize:t=>t,defaults:{description:t=>`a morph from ${t.rawIn.description} to ${t.rawOut?.description??"unknown"}`},intersections:{morph:(t,e,r)=>{if(!t.hasEqualMorphs(e))return P(wm(t.expression,e.expression));const n=Ve(t.rawIn,e.rawIn,r);if(n instanceof T)return n;const i={morphs:t.morphs};if(t.declaredIn||e.declaredIn){const s=Ve(t.rawIn,e.rawIn,r);if(s instanceof T)return s.throw();i.declaredIn=s}if(t.declaredOut||e.declaredOut){const s=Ve(t.rawOut,e.rawOut,r);if(s instanceof T)return s.throw();i.declaredOut=s}return n.distribute(s=>r.$.node("morph",{...i,in:s}),r.$.parseSchema)},...Dn("morph",(t,e,r)=>{const n=t.inner.in?Ve(t.inner.in,e,r):e;return n instanceof T?n:n.equals(t.inner.in)?t:r.$.node("morph",{...t.inner,in:n})})}});class vm extends $n{serializedMorphs=this.morphs.map(We);compiledMorphs=`[${this.serializedMorphs}]`;lastMorph=this.inner.morphs[this.inner.morphs.length-1];lastMorphIfNode=B(this.lastMorph,"root")?this.lastMorph:void 0;introspectableIn=this.inner.in;introspectableOut=this.lastMorphIfNode?Object.assign(this.referencesById,this.lastMorphIfNode.referencesById)&&this.lastMorphIfNode.rawOut:void 0;get shallowMorphs(){return Array.isArray(this.inner.in?.shallowMorphs)?[...this.inner.in.shallowMorphs,...this.morphs]:this.morphs}get rawIn(){return this.declaredIn??this.inner.in?.rawIn??C.intrinsic.unknown.internal}get rawOut(){return this.declaredOut??this.introspectableOut??C.intrinsic.unknown.internal}declareIn(e){return this.$.node("morph",{...this.inner,declaredIn:e})}declareOut(e){return this.$.node("morph",{...this.inner,declaredOut:e})}expression=`(In: ${this.rawIn.expression}) => ${this.lastMorphIfNode?"To":"Out"}<${this.rawOut.expression}>`;get defaultShortDescription(){return this.rawIn.meta.description??this.rawIn.defaultShortDescription}innerToJsonSchema(e){return e.fallback.morph({code:"morph",base:this.rawIn.toJsonSchemaRecurse(e),out:this.introspectableOut?.toJsonSchemaRecurse(e)??null})}compile(e){if(e.traversalKind==="Allows"){if(!this.introspectableIn)return;e.return(e.invoke(this.introspectableIn));return}this.introspectableIn&&e.line(e.invoke(this.introspectableIn)),e.line(`ctx.queueMorphs(${this.compiledMorphs})`)}traverseAllows=(e,r)=>!this.introspectableIn||this.introspectableIn.traverseAllows(e,r);traverseApply=(e,r)=>{this.introspectableIn&&this.introspectableIn.traverseApply(e,r),r.queueMorphs(this.morphs)};hasEqualMorphs(e){return tn(this.morphs,e.morphs,{isEqual:(r,n)=>r===n||B(r,"root")&&B(n,"root")&&r.equals(n)})}}const Sl={implementation:xm,Node:vm},wm=(t,e)=>`The intersection of distinct morphs at a single path is indeterminate:
Left: ${t}
Right: ${e}`,km=ae({kind:"proto",hasAssociatedError:!0,collapsibleKey:"proto",keys:{proto:{serialize:t=>ba(t)??qr(t)},dateAllowsInvalid:{}},normalize:t=>{const e=typeof t=="string"?{proto:nn[t]}:typeof t=="function"?Ge(t)?t:{proto:t}:typeof t.proto=="string"?{...t,proto:nn[t.proto]}:t;return typeof e.proto!="function"&&P(Vi.writeInvalidSchemaMessage(e.proto)),ga(e,"dateAllowsInvalid")&&e.proto!==Date&&P(Vi.writeBadInvalidDateMessage(e.proto)),e},applyConfig:(t,e)=>t.dateAllowsInvalid===void 0&&t.proto===Date&&e.dateAllowsInvalid?{...t,dateAllowsInvalid:!0}:t,defaults:{description:t=>t.builtinName?yf[t.builtinName]:`an instance of ${t.proto.name}`,actual:t=>t instanceof Date&&t.toString()==="Invalid Date"?"an invalid Date":Hs(t)},intersections:{proto:(t,e)=>t.proto===Date&&e.proto===Date?t.dateAllowsInvalid?e:t:lo(t.proto,e.proto)?t:lo(e.proto,t.proto)?e:T.init("proto",t,e),domain:(t,e)=>e.domain==="object"?t:T.init("domain",C.intrinsic.object.internal,e)}});class Sm extends Oa{builtinName=ba(this.proto);serializedConstructor=this.json.proto;requiresInvalidDateCheck=this.proto===Date&&!this.dateAllowsInvalid;traverseAllows=this.requiresInvalidDateCheck?e=>e instanceof Date&&e.toString()!=="Invalid Date":e=>e instanceof this.proto;compiledCondition=`data instanceof ${this.serializedConstructor}${this.requiresInvalidDateCheck?' && data.toString() !== "Invalid Date"':""}`;compiledNegation=`!(${this.compiledCondition})`;innerToJsonSchema(e){switch(this.builtinName){case"Array":return{type:"array"};case"Date":return e.fallback.date?.({code:"date",base:{}})??e.fallback.proto({code:"proto",base:{},proto:this.proto});default:return e.fallback.proto({code:"proto",base:{},proto:this.proto})}}expression=this.dateAllowsInvalid?"Date | InvalidDate":this.proto.name;get nestableExpression(){return this.dateAllowsInvalid?`(${this.expression})`:this.expression}domain="object";get defaultShortDescription(){return this.description}}const Vi={implementation:km,Node:Sm,writeBadInvalidDateMessage:t=>`dateAllowsInvalid may only be specified with constructor Date (was ${t.name})`,writeInvalidSchemaMessage:t=>`instanceOf operand must be a function (was ${Ht(t)})`},_m=ae({kind:"union",hasAssociatedError:!0,collapsibleKey:"branches",keys:{ordered:{},branches:{child:!0,parse:(t,e)=>{const r=[];for(const n of t){const i=B(n,"root")?n.branches:e.$.parseSchema(n).branches;for(const s of i)if(s.hasKind("morph")){const o=r.findIndex(u=>u.hasKind("morph")&&u.hasEqualMorphs(s));if(o===-1)r.push(s);else{const u=r[o];r[o]=e.$.node("morph",{...u.inner,in:u.rawIn.rawOr(s.rawIn)})}}else r.push(s)}return e.def.ordered||r.sort((n,i)=>n.hash<i.hash?-1:1),r}}},normalize:t=>He(t)?{branches:t}:t,reduce:(t,e)=>{const r=Rm(t);if(r.length===1)return r[0];if(r.length!==t.branches.length)return e.node("union",{...t,branches:r},{prereduced:!0})},defaults:{description:t=>t.distribute(e=>e.description,Qr),expected:t=>{const e=tf(t.errors,"propString"),r=Object.entries(e).map(([n,i])=>{const s=[];for(const l of i)Br(s,l.expected);const o=Qr(s),u=i.every(l=>l.actual===i[0].actual)?i[0].actual:X(i[0].data);return`${n&&`${n} `}must be ${o}${u&&` (was ${u})`}`});return Qr(r)},problem:t=>t.expected,message:t=>t.problem[0]==="["?`value at ${t.problem}`:t.problem},intersections:{union:(t,e,r)=>{if(t.isNever!==e.isNever)return T.init("presence",t,e);let n;return t.ordered?(e.ordered&&P(Tm(t.expression,e.expression)),n=ks(e.branches,t.branches,r),n instanceof T&&n.invert()):n=ks(t.branches,e.branches,r),n instanceof T?n:r.$.parseSchema(t.ordered||e.ordered?{branches:n,ordered:!0}:{branches:n})},...Dn("union",(t,e,r)=>{const n=ks(t.branches,[e],r);return n instanceof T?n:n.length===1?n[0]:r.$.parseSchema(t.ordered?{branches:n,ordered:!0}:{branches:n})})}});class Im extends $n{isBoolean=this.branches.length===2&&this.branches[0].hasUnit(!1)&&this.branches[1].hasUnit(!0);get branchGroups(){const e=[];let r=-1;for(const n of this.branches){if(n.hasKind("unit")&&n.domain==="boolean"){r===-1?(r=e.length,e.push(n)):e[r]=C.intrinsic.boolean;continue}e.push(n)}return e}unitBranches=this.branches.filter(e=>e.rawIn.hasKind("unit"));discriminant=this.discriminate();discriminantJson=this.discriminant?Nm(this.discriminant):null;expression=this.distribute(e=>e.nestableExpression,Dm);createBranchedOptimisticRootApply(){return(e,r)=>{const n=this.traverseOptimistic(e);if(n!==Yt)return n;const i=new Xr(e,this.$.resolvedConfig);return this.traverseApply(e,i),i.finalize(r)}}get shallowMorphs(){return this.branches.reduce((e,r)=>Br(e,r.shallowMorphs),[])}get defaultShortDescription(){return this.distribute(e=>e.defaultShortDescription,Qr)}innerToJsonSchema(e){if(this.branchGroups.length===1&&this.branchGroups[0].equals(C.intrinsic.boolean))return{type:"boolean"};const r=this.branchGroups.map(n=>n.toJsonSchemaRecurse(e));return r.every(n=>Object.keys(n).length===1&&ga(n,"const"))?{enum:r.map(n=>n.const)}:{anyOf:r}}traverseAllows=(e,r)=>this.branches.some(n=>n.traverseAllows(e,r));traverseApply=(e,r)=>{const n=[];for(let i=0;i<this.branches.length;i++){if(r.pushBranch(),this.branches[i].traverseApply(e,r),!r.hasError())return this.branches[i].includesTransform?r.queuedMorphs.push(...r.popBranch().queuedMorphs):r.popBranch();n.push(r.popBranch().error)}r.errorFromNodeContext({code:"union",errors:n,meta:this.meta})};traverseOptimistic=e=>{for(let r=0;r<this.branches.length;r++){const n=this.branches[r];if(n.traverseAllows(e))return n.contextFreeMorph?n.contextFreeMorph(e):e}return Yt};compile(e){if(!this.discriminant||this.unitBranches.length===this.branches.length&&this.branches.length===2)return this.compileIndiscriminable(e);let r=this.discriminant.optionallyChainedPropString;this.discriminant.kind==="domain"&&(r=`typeof ${r} === "object" ? ${r} === null ? "null" : "object" : typeof ${r} === "function" ? "object" : typeof ${r}`);const n=this.discriminant.cases,i=Object.keys(n),{optimistic:s}=e;if(e.optimistic=!1,e.block(`switch(${r})`,()=>{for(const f in n){const p=n[f],h=f==="default"?f:`case ${f}`;let c;p===!0?c=s?"data":"true":s?p.rootApplyStrategy==="branchedOptimistic"?c=e.invoke(p,{kind:"Optimistic"}):p.contextFreeMorph?c=`${e.invoke(p)} ? ${We(p.contextFreeMorph)}(data) : "${Yt}"`:c=`${e.invoke(p)} ? data : "${Yt}"`:c=e.invoke(p),e.line(`${h}: return ${c}`)}return e}),e.traversalKind==="Allows"){e.return(s?`"${Yt}"`:!1);return}const o=Qr(this.discriminant.kind==="domain"?i.map(f=>{const p=f.slice(1,-1);return p==="function"?ur.object:ur[p]}):i),u=this.discriminant.path.map(f=>typeof f=="symbol"?We(f):JSON.stringify(f)),l=JSON.stringify(o),d=this.discriminant.kind==="domain"?`${Mm}[${r}]`:`${Cm}(${r})`;e.line(`ctx.errorFromNodeContext({
	code: "predicate",
	expected: ${l},
	actual: ${d},
	relativePath: [${u}],
	meta: ${this.compiledMeta}
})`)}compileIndiscriminable(e){if(e.traversalKind==="Apply"){e.const("errors","[]");for(const r of this.branches)e.line("ctx.pushBranch()").line(e.invoke(r)).if("!ctx.hasError()",()=>e.return(r.includesTransform?"ctx.queuedMorphs.push(...ctx.popBranch().queuedMorphs)":"ctx.popBranch()")).line("errors.push(ctx.popBranch().error)");e.line(`ctx.errorFromNodeContext({ code: "union", errors, meta: ${this.compiledMeta} })`)}else{const{optimistic:r}=e;e.optimistic=!1;for(const n of this.branches)e.if(`${e.invoke(n)}`,()=>e.return(r?n.contextFreeMorph?`${We(n.contextFreeMorph)}(data)`:"data":!0));e.return(r?`"${Yt}"`:!1)}}get nestableExpression(){return this.isBoolean?"boolean":`(${this.expression})`}discriminate(){if(this.branches.length<2||this.isCyclic)return null;if(this.unitBranches.length===this.branches.length){const s=ee(this.unitBranches,(o,u)=>[`${u.rawIn.serializedValue}`,u.hasKind("morph")?u:!0]);return{kind:"unit",path:[],optionallyChainedPropString:"data",cases:s}}const e=[];for(let s=0;s<this.branches.length-1;s++){const o=this.branches[s];for(let u=s+1;u<this.branches.length;u++){const l=this.branches[u],d=hr(o.rawIn,l.rawIn,o.$);if(d instanceof T)for(const f of d){if(!f.kind||f.optional)continue;let p,h;if(f.kind==="domain"){const a=f.l,g=f.r;p=`"${typeof a=="string"?a:a.domain}"`,h=`"${typeof g=="string"?g:g.domain}"`}else if(f.kind==="unit")p=f.l.serializedValue,h=f.r.serializedValue;else continue;const c=e.find(a=>tn(a.path,f.path)&&a.kind===f.kind);c?(c.cases[p]?c.cases[p].branchIndices=Br(c.cases[p].branchIndices,s):c.cases[p]??={branchIndices:[s],condition:f.l},c.cases[h]?c.cases[h].branchIndices=Br(c.cases[h].branchIndices,u):c.cases[h]??={branchIndices:[u],condition:f.r}):e.push({kind:f.kind,cases:{[p]:{branchIndices:[s],condition:f.l},[h]:{branchIndices:[u],condition:f.r}},path:f.path})}}}const r=this.ordered?Om(e,this.branches):e;if(!r.length)return null;const n=Am(r,this),i={};for(const s in n.best.cases){const o=Em(n,s);if(o===null){i[s]=!0;continue}if(o.length===this.branches.length)return null;this.ordered&&o.sort((d,f)=>d.originalIndex-f.originalIndex);const u=o.map(d=>d.branch),l=u.length===1?u[0]:this.$.node("union",this.ordered?{branches:u,ordered:!0}:u);Object.assign(this.referencesById,l.referencesById),i[s]=l}if(n.defaultEntries.length){const s=n.defaultEntries.map(o=>o.branch);i.default=this.$.node("union",this.ordered?{branches:s,ordered:!0}:s,{prereduced:!0}),Object.assign(this.referencesById,i.default.referencesById)}return Object.assign(n.location,{cases:i})}}const Am=(t,e)=>{const n=t.sort((o,u)=>o.path.length===u.path.length?Object.keys(u.cases).length-Object.keys(o.cases).length:o.path.length-u.path.length)[0],i={kind:n.kind,path:n.path,optionallyChainedPropString:_l(n.path)},s=e.branches.map((o,u)=>({originalIndex:u,branch:o}));return{best:n,location:i,defaultEntries:s,node:e}},Em=(t,e)=>{const r=t.best.cases[e],n=Pm(r.condition,t.location.path,t.node.$);let i=[];const s=[];for(let o=0;o<t.defaultEntries.length;o++){const u=t.defaultEntries[o];if(r.branchIndices.includes(u.originalIndex)){const l=Eo(t.node.branches[u.originalIndex],t.location);l===null?i=null:i?.push({originalIndex:u.originalIndex,branch:l})}else if(u.branch.hasKind("alias")&&n.hasKind("domain")&&n.domain==="object")i?.push(u);else{if(u.branch.rawIn.overlaps(n)){const l=Eo(u.branch,t.location);i?.push({originalIndex:u.originalIndex,branch:l})}s.push(u)}}return t.defaultEntries=s,i},Om=(t,e)=>t.filter(n=>{const i=Object.values(n.cases).map(s=>s.branchIndices);for(let s=0;s<i.length-1;s++){const o=i[s];for(let u=s+1;u<i.length;u++){const l=i[u];for(const d of o)for(const f of l)if(d>f&&e[d].overlaps(e[f]))return!1}}return!0}),Pm=(t,e,r)=>{let n=t==="undefined"?r.node("unit",{unit:void 0}):t==="null"?r.node("unit",{unit:null}):t==="boolean"?r.units([!0,!1]):t;for(let i=e.length-1;i>=0;i--){const s=e[i];n=r.node("intersection",typeof s=="number"?{proto:"Array",sequence:[...Qh(s).map(o=>({})),n]}:{domain:"object",required:[{key:s,value:n}]})}return n},_l=t=>t.reduce((e,r)=>e+Kc(r,!0),"data"),Mm=We(rf),Cm=We(X),Il={implementation:_m,Node:Im},Nm=t=>({kind:t.kind,path:t.path.map(e=>typeof e=="string"?e:un(e)),cases:ee(t.cases,(e,r)=>[e,r===!0?r:r.hasKind("union")&&r.discriminantJson?r.discriminantJson:r.json])}),$m={delimiter:" | ",finalDelimiter:" | "},Dm=t=>Qr(t,$m),Qr=(t,e)=>{const r=e?.delimiter??", ",n=e?.finalDelimiter??" or ";if(t.length===0)return"never";if(t.length===1)return t[0];if(t.length===2&&t[0]==="false"&&t[1]==="true"||t[0]==="true"&&t[1]==="false")return"boolean";const i={},s=t.filter(u=>i[u]?!1:i[u]=!0),o=s.pop();return`${s.join(r)}${s.length?n:""}${o}`},ks=(t,e,r)=>{const n=e.map(()=>[]);for(let s=0;s<t.length;s++){let o={};for(let u=0;u<e.length;u++){if(n[u]===null)continue;if(t[s].equals(e[u])){n[u]=null,o={};break}const l=Ve(t[s],e[u],r);if(!(l instanceof T)){if(l.equals(t[s])){n[u].push(t[s]),o={};break}l.equals(e[u])?n[u]=null:o[u]=l}}for(const u in o)n[u][s]=o[u]}const i=n.flatMap((s,o)=>s?.flatMap(u=>u.branches)??e[o]);return i.length===0?T.init("union",t,e):i},Rm=({branches:t,ordered:e})=>{if(t.length<2)return t;const r=t.map(()=>!0);for(let n=0;n<t.length;n++)for(let i=n+1;i<t.length&&r[n]&&r[i];i++){if(t[n].equals(t[i])){r[i]=!1;continue}const s=hr(t[n].rawIn,t[i].rawIn,t[0].$);s instanceof T||(e||Lm(t[n],t[i]),s.equals(t[n].rawIn)?r[n]=!!e:s.equals(t[i].rawIn)&&(r[i]=!1))}return t.filter((n,i)=>r[i])},Lm=(t,e)=>{!t.includesTransform&&!e.includesTransform||(tn(t.shallowMorphs,e.shallowMorphs)||P(Oo(t.expression,e.expression)),tn(t.flatMorphs,e.flatMorphs,{isEqual:(r,n)=>r.propString===n.propString&&(r.node.hasKind("morph")&&n.node.hasKind("morph")?r.node.hasEqualMorphs(n.node):r.node.hasKind("intersection")&&n.node.hasKind("intersection")?r.node.structure?.structuralMorphRef===n.node.structure?.structuralMorphRef:!1)})||P(Oo(t.expression,e.expression)))},Eo=(t,e)=>t.transform((r,n)=>r==="domain"||r==="unit"?null:n,{shouldTransform:(r,n)=>{const i=_l(n.path);return e.optionallyChainedPropString.startsWith(i)?r.hasKind("domain")&&r.domain==="object"||(r.hasKind("domain")||e.kind==="unit")&&i===e.optionallyChainedPropString?!0:r.children.length!==0&&r.kind!=="index":!1}}),Oo=(t,e)=>`An unordered union of a type including a morph and a type with overlapping input is indeterminate:
Left: ${t}
Right: ${e}`,Tm=(t,e)=>`The intersection of two ordered unions is indeterminate:
Left: ${t}
Right: ${e}`,Bm=ae({kind:"unit",hasAssociatedError:!0,keys:{unit:{preserveUndefined:!0,serialize:t=>t instanceof Date?t.toISOString():qr(t)}},normalize:t=>t,defaults:{description:t=>X(t.unit),problem:({expected:t,actual:e})=>`${t===e?`must be reference equal to ${t} (serialized to the same value)`:`must be ${t} (was ${e})`}`},intersections:{unit:(t,e)=>T.init("unit",t,e),...Dn("unit",(t,e)=>{if(e.allows(t.unit))return t;const r=e.hasKind("intersection")?e.basis:e;if(r){const n=r.hasKind("domain")?r:C.intrinsic.object;if(t.domain!==n.domain){const i=t.domain==="undefined"||t.domain==="null"||t.domain==="boolean"?t.domain:C.intrinsic[t.domain];return T.init("domain",i,n)}}return T.init("assignability",t,e.hasKind("intersection")?e.children.find(n=>!n.allows(t.unit)):e)})}});class qm extends Oa{compiledValue=this.json.unit;serializedValue=typeof this.unit=="string"||this.unit instanceof Date?JSON.stringify(this.compiledValue):`${this.compiledValue}`;compiledCondition=Po(this.unit,this.serializedValue);compiledNegation=Po(this.unit,this.serializedValue,"negated");expression=X(this.unit);domain=Ht(this.unit);get defaultShortDescription(){return this.domain==="object"?ur.object:this.description}innerToJsonSchema(e){return this.unit===null?{type:"null"}:C.intrinsic.jsonPrimitive.allows(this.unit)?{const:this.unit}:e.fallback.unit({code:"unit",base:{},unit:this.unit})}traverseAllows=this.unit instanceof Date?e=>e instanceof Date&&e.toISOString()===this.compiledValue:Number.isNaN(this.unit)?e=>Number.isNaN(e):e=>e===this.unit}const Al={implementation:Bm,Node:qm},Po=(t,e,r)=>{if(t instanceof Date){const n=`data instanceof Date && data.toISOString() === ${e}`;return r?`!(${n})`:n}return Number.isNaN(t)?`${r?"!":""}Number.isNaN(data)`:`data ${r?"!":"="}== ${e}`},Fm=ae({kind:"index",hasAssociatedError:!1,intersectionIsOpen:!0,keys:{signature:{child:!0,parse:(t,e)=>{const r=e.$.parseSchema(t);if(!r.extends(C.intrinsic.key))return P(jm(r.expression));const n=r.branches.filter(i=>i.hasKind("unit"));return n.length?P(Vm(n.map(i=>X(i.unit)))):r}},value:{child:!0,parse:(t,e)=>e.$.parseSchema(t)}},normalize:t=>t,defaults:{description:t=>`[${t.signature.expression}]: ${t.value.description}`},intersections:{index:(t,e,r)=>{if(t.signature.equals(e.signature)){const n=Ve(t.value,e.value,r),i=n instanceof T?C.intrinsic.never.internal:n;return r.$.node("index",{signature:t.signature,value:i})}return t.signature.extends(e.signature)&&t.value.subsumes(e.value)?e:e.signature.extends(t.signature)&&e.value.subsumes(t.value)?t:null}}});class Um extends cn{impliedBasis=C.intrinsic.object.internal;expression=`[${this.signature.expression}]: ${this.value.expression}`;flatRefs=Q(this.value.flatRefs.map(e=>wr([this.signature,...e.path],e.node)),wr([this.signature],this.value));traverseAllows=(e,r)=>Ri(e).every(n=>this.signature.traverseAllows(n[0],r)?dr(n[0],()=>this.value.traverseAllows(n[1],r),r):!0);traverseApply=(e,r)=>{for(const n of Ri(e))this.signature.traverseAllows(n[0],r)&&dr(n[0],()=>this.value.traverseApply(n[1],r),r)};_transform(e,r){r.path.push(this.signature);const n=super._transform(e,r);return r.path.pop(),n}compile(){}}const El={implementation:Fm,Node:Um},Vm=t=>`Index keys ${t.join(", ")} should be specified as named props.`,jm=t=>`Indexed key definition '${t}' must be a string or symbol`,Km=ae({kind:"required",hasAssociatedError:!0,intersectionIsOpen:!0,keys:{key:{},value:{child:!0,parse:(t,e)=>e.$.parseSchema(t)}},normalize:t=>t,defaults:{description:t=>`${t.compiledKey}: ${t.value.description}`,expected:t=>t.missingValueDescription,actual:()=>"missing"},intersections:{required:ea,optional:ea}});class Hm extends bl{expression=`${this.compiledKey}: ${this.value.expression}`;errorContext=Object.freeze({code:"required",missingValueDescription:this.value.defaultShortDescription,relativePath:[this.key],meta:this.meta});compiledErrorContext=es(this.errorContext)}const Ol={implementation:Km,Node:Hm},zm=ae({kind:"sequence",hasAssociatedError:!1,collapsibleKey:"variadic",keys:{prefix:{child:!0,parse:(t,e)=>{if(t.length!==0)return t.map(r=>e.$.parseSchema(r))}},optionals:{child:!0,parse:(t,e)=>{if(t.length!==0)return t.map(r=>e.$.parseSchema(r))}},defaultables:{child:t=>t.map(e=>e[0]),parse:(t,e)=>{if(t.length!==0)return t.map(r=>{const n=e.$.parseSchema(r[0]);return Aa(n,r[1],null),[n,r[1]]})},serialize:t=>t.map(e=>[e[0].collapsibleJson,qr(e[1])]),reduceIo:(t,e,r)=>{if(t==="in"){e.optionals=r.map(n=>n[0].rawIn);return}e.prefix=r.map(n=>n[0].rawOut)}},variadic:{child:!0,parse:(t,e)=>e.$.parseSchema(t,e)},minVariadicLength:{parse:t=>t===0?void 0:t},postfix:{child:!0,parse:(t,e)=>{if(t.length!==0)return t.map(r=>e.$.parseSchema(r))}}},normalize:t=>{if(typeof t=="string")return{variadic:t};if("variadic"in t||"prefix"in t||"defaultables"in t||"optionals"in t||"postfix"in t||"minVariadicLength"in t){if(t.postfix?.length){if(!t.variadic)return P(Zm);if(t.optionals?.length||t.defaultables?.length)return P(Ml)}return t.minVariadicLength&&!t.variadic?P("minVariadicLength may not be specified without a variadic element"):t}return{variadic:t}},reduce:(t,e)=>{let r=t.minVariadicLength??0;const n=t.prefix?.slice()??[],i=t.defaultables?.slice()??[],s=t.optionals?.slice()??[],o=t.postfix?.slice()??[];if(t.variadic){for(;s[s.length-1]?.equals(t.variadic);)s.pop();if(s.length===0&&i.length===0)for(;n[n.length-1]?.equals(t.variadic);)n.pop(),r++;for(;o[0]?.equals(t.variadic);)o.shift(),r++}else s.length===0&&i.length===0&&n.push(...o.splice(0));if(r!==t.minVariadicLength||t.prefix&&t.prefix.length!==n.length)return e.node("sequence",{...t,prefix:n,defaultables:i,optionals:s,postfix:o,minVariadicLength:r},{prereduced:!0})},defaults:{description:t=>t.isVariadicOnly?`${t.variadic.nestableExpression}[]`:`[${t.tuple.map(r=>r.kind==="defaultables"?`${r.node.nestableExpression} = ${X(r.default)}`:r.kind==="optionals"?`${r.node.nestableExpression}?`:r.kind==="variadic"?`...${r.node.nestableExpression}[]`:r.node.expression).join(", ")}]`},intersections:{sequence:(t,e,r)=>{const n=vn({l:t.tuple,r:e.tuple,disjoint:new T,result:[],fixedVariants:[],ctx:r}),i=n.disjoint.length===0?[n,...n.fixedVariants]:n.fixedVariants;return i.length===0?n.disjoint:i.length===1?r.$.node("sequence",Mo(i[0].result)):r.$.node("union",i.map(s=>({proto:Array,sequence:Mo(s.result)})))}}});class Gm extends cn{impliedBasis=C.intrinsic.Array.internal;tuple=Jm(this.inner);prefixLength=this.prefix?.length??0;defaultablesLength=this.defaultables?.length??0;optionalsLength=this.optionals?.length??0;postfixLength=this.postfix?.length??0;defaultablesAndOptionals=[];prevariadic=this.tuple.filter(e=>e.kind==="defaultables"||e.kind==="optionals"?(this.defaultablesAndOptionals.push(e.node),!0):e.kind==="prefix");variadicOrPostfix=Rr(this.variadic&&[this.variadic],this.postfix);flatRefs=this.addFlatRefs();addFlatRefs(){return yo(this.flatRefs,this.prevariadic.flatMap((e,r)=>Q(e.node.flatRefs.map(n=>wr([`${r}`,...n.path],n.node)),wr([`${r}`],e.node)))),yo(this.flatRefs,this.variadicOrPostfix.flatMap(e=>Q(e.flatRefs.map(r=>wr([C.intrinsic.nonNegativeIntegerString.internal,...r.path],r.node)),wr([C.intrinsic.nonNegativeIntegerString.internal],e)))),this.flatRefs}isVariadicOnly=this.prevariadic.length+this.postfixLength===0;minVariadicLength=this.inner.minVariadicLength??0;minLength=this.prefixLength+this.minVariadicLength+this.postfixLength;minLengthNode=this.minLength===0?null:this.$.node("minLength",this.minLength);maxLength=this.variadic?null:this.tuple.length;maxLengthNode=this.maxLength===null?null:this.$.node("maxLength",this.maxLength);impliedSiblings=this.minLengthNode?this.maxLengthNode?[this.minLengthNode,this.maxLengthNode]:[this.minLengthNode]:this.maxLengthNode?[this.maxLengthNode]:[];defaultValueMorphs=Ym(this);defaultValueMorphsReference=this.defaultValueMorphs.length?We(this.defaultValueMorphs):void 0;elementAtIndex(e,r){if(r<this.prevariadic.length)return this.tuple[r];const n=e.length-this.postfixLength;return r>=n?{kind:"postfix",node:this.postfix[r-n]}:{kind:"variadic",node:this.variadic??de(`Unexpected attempt to access index ${r} on ${this}`)}}traverseAllows=(e,r)=>{for(let n=0;n<e.length;n++)if(!this.elementAtIndex(e,n).node.traverseAllows(e[n],r))return!1;return!0};traverseApply=(e,r)=>{let n=0;for(;n<e.length;n++)dr(n,()=>this.elementAtIndex(e,n).node.traverseApply(e[n],r),r)};get element(){return this.cacheGetter("element",this.$.node("union",this.children))}compile(e){if(this.prefix)for(const[r,n]of this.prefix.entries())e.traverseKey(`${r}`,`data[${r}]`,n);for(const[r,n]of this.defaultablesAndOptionals.entries()){const i=`${r+this.prefixLength}`;e.if(`${i} >= data.length`,()=>e.traversalKind==="Allows"?e.return(!0):e.return()),e.traverseKey(i,`data[${i}]`,n)}if(this.variadic&&(this.postfix&&e.const("firstPostfixIndex",`data.length${this.postfix?`- ${this.postfix.length}`:""}`),e.for(`i < ${this.postfix?"firstPostfixIndex":"data.length"}`,()=>e.traverseKey("i","data[i]",this.variadic),this.prevariadic.length),this.postfix))for(const[r,n]of this.postfix.entries()){const i=`firstPostfixIndex + ${r}`;e.traverseKey(i,`data[${i}]`,n)}e.traversalKind==="Allows"&&e.return(!0)}_transform(e,r){r.path.push(C.intrinsic.nonNegativeIntegerString.internal);const n=super._transform(e,r);return r.path.pop(),n}expression=this.description;reduceJsonSchema(e,r){const n=r.target==="draft-07";if(this.prevariadic.length){const i=this.prevariadic.map(s=>{const o=s.node.toJsonSchemaRecurse(r);if(s.kind==="defaultables"){const u=typeof s.default=="function"?s.default():s.default;o.default=C.intrinsic.jsonData.allows(u)?u:r.fallback.defaultValue({code:"defaultValue",base:o,value:u})}return o});n?e.items=i:e.prefixItems=i}if(this.minLength&&(e.minItems=this.minLength),this.variadic){const i=this.variadic.toJsonSchemaRecurse(r);if(n&&this.prevariadic.length?e.additionalItems=i:e.items=i,this.maxLength&&(e.maxItems=this.maxLength),this.postfix){const s=this.postfix.map(o=>o.toJsonSchemaRecurse(r));e=r.fallback.arrayPostfix({code:"arrayPostfix",base:e,elements:s})}}else n?e.additionalItems=!1:e.items=!1,delete e.maxItems;return e}}const Wm={},Ym=t=>{if(!t.defaultables)return[];const e=[];let r="[";const n=t.prefixLength+t.defaultablesLength-1;for(let i=t.prefixLength;i<=n;i++){const[s,o]=t.defaultables[i-t.prefixLength];e.push(vl(i,s,o)),r+=`${i}: ${s.id} = ${qr(o)}, `}return r+="]",Wm[r]??=e},Pl={implementation:zm,Node:Gm},Jm=t=>{const e=[];if(t.prefix)for(const r of t.prefix)e.push({kind:"prefix",node:r});if(t.defaultables)for(const[r,n]of t.defaultables)e.push({kind:"defaultables",node:r,default:n});if(t.optionals)for(const r of t.optionals)e.push({kind:"optionals",node:r});if(t.variadic&&e.push({kind:"variadic",node:t.variadic}),t.postfix)for(const r of t.postfix)e.push({kind:"postfix",node:r});return e},Mo=t=>t.reduce((e,r)=>(r.kind==="variadic"?e.variadic=r.node:r.kind==="defaultables"?e.defaultables=Q(e.defaultables,[[r.node,r.default]]):e[r.kind]=Q(e[r.kind],r.node),e),{}),Ml="A postfix required element cannot follow an optional or defaultable element",Zm="A postfix element requires a variadic element",vn=t=>{const[e,...r]=t.l,[n,...i]=t.r;if(!e||!n)return t;const s=r[r.length-1]?.kind==="postfix",o=i[i.length-1]?.kind==="postfix",u=e.kind==="prefix"||n.kind==="prefix"?"prefix":e.kind==="postfix"||n.kind==="postfix"?"postfix":e.kind==="variadic"&&n.kind==="variadic"?"variadic":s||o?"prefix":e.kind==="defaultables"||n.kind==="defaultables"?"defaultables":"optionals";if(e.kind==="prefix"&&n.kind==="variadic"&&o){const p=vn({...t,fixedVariants:[],r:i.map(h=>({...h,kind:"prefix"}))});p.disjoint.length===0&&t.fixedVariants.push(p)}else if(n.kind==="prefix"&&e.kind==="variadic"&&s){const p=vn({...t,fixedVariants:[],l:r.map(h=>({...h,kind:"prefix"}))});p.disjoint.length===0&&t.fixedVariants.push(p)}const l=Ve(e.node,n.node,t.ctx);if(l instanceof T)if(u==="prefix"||u==="postfix")t.disjoint.push(...l.withPrefixKey(u==="prefix"?t.result.length:`-${r.length+1}`,Co(e)&&Co(n)?"required":"optional")),t.result=[...t.result,{kind:u,node:C.intrinsic.never.internal}];else return u==="optionals"||u==="defaultables"?t:vn({...t,fixedVariants:[],l:r.map(p=>({...p,kind:"prefix"})),r:r.map(p=>({...p,kind:"prefix"}))});else u==="defaultables"?(e.kind==="defaultables"&&n.kind==="defaultables"&&e.default!==n.default&&P(xl(e.default,n.default)),t.result=[...t.result,{kind:u,node:l,default:e.kind==="defaultables"?e.default:n.kind==="defaultables"?n.default:de(`Unexpected defaultable intersection from ${e.kind} and ${n.kind} elements.`)}]):t.result=[...t.result,{kind:u,node:l}];const d=t.l.length,f=t.r.length;return(e.kind!=="variadic"||d>=f&&(n.kind==="variadic"||f===1))&&(t.l=r),(n.kind!=="variadic"||f>=d&&(e.kind==="variadic"||d===1))&&(t.r=i),vn(t)},Co=t=>t.kind==="prefix"||t.kind==="postfix",Cl=t=>e=>{if(e.props.length||e.index){const r=e.index?.map(i=>i[t])??[];for(const i of e.props)r.push(i[t]);e.undeclared&&r.push(`+ (undeclared): ${e.undeclared}`);const n=`{ ${r.join(", ")} }`;return e.sequence?`${n} & ${e.sequence.description}`:n}return e.sequence?.description??"{}"},Xm=Cl("description"),Qm=Cl("expression"),No=(t,e,r)=>{const n=t.required?"required":"optional";if(!e.signature.allows(t.key))return null;const i=hr(t.value,e.value,r);return i instanceof T?n==="optional"?r.node("optional",{key:t.key,value:C.intrinsic.never.internal}):i.withPrefixKey(t.key,t.kind):null},e1=ae({kind:"structure",hasAssociatedError:!1,normalize:t=>t,applyConfig:(t,e)=>!t.undeclared&&e.onUndeclaredKey!=="ignore"?{...t,undeclared:e.onUndeclaredKey}:t,keys:{required:{child:!0,parse:$t("required"),reduceIo:(t,e,r)=>{e.required=Q(e.required,r.map(n=>t==="in"?n.rawIn:n.rawOut))}},optional:{child:!0,parse:$t("optional"),reduceIo:(t,e,r)=>{if(t==="in"){e.optional=r.map(n=>n.rawIn);return}for(const n of r)e[n.outProp.kind]=Q(e[n.outProp.kind],n.outProp.rawOut)}},index:{child:!0,parse:$t("index")},sequence:{child:!0,parse:$t("sequence")},undeclared:{parse:t=>t==="ignore"?void 0:t,reduceIo:(t,e,r)=>{if(r==="reject"){e.undeclared="reject";return}t==="in"?delete e.undeclared:e.undeclared="reject"}}},defaults:{description:Xm},intersections:{structure:(t,e,r)=>{const n={...t.inner},i={...e.inner},s=new T;if(t.undeclared){const l=t.keyof();for(const d of e.requiredKeys)l.allows(d)||s.add("presence",C.intrinsic.never.internal,e.propsByKey[d].value,{path:[d]});i.optional&&(i.optional=i.optional.filter(d=>l.allows(d.key))),i.index&&(i.index=i.index.flatMap(d=>{if(d.signature.extends(l))return d;const f=hr(l,d.signature,r.$);if(f instanceof T)return[];const p=ta(f,d.value,r.$);return p.required&&(i.required=Rr(i.required,p.required)),p.optional&&(i.optional=Rr(i.optional,p.optional)),p.index??[]}))}if(e.undeclared){const l=e.keyof();for(const d of t.requiredKeys)l.allows(d)||s.add("presence",t.propsByKey[d].value,C.intrinsic.never.internal,{path:[d]});n.optional&&(n.optional=n.optional.filter(d=>l.allows(d.key))),n.index&&(n.index=n.index.flatMap(d=>{if(d.signature.extends(l))return d;const f=hr(l,d.signature,r.$);if(f instanceof T)return[];const p=ta(f,d.value,r.$);return p.required&&(n.required=Rr(n.required,p.required)),p.optional&&(n.optional=Rr(n.optional,p.optional)),p.index??[]}))}const o={};(t.undeclared||e.undeclared)&&(o.undeclared=t.undeclared==="reject"||e.undeclared==="reject"?"reject":"delete");const u=qi({kind:"structure",baseInner:o,l:Fi(n),r:Fi(i),roots:[],ctx:r});return u instanceof T&&s.push(...u),s.length?s:u}},reduce:(t,e)=>{if(!t.required&&!t.optional)return;const r={};let n=!1;const i=t.optional?[...t.optional]:[];if(t.required)for(let s=0;s<t.required.length;s++){const o=t.required[s];if(o.key in r&&P(Do(o.key)),r[o.key]=!0,t.index)for(const u of t.index){const l=No(o,u,e);if(l instanceof T)return l}}if(t.optional)for(let s=0;s<t.optional.length;s++){const o=t.optional[s];if(o.key in r&&P(Do(o.key)),r[o.key]=!0,t.index)for(const u of t.index){const l=No(o,u,e);if(l instanceof T)return l;l!==null&&(i[s]=l,n=!0)}}if(n)return e.node("structure",{...t,optional:i},{prereduced:!0})}});class t1 extends cn{impliedBasis=C.intrinsic.object.internal;impliedSiblings=this.children.flatMap(e=>e.impliedSiblings??[]);props=Rr(this.required,this.optional);propsByKey=ee(this.props,(e,r)=>[r.key,r]);propsByKeyReference=We(this.propsByKey);expression=Qm(this);requiredKeys=this.required?.map(e=>e.key)??[];optionalKeys=this.optional?.map(e=>e.key)??[];literalKeys=[...this.requiredKeys,...this.optionalKeys];_keyof;keyof(){if(this._keyof)return this._keyof;let e=this.$.units(this.literalKeys).branches;if(this.index)for(const{signature:r}of this.index)e=e.concat(r.branches);return this._keyof=this.$.node("union",e)}map(e){return this.$.node("structure",this.props.flatMap(e).reduce((r,n)=>{const i=this.propsByKey[n.key];if(Ge(n))return n.kind!=="required"&&n.kind!=="optional"?P(`Map result must have kind "required" or "optional" (was ${n.kind})`):(r[n.kind]=Q(r[n.kind],n),r);const s=n.kind??i?.kind??"required",o=ee(n,(u,l)=>u in Ia.implementation.keys?[u,l]:[]);return r[s]=Q(r[s],this.$.node(s,o)),r},{}))}assertHasKeys(e){const r=e.filter(n=>!ti(n,this.keyof()));if(r.length)return P($o(this.expression,r))}get(e,...r){let n,i=!1;const s=s1(e);if((typeof s=="string"||typeof s=="symbol")&&this.propsByKey[s]&&(n=this.propsByKey[s].value,i=this.propsByKey[s].required),this.index)for(const u of this.index)ti(s,u.signature)&&(n=n?.and(u.value)??u.value);if(this.sequence&&ti(s,C.intrinsic.nonNegativeIntegerString))if(B(s,"root"))this.sequence.variadic&&(n=n?.and(this.sequence.element)??this.sequence.element);else{const u=Number.parseInt(s);if(u<this.sequence.prevariadic.length){const l=this.sequence.prevariadic[u].node;n=n?.and(l)??l,i||=u<this.sequence.prefixLength}else if(this.sequence.variadic){const l=this.$.node("union",this.sequence.variadicOrPostfix);n=n?.and(l)??l}}if(!n)return this.sequence?.variadic&&B(s,"root")&&s.extends(C.intrinsic.number)?P(a1(s.expression,this.sequence.expression)):P($o(this.expression,[s]));const o=n.get(...r);return i?o:o.or(C.intrinsic.undefined)}pick(...e){return this.assertHasKeys(e),this.$.node("structure",this.filterKeys("pick",e))}omit(...e){return this.assertHasKeys(e),this.$.node("structure",this.filterKeys("omit",e))}optionalize(){const{required:e,...r}=this.inner;return this.$.node("structure",{...r,optional:this.props.map(n=>n.hasKind("required")?this.$.node("optional",n.inner):n)})}require(){const{optional:e,...r}=this.inner;return this.$.node("structure",{...r,required:this.props.map(n=>n.hasKind("optional")?{key:n.key,value:n.value}:n)})}merge(e){const r=this.filterKeys("omit",[e.keyof()]);return e.required&&(r.required=Q(r.required,e.required)),e.optional&&(r.optional=Q(r.optional,e.optional)),e.index&&(r.index=Q(r.index,e.index)),e.sequence&&(r.sequence=e.sequence),e.undeclared?r.undeclared=e.undeclared:delete r.undeclared,this.$.node("structure",r)}filterKeys(e,r){const n=zc(this.inner),i=s=>{const o=r.some(u=>ti(s,u));return e==="pick"?o:!o};return n.required&&(n.required=n.required.filter(s=>i(s.key))),n.optional&&(n.optional=n.optional.filter(s=>i(s.key))),n.index&&(n.index=n.index.filter(s=>i(s.signature))),n}traverseAllows=(e,r)=>this._traverse("Allows",e,r);traverseApply=(e,r)=>this._traverse("Apply",e,r);_traverse=(e,r,n)=>{const i=n?.currentErrorCount??0;for(let s=0;s<this.props.length;s++)if(e==="Allows"){if(!this.props[s].traverseAllows(r,n))return!1}else if(this.props[s].traverseApply(r,n),n.failFast&&n.currentErrorCount>i)return!1;if(this.sequence){if(e==="Allows"){if(!this.sequence.traverseAllows(r,n))return!1}else if(this.sequence.traverseApply(r,n),n.failFast&&n.currentErrorCount>i)return!1}if(this.index||this.undeclared==="reject"){const s=Object.keys(r);s.push(...Object.getOwnPropertySymbols(r));for(let o=0;o<s.length;o++){const u=s[o];if(this.index){for(const l of this.index)if(l.signature.traverseAllows(u,n)){if(e==="Allows"){if(!dr(u,()=>l.value.traverseAllows(r[u],n),n))return!1}else if(dr(u,()=>l.value.traverseApply(r[u],n),n),n.failFast&&n.currentErrorCount>i)return!1}}if(this.undeclared==="reject"&&!this.declaresKey(u)&&(e==="Allows"||(n.errorFromNodeContext({code:"predicate",expected:"removed",actual:"",relativePath:[u],meta:this.meta}),n.failFast)))return!1}}return this.structuralMorph&&n&&!n.hasError()&&n.queueMorphs([this.structuralMorph]),!0};get defaultable(){return this.cacheGetter("defaultable",this.optional?.filter(e=>e.hasDefault())??[])}declaresKey=e=>e in this.propsByKey||this.index?.some(r=>r.signature.allows(e))||this.sequence!==void 0&&C.intrinsic.nonNegativeIntegerString.allows(e);_compileDeclaresKey(e){const r=[];if(this.props.length&&r.push(`k in ${this.propsByKeyReference}`),this.index)for(const n of this.index)r.push(e.invoke(n.signature,{kind:"Allows",arg:"k"}));return this.sequence&&r.push("$ark.intrinsic.nonNegativeIntegerString.allows(k)"),r.join(" || ")||"false"}get structuralMorph(){return this.cacheGetter("structuralMorph",n1(this))}structuralMorphRef=this.structuralMorph&&We(this.structuralMorph);compile(e){e.traversalKind==="Apply"&&e.initializeErrorCount();for(const r of this.props)e.check(r),e.traversalKind==="Apply"&&e.returnIfFailFast();if(this.sequence&&(e.check(this.sequence),e.traversalKind==="Apply"&&e.returnIfFailFast()),(this.index||this.undeclared==="reject")&&(e.const("keys","Object.keys(data)"),e.line("keys.push(...Object.getOwnPropertySymbols(data))"),e.for("i < keys.length",()=>this.compileExhaustiveEntry(e))),e.traversalKind==="Allows")return e.return(!0);this.structuralMorphRef&&e.if("ctx && !ctx.hasError()",()=>(e.line("ctx.queueMorphs(["),i1(e,this),e.line("])")))}compileExhaustiveEntry(e){if(e.const("k","keys[i]"),this.index)for(const r of this.index)e.if(`${e.invoke(r.signature,{arg:"k",kind:"Allows"})}`,()=>e.traverseKey("k","data[k]",r.value));return this.undeclared==="reject"&&e.if(`!(${this._compileDeclaresKey(e)})`,()=>e.traversalKind==="Allows"?e.return(!1):e.line(`ctx.errorFromNodeContext({ code: "predicate", expected: "removed", actual: "", relativePath: [k], meta: ${this.compiledMeta} })`).if("ctx.failFast",()=>e.return())),e}reduceJsonSchema(e,r){switch(e.type){case"object":return this.reduceObjectJsonSchema(e,r);case"array":const n=this.sequence?.reduceJsonSchema(e,r)??e;return this.props.length||this.index?r.fallback.arrayObject({code:"arrayObject",base:n,object:this.reduceObjectJsonSchema({type:"object"},r)}):n;default:return fe.throwInternalOperandError("structure",e)}}reduceObjectJsonSchema(e,r){if(this.props.length){e.properties={};for(const n of this.props){const i=n.value.toJsonSchemaRecurse(r);if(typeof n.key=="symbol"){r.fallback.symbolKey({code:"symbolKey",base:e,key:n.key,value:i,optional:n.optional});continue}if(n.hasDefault()){const s=typeof n.default=="function"?n.default():n.default;i.default=C.intrinsic.jsonData.allows(s)?s:r.fallback.defaultValue({code:"defaultValue",base:i,value:s})}e.properties[n.key]=i}this.requiredKeys.length&&e.properties&&(e.required=this.requiredKeys.filter(n=>typeof n=="string"&&n in e.properties))}if(this.index)for(const n of this.index){const i=n.value.toJsonSchemaRecurse(r);if(n.signature.equals(C.intrinsic.string)){e.additionalProperties=i;continue}for(const s of n.signature.branches){if(!s.extends(C.intrinsic.string)){e=r.fallback.symbolKey({code:"symbolKey",base:e,key:null,value:i,optional:!1});continue}let o={type:"string"};if(s.hasKind("morph")&&(o=r.fallback.morph({code:"morph",base:s.rawIn.toJsonSchemaRecurse(r),out:s.rawOut.toJsonSchemaRecurse(r)})),!s.hasKind("intersection"))return de(`Unexpected index branch kind ${s.kind}.`);const{pattern:u}=s.inner;if(u){const l=Object.assign(o,{pattern:u[0].rule});for(let d=1;d<u.length;d++)o=r.fallback.patternIntersection({code:"patternIntersection",base:l,pattern:u[d].rule});e.patternProperties??={},e.patternProperties[l.pattern]=i}}}return this.undeclared&&!e.additionalProperties&&(e.additionalProperties=!1),e}}const Ss={},r1=t=>{let e="";for(let r=0;r<t.defaultable.length;r++)e+=t.defaultable[r].defaultValueMorphRef;if(t.sequence?.defaultValueMorphsReference&&(e+=t.sequence?.defaultValueMorphsReference),t.undeclared==="delete"){if(e+="delete !(",t.required)for(const r of t.required)e+=r.compiledKey+" | ";if(t.optional)for(const r of t.optional)e+=r.compiledKey+" | ";if(t.index)for(const r of t.index)e+=r.signature.id+" | ";if(t.sequence)if(t.sequence.maxLength===null)e+=F.nonNegativeIntegerString.id;else for(let r=0;r<t.sequence.tuple.length;r++)e+=r+" | ";e+=")"}return e},n1=t=>{const e=r1(t);if(!e)return;if(Ss[e])return Ss[e];const r=(n,i)=>{for(let s=0;s<t.defaultable.length;s++)t.defaultable[s].key in n||t.defaultable[s].defaultValueMorph(n,i);if(t.sequence?.defaultables)for(let s=n.length-t.sequence.prefixLength;s<t.sequence.defaultables.length;s++)t.sequence.defaultValueMorphs[s](n,i);if(t.undeclared==="delete")for(const s in n)t.declaresKey(s)||delete n[s];return n};return Ss[e]=r},i1=(t,e)=>{const n=`(data${e.defaultable.some(i=>i.defaultValueMorph.length===2)||e.sequence?.defaultValueMorphs.some(i=>i.length===2)?", ctx":""})`;return t.block(`${n} => `,i=>{for(let s=0;s<e.defaultable.length;s++){const{serializedKey:o,defaultValueMorphRef:u}=e.defaultable[s];i.if(`!(${o} in data)`,l=>l.line(`${u}${n}`))}return e.sequence?.defaultables&&i.for(`i < ${e.sequence.defaultables.length}`,s=>s.set("data[i]",5),`data.length - ${e.sequence.prefixLength}`),e.undeclared==="delete"&&i.forIn("data",s=>s.if(`!(${e._compileDeclaresKey(s)})`,o=>o.line("delete data[k]"))),i.return("data")})},Nl={implementation:e1,Node:t1},s1=t=>(B(t,"root")&&t.hasKind("unit")&&(t=t.unit),typeof t=="number"&&(t=`${t}`),t),a1=(t,e)=>`${t} is not allowed as an array index on ${e}. Use the 'nonNegativeIntegerString' keyword instead.`,ta=(t,e,r)=>{const[n,i]=Xh(t.branches,o=>o.hasKind("unit"));if(!n.length)return{index:r.node("index",{signature:t,value:e})};const s={};for(const o of n){const u=r.node("required",{key:o.unit,value:e});s[u.kind]=Q(s[u.kind],u)}return i.length&&(s.index=r.node("index",{signature:i,value:e})),s},o1=t=>B(t,"root")?t.expression:X(t),$o=(t,e)=>`Key${e.length===1?"":"s"} ${e.map(o1).join(", ")} ${e.length===1?"does":"do"} not exist on ${t}`,Do=t=>`Duplicate key ${un(t)}`,rs={...Wp,alias:Ea.implementation,domain:Pa.implementation,unit:Al.implementation,proto:Vi.implementation,union:Il.implementation,morph:Sl.implementation,intersection:kl.implementation,divisor:nl.implementation,pattern:ml.implementation,predicate:rl.implementation,required:Ol.implementation,optional:Ia.implementation,index:El.implementation,sequence:Pl.implementation,structure:Nl.implementation};C.defaultConfig=df(Object.assign(ee(rs,(t,e)=>[t,e.defaults]),{jitless:wf(),clone:bf,onUndeclaredKey:"ignore",exactOptionalPropertyTypes:!0,numberAllowsNaN:!1,dateAllowsInvalid:!1,onFail:null,keywords:{},toJsonSchema:fe.defaultConfig}));C.resolvedConfig=Js(C.defaultConfig,C.config);const u1={...Yp,alias:Ea.Node,domain:Pa.Node,unit:Al.Node,proto:Vi.Node,union:Il.Node,morph:Sl.Node,intersection:kl.Node,divisor:nl.Node,pattern:ml.Node,predicate:rl.Node,required:Ol.Node,optional:Ia.Node,index:El.Node,sequence:Pl.Node,structure:Nl.Node};class ra extends of{get[cr](){return"module"}}const $l=(t,e)=>new ra(ee(t,(r,n)=>[r,B(n,"module")?$l(n,e):e.bindReference(n)])),c1=t=>He(t)?t:"branches"in t&&He(t.branches)?t.branches:void 0,l1=(t,e)=>P(`Node of kind ${e} is not valid as a ${t} definition`),Ro=t=>`#${t} duplicates public alias ${t}`,_s={};C.ambient??={};let Lo;const Dl="function $",d1=t=>Rl(t,Ll(t)),Rl=(t,e)=>{const r=e.write(Dl,4),n=e.compile()();for(const i of t)i.precompilation||(i.traverseAllows=n[`${i.id}Allows`].bind(n),i.isRoot()&&!i.allowsRequiresContext&&(i.allows=i.traverseAllows),i.traverseApply=n[`${i.id}Apply`].bind(n),n[`${i.id}Optimistic`]&&(i.traverseOptimistic=n[`${i.id}Optimistic`].bind(n)),i.precompilation=r)},Ll=t=>new jc().return(t.reduce((e,r)=>{const n=new ws({kind:"Allows"}).indent();r.compile(n);const i=n.write(`${r.id}Allows`),s=new ws({kind:"Apply"}).indent();r.compile(s);const o=s.write(`${r.id}Apply`),u=`${e}${i},
${o},
`;if(!r.hasKind("union"))return u;const l=new ws({kind:"Allows",optimistic:!0}).indent();r.compile(l);const d=l.write(`${r.id}Optimistic`);return`${u}${d},
`},`{
`)+"}");class Tl{config;resolvedConfig;name;get[cr](){return"scope"}referencesById={};references=[];resolutions={};exportedNames=[];aliases={};resolved=!1;nodesByHash={};intrinsic;constructor(e,r){this.config=Js(C.config,r),this.resolvedConfig=Js(C.resolvedConfig,r),this.name=this.resolvedConfig.name??`anonymousScope${Object.keys(_s).length}`,this.name in _s&&P(`A Scope already named ${this.name} already exists`),_s[this.name]=this;const n=Object.entries(e).map(i=>this.preparseOwnAliasEntry(...i));for(const[i,s]of n){let o=i;if(i[0]==="#"?(o=i.slice(1),o in this.aliases&&P(Ro(o)),this.aliases[o]=s):(o in this.aliases&&P(Ro(i)),this.aliases[o]=s,this.exportedNames.push(o)),!B(s,"module")&&!B(s,"generic")&&!Ji(s)){const u=this.preparseOwnDefinitionFormat(s,{alias:o});this.resolutions[o]=B(u,"root")?this.bindReference(u):this.createParseContext(u).id}}Lo??=this.node("union",{branches:["string","number","object","bigint","symbol",{unit:!0},{unit:!1},{unit:void 0},{unit:null}]},{prereduced:!0}),this.nodesByHash[Lo.hash]=this.node("intersection",{},{prereduced:!0}),this.intrinsic=C.intrinsic?ee(C.intrinsic,(i,s)=>i.startsWith("json")?[]:[i,this.bindReference(s)]):{}}cacheGetter(e,r){return Object.defineProperty(this,e,{value:r}),r}get internal(){return this}_json;get json(){return this._json||this.export(),this._json}defineSchema(e){return e}generic=(...e)=>{const r=this;return(n,i)=>new Ui(e,i?new tl(n):n,r,r,i??null)};units=(e,r)=>{const n=[];for(const s of e)n.includes(s)||n.push(s);const i=n.map(s=>this.node("unit",{unit:s},r));return this.node("union",i,{...r,prereduced:!0})};lazyResolutions=[];lazilyResolve(e,r){const n=this.node("alias",{reference:r??"synthetic",resolve:e},{prereduced:!0});return this.resolved||this.lazyResolutions.push(n),n}schema=(e,r)=>this.finalize(this.parseSchema(e,r));parseSchema=(e,r)=>this.node(Ni(e),e,r);preparseNode(e,r,n){let i=typeof e=="string"?e:Ni(r,e);if(Ge(r)&&r.kind===i)return r;if(i==="alias"&&!n?.prereduced){const{reference:u}=Ea.implementation.normalize(r,this);if(u.startsWith("$")){const l=this.resolveRoot(u.slice(1));r=l,i=l.kind}}else if(i==="union"&&Fr(r,"object")){const u=c1(r);u?.length===1&&(r=u[0],i=Ni(r))}if(Ge(r)&&r.kind===i)return r;const o=rs[i].normalize?.(r,this)??r;return Ge(o)?o.kind===i?o:l1(i,o.kind):{...n,$:this,kind:i,def:o,prefix:n.alias??i}}bindReference(e){let r;return Ge(e)?r=e.$===this?e:new e.constructor(e.attachments,this):r=e.$===this?e:new Ui(e.params,e.bodyDef,e.$,this,e.hkt),this.resolved||Object.assign(this.referencesById,r.referencesById),r}resolveRoot(e){return this.maybeResolveRoot(e)??P(Ul(e))}maybeResolveRoot(e){const r=this.maybeResolve(e);if(!B(r,"generic"))return r}maybeResolveSubalias(e){return na(this.aliases,e)??na(this.ambient,e)}get ambient(){return C.ambient}maybeResolve(e){const r=this.resolutions[e];if(r){if(typeof r!="string")return this.bindReference(r);const i=Ut[r];if(B(i,"root"))return this.resolutions[e]=i;if(B(i,"context")){if(i.phase==="resolving")return this.node("alias",{reference:`$${e}`},{prereduced:!0});if(i.phase==="resolved")return de(`Unexpected resolved context for was uncached by its scope: ${X(i)}`);i.phase="resolving";const s=this.bindReference(this.parseOwnDefinitionFormat(i.def,i));return i.phase="resolved",Ut[s.id]=s,Ut[i.id]=s,this.resolutions[e]=s}return de(`Unexpected nodesById entry for ${r}: ${X(i)}`)}let n=this.aliases[e]??this.ambient?.[e];return n?(n=this.normalizeRootScopeValue(n),B(n,"generic")?this.resolutions[e]=this.bindReference(n):B(n,"module")?(n.root||P(Vl(e)),this.resolutions[e]=this.bindReference(n.root)):this.resolutions[e]=this.parse(n,{alias:e})):this.maybeResolveSubalias(e)}createParseContext(e){const r=e.id??gl(e.prefix);return Ut[r]=Object.assign(e,{[cr]:"context",$:this,id:r,phase:"unresolved"})}traversal(e){return new Xr(e,this.resolvedConfig)}import(...e){return new ra(ee(this.export(...e),(r,n)=>[`#${r}`,n]))}precompilation;_exportedResolutions;_exports;export(...e){if(!this._exports){this._exports={};for(const n of this.exportedNames){const i=this.aliases[n];this._exports[n]=B(i,"module")?$l(i,this):To(this.maybeResolve(n))}for(const n of this.lazyResolutions)n.resolution;if(this._exportedResolutions=Fl(this,this._exports),this._json=ql(this._exportedResolutions),Object.assign(this.resolutions,this._exportedResolutions),this.references=Object.values(this.referencesById),!this.resolvedConfig.jitless){const n=Ll(this.references);this.precompilation=n.write(Dl,4),Rl(this.references,n)}this.resolved=!0}const r=e.length?e:this.exportedNames;return new ra(ee(r,(n,i)=>[i,this._exports[i]]))}resolve(e){return this.export()[e]}node=(e,r,n={})=>{const i=this.preparseNode(e,r,n);if(Ge(i))return this.bindReference(i);const s=this.createParseContext(i),o=yl(s),u=this.bindReference(o);return Ut[s.id]=u};parse=(e,r={})=>this.finalize(this.parseDefinition(e,r));parseDefinition(e,r={}){if(B(e,"root"))return this.bindReference(e);const n=this.preparseOwnDefinitionFormat(e,r);if(B(n,"root"))return this.bindReference(n);const i=this.createParseContext(n);Ut[i.id]=i;let s=this.bindReference(this.parseOwnDefinitionFormat(e,i));return s.isCyclic&&(s=em(s,i.id)),Ut[i.id]=s,s}finalize(e){return To(e),!e.precompilation&&!this.resolvedConfig.jitless&&d1(e.references),e}}class Bl extends Tl{parseOwnDefinitionFormat(e,r){return yl(r)}preparseOwnDefinitionFormat(e,r){return this.preparseNode(Ni(e),e,r)}preparseOwnAliasEntry(e,r){return[e,r]}normalizeRootScopeValue(e){return e}}const To=t=>{const e=t.references.filter(r=>r.hasKind("alias"));for(const r of e){Object.assign(r.referencesById,r.resolution.referencesById);for(const n of t.references)r.id in n.referencesById&&Object.assign(n.referencesById,r.referencesById)}return t},ql=t=>ee(t,(e,r)=>[e,B(r,"root")||B(r,"generic")?r.json:B(r,"module")?ql(r):de(`Unexpected resolution ${X(r)}`)]),na=(t,e)=>{const r=e.indexOf(".");if(r===-1)return;const n=e.slice(0,r),i=t[n];if(i===void 0)return;if(!B(i,"module"))return P(h1(n));const s=e.slice(r+1),o=i[s];if(o===void 0)return na(i,s);if(B(o,"root")||B(o,"generic"))return o;if(B(o,"module"))return o.root??P(Vl(e));de(`Unexpected resolution for alias '${e}': ${X(o)}`)},Ma=(t,e)=>new Bl(t,e),Rn=new Bl({}),Fl=(t,e)=>{const r={};for(const n in e){const i=e[n];if(B(i,"module")){const s=Fl(t,i),o=ee(s,(u,l)=>[`${n}.${u}`,l]);Object.assign(r,o)}else B(i,"root")||B(i,"generic")?r[n]=i:de(`Unexpected scope resolution ${X(i)}`)}return r},Ul=t=>`'${t}' is unresolvable`,h1=t=>`'${t}' must reference a module to be accessed using dot syntax`,Vl=t=>`Reference to submodule '${t}' must specify an alias`;Rn.export();const te=Rn.schema,Ca=Rn.node;Rn.defineSchema;const fr=Rn.generic,jl="^(?:0|[1-9]\\d*)$",f1=new RegExp(jl);We(f1);const Kl=Ma({bigint:"bigint",boolean:[{unit:!1},{unit:!0}],false:{unit:!1},never:[],null:{unit:null},number:"number",object:"object",string:"string",symbol:"symbol",true:{unit:!0},unknown:{},undefined:{unit:void 0},Array,Date},{prereducedAliases:!0}).export();C.intrinsic={...Kl};const Hl=Ma({integer:{domain:"number",divisor:1},lengthBoundable:["string",Array],key:["string","symbol"],nonNegativeIntegerString:{domain:"string",pattern:jl}},{prereducedAliases:!0}).export();Object.assign(C.intrinsic,Hl);const p1=Ma({jsonPrimitive:["string","number",{unit:!0},{unit:!1},{unit:null}],jsonObject:{domain:"object",index:{signature:"string",value:"$jsonData"}},jsonData:["$jsonPrimitive","$jsonObject"]},{prereducedAliases:!0}).export(),F={...Kl,...Hl,...p1,emptyStructure:Ca("structure",{},{prereduced:!0})};C.intrinsic={...F};const Bo=((t,e)=>new RegExp(t,e));Object.assign(Bo,{as:Bo});const m1=t=>typeof t=="string"&&t[0]==="d"&&(t[1]==="'"||t[1]==='"')&&t[t.length-1]===t[1],qo=t=>t.toString()!=="Invalid Date",g1=t=>t.slice(2,-1),zl=t=>`'${t}' could not be parsed by the Date constructor`,y1=(t,e)=>b1(t,e),b1=(t,e)=>{const r=new Date(t);if(qo(r))return r;const n=Ff(t);if(n!==void 0){const i=new Date(n);if(qo(i))return i}return e?P(e===!0?zl(t):e):void 0},x1=te({proto:"Array",sequence:"string",required:{key:"groups",value:["object",{unit:void 0}]}}),Is=(t,e)=>{const r=t.scanner.shiftUntilEscapable(k1[Yl[e]]);if(t.scanner.lookahead==="")return t.error(_1(r,e));if(t.scanner.shift(),e in Wl){let n;try{n=new RegExp(r)}catch(i){P(String(i))}t.root=t.ctx.$.node("intersection",{domain:"string",pattern:r},{prereduced:!0}),e==="x/"&&(t.root=t.ctx.$.node("morph",{in:t.root,morphs:i=>n.exec(i),declaredOut:x1}))}else if(Qt(e,Gl))t.root=t.ctx.$.node("unit",{unit:r});else{const n=y1(r,zl(r));t.root=t.ctx.$.node("unit",{meta:r,unit:n})}},Gl={"'":1,'"':1},v1={"/":1,"'":1,'"':1},w1={"d'":"'",'d"':'"',"'":"'",'"':'"'},Wl={"/":"/","x/":"/"},Yl={...w1,...Wl},k1={"'":t=>t.lookahead==="'",'"':t=>t.lookahead==='"',"/":t=>t.lookahead==="/"},S1={'"':"double-quote","'":"single-quote","/":"forward slash"},_1=(t,e)=>`${e}${t} requires a closing ${S1[Yl[e]]}`,I1=t=>`Private type references should not include '#'. Use '${t}' instead.`,Jl="Optional definitions like 'string?' are only valid as properties in an object or tuple",Zl="Defaultable definitions like 'number = 0' are only valid as properties in an object or tuple",dn={"<":1,">":1,"=":1,"|":1,"&":1,")":1,"[":1,"%":1,",":1,":":1,"?":1,"#":1,...Zi},A1=(t,e)=>t===">"?e[0]==="="?e[1]==="=":e.trimStart()===""||Qt(e.trimStart()[0],dn):t==="="?e[0]!=="=":t===","||t==="?",E1=(t,e,r)=>Xl(t,e,r,[]),Xl=(t,e,r,n)=>{const i=r.parseUntilFinalizer();return n.push(i.root),i.finalizer===">"?n.length!==e.params.length?r.error(Ql(t,e.names,n.map(s=>s.expression))):n:i.finalizer===","?Xl(t,e,r,n):i.error(Uc(">"))},Ql=(t,e,r)=>`${t}<${e.join(", ")}> requires exactly ${e.length} args (got ${r.length}${r.length===0?"":`: ${r.join(", ")}`})`,As=t=>{const e=t.scanner.shiftUntilLookahead(dn);e==="keyof"?t.addPrefix("keyof"):t.root=P1(t,e)},O1=(t,e,r)=>{if(r.scanner.shiftUntilNonWhitespace(),r.scanner.shift()!=="<")return r.error(Ql(t,e.names,[]));const i=E1(t,e,r);return e(...i)},P1=(t,e)=>M1(t,e)??C1(t,e)??t.error(e===""?t.scanner.lookahead==="#"?I1(t.shiftedBy(1).scanner.shiftUntilLookahead(dn)):ed(t):Ul(e)),M1=(t,e)=>{if(t.ctx.args?.[e]){const n=t.ctx.args[e];return typeof n!="string"?n:t.ctx.$.node("alias",{reference:n},{prereduced:!0})}const r=t.ctx.$.maybeResolve(e);if(B(r,"root"))return r;if(r!==void 0)return B(r,"generic")?O1(e,r,t):P(`Unexpected resolution ${X(r)}`)},C1=(t,e)=>{const r=Uf(e);if(r!==void 0)return t.ctx.$.node("unit",{unit:r});const n=jf(e);if(n!==void 0)return t.ctx.$.node("unit",{unit:n})},ed=t=>{const e=t.previousOperator();return e?td(e,t.scanner.unscanned):N1(t.scanner.unscanned)},td=(t,e="")=>`Token '${t}' requires a right operand${e?` before '${e}'`:""}`,N1=t=>`Expected an expression${t?` before '${t}'`:""}`,rd=t=>t.scanner.lookahead===""?t.error(ed(t)):t.scanner.lookahead==="("?t.shiftedBy(1).reduceGroupOpen():t.scanner.lookaheadIsIn(v1)?Is(t,t.scanner.shift()):t.scanner.lookaheadIsIn(Zi)?rd(t.shiftedBy(1)):t.scanner.lookahead==="d"?t.scanner.nextLookahead in Gl?Is(t,`${t.scanner.shift()}${t.scanner.shift()}`):As(t):t.scanner.lookahead==="x"&&t.scanner.nextLookahead==="/"?t.shiftedBy(2)&&Is(t,"x/"):As(t),$1={">":!0,">=":!0},D1={"<":!0,"<=":!0},ji={"<":">",">":"<","<=":">=",">=":"<=","==":"=="},R1=(t,e)=>`Left bounds are only valid when paired with right bounds (try ...${e}${t})`,nd=t=>`Left-bounded expressions must specify their limits using < or <= (was ${t})`,L1=(t,e,r,n)=>`An expression may have at most one left bound (parsed ${t}${ji[e]}, ${r}${ji[n]})`,T1=(t,e)=>{const r=q1(t,e);if(t.root.hasKind("unit")){if(typeof t.root.unit=="number"){t.reduceLeftBound(t.root.unit,r),t.unsetRoot();return}if(t.root.unit instanceof Date){const n=`d'${t.root.description??t.root.unit.toISOString()}'`;t.unsetRoot(),t.reduceLeftBound(n,r);return}}return U1(t,r)},B1={"<":1,">":1,"=":1},q1=(t,e)=>t.scanner.lookaheadIs("=")?`${e}${t.scanner.shift()}`:e,Fo=(t,e,r,n)=>r.extends(C.intrinsic.number)?typeof e!="number"?P(ia(t,e,n)):t==="=="?["min","max"]:t[0]===">"?["min"]:["max"]:r.extends(C.intrinsic.lengthBoundable)?typeof e!="number"?P(ia(t,e,n)):t==="=="?["exactLength"]:t[0]===">"?["minLength"]:["maxLength"]:r.extends(C.intrinsic.Date)?t==="=="?["after","before"]:t[0]===">"?["after"]:["before"]:P($p(r.expression)),F1=t=>({rule:m1(t.limit)?g1(t.limit):t.limit,exclusive:t.comparator.length===1}),U1=(t,e)=>{const r=t.unsetRoot(),n=t.scanner.location;t.parseOperand();const i=t.unsetRoot(),s=t.scanner.sliceChars(n,t.scanner.location);if(t.root=r,!i.hasKind("unit")||typeof i.unit!="number"&&!(i.unit instanceof Date))return t.error(ia(e,s,"right"));const o=i.unit,u=e.length===1,l=Fo(e,typeof o=="number"?o:s,r,"right");for(const f of l)t.constrainRoot(f,e==="=="?{rule:o}:{rule:o,exclusive:u});if(!t.branches.leftBound)return;if(!Qt(e,D1))return t.error(nd(e));const d=Fo(t.branches.leftBound.comparator,t.branches.leftBound.limit,r,"left");t.constrainRoot(d[0],F1(t.branches.leftBound)),t.branches.leftBound=null},ia=(t,e,r)=>`Comparator ${r==="left"?ji[t]:t} must be ${r==="left"?"preceded":"followed"} by a corresponding literal (was ${e})`,V1=t=>{t.scanner.shiftUntilNonWhitespace();const e=t.scanner.shiftUntilLookahead(dn);t.root=t.root.brand(e)},j1=t=>{t.scanner.shiftUntilNonWhitespace();const e=t.scanner.shiftUntilLookahead(dn),r=Vf(e,{errorOnFail:Uo(e)});r===0&&t.error(Uo(0)),t.root=t.root.constrain("divisor",r)},Uo=t=>`% operator must be followed by a non-zero integer literal (was ${t})`,id=t=>{const e=t.scanner.shift();return e===""?t.finalize(""):e==="["?t.scanner.shift()==="]"?t.setRoot(t.root.array()):t.error(K1):e==="|"?t.scanner.lookahead===">"?t.shiftedBy(1).pushRootToBranch("|>"):t.pushRootToBranch(e):e==="&"?t.pushRootToBranch(e):e===")"?t.finalizeGroup():A1(e,t.scanner.unscanned)?t.finalize(e):Qt(e,B1)?T1(t,e):e==="%"?j1(t):e==="#"?V1(t):e in Zi?id(t):t.error(Na(e))},Na=(t,e="")=>`'${t}' is not allowed here${e&&` (should be ${e})`}`,K1="Missing expected ']'",H1=t=>{const e=t.unsetRoot();t.parseOperand();const r=t.unsetRoot();if(!r.hasKind("unit"))return t.error(z1(r.expression));const n=r.unit instanceof Date?()=>new Date(r.unit):r.unit;return[e,"=",n]},z1=t=>`Default value '${t}' must be a literal value`,Vo=(t,e)=>{const r=e.$.maybeResolveRoot(t);if(r)return r;if(t.endsWith("[]")){const s=e.$.maybeResolveRoot(t.slice(0,-2));if(s)return s.array()}const n=new ns(new Fc(t),e),i=G1(n);return n.finalizer===">"&&P(Na(">")),i},G1=t=>{t.parseOperand();let e=$a(t).root;return e?(t.finalizer==="="?e=H1(t):t.finalizer==="?"&&(e=[e,"?"]),t.scanner.shiftUntilNonWhitespace(),t.scanner.lookahead&&P(Na(t.scanner.lookahead)),e):de(`Root was unexpectedly unset after parsing string '${t.scanner.scanned}'`)},$a=t=>{for(;t.finalizer===void 0;)W1(t);return t},W1=t=>t.hasRoot()?t.parseOperator():t.parseOperand();class ns{root;branches={prefixes:[],leftBound:null,intersection:null,union:null,pipe:null};finalizer;groups=[];scanner;ctx;constructor(e,r){this.scanner=e,this.ctx=r}error(e){return P(e)}hasRoot(){return this.root!==void 0}setRoot(e){this.root=e}unsetRoot(){const e=this.root;return this.root=void 0,e}constrainRoot(...e){this.root=this.root.constrain(e[0],e[1])}finalize(e){if(this.groups.length)return this.error(Uc(")"));this.finalizeBranches(),this.finalizer=e}reduceLeftBound(e,r){const n=ji[r];if(!Qt(n,$1))return this.error(nd(r));if(this.branches.leftBound)return this.error(L1(this.branches.leftBound.limit,this.branches.leftBound.comparator,e,n));this.branches.leftBound={comparator:n,limit:e}}finalizeBranches(){if(this.assertRangeUnset(),this.branches.pipe){this.pushRootToBranch("|>"),this.root=this.branches.pipe;return}if(this.branches.union){this.pushRootToBranch("|"),this.root=this.branches.union;return}if(this.branches.intersection){this.pushRootToBranch("&"),this.root=this.branches.intersection;return}this.applyPrefixes()}finalizeGroup(){this.finalizeBranches();const e=this.groups.pop();if(!e)return this.error(Zf(")",this.scanner.unscanned));this.branches=e}addPrefix(e){this.branches.prefixes.push(e)}applyPrefixes(){for(;this.branches.prefixes.length;){const e=this.branches.prefixes.pop();this.root=e==="keyof"?this.root.keyof():de(`Unexpected prefix '${e}'`)}}pushRootToBranch(e){this.assertRangeUnset(),this.applyPrefixes();const r=this.root;this.root=void 0,this.branches.intersection=this.branches.intersection?.rawAnd(r)??r,e!=="&"&&(this.branches.union=this.branches.union?.rawOr(this.branches.intersection)??this.branches.intersection,this.branches.intersection=null,e!=="|"&&(this.branches.pipe=this.branches.pipe?.rawPipeOnce(this.branches.union)??this.branches.union,this.branches.union=null))}parseUntilFinalizer(){return $a(new ns(this.scanner,this.ctx))}parseOperator(){return id(this)}parseOperand(){return rd(this)}assertRangeUnset(){if(this.branches.leftBound)return this.error(R1(this.branches.leftBound.limit,this.branches.leftBound.comparator))}reduceGroupOpen(){this.groups.push(this.branches),this.branches={prefixes:[],leftBound:null,union:null,intersection:null,pipe:null}}previousOperator(){return this.branches.leftBound?.comparator??this.branches.prefixes[this.branches.prefixes.length-1]??(this.branches.intersection?"&":this.branches.union?"|":this.branches.pipe?"|>":void 0)}shiftedBy(e){return this.scanner.jumpForward(e),this}}const Y1="An empty string is not a valid generic parameter name",sa=(t,e,r)=>{t.shiftUntilNonWhitespace();const n=t.shiftUntilLookahead(dn);return n===""?t.lookahead===""&&e.length?e:P(Y1):(t.shiftUntilNonWhitespace(),J1(t,n,e,r))},jo="extends ",J1=(t,e,r,n)=>{if(t.shiftUntilNonWhitespace(),t.unscanned.startsWith(jo))t.jumpForward(jo.length);else return t.lookahead===","&&t.shift(),r.push(e),sa(t,r,n);const i=$a(new ns(t,n));return r.push([e,i.root]),sa(t,r,n)};class Z1 extends Ar{constructor(e){const r={$:e,raw:e.fn};super((...n)=>{const i=n.indexOf(":"),s=i===-1?n.length-1:i-1,o=n.slice(0,s+1),u=e.parse(o).assertHasKind("intersection");let l=e.intrinsic.unknown;if(i!==-1){if(i!==n.length-2)return P(Q1);l=e.parse(n[i+1])}return d=>new X1(d,u,l)},{attach:r})}}class X1 extends Ar{raw;params;returns;expression;constructor(e,r,n){const i=`typed ${e.name}`,s={[i]:(...u)=>{const l=r.assert(u),d=e(...l);return n.assert(d)}}[i];super(s),this.raw=e,this.params=r,this.returns=n;let o=r.expression;o[0]==="["&&o[o.length-1]==="]"?o=o.slice(1,-1):o.endsWith("[]")&&(o=`...${o}`),this.expression=`(${o}) => ${n?.expression??"unknown"}`}}const Q1=`":" must be followed by exactly one return type e.g:
fn("string", ":", "number")(s => s.length)`;class eg extends Ar{$;constructor(e){super((...r)=>new ri(e)(...r),{bind:e}),this.$=e}in(e){return new ri(this.$,e===void 0?void 0:this.$.parse(e))}at(e,r){return new ri(this.$).at(e,r)}case(e,r){return new ri(this.$).case(e,r)}}class ri extends Ar{$;in;key;branches=[];constructor(e,r){super(n=>this.caseEntries(Object.entries(n).map(([i,s])=>i==="default"?[i,s]:[this.$.parse(i),s]))),this.$=e,this.in=r}at(e,r){return this.key&&P(rg),this.branches.length&&P(tg),this.key=e,r?this.match(r):this}case(e,r){return this.caseEntry(this.$.parse(e),r)}caseEntry(e,r){const i=(this.key?this.$.parse({[this.key]:e}):e).pipe(r);return this.branches.push(i),this}match(e){return this(e)}strings(e){return this.caseEntries(Object.entries(e).map(([r,n])=>r==="default"?[r,n]:[this.$.node("unit",{unit:r}),n]))}caseEntries(e){for(let r=0;r<e.length;r++){const[n,i]=e[r];if(n==="default")return r!==e.length-1&&P("default may only be specified as the last key of a switch definition"),this.default(i);if(typeof i!="function")return P(`Value for case "${n}" must be a function (was ${Ht(i)})`);this.caseEntry(n,i)}return this}default(e){typeof e=="function"&&this.case(F.unknown,e);const r={branches:this.branches,ordered:!0};(e==="never"||e==="assert")&&(r.meta={onFail:Ko});const n=this.$.node("union",r);if(!this.in)return this.$.finalize(n);let i=this.in.pipe(n);return(e==="never"||e==="assert")&&(i=i.configureReferences({onFail:Ko},"self")),this.$.finalize(i)}}const Ko=t=>t.throw(),tg="A key matcher must be specified before the first case i.e. match.at('foo') or match.in<object>().at('bar')",rg="At most one key matcher may be specified per expression",sd=(t,e)=>{if(He(t)){if(t[1]==="=")return[e.$.parseOwnDefinitionFormat(t[0],e),"=",t[2]];if(t[1]==="?")return[e.$.parseOwnDefinitionFormat(t[0],e),"?"]}return hd(t,e)},ng="Only required keys may make their values optional, e.g. { [mySymbol]: ['number', '?'] }",ig="Only required keys may specify default values, e.g. { value: 'number = 0' }",sg=(t,e)=>{let r;const n={},i=Ri(t);for(const[o,u]of i){const l=ug(o);if(l.kind==="spread"){if(!Pn(n))return P(og);const c=e.$.parseOwnDefinitionFormat(u,e);if(c.equals(F.object))continue;if(!c.hasKind("intersection")||!c.basis?.equals(F.object))return P(cg(c.expression));r=c.structure;continue}if(l.kind==="undeclared"){u!=="reject"&&u!=="delete"&&u!=="ignore"&&P(ag(u)),n.undeclared=u;continue}const d=sd(u,e),f=l;if(l.kind==="required"){He(d)?Es(n,"optional",d[1]==="="?{key:l.normalized,value:d[0],default:d[2]}:{key:l.normalized,value:d[0]},e):Es(n,"required",{key:l.normalized,value:d},e);continue}if(He(d)&&(d[1]==="?"&&P(ng),d[1]==="="&&P(ig)),l.kind==="optional"){Es(n,"optional",{key:l.normalized,value:d},e);continue}const p=e.$.parseOwnDefinitionFormat(f.normalized,e),h=ta(p,d,e.$);h.index&&(n.index=Q(n.index,h.index)),h.required&&(n.required=Q(n.required,h.required))}const s=e.$.node("structure",n);return e.$.parseSchema({domain:"object",structure:r?.merge(s)??s})},Es=(t,e,r,n)=>{t[e]=Q(t[e],n.$.node(e,r))},ag=t=>`Value of '+' key must be 'reject', 'delete', or 'ignore' (was ${X(t)})`,og="Spread operator may only be used as the first key in an object",ug=t=>typeof t=="symbol"?{kind:"required",normalized:t}:t[t.length-1]==="?"?t[t.length-2]===wn?{kind:"required",normalized:`${t.slice(0,-2)}?`}:{kind:"optional",normalized:t.slice(0,-1)}:t[0]==="["&&t[t.length-1]==="]"?{kind:"index",normalized:t.slice(1,-1)}:t[0]===wn&&t[1]==="["&&t[t.length-1]==="]"?{kind:"required",normalized:t.slice(1)}:t==="..."?{kind:"spread"}:t==="+"?{kind:"undeclared"}:{kind:"required",normalized:t==="\\..."?"...":t==="\\+"?"+":t},cg=t=>`Spread operand must resolve to an object literal type (was ${t})`,lg=(t,e)=>vg(t)?cd[t[0]](t,e):bg(t)?ud[t[1]](t,e):null,dg=(t,e)=>e.$.parseOwnDefinitionFormat(t[1],e).keyof(),Os=(t,e)=>{if(t[2]===void 0)return P(td(t[1],""));const r=e.$.parseOwnDefinitionFormat(t[0],e),n=e.$.parseOwnDefinitionFormat(t[2],e);if(t[1]==="|")return e.$.node("union",{branches:[r,n]});const i=t[1]==="&"?hr(r,n,e.$):Xs(r,n,e.$);return i instanceof T?i.throw():i},hg=(t,e)=>e.$.parseOwnDefinitionFormat(t[0],e).array(),fg=(t,e)=>typeof t[2]!="function"?P(ad("=>",t[2])):e.$.parseOwnDefinitionFormat(t[0],e).pipe(t[2]),ad=(t,e)=>`${t===":"?"Narrow":"Morph"} expression requires a function following '${t}' (was ${typeof e})`,pg=(t,e)=>typeof t[2]!="function"?P(ad(":",t[2])):e.$.parseOwnDefinitionFormat(t[0],e).constrain("predicate",t[2]),mg=(t,e)=>e.$.parseOwnDefinitionFormat(t[0],e).configure(t[2],t[3]),od=t=>t,gg=od({"[]":hg,"?":()=>P(Jl)}),yg=od({"|":Os,"&":Os,":":pg,"=>":fg,"|>":Os,"@":mg,"=":()=>P(Zl)}),ud={...gg,...yg},bg=t=>ud[t[1]]!==void 0,xg=t=>t,cd=xg({keyof:dg,instanceof:(t,e)=>{if(typeof t[1]!="function")return P(Ho(Hs(t[1])));const r=t.slice(1).map(n=>typeof n=="function"?e.$.node("proto",{proto:n}):P(Ho(Hs(n))));return r.length===1?r[0]:e.$.node("union",{branches:r})},"===":(t,e)=>e.$.units(t.slice(1))}),vg=t=>cd[t[0]]!==void 0,Ho=t=>`Expected a constructor following 'instanceof' operator (was ${t})`,wg=(t,e)=>{let r=[{}],n=0;for(;n<t.length;){let i=!1;t[n]==="..."&&n<t.length-1&&(i=!0,n++);const s=sd(t[n],e),[o,u,l]=He(s)?s:[s];if(n++,i){if(!o.extends(C.intrinsic.Array))return P(_g(o.expression));r=r.flatMap(d=>o.distribute(f=>Sg(zc(d),f)))}else r=r.map(d=>u==="?"?ld(d,o):u==="="?kg(d,o,l):aa(d,o))}return e.$.parseSchema(r.map(i=>Pn(i)?{proto:Array,exactLength:0}:{proto:Array,sequence:i}))},aa=(t,e)=>t.defaultables||t.optionals?P(t.variadic?Ml:Ig):(t.variadic?t.postfix=Q(t.postfix,e):t.prefix=Q(t.prefix,e),t),ld=(t,e)=>t.variadic?P(dd):(t.optionals=Q(t.optionals,e),t),kg=(t,e,r)=>t.variadic?P(dd):t.optionals?P(Ag):(t.defaultables=Q(t.defaultables,[[e,r]]),t),zo=(t,e)=>(t.postfix&&P(Go),t.variadic?t.variadic.equals(e)||P(Go):t.variadic=e.internal,t),Sg=(t,e)=>{const r=e.select({method:"find",kind:"sequence"});if(!r)return zo(t,C.intrinsic.unknown);if(r.prefix)for(const n of r.prefix)aa(t,n);if(r.optionals)for(const n of r.optionals)ld(t,n);if(r.variadic&&zo(t,r.variadic),r.postfix)for(const n of r.postfix)aa(t,n);return t},_g=t=>`Spread element must be an array (was ${t})`,Go="A tuple may have at most one variadic element",Ig="A required element may not follow an optional element",dd="An optional element may not follow a variadic element",Ag="A defaultable element may not follow an optional element without a default",Eg={},hd=(t,e)=>{if(typeof t=="string"){if(e.args&&Object.keys(e.args).some(n=>t.includes(n)))return Vo(t,e);const r=Eg[e.$.name]??={};return r[t]??=Vo(t,e)}return Fr(t,"object")?Og(t,e):P(oa(Ht(t)))},Og=(t,e)=>{const r=ya(t);switch(r){case void 0:return B(t,"root")?t:"~standard"in t?Pg(t,e):sg(t,e);case"Array":return Mg(t,e);case"RegExp":return e.$.node("intersection",{domain:"string",pattern:t},{prereduced:!0});case"Function":{const n=Ji(t)?t():t;return B(n,"root")?n:P(oa("Function"))}default:return P(oa(r??X(t)))}},Pg=(t,e)=>e.$.intrinsic.unknown.pipe((r,n)=>{const i=t["~standard"].validate(r);if(!i.issues)return i.value;for(const{message:s,path:o}of i.issues)o?o.length?n.error({problem:Ef(s),relativePath:o.map(u=>typeof u=="object"?u.key:u)}):n.error({message:s}):n.error({message:s})}),Mg=(t,e)=>lg(t,e)??wg(t,e),oa=t=>`Type definitions must be strings or objects (was ${t})`;class Cg extends Ar{constructor(e){const r=Object.assign({errors:lr,hkt:er,$:e,raw:e.parse,module:e.constructor.module,scope:e.constructor.scope,declare:e.declare,define:e.define,match:e.match,generic:e.generic,schema:e.schema,keywords:e.ambient,unit:e.unit,enumerated:e.enumerated,instanceOf:e.instanceOf,valueOf:e.valueOf,or:e.or,and:e.and,merge:e.merge,pipe:e.pipe,fn:e.fn},e.ambientAttachments);super((...n)=>{if(n.length===1)return e.parse(n[0]);if(n.length===2&&typeof n[0]=="string"&&n[0][0]==="<"&&n[0][n[0].length-1]===">"){const i=n[0].slice(1,-1),s=e.parseGenericParams(i,{});return new Ui(s,n[1],e,e,null)}return e.parse(n)},{attach:r})}}const An=C;class is extends Tl{get ambientAttachments(){if(An.typeAttachments)return this.cacheGetter("ambientAttachments",ee(An.typeAttachments,(e,r)=>[e,this.bindReference(r)]))}preparseOwnAliasEntry(e,r){const n=e.indexOf("<");if(n===-1){if(B(r,"module")||B(r,"generic"))return[e,r];const o=this.name==="ark"?e:e==="root"?this.name:`${this.name}.${e}`,u=this.resolvedConfig.keywords?.[o];return u&&(r=[r,"@",u]),[e,r]}e[e.length-1]!==">"&&P("'>' must be the last character of a generic declaration in a scope");const i=e.slice(0,n),s=e.slice(n+1,-1);return[i,()=>{const o=this.parseGenericParams(s,{alias:i});return xp(o,r,this)}]}parseGenericParams(e,r){return sa(new Fc(e),[],this.createParseContext({...r,def:e,prefix:"generic"}))}normalizeRootScopeValue(e){return Ji(e)&&!B(e,"generic")?e():e}preparseOwnDefinitionFormat(e,r){return{...r,def:e,prefix:r.alias??"type"}}parseOwnDefinitionFormat(e,r){!(r.alias&&r.alias in this.aliases)&&!r.args&&(r.args={this:r.id});const i=hd(e,r);if(He(i)){if(i[1]==="=")return P(Zl);if(i[1]==="?")return P(Jl)}return i}unit=e=>this.units([e]);valueOf=e=>this.units(hf(e));enumerated=(...e)=>this.units(e);instanceOf=e=>this.node("proto",{proto:e},{prereduced:!0});or=(...e)=>this.schema(e.map(r=>this.parse(r)));and=(...e)=>e.reduce((r,n)=>r.and(this.parse(n)),this.intrinsic.unknown);merge=(...e)=>e.reduce((r,n)=>r.merge(this.parse(n)),this.intrinsic.object);pipe=(...e)=>this.intrinsic.unknown.pipe(...e);fn=new Z1(this);match=new eg(this);declare=()=>({type:this.type});define(e){return e}type=new Cg(this);static scope=((e,r={})=>new is(e,r));static module=((e,r={})=>this.scope(e,r).export())}const Da=Object.assign(is.scope,{define:t=>t}),Y=is;class Ng extends er{description='merge an object\'s properties onto another like `Merge(User, { isAdmin: "true" })`'}const $g=fr(["base",F.object],["props",F.object])(t=>t.base.merge(t.props),Ng),Dg=Y.module({Key:F.key,Merge:$g});class Rg extends er{}const Lg=fr("element")(t=>{const e=t.element.exclude(F.Array),r=e.array();return e.rawOr(r).pipe(On).distribute(n=>n.assertHasKind("morph").declareOut(r),te)},Rg),Tg=Y.module({root:F.Array,readonly:"root",index:F.nonNegativeIntegerString,liftFrom:Lg},{name:"Array"}),ua=te(["string",Mn.FileConstructor]),Bg=ua.rawOr(ua.array()),Wo=te({meta:"an object representing parsed form data",domain:"object",index:{signature:"string",value:Bg}}),qg=Y.module({root:["instanceof",FormData],value:ua,parsed:Wo,parse:te({in:FormData,morphs:t=>{const e={};for(const[r,n]of t)if(r in e){const i=e[r];typeof i=="string"||i instanceof Mn.FileConstructor?e[r]=[i,n]:i.push(n)}else e[r]=n;return e},declaredOut:Wo})},{name:"FormData"}),Fg=Y.module({Int8:["instanceof",Int8Array],Uint8:["instanceof",Uint8Array],Uint8Clamped:["instanceof",Uint8ClampedArray],Int16:["instanceof",Int16Array],Uint16:["instanceof",Uint16Array],Int32:["instanceof",Int32Array],Uint32:["instanceof",Uint32Array],Float32:["instanceof",Float32Array],Float64:["instanceof",Float64Array],BigInt64:["instanceof",BigInt64Array],BigUint64:["instanceof",BigUint64Array]},{name:"TypedArray"}),Ug={Boolean:1,Number:1,String:1},Vg=Y.module({...ee({...Pc,...Cc},(t,e)=>t in Ug?[]:[t,["instanceof",e]]),Array:Tg,TypedArray:Fg,FormData:qg}),jg=te({domain:{domain:"number",meta:"a number representing a Unix timestamp"},divisor:{rule:1,meta:"an integer representing a Unix timestamp"},min:{rule:-864e13,meta:"a Unix timestamp after -8640000000000000"},max:{rule:864e13,meta:"a Unix timestamp before 8640000000000000"},meta:"an integer representing a safe Unix timestamp"}),Kg=te({domain:"number",divisor:1}),fd=Y.module({root:F.number,integer:Kg,epoch:jg,safe:te({domain:{domain:"number",numberAllowsNaN:!1},min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER}),NaN:["===",Number.NaN],Infinity:["===",Number.POSITIVE_INFINITY],NegativeInfinity:["===",Number.NEGATIVE_INFINITY]},{name:"number"}),re=(t,e,r)=>{const n={domain:"string",pattern:{rule:t.source,flags:t.flags,meta:e}};return r&&(n.meta={format:r}),Ca("intersection",n)},Yo=re(Li,"a well-formed integer string"),pd=Y.module({root:Yo,parse:te({in:Yo,morphs:(t,e)=>{const r=Number.parseInt(t);return Number.isSafeInteger(r)?r:e.error("an integer in the range Number.MIN_SAFE_INTEGER to Number.MAX_SAFE_INTEGER")},declaredOut:F.integer})},{name:"string.integer"}),Hg=re(/^[\dA-Fa-f]+$/,"hex characters only"),zg=Y.module({root:re(/^(?:[\d+/A-Za-z]{4})*(?:[\d+/A-Za-z]{2}==|[\d+/A-Za-z]{3}=)?$/,"base64-encoded"),url:re(/^(?:[\w-]{4})*(?:[\w-]{2}(?:==|%3D%3D)?|[\w-]{3}(?:=|%3D)?)?$/,"base64url-encoded")},{name:"string.base64"}),Jo=re(/^[A-Z].*$/,"capitalized"),Gg=Y.module({root:te({in:"string",morphs:t=>t.charAt(0).toUpperCase()+t.slice(1),declaredOut:Jo}),preformatted:Jo},{name:"string.capitalize"}),Wg=t=>{const e=t.replace(/[ -]+/g,"");let r=0,n,i,s=!1;for(let o=e.length-1;o>=0;o--)n=e.substring(o,o+1),i=Number.parseInt(n,10),s?(i*=2,r+=i>=10?i%10+1:i):r+=i,s=!s;return!!(r%10===0&&e)},Yg=/^(?:4\d{12}(?:\d{3,6})?|5[1-5]\d{14}|(222[1-9]|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}|6(?:011|5\d\d)\d{12,15}|3[47]\d{13}|3(?:0[0-5]|[68]\d)\d{11}|(?:2131|1800|35\d{3})\d{11}|6[27]\d{14}|^(81\d{14,17}))$/,Jg=te({domain:"string",pattern:{meta:"a credit card number",rule:Yg.source},predicate:{meta:"a credit card number",predicate:Wg}}),Zg=/^([+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))(T((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([,.]\d+(?!:))?)?(\17[0-5]\d([,.]\d+)?)?([Zz]|([+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,Xg=t=>!Number.isNaN(new Date(t).valueOf()),Zo=te({domain:"string",predicate:{meta:"a parsable date",predicate:Xg}}).assertHasKind("intersection"),Xo=pd.root.internal.narrow((t,e)=>{const r=Number.parseInt(t),n=fd.epoch(r);return n instanceof lr?(e.errors.merge(n),!1):!0}).configure({description:"an integer string representing a safe Unix timestamp"},"self").assertHasKind("intersection"),Qg=Y.module({root:Xo,parse:te({in:Xo,morphs:t=>new Date(t),declaredOut:F.Date})},{name:"string.date.epoch"}),Qo=re(Zg,"an ISO 8601 (YYYY-MM-DDTHH:mm:ss.sssZ) date").internal.assertHasKind("intersection"),e0=Y.module({root:Qo,parse:te({in:Qo,morphs:t=>new Date(t),declaredOut:F.Date})},{name:"string.date.iso"}),t0=Y.module({root:Zo,parse:te({declaredIn:Zo,in:"string",morphs:(t,e)=>{const r=new Date(t);return Number.isNaN(r.valueOf())?e.error("a parsable date"):r},declaredOut:F.Date}),iso:e0,epoch:Qg},{name:"string.date"}),r0=re(/^[\w%+.-]+@[\d.A-Za-z-]+\.[A-Za-z]{2,}$/,"an email address","email"),eu="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",br=`(${eu}[.]){3}${eu}`,n0=new RegExp(`^${br}$`),le="(?:[0-9a-fA-F]{1,4})",i0=new RegExp(`^((?:${le}:){7}(?:${le}|:)|(?:${le}:){6}(?:${br}|:${le}|:)|(?:${le}:){5}(?::${br}|(:${le}){1,2}|:)|(?:${le}:){4}(?:(:${le}){0,1}:${br}|(:${le}){1,3}|:)|(?:${le}:){3}(?:(:${le}){0,2}:${br}|(:${le}){1,4}|:)|(?:${le}:){2}(?:(:${le}){0,3}:${br}|(:${le}){1,5}|:)|(?:${le}:){1}(?:(:${le}){0,4}:${br}|(:${le}){1,6}|:)|(?::((?::${le}){0,5}:${br}|(?::${le}){1,7}|:)))(%[0-9a-zA-Z.]{1,})?$`),s0=Y.module({root:["v4 | v6","@","an IP address"],v4:re(n0,"an IPv4 address","ipv4"),v6:re(i0,"an IPv6 address","ipv6")},{name:"string.ip"}),en="a JSON string",md=t=>{if(!(t instanceof SyntaxError))throw t;return`must be ${en} (${t})`},a0=te({meta:en,domain:"string",predicate:{meta:en,predicate:(t,e)=>{try{return JSON.parse(t),!0}catch(r){return e.reject({code:"predicate",expected:en,problem:md(r)})}}}}),o0=(t,e)=>{if(t.length===0)return e.error({code:"predicate",expected:en,actual:"empty"});try{return JSON.parse(t)}catch(r){return e.error({code:"predicate",expected:en,problem:md(r)})}},u0=Y.module({root:a0,parse:te({meta:"safe JSON string parser",in:"string",morphs:o0,declaredOut:F.jsonObject})},{name:"string.json"}),tu=re(/^[a-z]*$/,"only lowercase letters"),c0=Y.module({root:te({in:"string",morphs:t=>t.toLowerCase(),declaredOut:tu}),preformatted:tu},{name:"string.lower"}),gd=["NFC","NFD","NFKC","NFKD"],Ln=ee(gd,(t,e)=>[e,te({domain:"string",predicate:r=>r.normalize(e)===r,meta:`${e}-normalized unicode`})]),ss=ee(gd,(t,e)=>[e,te({in:"string",morphs:r=>r.normalize(e),declaredOut:Ln[e]})]),l0=Y.module({root:ss.NFC,preformatted:Ln.NFC},{name:"string.normalize.NFC"}),d0=Y.module({root:ss.NFD,preformatted:Ln.NFD},{name:"string.normalize.NFD"}),h0=Y.module({root:ss.NFKC,preformatted:Ln.NFKC},{name:"string.normalize.NFKC"}),f0=Y.module({root:ss.NFKD,preformatted:Ln.NFKD},{name:"string.normalize.NFKD"}),p0=Y.module({root:"NFC",NFC:l0,NFD:d0,NFKC:h0,NFKD:f0},{name:"string.normalize"}),ru=re(zs,"a well-formed numeric string"),m0=Y.module({root:ru,parse:te({in:ru,morphs:t=>Number.parseFloat(t),declaredOut:F.number})},{name:"string.numeric"}),nu="a regex pattern",g0=te({domain:"string",predicate:{meta:nu,predicate:(t,e)=>{try{return new RegExp(t),!0}catch(r){return e.reject({code:"predicate",expected:nu,problem:String(r)})}}},meta:{format:"regex"}}),y0=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[A-Za-z-][\dA-Za-z-]*)(?:\.(?:0|[1-9]\d*|\d*[A-Za-z-][\dA-Za-z-]*))*))?(?:\+([\dA-Za-z-]+(?:\.[\dA-Za-z-]+)*))?$/,b0=re(y0,"a semantic version (see https://semver.org/)"),iu=re(/^\S.*\S$|^\S?$/,"trimmed"),x0=Y.module({root:te({in:"string",morphs:t=>t.trim(),declaredOut:iu}),preformatted:iu},{name:"string.trim"}),su=re(/^[A-Z]*$/,"only uppercase letters"),v0=Y.module({root:te({in:"string",morphs:t=>t.toUpperCase(),declaredOut:su}),preformatted:su},{name:"string.upper"}),w0=t=>URL.canParse(t),au=te({domain:"string",predicate:{meta:"a URL string",predicate:w0},meta:{format:"uri"}}),k0=Y.module({root:au,parse:te({declaredIn:au,in:"string",morphs:(t,e)=>{try{return new URL(t)}catch{return e.error("a URL string")}},declaredOut:te(URL)})},{name:"string.url"}),S0=Y.module({root:["versioned | nil | max","@",{description:"a UUID",format:"uuid"}],"#nil":"'00000000-0000-0000-0000-000000000000'","#max":"'ffffffff-ffff-ffff-ffff-ffffffffffff'","#versioned":/[\da-f]{8}-[\da-f]{4}-[1-8][\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}/i,v1:re(/^[\da-f]{8}-[\da-f]{4}-1[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv1"),v2:re(/^[\da-f]{8}-[\da-f]{4}-2[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv2"),v3:re(/^[\da-f]{8}-[\da-f]{4}-3[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv3"),v4:re(/^[\da-f]{8}-[\da-f]{4}-4[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv4"),v5:re(/^[\da-f]{8}-[\da-f]{4}-5[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv5"),v6:re(/^[\da-f]{8}-[\da-f]{4}-6[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv6"),v7:re(/^[\da-f]{8}-[\da-f]{4}-7[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv7"),v8:re(/^[\da-f]{8}-[\da-f]{4}-8[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}$/i,"a UUIDv8")},{name:"string.uuid"}),_0=Y.module({root:F.string,alpha:re(/^[A-Za-z]*$/,"only letters"),alphanumeric:re(/^[\dA-Za-z]*$/,"only letters and digits 0-9"),hex:Hg,base64:zg,capitalize:Gg,creditCard:Jg,date:t0,digits:re(/^\d*$/,"only digits 0-9"),email:r0,integer:pd,ip:s0,json:u0,lower:c0,normalize:p0,numeric:m0,regex:g0,semver:b0,trim:x0,upper:v0,url:k0,uuid:S0},{name:"string"}),I0=Y.module({bigint:F.bigint,boolean:F.boolean,false:F.false,never:F.never,null:F.null,number:F.number,object:F.object,string:F.string,symbol:F.symbol,true:F.true,unknown:F.unknown,undefined:F.undefined}),A0=Y.module({root:F.unknown,any:F.unknown},{name:"unknown"}),E0=Y.module({root:F.jsonObject,stringify:Ca("morph",{in:F.jsonObject,morphs:t=>JSON.stringify(t),declaredOut:F.string})},{name:"object.json"}),O0=Y.module({root:F.object,json:E0},{name:"object"});class P0 extends er{description='instantiate an object from an index signature and corresponding value type like `Record("string", "number")`'}const M0=fr(["K",F.key],"V")(t=>({domain:"object",index:{signature:t.K,value:t.V}}),P0);class C0 extends er{description='pick a set of properties from an object like `Pick(User, "name | age")`'}const N0=fr(["T",F.object],["K",F.key])(t=>t.T.pick(t.K),C0);class $0 extends er{description='omit a set of properties from an object like `Omit(User, "age")`'}const D0=fr(["T",F.object],["K",F.key])(t=>t.T.omit(t.K),$0);class R0 extends er{description="make all named properties of an object optional like `Partial(User)`"}const L0=fr(["T",F.object])(t=>t.T.partial(),R0);class T0 extends er{description="make all named properties of an object required like `Required(User)`"}const B0=fr(["T",F.object])(t=>t.T.required(),T0);class q0 extends er{description='exclude branches of a union like `Exclude("boolean", "true")`'}const F0=fr("T","U")(t=>t.T.exclude(t.U),q0);class U0 extends er{description='extract branches of a union like `Extract("0 | false | 1", "number")`'}const V0=fr("T","U")(t=>t.T.extract(t.U),U0),j0=Y.module({Exclude:F0,Extract:V0,Omit:D0,Partial:L0,Pick:N0,Record:M0,Required:B0}),Er=Da({...I0,...j0,...Vg,...Dg,string:_0,number:fd,object:O0,unknown:A0},{prereducedAliases:!0,name:"ark"}),Ue=Er.export();Object.assign(An.ambient,Ue);An.typeAttachments={string:Ue.string.root,number:Ue.number.root,bigint:Ue.bigint,boolean:Ue.boolean,symbol:Ue.symbol,undefined:Ue.undefined,null:Ue.null,object:Ue.object.root,unknown:Ue.unknown.root,false:Ue.false,true:Ue.true,never:Ue.never,arrayIndex:Ue.Array.index,Key:Ue.Key,Record:Ue.Record,Array:Ue.Array.root,Date:Ue.Date};const S=Object.assign(Er.type,An.typeAttachments),Qx=Er.match;Er.fn;Er.generic;Er.schema;Er.define;Er.declare;const K0={js:{fr:()=>ro(()=>import("./CQ-kVGeC.js"),[],import.meta.url),en:()=>ro(()=>import("./DAoMvkoQ.js"),[],import.meta.url)}},H0=(t,e)=>K0[t][e](),z0=["js"],G0="js",W0=Ih(G0,H0,z0);function ev(t,e,r=n=>n===1?0:1){const n=r(t);return e[n]?.replace("#",Intl.NumberFormat().format(t))}function tv(t,e=0,{pad:r="none",length:n}={}){let i=(t*100).toFixed(e);return e>0&&(i=i.replace(/\.?0+$/,"")),r!=="none"&&(i=i.padStart(n??2+e,r==="nbsp"?" ":"0")),i+"%"}function rv(t){const[e,r]=t.split("/",2);let n=r.replace(/^x-/,"");return["image","video","audio"].includes(e)&&(n=n.toUpperCase()),n}function Y0(t,e=""){const n=W0("js")(85);let i=t?.toString()||n;for(t instanceof Error&&("message"in t&&t.message&&(i=t.message||n),"cause"in t&&t.cause&&(i=Y0(t.cause)));i.startsWith("Error: ");)i=i.slice(7);return e?`${e}: ${i}`:i}function J0(){return navigator.language.split("-")[0]==="fr"?"fr":"en"}function nv(t){return t&&t.charAt(0).toUpperCase()+t.slice(1)}function iv(t,e="short"){const r=t<1e3?0:t<1e6?3:t<1e9?6:t<1e12?9:12,n=new Intl.NumberFormat(void 0,{style:"unit",unitDisplay:e,unit:{0:"byte",3:"kilobyte",6:"megabyte",9:"gigabyte",12:"terabyte"}[r]}),i=t/10**r,s=i>10?0:i>1?1:2,o=Math.round(i*10**s)/10**s;return n.format(o)}const yd=6048e5,Z0=864e5,X0=6e4,Q0=36e5,e2=1e3,sv=43200,av=1440,ou=Symbol.for("constructDateFrom");function je(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&ou in t?t[ou](e):t instanceof Date?new t.constructor(e):new Date(e)}function he(t,e){return je(e||t,t)}function bd(t,e,r){const n=he(t,r?.in);return isNaN(e)?je(r?.in||t,NaN):(e&&n.setDate(n.getDate()+e),n)}let xd={};function hn(){return xd}function ov(t){xd=t}function _r(t,e){const r=hn(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=he(t,e?.in),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function on(t,e){return _r(t,{...e,weekStartsOn:1})}function vd(t,e){const r=he(t,e?.in),n=r.getFullYear(),i=je(r,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const s=on(i),o=je(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const u=on(o);return r.getTime()>=s.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function Ki(t){const e=he(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function t2(t,...e){const r=je.bind(null,t||e.find(n=>typeof n=="object"));return e.map(r)}function uu(t,e){const r=he(t,e?.in);return r.setHours(0,0,0,0),r}function r2(t,e,r){const[n,i]=t2(r?.in,t,e),s=uu(n),o=uu(i),u=+s-Ki(s),l=+o-Ki(o);return Math.round((u-l)/Z0)}function n2(t,e){const r=vd(t,e),n=je(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),on(n)}function i2(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function wd(t){return!(!i2(t)&&typeof t!="number"||isNaN(+he(t)))}function s2(t,e){const r=he(t,e?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const a2={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},o2=(t,e,r)=>{let n;const i=a2[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Ps(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const u2={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},c2={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},l2={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},d2={date:Ps({formats:u2,defaultWidth:"full"}),time:Ps({formats:c2,defaultWidth:"full"}),dateTime:Ps({formats:l2,defaultWidth:"full"})},h2={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},f2=(t,e,r,n)=>h2[t];function fn(t){return(e,r)=>{const n=r?.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,u=r?.width?String(r.width):o;i=t.formattingValues[u]||t.formattingValues[o]}else{const o=t.defaultWidth,u=r?.width?String(r.width):t.defaultWidth;i=t.values[u]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const p2={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},m2={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},g2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},y2={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},b2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},x2={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},v2=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},w2={ordinalNumber:v2,era:fn({values:p2,defaultWidth:"wide"}),quarter:fn({values:m2,defaultWidth:"wide",argumentCallback:t=>t-1}),month:fn({values:g2,defaultWidth:"wide"}),day:fn({values:y2,defaultWidth:"wide"}),dayPeriod:fn({values:b2,defaultWidth:"wide",formattingValues:x2,defaultFormattingWidth:"wide"})};function pn(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],u=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(u)?S2(u,p=>p.test(o)):k2(u,p=>p.test(o));let d;d=t.valueCallback?t.valueCallback(l):l,d=r.valueCallback?r.valueCallback(d):d;const f=e.slice(o.length);return{value:d,rest:f}}}function k2(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function S2(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function _2(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const u=e.slice(i.length);return{value:o,rest:u}}}const I2=/^(\d+)(th|st|nd|rd)?/i,A2=/\d+/i,E2={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},O2={any:[/^b/i,/^(a|c)/i]},P2={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},M2={any:[/1/i,/2/i,/3/i,/4/i]},C2={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},N2={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$2={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},D2={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},R2={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},L2={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},T2={ordinalNumber:_2({matchPattern:I2,parsePattern:A2,valueCallback:t=>parseInt(t,10)}),era:pn({matchPatterns:E2,defaultMatchWidth:"wide",parsePatterns:O2,defaultParseWidth:"any"}),quarter:pn({matchPatterns:P2,defaultMatchWidth:"wide",parsePatterns:M2,defaultParseWidth:"any",valueCallback:t=>t+1}),month:pn({matchPatterns:C2,defaultMatchWidth:"wide",parsePatterns:N2,defaultParseWidth:"any"}),day:pn({matchPatterns:$2,defaultMatchWidth:"wide",parsePatterns:D2,defaultParseWidth:"any"}),dayPeriod:pn({matchPatterns:R2,defaultMatchWidth:"any",parsePatterns:L2,defaultParseWidth:"any"})},kd={code:"en-US",formatDistance:o2,formatLong:d2,formatRelative:f2,localize:w2,match:T2,options:{weekStartsOn:0,firstWeekContainsDate:1}};function B2(t,e){const r=he(t,e?.in);return r2(r,s2(r))+1}function Sd(t,e){const r=he(t,e?.in),n=+on(r)-+n2(r);return Math.round(n/yd)+1}function Ra(t,e){const r=he(t,e?.in),n=r.getFullYear(),i=hn(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=je(e?.in||t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const u=_r(o,e),l=je(e?.in||t,0);l.setFullYear(n,0,s),l.setHours(0,0,0,0);const d=_r(l,e);return+r>=+u?n+1:+r>=+d?n:n-1}function q2(t,e){const r=hn(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=Ra(t,e),s=je(e?.in||t,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),_r(s,e)}function _d(t,e){const r=he(t,e?.in),n=+_r(r,e)-+q2(r,e);return Math.round(n/yd)+1}function Z(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const yr={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Z(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Z(r+1,2)},d(t,e){return Z(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Z(t.getHours()%12||12,e.length)},H(t,e){return Z(t.getHours(),e.length)},m(t,e){return Z(t.getMinutes(),e.length)},s(t,e){return Z(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return Z(i,e.length)}},Gr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cu={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return yr.y(t,e)},Y:function(t,e,r,n){const i=Ra(t,n),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Z(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):Z(s,e.length)},R:function(t,e){const r=vd(t);return Z(r,e.length)},u:function(t,e){const r=t.getFullYear();return Z(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Z(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Z(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return yr.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Z(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=_d(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):Z(i,e.length)},I:function(t,e,r){const n=Sd(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Z(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):yr.d(t,e)},D:function(t,e,r){const n=B2(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Z(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Z(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Z(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Z(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=Gr.noon:n===0?i=Gr.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=Gr.evening:n>=12?i=Gr.afternoon:n>=4?i=Gr.morning:i=Gr.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return yr.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):yr.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Z(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Z(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):yr.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):yr.s(t,e)},S:function(t,e){return yr.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return du(n);case"XXXX":case"XX":return Dr(n);case"XXXXX":case"XXX":default:return Dr(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return du(n);case"xxxx":case"xx":return Dr(n);case"xxxxx":case"xxx":default:return Dr(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+lu(n,":");case"OOOO":default:return"GMT"+Dr(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+lu(n,":");case"zzzz":default:return"GMT"+Dr(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return Z(n,e.length)},T:function(t,e,r){return Z(+t,e.length)}};function lu(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+e+Z(s,2)}function du(t,e){return t%60===0?(t>0?"-":"+")+Z(Math.abs(t)/60,2):Dr(t,e)}function Dr(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Z(Math.trunc(n/60),2),s=Z(n%60,2);return r+i+e+s}const hu=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Id=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},F2=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return hu(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",hu(n,e)).replace("{{time}}",Id(i,e))},ca={p:Id,P:F2},U2=/^D+$/,V2=/^Y+$/,j2=["D","DD","YY","YYYY"];function Ad(t){return U2.test(t)}function Ed(t){return V2.test(t)}function la(t,e,r){const n=K2(t,e,r);if(console.warn(n),j2.includes(t))throw new RangeError(n)}function K2(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const H2=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,z2=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,G2=/^'([^]*?)'?$/,W2=/''/g,Y2=/[a-zA-Z]/;function $r(t,e,r){const n=hn(),i=n.locale??kd,s=n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,u=he(t,r?.in);if(!wd(u))throw new RangeError("Invalid time value");let l=e.match(z2).map(f=>{const p=f[0];if(p==="p"||p==="P"){const h=ca[p];return h(f,i.formatLong)}return f}).join("").match(H2).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const p=f[0];if(p==="'")return{isToken:!1,value:J2(f)};if(cu[p])return{isToken:!0,value:f};if(p.match(Y2))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:f}});i.localize.preprocessor&&(l=i.localize.preprocessor(u,l));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(f=>{if(!f.isToken)return f.value;const p=f.value;(Ed(p)||Ad(p))&&la(p,e,String(t));const h=cu[p[0]];return h(u,p,i.localize,d)}).join("")}function J2(t){const e=t.match(G2);return e?e[1].replace(W2,"'"):t}function Z2(){return Object.assign({},hn())}function X2(t,e){const r=he(t,e?.in).getDay();return r===0?7:r}function Q2(t,e){const r=ey(e)?new e(0):je(e,0);return r.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),r.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),r}function ey(t){return typeof t=="function"&&t.prototype?.constructor===t}const ty=10;class Od{subPriority=0;validate(e,r){return!0}}class ry extends Od{constructor(e,r,n,i,s){super(),this.value=e,this.validateValue=r,this.setValue=n,this.priority=i,s&&(this.subPriority=s)}validate(e,r){return this.validateValue(e,this.value,r)}set(e,r,n){return this.setValue(e,r,this.value,n)}}class ny extends Od{priority=ty;subPriority=-1;constructor(e,r){super(),this.context=e||(n=>je(r,n))}set(e,r){return r.timestampIsSet?e:je(e,Q2(e,this.context))}}class J{run(e,r,n,i){const s=this.parse(e,r,n,i);return s?{setter:new ry(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,r,n){return!0}}class iy extends J{priority=140;parse(e,r,n){switch(r){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,r,n){return r.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const oe={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Jt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ue(t,e){return t&&{value:e(t.value),rest:t.rest}}function ne(t,e){const r=e.match(t);return r?{value:parseInt(r[0],10),rest:e.slice(r[0].length)}:null}function Zt(t,e){const r=e.match(t);if(!r)return null;if(r[0]==="Z")return{value:0,rest:e.slice(1)};const n=r[1]==="+"?1:-1,i=r[2]?parseInt(r[2],10):0,s=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:n*(i*Q0+s*X0+o*e2),rest:e.slice(r[0].length)}}function Pd(t){return ne(oe.anyDigitsSigned,t)}function se(t,e){switch(t){case 1:return ne(oe.singleDigit,e);case 2:return ne(oe.twoDigits,e);case 3:return ne(oe.threeDigits,e);case 4:return ne(oe.fourDigits,e);default:return ne(new RegExp("^\\d{1,"+t+"}"),e)}}function Hi(t,e){switch(t){case 1:return ne(oe.singleDigitSigned,e);case 2:return ne(oe.twoDigitsSigned,e);case 3:return ne(oe.threeDigitsSigned,e);case 4:return ne(oe.fourDigitsSigned,e);default:return ne(new RegExp("^-?\\d{1,"+t+"}"),e)}}function La(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Md(t,e){const r=e>0,n=r?e:1-e;let i;if(n<=50)i=t||100;else{const s=n+50,o=Math.trunc(s/100)*100,u=t>=s%100;i=t+o-(u?100:0)}return r?i:1-i}function Cd(t){return t%400===0||t%4===0&&t%100!==0}class sy extends J{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,r,n){const i=s=>({year:s,isTwoDigitYear:r==="yy"});switch(r){case"y":return ue(se(4,e),i);case"yo":return ue(n.ordinalNumber(e,{unit:"year"}),i);default:return ue(se(r.length,e),i)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,n){const i=e.getFullYear();if(n.isTwoDigitYear){const o=Md(n.year,i);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}const s=!("era"in r)||r.era===1?n.year:1-n.year;return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}}class ay extends J{priority=130;parse(e,r,n){const i=s=>({year:s,isTwoDigitYear:r==="YY"});switch(r){case"Y":return ue(se(4,e),i);case"Yo":return ue(n.ordinalNumber(e,{unit:"year"}),i);default:return ue(se(r.length,e),i)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,n,i){const s=Ra(e,i);if(n.isTwoDigitYear){const u=Md(n.year,s);return e.setFullYear(u,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),_r(e,i)}const o=!("era"in r)||r.era===1?n.year:1-n.year;return e.setFullYear(o,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),_r(e,i)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class oy extends J{priority=130;parse(e,r){return Hi(r==="R"?4:r.length,e)}set(e,r,n){const i=je(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),on(i)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class uy extends J{priority=130;parse(e,r){return Hi(r==="u"?4:r.length,e)}set(e,r,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class cy extends J{priority=120;parse(e,r,n){switch(r){case"Q":case"QQ":return se(r.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=1&&r<=4}set(e,r,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class ly extends J{priority=120;parse(e,r,n){switch(r){case"q":case"qq":return se(r.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=1&&r<=4}set(e,r,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class dy extends J{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,r,n){const i=s=>s-1;switch(r){case"M":return ue(ne(oe.month,e),i);case"MM":return ue(se(2,e),i);case"Mo":return ue(n.ordinalNumber(e,{unit:"month"}),i);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=11}set(e,r,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}class hy extends J{priority=110;parse(e,r,n){const i=s=>s-1;switch(r){case"L":return ue(ne(oe.month,e),i);case"LL":return ue(se(2,e),i);case"Lo":return ue(n.ordinalNumber(e,{unit:"month"}),i);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=11}set(e,r,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function fy(t,e,r){const n=he(t,r?.in),i=_d(n,r)-e;return n.setDate(n.getDate()-i*7),he(n,r?.in)}class py extends J{priority=100;parse(e,r,n){switch(r){case"w":return ne(oe.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return se(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,n,i){return _r(fy(e,n,i),i)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function my(t,e,r){const n=he(t,r?.in),i=Sd(n,r)-e;return n.setDate(n.getDate()-i*7),n}class gy extends J{priority=100;parse(e,r,n){switch(r){case"I":return ne(oe.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return se(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,n){return on(my(e,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const yy=[31,28,31,30,31,30,31,31,30,31,30,31],by=[31,29,31,30,31,30,31,31,30,31,30,31];class xy extends J{priority=90;subPriority=1;parse(e,r,n){switch(r){case"d":return ne(oe.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return se(r.length,e)}}validate(e,r){const n=e.getFullYear(),i=Cd(n),s=e.getMonth();return i?r>=1&&r<=by[s]:r>=1&&r<=yy[s]}set(e,r,n){return e.setDate(n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class vy extends J{priority=90;subpriority=1;parse(e,r,n){switch(r){case"D":case"DD":return ne(oe.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return se(r.length,e)}}validate(e,r){const n=e.getFullYear();return Cd(n)?r>=1&&r<=366:r>=1&&r<=365}set(e,r,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function Ta(t,e,r){const n=hn(),i=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=he(t,r?.in),o=s.getDay(),l=(e%7+7)%7,d=7-i,f=e<0||e>6?e-(o+d)%7:(l+d)%7-(o+d)%7;return bd(s,f,r)}class wy extends J{priority=90;parse(e,r,n){switch(r){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,n,i){return e=Ta(e,n,i),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class ky extends J{priority=90;parse(e,r,n,i){const s=o=>{const u=Math.floor((o-1)/7)*7;return(o+i.weekStartsOn+6)%7+u};switch(r){case"e":case"ee":return ue(se(r.length,e),s);case"eo":return ue(n.ordinalNumber(e,{unit:"day"}),s);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,n,i){return e=Ta(e,n,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Sy extends J{priority=90;parse(e,r,n,i){const s=o=>{const u=Math.floor((o-1)/7)*7;return(o+i.weekStartsOn+6)%7+u};switch(r){case"c":case"cc":return ue(se(r.length,e),s);case"co":return ue(n.ordinalNumber(e,{unit:"day"}),s);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=6}set(e,r,n,i){return e=Ta(e,n,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function _y(t,e,r){const n=he(t,r?.in),i=X2(n,r),s=e-i;return bd(n,s,r)}class Iy extends J{priority=90;parse(e,r,n){const i=s=>s===0?7:s;switch(r){case"i":case"ii":return se(r.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return ue(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return ue(n.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return ue(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return ue(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,r){return r>=1&&r<=7}set(e,r,n){return e=_y(e,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Ay extends J{priority=80;parse(e,r,n){switch(r){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,n){return e.setHours(La(n),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class Ey extends J{priority=80;parse(e,r,n){switch(r){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,n){return e.setHours(La(n),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Oy extends J{priority=80;parse(e,r,n){switch(r){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,n){return e.setHours(La(n),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Py extends J{priority=70;parse(e,r,n){switch(r){case"h":return ne(oe.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return se(r.length,e)}}validate(e,r){return r>=1&&r<=12}set(e,r,n){const i=e.getHours()>=12;return i&&n<12?e.setHours(n+12,0,0,0):!i&&n===12?e.setHours(0,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class My extends J{priority=70;parse(e,r,n){switch(r){case"H":return ne(oe.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return se(r.length,e)}}validate(e,r){return r>=0&&r<=23}set(e,r,n){return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Cy extends J{priority=70;parse(e,r,n){switch(r){case"K":return ne(oe.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return se(r.length,e)}}validate(e,r){return r>=0&&r<=11}set(e,r,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Ny extends J{priority=70;parse(e,r,n){switch(r){case"k":return ne(oe.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return se(r.length,e)}}validate(e,r){return r>=1&&r<=24}set(e,r,n){const i=n<=24?n%24:n;return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class $y extends J{priority=60;parse(e,r,n){switch(r){case"m":return ne(oe.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return se(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,n){return e.setMinutes(n,0,0),e}incompatibleTokens=["t","T"]}class Dy extends J{priority=50;parse(e,r,n){switch(r){case"s":return ne(oe.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return se(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,n){return e.setSeconds(n,0),e}incompatibleTokens=["t","T"]}class Ry extends J{priority=30;parse(e,r){const n=i=>Math.trunc(i*Math.pow(10,-r.length+3));return ue(se(r.length,e),n)}set(e,r,n){return e.setMilliseconds(n),e}incompatibleTokens=["t","T"]}class Ly extends J{priority=10;parse(e,r){switch(r){case"X":return Zt(Jt.basicOptionalMinutes,e);case"XX":return Zt(Jt.basic,e);case"XXXX":return Zt(Jt.basicOptionalSeconds,e);case"XXXXX":return Zt(Jt.extendedOptionalSeconds,e);case"XXX":default:return Zt(Jt.extended,e)}}set(e,r,n){return r.timestampIsSet?e:je(e,e.getTime()-Ki(e)-n)}incompatibleTokens=["t","T","x"]}class Ty extends J{priority=10;parse(e,r){switch(r){case"x":return Zt(Jt.basicOptionalMinutes,e);case"xx":return Zt(Jt.basic,e);case"xxxx":return Zt(Jt.basicOptionalSeconds,e);case"xxxxx":return Zt(Jt.extendedOptionalSeconds,e);case"xxx":default:return Zt(Jt.extended,e)}}set(e,r,n){return r.timestampIsSet?e:je(e,e.getTime()-Ki(e)-n)}incompatibleTokens=["t","T","X"]}class By extends J{priority=40;parse(e){return Pd(e)}set(e,r,n){return[je(e,n*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class qy extends J{priority=20;parse(e){return Pd(e)}set(e,r,n){return[je(e,n),{timestampIsSet:!0}]}incompatibleTokens="*"}const Fy={G:new iy,y:new sy,Y:new ay,R:new oy,u:new uy,Q:new cy,q:new ly,M:new dy,L:new hy,w:new py,I:new gy,d:new xy,D:new vy,E:new wy,e:new ky,c:new Sy,i:new Iy,a:new Ay,b:new Ey,B:new Oy,h:new Py,H:new My,K:new Cy,k:new Ny,m:new $y,s:new Dy,S:new Ry,X:new Ly,x:new Ty,t:new By,T:new qy},Uy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Vy=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jy=/^'([^]*?)'?$/,Ky=/''/g,Hy=/\S/,zy=/[a-zA-Z]/;function Gy(t,e,r,n){const i=()=>je(r,NaN),s=Z2(),o=s.locale??kd,u=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,l=s.weekStartsOn??s.locale?.options?.weekStartsOn??0;if(!e)return t?i():he(r,n?.in);const d={firstWeekContainsDate:u,weekStartsOn:l,locale:o},f=[new ny(n?.in,r)],p=e.match(Vy).map(m=>{const b=m[0];if(b in ca){const x=ca[b];return x(m,o.formatLong)}return m}).join("").match(Uy),h=[];for(let m of p){Ed(m)&&la(m,e,t),Ad(m)&&la(m,e,t);const b=m[0],x=Fy[b];if(x){const{incompatibleTokens:w}=x;if(Array.isArray(w)){const v=h.find(k=>w.includes(k.token)||k.token===b);if(v)throw new RangeError(`The format string mustn't contain \`${v.fullToken}\` and \`${m}\` at the same time`)}else if(x.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${m}\` and any other token at the same time`);h.push({token:b,fullToken:m});const y=x.run(t,m,o.match,d);if(!y)return i();f.push(y.setter),t=y.rest}else{if(b.match(zy))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");if(m==="''"?m="'":b==="'"&&(m=Wy(m)),t.indexOf(m)===0)t=t.slice(m.length);else return i()}}if(t.length>0&&Hy.test(t))return i();const c=f.map(m=>m.priority).sort((m,b)=>b-m).filter((m,b,x)=>x.indexOf(m)===b).map(m=>f.filter(b=>b.priority===m).sort((b,x)=>x.subPriority-b.subPriority)).map(m=>m[0]);let a=he(r,n?.in);if(isNaN(+a))return i();const g={};for(const m of c){if(!m.validate(a,d))return i();const b=m.set(a,g,d);Array.isArray(b)?(a=b[0],Object.assign(g,b[1])):a=b}return a}function Wy(t){return t.match(jy)[1].replace(Ky,"'")}function Nd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Yy(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var ni={exports:{}},ii={exports:{}},jt={},Nt={},fu;function Dt(){if(fu)return Nt;fu=1,Nt.__esModule=!0,Nt.extend=i,Nt.indexOf=l,Nt.escapeExpression=d,Nt.isEmpty=f,Nt.createFrame=p,Nt.blockParams=h,Nt.appendContextPath=c;var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},e=/[&<>"'`=]/g,r=/[&<>"'`=]/;function n(a){return t[a]}function i(a){for(var g=1;g<arguments.length;g++)for(var m in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],m)&&(a[m]=arguments[g][m]);return a}var s=Object.prototype.toString;Nt.toString=s;var o=function(g){return typeof g=="function"};o(/x/)&&(Nt.isFunction=o=function(a){return typeof a=="function"&&s.call(a)==="[object Function]"}),Nt.isFunction=o;var u=Array.isArray||function(a){return a&&typeof a=="object"?s.call(a)==="[object Array]":!1};Nt.isArray=u;function l(a,g){for(var m=0,b=a.length;m<b;m++)if(a[m]===g)return m;return-1}function d(a){if(typeof a!="string"){if(a&&a.toHTML)return a.toHTML();if(a==null)return"";if(!a)return a+"";a=""+a}return r.test(a)?a.replace(e,n):a}function f(a){return!a&&a!==0?!0:!!(u(a)&&a.length===0)}function p(a){var g=i({},a);return g._parent=a,g}function h(a,g){return a.path=g,a}function c(a,g){return(a?a+".":"")+g}return Nt}var si={exports:{}},pu;function zt(){return pu||(pu=1,(function(t,e){e.__esModule=!0;var r=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function n(i,s){var o=s&&s.loc,u=void 0,l=void 0,d=void 0,f=void 0;o&&(u=o.start.line,l=o.end.line,d=o.start.column,f=o.end.column,i+=" - "+u+":"+d);for(var p=Error.prototype.constructor.call(this,i),h=0;h<r.length;h++)this[r[h]]=p[r[h]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{o&&(this.lineNumber=u,this.endLineNumber=l,Object.defineProperty?(Object.defineProperty(this,"column",{value:d,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:f,enumerable:!0})):(this.column=d,this.endColumn=f))}catch{}}n.prototype=new Error,e.default=n,t.exports=e.default})(si,si.exports)),si.exports}var mn={},ai={exports:{}},mu;function Jy(){return mu||(mu=1,(function(t,e){e.__esModule=!0;var r=Dt();e.default=function(n){n.registerHelper("blockHelperMissing",function(i,s){var o=s.inverse,u=s.fn;if(i===!0)return u(this);if(i===!1||i==null)return o(this);if(r.isArray(i))return i.length>0?(s.ids&&(s.ids=[s.name]),n.helpers.each(i,s)):o(this);if(s.data&&s.ids){var l=r.createFrame(s.data);l.contextPath=r.appendContextPath(s.data.contextPath,s.name),s={data:l}}return u(i,s)})},t.exports=e.default})(ai,ai.exports)),ai.exports}var oi={exports:{}},gu;function Zy(){return gu||(gu=1,(function(t,e){e.__esModule=!0;function r(o){return o&&o.__esModule?o:{default:o}}var n=Dt(),i=zt(),s=r(i);e.default=function(o){o.registerHelper("each",function(u,l){if(!l)throw new s.default("Must pass iterator to #each");var d=l.fn,f=l.inverse,p=0,h="",c=void 0,a=void 0;l.data&&l.ids&&(a=n.appendContextPath(l.data.contextPath,l.ids[0])+"."),n.isFunction(u)&&(u=u.call(this)),l.data&&(c=n.createFrame(l.data));function g(y,v,k){c&&(c.key=y,c.index=v,c.first=v===0,c.last=!!k,a&&(c.contextPath=a+y)),h=h+d(u[y],{data:c,blockParams:n.blockParams([u[y],y],[a+y,null])})}if(u&&typeof u=="object")if(n.isArray(u))for(var m=u.length;p<m;p++)p in u&&g(p,p,p===u.length-1);else if(typeof Symbol=="function"&&u[Symbol.iterator]){for(var b=[],x=u[Symbol.iterator](),w=x.next();!w.done;w=x.next())b.push(w.value);u=b;for(var m=u.length;p<m;p++)g(p,p,p===u.length-1)}else(function(){var y=void 0;Object.keys(u).forEach(function(v){y!==void 0&&g(y,p-1),y=v,p++}),y!==void 0&&g(y,p-1,!0)})();return p===0&&(h=f(this)),h})},t.exports=e.default})(oi,oi.exports)),oi.exports}var ui={exports:{}},yu;function Xy(){return yu||(yu=1,(function(t,e){e.__esModule=!0;function r(s){return s&&s.__esModule?s:{default:s}}var n=zt(),i=r(n);e.default=function(s){s.registerHelper("helperMissing",function(){if(arguments.length!==1)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default})(ui,ui.exports)),ui.exports}var ci={exports:{}},bu;function Qy(){return bu||(bu=1,(function(t,e){e.__esModule=!0;function r(o){return o&&o.__esModule?o:{default:o}}var n=Dt(),i=zt(),s=r(i);e.default=function(o){o.registerHelper("if",function(u,l){if(arguments.length!=2)throw new s.default("#if requires exactly one argument");return n.isFunction(u)&&(u=u.call(this)),!l.hash.includeZero&&!u||n.isEmpty(u)?l.inverse(this):l.fn(this)}),o.registerHelper("unless",function(u,l){if(arguments.length!=2)throw new s.default("#unless requires exactly one argument");return o.helpers.if.call(this,u,{fn:l.inverse,inverse:l.fn,hash:l.hash})})},t.exports=e.default})(ci,ci.exports)),ci.exports}var li={exports:{}},xu;function eb(){return xu||(xu=1,(function(t,e){e.__esModule=!0,e.default=function(r){r.registerHelper("log",function(){for(var n=[void 0],i=arguments[arguments.length-1],s=0;s<arguments.length-1;s++)n.push(arguments[s]);var o=1;i.hash.level!=null?o=i.hash.level:i.data&&i.data.level!=null&&(o=i.data.level),n[0]=o,r.log.apply(r,n)})},t.exports=e.default})(li,li.exports)),li.exports}var di={exports:{}},vu;function tb(){return vu||(vu=1,(function(t,e){e.__esModule=!0,e.default=function(r){r.registerHelper("lookup",function(n,i,s){return n&&s.lookupProperty(n,i)})},t.exports=e.default})(di,di.exports)),di.exports}var hi={exports:{}},wu;function rb(){return wu||(wu=1,(function(t,e){e.__esModule=!0;function r(o){return o&&o.__esModule?o:{default:o}}var n=Dt(),i=zt(),s=r(i);e.default=function(o){o.registerHelper("with",function(u,l){if(arguments.length!=2)throw new s.default("#with requires exactly one argument");n.isFunction(u)&&(u=u.call(this));var d=l.fn;if(n.isEmpty(u))return l.inverse(this);var f=l.data;return l.data&&l.ids&&(f=n.createFrame(l.data),f.contextPath=n.appendContextPath(l.data.contextPath,l.ids[0])),d(u,{data:f,blockParams:n.blockParams([u],[f&&f.contextPath])})})},t.exports=e.default})(hi,hi.exports)),hi.exports}var ku;function $d(){if(ku)return mn;ku=1,mn.__esModule=!0,mn.registerDefaultHelpers=g,mn.moveHelperToHooks=m;function t(b){return b&&b.__esModule?b:{default:b}}var e=Jy(),r=t(e),n=Zy(),i=t(n),s=Xy(),o=t(s),u=Qy(),l=t(u),d=eb(),f=t(d),p=tb(),h=t(p),c=rb(),a=t(c);function g(b){r.default(b),i.default(b),o.default(b),l.default(b),f.default(b),h.default(b),a.default(b)}function m(b,x,w){b.helpers[x]&&(b.hooks[x]=b.helpers[x],w||delete b.helpers[x])}return mn}var fi={},pi={exports:{}},Su;function nb(){return Su||(Su=1,(function(t,e){e.__esModule=!0;var r=Dt();e.default=function(n){n.registerDecorator("inline",function(i,s,o,u){var l=i;return s.partials||(s.partials={},l=function(d,f){var p=o.partials;o.partials=r.extend({},p,s.partials);var h=i(d,f);return o.partials=p,h}),s.partials[u.args[0]]=u.fn,l})},t.exports=e.default})(pi,pi.exports)),pi.exports}var _u;function ib(){if(_u)return fi;_u=1,fi.__esModule=!0,fi.registerDefaultDecorators=n;function t(i){return i&&i.__esModule?i:{default:i}}var e=nb(),r=t(e);function n(i){r.default(i)}return fi}var mi={exports:{}},Iu;function Dd(){return Iu||(Iu=1,(function(t,e){e.__esModule=!0;var r=Dt(),n={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(s){if(typeof s=="string"){var o=r.indexOf(n.methodMap,s.toLowerCase());o>=0?s=o:s=parseInt(s,10)}return s},log:function(s){if(s=n.lookupLevel(s),typeof console<"u"&&n.lookupLevel(n.level)<=s){var o=n.methodMap[s];console[o]||(o="log");for(var u=arguments.length,l=Array(u>1?u-1:0),d=1;d<u;d++)l[d-1]=arguments[d];console[o].apply(console,l)}}};e.default=n,t.exports=e.default})(mi,mi.exports)),mi.exports}var Wr={},gi={},Au;function sb(){if(Au)return gi;Au=1,gi.__esModule=!0,gi.createNewLookupObject=e;var t=Dt();function e(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.extend.apply(void 0,[Object.create(null)].concat(n))}return gi}var Eu;function Rd(){if(Eu)return Wr;Eu=1,Wr.__esModule=!0,Wr.createProtoAccessControl=s,Wr.resultIsAllowed=o,Wr.resetLoggedProperties=d;function t(f){return f&&f.__esModule?f:{default:f}}var e=sb(),r=Dd(),n=t(r),i=Object.create(null);function s(f){var p=Object.create(null);p.constructor=!1,p.__defineGetter__=!1,p.__defineSetter__=!1,p.__lookupGetter__=!1;var h=Object.create(null);return h.__proto__=!1,{properties:{whitelist:e.createNewLookupObject(h,f.allowedProtoProperties),defaultValue:f.allowProtoPropertiesByDefault},methods:{whitelist:e.createNewLookupObject(p,f.allowedProtoMethods),defaultValue:f.allowProtoMethodsByDefault}}}function o(f,p,h){return u(typeof f=="function"?p.methods:p.properties,h)}function u(f,p){return f.whitelist[p]!==void 0?f.whitelist[p]===!0:f.defaultValue!==void 0?f.defaultValue:(l(p),!1)}function l(f){i[f]!==!0&&(i[f]=!0,n.default.log("error",'Handlebars: Access has been denied to resolve the property "'+f+`" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`))}function d(){Object.keys(i).forEach(function(f){delete i[f]})}return Wr}var Ou;function Ba(){if(Ou)return jt;Ou=1,jt.__esModule=!0,jt.HandlebarsEnvironment=a;function t(m){return m&&m.__esModule?m:{default:m}}var e=Dt(),r=zt(),n=t(r),i=$d(),s=ib(),o=Dd(),u=t(o),l=Rd(),d="4.7.8";jt.VERSION=d;var f=8;jt.COMPILER_REVISION=f;var p=7;jt.LAST_COMPATIBLE_COMPILER_REVISION=p;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};jt.REVISION_CHANGES=h;var c="[object Object]";function a(m,b,x){this.helpers=m||{},this.partials=b||{},this.decorators=x||{},i.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}a.prototype={constructor:a,logger:u.default,log:u.default.log,registerHelper:function(b,x){if(e.toString.call(b)===c){if(x)throw new n.default("Arg not supported with multiple helpers");e.extend(this.helpers,b)}else this.helpers[b]=x},unregisterHelper:function(b){delete this.helpers[b]},registerPartial:function(b,x){if(e.toString.call(b)===c)e.extend(this.partials,b);else{if(typeof x>"u")throw new n.default('Attempting to register a partial called "'+b+'" as undefined');this.partials[b]=x}},unregisterPartial:function(b){delete this.partials[b]},registerDecorator:function(b,x){if(e.toString.call(b)===c){if(x)throw new n.default("Arg not supported with multiple decorators");e.extend(this.decorators,b)}else this.decorators[b]=x},unregisterDecorator:function(b){delete this.decorators[b]},resetLoggedPropertyAccesses:function(){l.resetLoggedProperties()}};var g=u.default.log;return jt.log=g,jt.createFrame=e.createFrame,jt.logger=u.default,jt}var yi={exports:{}},Pu;function ab(){return Pu||(Pu=1,(function(t,e){e.__esModule=!0;function r(n){this.string=n}r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},e.default=r,t.exports=e.default})(yi,yi.exports)),yi.exports}var ir={},bi={},Mu;function ob(){if(Mu)return bi;Mu=1,bi.__esModule=!0,bi.wrapHelper=t;function t(e,r){if(typeof e!="function")return e;var n=function(){var s=arguments[arguments.length-1];return arguments[arguments.length-1]=r(s),e.apply(this,arguments)};return n}return bi}var Cu;function ub(){if(Cu)return ir;Cu=1,ir.__esModule=!0,ir.checkRevision=f,ir.template=p,ir.wrapProgram=h,ir.resolvePartial=c,ir.invokePartial=a,ir.noop=g;function t(y){return y&&y.__esModule?y:{default:y}}function e(y){if(y&&y.__esModule)return y;var v={};if(y!=null)for(var k in y)Object.prototype.hasOwnProperty.call(y,k)&&(v[k]=y[k]);return v.default=y,v}var r=Dt(),n=e(r),i=zt(),s=t(i),o=Ba(),u=$d(),l=ob(),d=Rd();function f(y){var v=y&&y[0]||1,k=o.COMPILER_REVISION;if(!(v>=o.LAST_COMPATIBLE_COMPILER_REVISION&&v<=o.COMPILER_REVISION))if(v<o.LAST_COMPATIBLE_COMPILER_REVISION){var _=o.REVISION_CHANGES[k],E=o.REVISION_CHANGES[v];throw new s.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+_+") or downgrade your runtime to an older version ("+E+").")}else throw new s.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+y[1]+").")}function p(y,v){if(!v)throw new s.default("No environment passed to template");if(!y||!y.main)throw new s.default("Unknown template object: "+typeof y);y.main.decorator=y.main_d,v.VM.checkRevision(y.compiler);var k=y.compiler&&y.compiler[0]===7;function _(A,I,O){O.hash&&(I=n.extend({},I,O.hash),O.ids&&(O.ids[0]=!0)),A=v.VM.resolvePartial.call(this,A,I,O);var R=n.extend({},O,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),q=v.VM.invokePartial.call(this,A,I,R);if(q==null&&v.compile&&(O.partials[O.name]=v.compile(A,y.compilerOptions,v),q=O.partials[O.name](I,R)),q!=null){if(O.indent){for(var V=q.split(`
`),K=0,z=V.length;K<z&&!(!V[K]&&K+1===z);K++)V[K]=O.indent+V[K];q=V.join(`
`)}return q}else throw new s.default("The partial "+O.name+" could not be compiled when running in runtime-only mode")}var E={strict:function(I,O,R){if(!I||!(O in I))throw new s.default('"'+O+'" not defined in '+I,{loc:R});return E.lookupProperty(I,O)},lookupProperty:function(I,O){var R=I[O];if(R==null||Object.prototype.hasOwnProperty.call(I,O)||d.resultIsAllowed(R,E.protoAccessControl,O))return R},lookup:function(I,O){for(var R=I.length,q=0;q<R;q++){var V=I[q]&&E.lookupProperty(I[q],O);if(V!=null)return I[q][O]}},lambda:function(I,O){return typeof I=="function"?I.call(O):I},escapeExpression:n.escapeExpression,invokePartial:_,fn:function(I){var O=y[I];return O.decorator=y[I+"_d"],O},programs:[],program:function(I,O,R,q,V){var K=this.programs[I],z=this.fn(I);return O||V||q||R?K=h(this,I,z,O,R,q,V):K||(K=this.programs[I]=h(this,I,z)),K},data:function(I,O){for(;I&&O--;)I=I._parent;return I},mergeIfNeeded:function(I,O){var R=I||O;return I&&O&&I!==O&&(R=n.extend({},O,I)),R},nullContext:Object.seal({}),noop:v.VM.noop,compilerInfo:y.compiler};function D(A){var I=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],O=I.data;D._setup(I),!I.partial&&y.useData&&(O=m(A,O));var R=void 0,q=y.useBlockParams?[]:void 0;y.useDepths&&(I.depths?R=A!=I.depths[0]?[A].concat(I.depths):I.depths:R=[A]);function V(K){return""+y.main(E,K,E.helpers,E.partials,O,q,R)}return V=b(y.main,V,E,I.depths||[],O,q),V(A,I)}return D.isTop=!0,D._setup=function(A){if(A.partial)E.protoAccessControl=A.protoAccessControl,E.helpers=A.helpers,E.partials=A.partials,E.decorators=A.decorators,E.hooks=A.hooks;else{var I=n.extend({},v.helpers,A.helpers);x(I,E),E.helpers=I,y.usePartial&&(E.partials=E.mergeIfNeeded(A.partials,v.partials)),(y.usePartial||y.useDecorators)&&(E.decorators=n.extend({},v.decorators,A.decorators)),E.hooks={},E.protoAccessControl=d.createProtoAccessControl(A);var O=A.allowCallsToHelperMissing||k;u.moveHelperToHooks(E,"helperMissing",O),u.moveHelperToHooks(E,"blockHelperMissing",O)}},D._child=function(A,I,O,R){if(y.useBlockParams&&!O)throw new s.default("must pass block params");if(y.useDepths&&!R)throw new s.default("must pass parent depths");return h(E,A,y[A],I,0,O,R)},D}function h(y,v,k,_,E,D,A){function I(O){var R=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],q=A;return A&&O!=A[0]&&!(O===y.nullContext&&A[0]===null)&&(q=[O].concat(A)),k(y,O,y.helpers,y.partials,R.data||_,D&&[R.blockParams].concat(D),q)}return I=b(k,I,y,A,_,D),I.program=v,I.depth=A?A.length:0,I.blockParams=E||0,I}function c(y,v,k){return y?!y.call&&!k.name&&(k.name=y,y=k.partials[y]):k.name==="@partial-block"?y=k.data["partial-block"]:y=k.partials[k.name],y}function a(y,v,k){var _=k.data&&k.data["partial-block"];k.partial=!0,k.ids&&(k.data.contextPath=k.ids[0]||k.data.contextPath);var E=void 0;if(k.fn&&k.fn!==g&&(function(){k.data=o.createFrame(k.data);var D=k.fn;E=k.data["partial-block"]=function(I){var O=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return O.data=o.createFrame(O.data),O.data["partial-block"]=_,D(I,O)},D.partials&&(k.partials=n.extend({},k.partials,D.partials))})(),y===void 0&&E&&(y=E),y===void 0)throw new s.default("The partial "+k.name+" could not be found");if(y instanceof Function)return y(v,k)}function g(){return""}function m(y,v){return(!v||!("root"in v))&&(v=v?o.createFrame(v):{},v.root=y),v}function b(y,v,k,_,E,D){if(y.decorator){var A={};v=y.decorator(v,A,k,_&&_[0],E,D,_),n.extend(v,A)}return v}function x(y,v){Object.keys(y).forEach(function(k){var _=y[k];y[k]=w(_,v)})}function w(y,v){var k=v.lookupProperty;return l.wrapHelper(y,function(_){return n.extend({lookupProperty:k},_)})}return ir}var xi={exports:{}},Nu;function Ld(){return Nu||(Nu=1,(function(t,e){e.__esModule=!0,e.default=function(r){(function(){typeof globalThis!="object"&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__)})();var n=globalThis.Handlebars;r.noConflict=function(){return globalThis.Handlebars===r&&(globalThis.Handlebars=n),r}},t.exports=e.default})(xi,xi.exports)),xi.exports}var $u;function cb(){return $u||($u=1,(function(t,e){e.__esModule=!0;function r(x){return x&&x.__esModule?x:{default:x}}function n(x){if(x&&x.__esModule)return x;var w={};if(x!=null)for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(w[y]=x[y]);return w.default=x,w}var i=Ba(),s=n(i),o=ab(),u=r(o),l=zt(),d=r(l),f=Dt(),p=n(f),h=ub(),c=n(h),a=Ld(),g=r(a);function m(){var x=new s.HandlebarsEnvironment;return p.extend(x,s),x.SafeString=u.default,x.Exception=d.default,x.Utils=p,x.escapeExpression=p.escapeExpression,x.VM=c,x.template=function(w){return c.template(w,x)},x}var b=m();b.create=m,g.default(b),b.default=b,e.default=b,t.exports=e.default})(ii,ii.exports)),ii.exports}var vi={exports:{}},Du;function Td(){return Du||(Du=1,(function(t,e){e.__esModule=!0;var r={helpers:{helperExpression:function(i){return i.type==="SubExpression"||(i.type==="MustacheStatement"||i.type==="BlockStatement")&&!!(i.params&&i.params.length||i.hash)},scopedId:function(i){return/^\.|this\b/.test(i.original)},simpleId:function(i){return i.parts.length===1&&!r.helpers.scopedId(i)&&!i.depth}}};e.default=r,t.exports=e.default})(vi,vi.exports)),vi.exports}var Yr={},wi={exports:{}},Ru;function lb(){return Ru||(Ru=1,(function(t,e){e.__esModule=!0;var r=(function(){var n={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(u,l,d,f,p,h,c){var a=h.length-1;switch(p){case 1:return h[a-1];case 2:this.$=f.prepareProgram(h[a]);break;case 3:this.$=h[a];break;case 4:this.$=h[a];break;case 5:this.$=h[a];break;case 6:this.$=h[a];break;case 7:this.$=h[a];break;case 8:this.$=h[a];break;case 9:this.$={type:"CommentStatement",value:f.stripComment(h[a]),strip:f.stripFlags(h[a],h[a]),loc:f.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:h[a],value:h[a],loc:f.locInfo(this._$)};break;case 11:this.$=f.prepareRawBlock(h[a-2],h[a-1],h[a],this._$);break;case 12:this.$={path:h[a-3],params:h[a-2],hash:h[a-1]};break;case 13:this.$=f.prepareBlock(h[a-3],h[a-2],h[a-1],h[a],!1,this._$);break;case 14:this.$=f.prepareBlock(h[a-3],h[a-2],h[a-1],h[a],!0,this._$);break;case 15:this.$={open:h[a-5],path:h[a-4],params:h[a-3],hash:h[a-2],blockParams:h[a-1],strip:f.stripFlags(h[a-5],h[a])};break;case 16:this.$={path:h[a-4],params:h[a-3],hash:h[a-2],blockParams:h[a-1],strip:f.stripFlags(h[a-5],h[a])};break;case 17:this.$={path:h[a-4],params:h[a-3],hash:h[a-2],blockParams:h[a-1],strip:f.stripFlags(h[a-5],h[a])};break;case 18:this.$={strip:f.stripFlags(h[a-1],h[a-1]),program:h[a]};break;case 19:var g=f.prepareBlock(h[a-2],h[a-1],h[a],h[a],!1,this._$),m=f.prepareProgram([g],h[a-1].loc);m.chained=!0,this.$={strip:h[a-2].strip,program:m,chain:!0};break;case 20:this.$=h[a];break;case 21:this.$={path:h[a-1],strip:f.stripFlags(h[a-2],h[a])};break;case 22:this.$=f.prepareMustache(h[a-3],h[a-2],h[a-1],h[a-4],f.stripFlags(h[a-4],h[a]),this._$);break;case 23:this.$=f.prepareMustache(h[a-3],h[a-2],h[a-1],h[a-4],f.stripFlags(h[a-4],h[a]),this._$);break;case 24:this.$={type:"PartialStatement",name:h[a-3],params:h[a-2],hash:h[a-1],indent:"",strip:f.stripFlags(h[a-4],h[a]),loc:f.locInfo(this._$)};break;case 25:this.$=f.preparePartialBlock(h[a-2],h[a-1],h[a],this._$);break;case 26:this.$={path:h[a-3],params:h[a-2],hash:h[a-1],strip:f.stripFlags(h[a-4],h[a])};break;case 27:this.$=h[a];break;case 28:this.$=h[a];break;case 29:this.$={type:"SubExpression",path:h[a-3],params:h[a-2],hash:h[a-1],loc:f.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:h[a],loc:f.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:f.id(h[a-2]),value:h[a],loc:f.locInfo(this._$)};break;case 32:this.$=f.id(h[a-1]);break;case 33:this.$=h[a];break;case 34:this.$=h[a];break;case 35:this.$={type:"StringLiteral",value:h[a],original:h[a],loc:f.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(h[a]),original:Number(h[a]),loc:f.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:h[a]==="true",original:h[a]==="true",loc:f.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:f.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:f.locInfo(this._$)};break;case 40:this.$=h[a];break;case 41:this.$=h[a];break;case 42:this.$=f.preparePath(!0,h[a],this._$);break;case 43:this.$=f.preparePath(!1,h[a],this._$);break;case 44:h[a-2].push({part:f.id(h[a]),original:h[a],separator:h[a-1]}),this.$=h[a-2];break;case 45:this.$=[{part:f.id(h[a]),original:h[a]}];break;case 46:this.$=[];break;case 47:h[a-1].push(h[a]);break;case 48:this.$=[];break;case 49:h[a-1].push(h[a]);break;case 50:this.$=[];break;case 51:h[a-1].push(h[a]);break;case 58:this.$=[];break;case 59:h[a-1].push(h[a]);break;case 64:this.$=[];break;case 65:h[a-1].push(h[a]);break;case 70:this.$=[];break;case 71:h[a-1].push(h[a]);break;case 78:this.$=[];break;case 79:h[a-1].push(h[a]);break;case 82:this.$=[];break;case 83:h[a-1].push(h[a]);break;case 86:this.$=[];break;case 87:h[a-1].push(h[a]);break;case 90:this.$=[];break;case 91:h[a-1].push(h[a]);break;case 94:this.$=[];break;case 95:h[a-1].push(h[a]);break;case 98:this.$=[h[a]];break;case 99:h[a-1].push(h[a]);break;case 100:this.$=[h[a]];break;case 101:h[a-1].push(h[a]);break}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(u,l){throw new Error(u)},parse:function(u){var l=this,d=[0],f=[null],p=[],h=this.table,c="",a=0,g=0;this.lexer.setInput(u),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc>"u"&&(this.lexer.yylloc={});var m=this.lexer.yylloc;p.push(m);var b=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function x(){var R;return R=l.lexer.lex()||1,typeof R!="number"&&(R=l.symbols_[R]||R),R}for(var w,y,v,k,_={},E,D,A,I;;){if(y=d[d.length-1],this.defaultActions[y]?v=this.defaultActions[y]:((w===null||typeof w>"u")&&(w=x()),v=h[y]&&h[y][w]),typeof v>"u"||!v.length||!v[0]){var O="";{I=[];for(E in h[y])this.terminals_[E]&&E>2&&I.push("'"+this.terminals_[E]+"'");this.lexer.showPosition?O="Parse error on line "+(a+1)+`:
`+this.lexer.showPosition()+`
Expecting `+I.join(", ")+", got '"+(this.terminals_[w]||w)+"'":O="Parse error on line "+(a+1)+": Unexpected "+(w==1?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(O,{text:this.lexer.match,token:this.terminals_[w]||w,line:this.lexer.yylineno,loc:m,expected:I})}}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+w);switch(v[0]){case 1:d.push(w),f.push(this.lexer.yytext),p.push(this.lexer.yylloc),d.push(v[1]),w=null,g=this.lexer.yyleng,c=this.lexer.yytext,a=this.lexer.yylineno,m=this.lexer.yylloc;break;case 2:if(D=this.productions_[v[1]][1],_.$=f[f.length-D],_._$={first_line:p[p.length-(D||1)].first_line,last_line:p[p.length-1].last_line,first_column:p[p.length-(D||1)].first_column,last_column:p[p.length-1].last_column},b&&(_._$.range=[p[p.length-(D||1)].range[0],p[p.length-1].range[1]]),k=this.performAction.call(_,c,g,a,this.yy,v[1],f,p),typeof k<"u")return k;D&&(d=d.slice(0,-1*D*2),f=f.slice(0,-1*D),p=p.slice(0,-1*D)),d.push(this.productions_[v[1]][0]),f.push(_.$),p.push(_._$),A=h[d[d.length-2]][d[d.length-1]],d.push(A);break;case 3:return!0}}return!0}},i=(function(){var o={EOF:1,parseError:function(l,d){if(this.yy.parser)this.yy.parser.parseError(l,d);else throw new Error(l)},setInput:function(l){return this._input=l,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var l=this._input[0];this.yytext+=l,this.yyleng++,this.offset++,this.match+=l,this.matched+=l;var d=l.match(/(?:\r\n?|\n).*/g);return d?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),l},unput:function(l){var d=l.length,f=l.split(/(?:\r\n?|\n)/g);this._input=l+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-d-1),this.offset-=d;var p=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),f.length-1&&(this.yylineno-=f.length-1);var h=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:f?(f.length===p.length?this.yylloc.first_column:0)+p[p.length-f.length].length-f[0].length:this.yylloc.first_column-d},this.options.ranges&&(this.yylloc.range=[h[0],h[0]+this.yyleng-d]),this},more:function(){return this._more=!0,this},less:function(l){this.unput(this.match.slice(l))},pastInput:function(){var l=this.matched.substr(0,this.matched.length-this.match.length);return(l.length>20?"...":"")+l.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var l=this.match;return l.length<20&&(l+=this._input.substr(0,20-l.length)),(l.substr(0,20)+(l.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var l=this.pastInput(),d=new Array(l.length+1).join("-");return l+this.upcomingInput()+`
`+d+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var l,d,f,p,h;this._more||(this.yytext="",this.match="");for(var c=this._currentRules(),a=0;a<c.length&&(f=this._input.match(this.rules[c[a]]),!(f&&(!d||f[0].length>d[0].length)&&(d=f,p=a,!this.options.flex)));a++);return d?(h=d[0].match(/(?:\r\n?|\n).*/g),h&&(this.yylineno+=h.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:h?h[h.length-1].length-h[h.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+d[0].length},this.yytext+=d[0],this.match+=d[0],this.matches=d,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(d[0].length),this.matched+=d[0],l=this.performAction.call(this,this.yy,this,c[p],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),l||void 0):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var l=this.next();return typeof l<"u"?l:this.lex()},begin:function(l){this.conditionStack.push(l)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(l){this.begin(l)}};return o.options={},o.performAction=function(l,d,f,p){function h(c,a){return d.yytext=d.yytext.substring(c,d.yyleng-a+c)}switch(f){case 0:if(d.yytext.slice(-2)==="\\\\"?(h(0,1),this.begin("mu")):d.yytext.slice(-1)==="\\"?(h(0,1),this.begin("emu")):this.begin("mu"),d.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),this.conditionStack[this.conditionStack.length-1]==="raw"?15:(h(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(d.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return d.yytext=h(1,2).replace(/\\"/g,'"'),80;case 32:return d.yytext=h(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return d.yytext=d.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},o.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],o.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},o})();n.lexer=i;function s(){this.yy={}}return s.prototype=n,n.Parser=s,new s})();e.default=r,t.exports=e.default})(wi,wi.exports)),wi.exports}var ki={exports:{}},Si={exports:{}},Lu;function Bd(){return Lu||(Lu=1,(function(t,e){e.__esModule=!0;function r(d){return d&&d.__esModule?d:{default:d}}var n=zt(),i=r(n);function s(){this.parents=[]}s.prototype={constructor:s,mutating:!1,acceptKey:function(f,p){var h=this.accept(f[p]);if(this.mutating){if(h&&!s.prototype[h.type])throw new i.default('Unexpected node type "'+h.type+'" found when accepting '+p+" on "+f.type);f[p]=h}},acceptRequired:function(f,p){if(this.acceptKey(f,p),!f[p])throw new i.default(f.type+" requires "+p)},acceptArray:function(f){for(var p=0,h=f.length;p<h;p++)this.acceptKey(f,p),f[p]||(f.splice(p,1),p--,h--)},accept:function(f){if(f){if(!this[f.type])throw new i.default("Unknown type: "+f.type,f);this.current&&this.parents.unshift(this.current),this.current=f;var p=this[f.type](f);if(this.current=this.parents.shift(),!this.mutating||p)return p;if(p!==!1)return f}},Program:function(f){this.acceptArray(f.body)},MustacheStatement:o,Decorator:o,BlockStatement:u,DecoratorBlock:u,PartialStatement:l,PartialBlockStatement:function(f){l.call(this,f),this.acceptKey(f,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:o,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(f){this.acceptArray(f.pairs)},HashPair:function(f){this.acceptRequired(f,"value")}};function o(d){this.acceptRequired(d,"path"),this.acceptArray(d.params),this.acceptKey(d,"hash")}function u(d){o.call(this,d),this.acceptKey(d,"program"),this.acceptKey(d,"inverse")}function l(d){this.acceptRequired(d,"name"),this.acceptArray(d.params),this.acceptKey(d,"hash")}e.default=s,t.exports=e.default})(Si,Si.exports)),Si.exports}var Tu;function db(){return Tu||(Tu=1,(function(t,e){e.__esModule=!0;function r(f){return f&&f.__esModule?f:{default:f}}var n=Bd(),i=r(n);function s(){var f=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];this.options=f}s.prototype=new i.default,s.prototype.Program=function(f){var p=!this.options.ignoreStandalone,h=!this.isRootSeen;this.isRootSeen=!0;for(var c=f.body,a=0,g=c.length;a<g;a++){var m=c[a],b=this.accept(m);if(b){var x=o(c,a,h),w=u(c,a,h),y=b.openStandalone&&x,v=b.closeStandalone&&w,k=b.inlineStandalone&&x&&w;b.close&&l(c,a,!0),b.open&&d(c,a,!0),p&&k&&(l(c,a),d(c,a)&&m.type==="PartialStatement"&&(m.indent=/([ \t]+$)/.exec(c[a-1].original)[1])),p&&y&&(l((m.program||m.inverse).body),d(c,a)),p&&v&&(l(c,a),d((m.inverse||m.program).body))}}return f},s.prototype.BlockStatement=s.prototype.DecoratorBlock=s.prototype.PartialBlockStatement=function(f){this.accept(f.program),this.accept(f.inverse);var p=f.program||f.inverse,h=f.program&&f.inverse,c=h,a=h;if(h&&h.chained)for(c=h.body[0].program;a.chained;)a=a.body[a.body.length-1].program;var g={open:f.openStrip.open,close:f.closeStrip.close,openStandalone:u(p.body),closeStandalone:o((c||p).body)};if(f.openStrip.close&&l(p.body,null,!0),h){var m=f.inverseStrip;m.open&&d(p.body,null,!0),m.close&&l(c.body,null,!0),f.closeStrip.open&&d(a.body,null,!0),!this.options.ignoreStandalone&&o(p.body)&&u(c.body)&&(d(p.body),l(c.body))}else f.closeStrip.open&&d(p.body,null,!0);return g},s.prototype.Decorator=s.prototype.MustacheStatement=function(f){return f.strip},s.prototype.PartialStatement=s.prototype.CommentStatement=function(f){var p=f.strip||{};return{inlineStandalone:!0,open:p.open,close:p.close}};function o(f,p,h){p===void 0&&(p=f.length);var c=f[p-1],a=f[p-2];if(!c)return h;if(c.type==="ContentStatement")return(a||!h?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(c.original)}function u(f,p,h){p===void 0&&(p=-1);var c=f[p+1],a=f[p+2];if(!c)return h;if(c.type==="ContentStatement")return(a||!h?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(c.original)}function l(f,p,h){var c=f[p==null?0:p+1];if(!(!c||c.type!=="ContentStatement"||!h&&c.rightStripped)){var a=c.value;c.value=c.value.replace(h?/^\s+/:/^[ \t]*\r?\n?/,""),c.rightStripped=c.value!==a}}function d(f,p,h){var c=f[p==null?f.length-1:p-1];if(!(!c||c.type!=="ContentStatement"||!h&&c.leftStripped)){var a=c.value;return c.value=c.value.replace(h?/\s+$/:/[ \t]+$/,""),c.leftStripped=c.value!==a,c.leftStripped}}e.default=s,t.exports=e.default})(ki,ki.exports)),ki.exports}var Lt={},Bu;function hb(){if(Bu)return Lt;Bu=1,Lt.__esModule=!0,Lt.SourceLocation=i,Lt.id=s,Lt.stripFlags=o,Lt.stripComment=u,Lt.preparePath=l,Lt.prepareMustache=d,Lt.prepareRawBlock=f,Lt.prepareBlock=p,Lt.prepareProgram=h,Lt.preparePartialBlock=c;function t(a){return a&&a.__esModule?a:{default:a}}var e=zt(),r=t(e);function n(a,g){if(g=g.path?g.path.original:g,a.path.original!==g){var m={loc:a.path.loc};throw new r.default(a.path.original+" doesn't match "+g,m)}}function i(a,g){this.source=a,this.start={line:g.first_line,column:g.first_column},this.end={line:g.last_line,column:g.last_column}}function s(a){return/^\[.*\]$/.test(a)?a.substring(1,a.length-1):a}function o(a,g){return{open:a.charAt(2)==="~",close:g.charAt(g.length-3)==="~"}}function u(a){return a.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function l(a,g,m){m=this.locInfo(m);for(var b=a?"@":"",x=[],w=0,y=0,v=g.length;y<v;y++){var k=g[y].part,_=g[y].original!==k;if(b+=(g[y].separator||"")+k,!_&&(k===".."||k==="."||k==="this")){if(x.length>0)throw new r.default("Invalid path: "+b,{loc:m});k===".."&&w++}else x.push(k)}return{type:"PathExpression",data:a,depth:w,parts:x,original:b,loc:m}}function d(a,g,m,b,x,w){var y=b.charAt(3)||b.charAt(2),v=y!=="{"&&y!=="&",k=/\*/.test(b);return{type:k?"Decorator":"MustacheStatement",path:a,params:g,hash:m,escaped:v,strip:x,loc:this.locInfo(w)}}function f(a,g,m,b){n(a,m),b=this.locInfo(b);var x={type:"Program",body:g,strip:{},loc:b};return{type:"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:x,openStrip:{},inverseStrip:{},closeStrip:{},loc:b}}function p(a,g,m,b,x,w){b&&b.path&&n(a,b);var y=/\*/.test(a.open);g.blockParams=a.blockParams;var v=void 0,k=void 0;if(m){if(y)throw new r.default("Unexpected inverse block on decorator",m);m.chain&&(m.program.body[0].closeStrip=b.strip),k=m.strip,v=m.program}return x&&(x=v,v=g,g=x),{type:y?"DecoratorBlock":"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:g,inverse:v,openStrip:a.strip,inverseStrip:k,closeStrip:b&&b.strip,loc:this.locInfo(w)}}function h(a,g){if(!g&&a.length){var m=a[0].loc,b=a[a.length-1].loc;m&&b&&(g={source:m.source,start:{line:m.start.line,column:m.start.column},end:{line:b.end.line,column:b.end.column}})}return{type:"Program",body:a,strip:{},loc:g}}function c(a,g,m,b){return n(a,m),{type:"PartialBlockStatement",name:a.path,params:a.params,hash:a.hash,program:g,openStrip:a.strip,closeStrip:m&&m.strip,loc:this.locInfo(b)}}return Lt}var qu;function fb(){if(qu)return Yr;qu=1,Yr.__esModule=!0,Yr.parseWithoutProcessing=f,Yr.parse=p;function t(h){if(h&&h.__esModule)return h;var c={};if(h!=null)for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&(c[a]=h[a]);return c.default=h,c}function e(h){return h&&h.__esModule?h:{default:h}}var r=lb(),n=e(r),i=db(),s=e(i),o=hb(),u=t(o),l=Dt();Yr.parser=n.default;var d={};l.extend(d,u);function f(h,c){if(h.type==="Program")return h;n.default.yy=d,d.locInfo=function(g){return new d.SourceLocation(c&&c.srcName,g)};var a=n.default.parse(h);return a}function p(h,c){var a=f(h,c),g=new s.default(c);return g.accept(a)}return Yr}var Jr={},Fu;function pb(){if(Fu)return Jr;Fu=1,Jr.__esModule=!0,Jr.Compiler=u,Jr.precompile=l,Jr.compile=d;function t(h){return h&&h.__esModule?h:{default:h}}var e=zt(),r=t(e),n=Dt(),i=Td(),s=t(i),o=[].slice;function u(){}u.prototype={compiler:u,equals:function(c){var a=this.opcodes.length;if(c.opcodes.length!==a)return!1;for(var g=0;g<a;g++){var m=this.opcodes[g],b=c.opcodes[g];if(m.opcode!==b.opcode||!f(m.args,b.args))return!1}a=this.children.length;for(var g=0;g<a;g++)if(!this.children[g].equals(c.children[g]))return!1;return!0},guid:0,compile:function(c,a){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=a,this.stringParams=a.stringParams,this.trackIds=a.trackIds,a.blockParams=a.blockParams||[],a.knownHelpers=n.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},a.knownHelpers),this.accept(c)},compileProgram:function(c){var a=new this.compiler,g=a.compile(c,this.options),m=this.guid++;return this.usePartial=this.usePartial||g.usePartial,this.children[m]=g,this.useDepths=this.useDepths||g.useDepths,m},accept:function(c){if(!this[c.type])throw new r.default("Unknown type: "+c.type,c);this.sourceNode.unshift(c);var a=this[c.type](c);return this.sourceNode.shift(),a},Program:function(c){this.options.blockParams.unshift(c.blockParams);for(var a=c.body,g=a.length,m=0;m<g;m++)this.accept(a[m]);return this.options.blockParams.shift(),this.isSimple=g===1,this.blockParams=c.blockParams?c.blockParams.length:0,this},BlockStatement:function(c){p(c);var a=c.program,g=c.inverse;a=a&&this.compileProgram(a),g=g&&this.compileProgram(g);var m=this.classifySexpr(c);m==="helper"?this.helperSexpr(c,a,g):m==="simple"?(this.simpleSexpr(c),this.opcode("pushProgram",a),this.opcode("pushProgram",g),this.opcode("emptyHash"),this.opcode("blockValue",c.path.original)):(this.ambiguousSexpr(c,a,g),this.opcode("pushProgram",a),this.opcode("pushProgram",g),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(c){var a=c.program&&this.compileProgram(c.program),g=this.setupFullMustacheParams(c,a,void 0),m=c.path;this.useDecorators=!0,this.opcode("registerDecorator",g.length,m.original)},PartialStatement:function(c){this.usePartial=!0;var a=c.program;a&&(a=this.compileProgram(c.program));var g=c.params;if(g.length>1)throw new r.default("Unsupported number of partial arguments: "+g.length,c);g.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):g.push({type:"PathExpression",parts:[],depth:0}));var m=c.name.original,b=c.name.type==="SubExpression";b&&this.accept(c.name),this.setupFullMustacheParams(c,a,void 0,!0);var x=c.indent||"";this.options.preventIndent&&x&&(this.opcode("appendContent",x),x=""),this.opcode("invokePartial",b,m,x),this.opcode("append")},PartialBlockStatement:function(c){this.PartialStatement(c)},MustacheStatement:function(c){this.SubExpression(c),c.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(c){this.DecoratorBlock(c)},ContentStatement:function(c){c.value&&this.opcode("appendContent",c.value)},CommentStatement:function(){},SubExpression:function(c){p(c);var a=this.classifySexpr(c);a==="simple"?this.simpleSexpr(c):a==="helper"?this.helperSexpr(c):this.ambiguousSexpr(c)},ambiguousSexpr:function(c,a,g){var m=c.path,b=m.parts[0],x=a!=null||g!=null;this.opcode("getContext",m.depth),this.opcode("pushProgram",a),this.opcode("pushProgram",g),m.strict=!0,this.accept(m),this.opcode("invokeAmbiguous",b,x)},simpleSexpr:function(c){var a=c.path;a.strict=!0,this.accept(a),this.opcode("resolvePossibleLambda")},helperSexpr:function(c,a,g){var m=this.setupFullMustacheParams(c,a,g),b=c.path,x=b.parts[0];if(this.options.knownHelpers[x])this.opcode("invokeKnownHelper",m.length,x);else{if(this.options.knownHelpersOnly)throw new r.default("You specified knownHelpersOnly, but used the unknown helper "+x,c);b.strict=!0,b.falsy=!0,this.accept(b),this.opcode("invokeHelper",m.length,b.original,s.default.helpers.simpleId(b))}},PathExpression:function(c){this.addDepth(c.depth),this.opcode("getContext",c.depth);var a=c.parts[0],g=s.default.helpers.scopedId(c),m=!c.depth&&!g&&this.blockParamIndex(a);m?this.opcode("lookupBlockParam",m,c.parts):a?c.data?(this.options.data=!0,this.opcode("lookupData",c.depth,c.parts,c.strict)):this.opcode("lookupOnContext",c.parts,c.falsy,c.strict,g):this.opcode("pushContext")},StringLiteral:function(c){this.opcode("pushString",c.value)},NumberLiteral:function(c){this.opcode("pushLiteral",c.value)},BooleanLiteral:function(c){this.opcode("pushLiteral",c.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(c){var a=c.pairs,g=0,m=a.length;for(this.opcode("pushHash");g<m;g++)this.pushParam(a[g].value);for(;g--;)this.opcode("assignToHash",a[g].key);this.opcode("popHash")},opcode:function(c){this.opcodes.push({opcode:c,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(c){c&&(this.useDepths=!0)},classifySexpr:function(c){var a=s.default.helpers.simpleId(c.path),g=a&&!!this.blockParamIndex(c.path.parts[0]),m=!g&&s.default.helpers.helperExpression(c),b=!g&&(m||a);if(b&&!m){var x=c.path.parts[0],w=this.options;w.knownHelpers[x]?m=!0:w.knownHelpersOnly&&(b=!1)}return m?"helper":b?"ambiguous":"simple"},pushParams:function(c){for(var a=0,g=c.length;a<g;a++)this.pushParam(c[a])},pushParam:function(c){var a=c.value!=null?c.value:c.original||"";if(this.stringParams)a.replace&&(a=a.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",a,c.type),c.type==="SubExpression"&&this.accept(c);else{if(this.trackIds){var g=void 0;if(c.parts&&!s.default.helpers.scopedId(c)&&!c.depth&&(g=this.blockParamIndex(c.parts[0])),g){var m=c.parts.slice(1).join(".");this.opcode("pushId","BlockParam",g,m)}else a=c.original||a,a.replace&&(a=a.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",c.type,a)}this.accept(c)}},setupFullMustacheParams:function(c,a,g,m){var b=c.params;return this.pushParams(b),this.opcode("pushProgram",a),this.opcode("pushProgram",g),c.hash?this.accept(c.hash):this.opcode("emptyHash",m),b},blockParamIndex:function(c){for(var a=0,g=this.options.blockParams.length;a<g;a++){var m=this.options.blockParams[a],b=m&&n.indexOf(m,c);if(m&&b>=0)return[a,b]}}};function l(h,c,a){if(h==null||typeof h!="string"&&h.type!=="Program")throw new r.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+h);c=c||{},"data"in c||(c.data=!0),c.compat&&(c.useDepths=!0);var g=a.parse(h,c),m=new a.Compiler().compile(g,c);return new a.JavaScriptCompiler().compile(m,c)}function d(h,c,a){if(c===void 0&&(c={}),h==null||typeof h!="string"&&h.type!=="Program")throw new r.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+h);c=n.extend({},c),"data"in c||(c.data=!0),c.compat&&(c.useDepths=!0);var g=void 0;function m(){var x=a.parse(h,c),w=new a.Compiler().compile(x,c),y=new a.JavaScriptCompiler().compile(w,c,void 0,!0);return a.template(y)}function b(x,w){return g||(g=m()),g.call(this,x,w)}return b._setup=function(x){return g||(g=m()),g._setup(x)},b._child=function(x,w,y,v){return g||(g=m()),g._child(x,w,y,v)},b}function f(h,c){if(h===c)return!0;if(n.isArray(h)&&n.isArray(c)&&h.length===c.length){for(var a=0;a<h.length;a++)if(!f(h[a],c[a]))return!1;return!0}}function p(h){if(!h.path.parts){var c=h.path;h.path={type:"PathExpression",data:!1,depth:0,parts:[c.original+""],original:c.original+"",loc:c.loc}}}return Jr}var _i={exports:{}},Ii={exports:{}},gn={},Ms={},Ai={},Ei={},Uu;function mb(){if(Uu)return Ei;Uu=1;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return Ei.encode=function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError("Must be between 0 and 63: "+e)},Ei.decode=function(e){var r=65,n=90,i=97,s=122,o=48,u=57,l=43,d=47,f=26,p=52;return r<=e&&e<=n?e-r:i<=e&&e<=s?e-i+f:o<=e&&e<=u?e-o+p:e==l?62:e==d?63:-1},Ei}var Vu;function qd(){if(Vu)return Ai;Vu=1;var t=mb(),e=5,r=1<<e,n=r-1,i=r;function s(u){return u<0?(-u<<1)+1:(u<<1)+0}function o(u){var l=(u&1)===1,d=u>>1;return l?-d:d}return Ai.encode=function(l){var d="",f,p=s(l);do f=p&n,p>>>=e,p>0&&(f|=i),d+=t.encode(f);while(p>0);return d},Ai.decode=function(l,d,f){var p=l.length,h=0,c=0,a,g;do{if(d>=p)throw new Error("Expected more digits in base 64 VLQ value.");if(g=t.decode(l.charCodeAt(d++)),g===-1)throw new Error("Invalid base64 digit: "+l.charAt(d-1));a=!!(g&i),g&=n,h=h+(g<<c),c+=e}while(a);f.value=o(h),f.rest=d},Ai}var Cs={},ju;function Tn(){return ju||(ju=1,(function(t){function e(y,v,k){if(v in y)return y[v];if(arguments.length===3)return k;throw new Error('"'+v+'" is a required argument.')}t.getArg=e;var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,n=/^data:.+\,.+$/;function i(y){var v=y.match(r);return v?{scheme:v[1],auth:v[2],host:v[3],port:v[4],path:v[5]}:null}t.urlParse=i;function s(y){var v="";return y.scheme&&(v+=y.scheme+":"),v+="//",y.auth&&(v+=y.auth+"@"),y.host&&(v+=y.host),y.port&&(v+=":"+y.port),y.path&&(v+=y.path),v}t.urlGenerate=s;function o(y){var v=y,k=i(y);if(k){if(!k.path)return y;v=k.path}for(var _=t.isAbsolute(v),E=v.split(/\/+/),D,A=0,I=E.length-1;I>=0;I--)D=E[I],D==="."?E.splice(I,1):D===".."?A++:A>0&&(D===""?(E.splice(I+1,A),A=0):(E.splice(I,2),A--));return v=E.join("/"),v===""&&(v=_?"/":"."),k?(k.path=v,s(k)):v}t.normalize=o;function u(y,v){y===""&&(y="."),v===""&&(v=".");var k=i(v),_=i(y);if(_&&(y=_.path||"/"),k&&!k.scheme)return _&&(k.scheme=_.scheme),s(k);if(k||v.match(n))return v;if(_&&!_.host&&!_.path)return _.host=v,s(_);var E=v.charAt(0)==="/"?v:o(y.replace(/\/+$/,"")+"/"+v);return _?(_.path=E,s(_)):E}t.join=u,t.isAbsolute=function(y){return y.charAt(0)==="/"||r.test(y)};function l(y,v){y===""&&(y="."),y=y.replace(/\/$/,"");for(var k=0;v.indexOf(y+"/")!==0;){var _=y.lastIndexOf("/");if(_<0||(y=y.slice(0,_),y.match(/^([^\/]+:\/)?\/*$/)))return v;++k}return Array(k+1).join("../")+v.substr(y.length+1)}t.relative=l;var d=(function(){var y=Object.create(null);return!("__proto__"in y)})();function f(y){return y}function p(y){return c(y)?"$"+y:y}t.toSetString=d?f:p;function h(y){return c(y)?y.slice(1):y}t.fromSetString=d?f:h;function c(y){if(!y)return!1;var v=y.length;if(v<9||y.charCodeAt(v-1)!==95||y.charCodeAt(v-2)!==95||y.charCodeAt(v-3)!==111||y.charCodeAt(v-4)!==116||y.charCodeAt(v-5)!==111||y.charCodeAt(v-6)!==114||y.charCodeAt(v-7)!==112||y.charCodeAt(v-8)!==95||y.charCodeAt(v-9)!==95)return!1;for(var k=v-10;k>=0;k--)if(y.charCodeAt(k)!==36)return!1;return!0}function a(y,v,k){var _=m(y.source,v.source);return _!==0||(_=y.originalLine-v.originalLine,_!==0)||(_=y.originalColumn-v.originalColumn,_!==0||k)||(_=y.generatedColumn-v.generatedColumn,_!==0)||(_=y.generatedLine-v.generatedLine,_!==0)?_:m(y.name,v.name)}t.compareByOriginalPositions=a;function g(y,v,k){var _=y.generatedLine-v.generatedLine;return _!==0||(_=y.generatedColumn-v.generatedColumn,_!==0||k)||(_=m(y.source,v.source),_!==0)||(_=y.originalLine-v.originalLine,_!==0)||(_=y.originalColumn-v.originalColumn,_!==0)?_:m(y.name,v.name)}t.compareByGeneratedPositionsDeflated=g;function m(y,v){return y===v?0:y===null?1:v===null?-1:y>v?1:-1}function b(y,v){var k=y.generatedLine-v.generatedLine;return k!==0||(k=y.generatedColumn-v.generatedColumn,k!==0)||(k=m(y.source,v.source),k!==0)||(k=y.originalLine-v.originalLine,k!==0)||(k=y.originalColumn-v.originalColumn,k!==0)?k:m(y.name,v.name)}t.compareByGeneratedPositionsInflated=b;function x(y){return JSON.parse(y.replace(/^\)]}'[^\n]*\n/,""))}t.parseSourceMapInput=x;function w(y,v,k){if(v=v||"",y&&(y[y.length-1]!=="/"&&v[0]!=="/"&&(y+="/"),v=y+v),k){var _=i(k);if(!_)throw new Error("sourceMapURL could not be parsed");if(_.path){var E=_.path.lastIndexOf("/");E>=0&&(_.path=_.path.substring(0,E+1))}v=u(s(_),v)}return o(v)}t.computeSourceURL=w})(Cs)),Cs}var Ns={},Ku;function Fd(){if(Ku)return Ns;Ku=1;var t=Tn(),e=Object.prototype.hasOwnProperty,r=typeof Map<"u";function n(){this._array=[],this._set=r?new Map:Object.create(null)}return n.fromArray=function(s,o){for(var u=new n,l=0,d=s.length;l<d;l++)u.add(s[l],o);return u},n.prototype.size=function(){return r?this._set.size:Object.getOwnPropertyNames(this._set).length},n.prototype.add=function(s,o){var u=r?s:t.toSetString(s),l=r?this.has(s):e.call(this._set,u),d=this._array.length;(!l||o)&&this._array.push(s),l||(r?this._set.set(s,d):this._set[u]=d)},n.prototype.has=function(s){if(r)return this._set.has(s);var o=t.toSetString(s);return e.call(this._set,o)},n.prototype.indexOf=function(s){if(r){var o=this._set.get(s);if(o>=0)return o}else{var u=t.toSetString(s);if(e.call(this._set,u))return this._set[u]}throw new Error('"'+s+'" is not in the set.')},n.prototype.at=function(s){if(s>=0&&s<this._array.length)return this._array[s];throw new Error("No element indexed by "+s)},n.prototype.toArray=function(){return this._array.slice()},Ns.ArraySet=n,Ns}var $s={},Hu;function gb(){if(Hu)return $s;Hu=1;var t=Tn();function e(n,i){var s=n.generatedLine,o=i.generatedLine,u=n.generatedColumn,l=i.generatedColumn;return o>s||o==s&&l>=u||t.compareByGeneratedPositionsInflated(n,i)<=0}function r(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return r.prototype.unsortedForEach=function(i,s){this._array.forEach(i,s)},r.prototype.add=function(i){e(this._last,i)?(this._last=i,this._array.push(i)):(this._sorted=!1,this._array.push(i))},r.prototype.toArray=function(){return this._sorted||(this._array.sort(t.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},$s.MappingList=r,$s}var zu;function Ud(){if(zu)return Ms;zu=1;var t=qd(),e=Tn(),r=Fd().ArraySet,n=gb().MappingList;function i(s){s||(s={}),this._file=e.getArg(s,"file",null),this._sourceRoot=e.getArg(s,"sourceRoot",null),this._skipValidation=e.getArg(s,"skipValidation",!1),this._sources=new r,this._names=new r,this._mappings=new n,this._sourcesContents=null}return i.prototype._version=3,i.fromSourceMap=function(o){var u=o.sourceRoot,l=new i({file:o.file,sourceRoot:u});return o.eachMapping(function(d){var f={generated:{line:d.generatedLine,column:d.generatedColumn}};d.source!=null&&(f.source=d.source,u!=null&&(f.source=e.relative(u,f.source)),f.original={line:d.originalLine,column:d.originalColumn},d.name!=null&&(f.name=d.name)),l.addMapping(f)}),o.sources.forEach(function(d){var f=d;u!==null&&(f=e.relative(u,d)),l._sources.has(f)||l._sources.add(f);var p=o.sourceContentFor(d);p!=null&&l.setSourceContent(d,p)}),l},i.prototype.addMapping=function(o){var u=e.getArg(o,"generated"),l=e.getArg(o,"original",null),d=e.getArg(o,"source",null),f=e.getArg(o,"name",null);this._skipValidation||this._validateMapping(u,l,d,f),d!=null&&(d=String(d),this._sources.has(d)||this._sources.add(d)),f!=null&&(f=String(f),this._names.has(f)||this._names.add(f)),this._mappings.add({generatedLine:u.line,generatedColumn:u.column,originalLine:l!=null&&l.line,originalColumn:l!=null&&l.column,source:d,name:f})},i.prototype.setSourceContent=function(o,u){var l=o;this._sourceRoot!=null&&(l=e.relative(this._sourceRoot,l)),u!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[e.toSetString(l)]=u):this._sourcesContents&&(delete this._sourcesContents[e.toSetString(l)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},i.prototype.applySourceMap=function(o,u,l){var d=u;if(u==null){if(o.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);d=o.file}var f=this._sourceRoot;f!=null&&(d=e.relative(f,d));var p=new r,h=new r;this._mappings.unsortedForEach(function(c){if(c.source===d&&c.originalLine!=null){var a=o.originalPositionFor({line:c.originalLine,column:c.originalColumn});a.source!=null&&(c.source=a.source,l!=null&&(c.source=e.join(l,c.source)),f!=null&&(c.source=e.relative(f,c.source)),c.originalLine=a.line,c.originalColumn=a.column,a.name!=null&&(c.name=a.name))}var g=c.source;g!=null&&!p.has(g)&&p.add(g);var m=c.name;m!=null&&!h.has(m)&&h.add(m)},this),this._sources=p,this._names=h,o.sources.forEach(function(c){var a=o.sourceContentFor(c);a!=null&&(l!=null&&(c=e.join(l,c)),f!=null&&(c=e.relative(f,c)),this.setSourceContent(c,a))},this)},i.prototype._validateMapping=function(o,u,l,d){if(u&&typeof u.line!="number"&&typeof u.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(o&&"line"in o&&"column"in o&&o.line>0&&o.column>=0&&!u&&!l&&!d)){if(o&&"line"in o&&"column"in o&&u&&"line"in u&&"column"in u&&o.line>0&&o.column>=0&&u.line>0&&u.column>=0&&l)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:o,source:l,original:u,name:d}))}},i.prototype._serializeMappings=function(){for(var o=0,u=1,l=0,d=0,f=0,p=0,h="",c,a,g,m,b=this._mappings.toArray(),x=0,w=b.length;x<w;x++){if(a=b[x],c="",a.generatedLine!==u)for(o=0;a.generatedLine!==u;)c+=";",u++;else if(x>0){if(!e.compareByGeneratedPositionsInflated(a,b[x-1]))continue;c+=","}c+=t.encode(a.generatedColumn-o),o=a.generatedColumn,a.source!=null&&(m=this._sources.indexOf(a.source),c+=t.encode(m-p),p=m,c+=t.encode(a.originalLine-1-d),d=a.originalLine-1,c+=t.encode(a.originalColumn-l),l=a.originalColumn,a.name!=null&&(g=this._names.indexOf(a.name),c+=t.encode(g-f),f=g)),h+=c}return h},i.prototype._generateSourcesContent=function(o,u){return o.map(function(l){if(!this._sourcesContents)return null;u!=null&&(l=e.relative(u,l));var d=e.toSetString(l);return Object.prototype.hasOwnProperty.call(this._sourcesContents,d)?this._sourcesContents[d]:null},this)},i.prototype.toJSON=function(){var o={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(o.file=this._file),this._sourceRoot!=null&&(o.sourceRoot=this._sourceRoot),this._sourcesContents&&(o.sourcesContent=this._generateSourcesContent(o.sources,o.sourceRoot)),o},i.prototype.toString=function(){return JSON.stringify(this.toJSON())},Ms.SourceMapGenerator=i,Ms}var yn={},Ds={},Gu;function yb(){return Gu||(Gu=1,(function(t){t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2;function e(r,n,i,s,o,u){var l=Math.floor((n-r)/2)+r,d=o(i,s[l],!0);return d===0?l:d>0?n-l>1?e(l,n,i,s,o,u):u==t.LEAST_UPPER_BOUND?n<s.length?n:-1:l:l-r>1?e(r,l,i,s,o,u):u==t.LEAST_UPPER_BOUND?l:r<0?-1:r}t.search=function(n,i,s,o){if(i.length===0)return-1;var u=e(-1,i.length,n,i,s,o||t.GREATEST_LOWER_BOUND);if(u<0)return-1;for(;u-1>=0&&s(i[u],i[u-1],!0)===0;)--u;return u}})(Ds)),Ds}var Rs={},Wu;function bb(){if(Wu)return Rs;Wu=1;function t(n,i,s){var o=n[i];n[i]=n[s],n[s]=o}function e(n,i){return Math.round(n+Math.random()*(i-n))}function r(n,i,s,o){if(s<o){var u=e(s,o),l=s-1;t(n,u,o);for(var d=n[o],f=s;f<o;f++)i(n[f],d)<=0&&(l+=1,t(n,l,f));t(n,l+1,f);var p=l+1;r(n,i,s,p-1),r(n,i,p+1,o)}}return Rs.quickSort=function(n,i){r(n,i,0,n.length-1)},Rs}var Yu;function xb(){if(Yu)return yn;Yu=1;var t=Tn(),e=yb(),r=Fd().ArraySet,n=qd(),i=bb().quickSort;function s(d,f){var p=d;return typeof d=="string"&&(p=t.parseSourceMapInput(d)),p.sections!=null?new l(p,f):new o(p,f)}s.fromSourceMap=function(d,f){return o.fromSourceMap(d,f)},s.prototype._version=3,s.prototype.__generatedMappings=null,Object.defineProperty(s.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),s.prototype.__originalMappings=null,Object.defineProperty(s.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),s.prototype._charIsMappingSeparator=function(f,p){var h=f.charAt(p);return h===";"||h===","},s.prototype._parseMappings=function(f,p){throw new Error("Subclasses must implement _parseMappings")},s.GENERATED_ORDER=1,s.ORIGINAL_ORDER=2,s.GREATEST_LOWER_BOUND=1,s.LEAST_UPPER_BOUND=2,s.prototype.eachMapping=function(f,p,h){var c=p||null,a=h||s.GENERATED_ORDER,g;switch(a){case s.GENERATED_ORDER:g=this._generatedMappings;break;case s.ORIGINAL_ORDER:g=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var m=this.sourceRoot;g.map(function(b){var x=b.source===null?null:this._sources.at(b.source);return x=t.computeSourceURL(m,x,this._sourceMapURL),{source:x,generatedLine:b.generatedLine,generatedColumn:b.generatedColumn,originalLine:b.originalLine,originalColumn:b.originalColumn,name:b.name===null?null:this._names.at(b.name)}},this).forEach(f,c)},s.prototype.allGeneratedPositionsFor=function(f){var p=t.getArg(f,"line"),h={source:t.getArg(f,"source"),originalLine:p,originalColumn:t.getArg(f,"column",0)};if(h.source=this._findSourceIndex(h.source),h.source<0)return[];var c=[],a=this._findMapping(h,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,e.LEAST_UPPER_BOUND);if(a>=0){var g=this._originalMappings[a];if(f.column===void 0)for(var m=g.originalLine;g&&g.originalLine===m;)c.push({line:t.getArg(g,"generatedLine",null),column:t.getArg(g,"generatedColumn",null),lastColumn:t.getArg(g,"lastGeneratedColumn",null)}),g=this._originalMappings[++a];else for(var b=g.originalColumn;g&&g.originalLine===p&&g.originalColumn==b;)c.push({line:t.getArg(g,"generatedLine",null),column:t.getArg(g,"generatedColumn",null),lastColumn:t.getArg(g,"lastGeneratedColumn",null)}),g=this._originalMappings[++a]}return c},yn.SourceMapConsumer=s;function o(d,f){var p=d;typeof d=="string"&&(p=t.parseSourceMapInput(d));var h=t.getArg(p,"version"),c=t.getArg(p,"sources"),a=t.getArg(p,"names",[]),g=t.getArg(p,"sourceRoot",null),m=t.getArg(p,"sourcesContent",null),b=t.getArg(p,"mappings"),x=t.getArg(p,"file",null);if(h!=this._version)throw new Error("Unsupported version: "+h);g&&(g=t.normalize(g)),c=c.map(String).map(t.normalize).map(function(w){return g&&t.isAbsolute(g)&&t.isAbsolute(w)?t.relative(g,w):w}),this._names=r.fromArray(a.map(String),!0),this._sources=r.fromArray(c,!0),this._absoluteSources=this._sources.toArray().map(function(w){return t.computeSourceURL(g,w,f)}),this.sourceRoot=g,this.sourcesContent=m,this._mappings=b,this._sourceMapURL=f,this.file=x}o.prototype=Object.create(s.prototype),o.prototype.consumer=s,o.prototype._findSourceIndex=function(d){var f=d;if(this.sourceRoot!=null&&(f=t.relative(this.sourceRoot,f)),this._sources.has(f))return this._sources.indexOf(f);var p;for(p=0;p<this._absoluteSources.length;++p)if(this._absoluteSources[p]==d)return p;return-1},o.fromSourceMap=function(f,p){var h=Object.create(o.prototype),c=h._names=r.fromArray(f._names.toArray(),!0),a=h._sources=r.fromArray(f._sources.toArray(),!0);h.sourceRoot=f._sourceRoot,h.sourcesContent=f._generateSourcesContent(h._sources.toArray(),h.sourceRoot),h.file=f._file,h._sourceMapURL=p,h._absoluteSources=h._sources.toArray().map(function(k){return t.computeSourceURL(h.sourceRoot,k,p)});for(var g=f._mappings.toArray().slice(),m=h.__generatedMappings=[],b=h.__originalMappings=[],x=0,w=g.length;x<w;x++){var y=g[x],v=new u;v.generatedLine=y.generatedLine,v.generatedColumn=y.generatedColumn,y.source&&(v.source=a.indexOf(y.source),v.originalLine=y.originalLine,v.originalColumn=y.originalColumn,y.name&&(v.name=c.indexOf(y.name)),b.push(v)),m.push(v)}return i(h.__originalMappings,t.compareByOriginalPositions),h},o.prototype._version=3,Object.defineProperty(o.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function u(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}o.prototype._parseMappings=function(f,p){for(var h=1,c=0,a=0,g=0,m=0,b=0,x=f.length,w=0,y={},v={},k=[],_=[],E,D,A,I,O;w<x;)if(f.charAt(w)===";")h++,w++,c=0;else if(f.charAt(w)===",")w++;else{for(E=new u,E.generatedLine=h,I=w;I<x&&!this._charIsMappingSeparator(f,I);I++);if(D=f.slice(w,I),A=y[D],A)w+=D.length;else{for(A=[];w<I;)n.decode(f,w,v),O=v.value,w=v.rest,A.push(O);if(A.length===2)throw new Error("Found a source, but no line and column");if(A.length===3)throw new Error("Found a source and line, but no column");y[D]=A}E.generatedColumn=c+A[0],c=E.generatedColumn,A.length>1&&(E.source=m+A[1],m+=A[1],E.originalLine=a+A[2],a=E.originalLine,E.originalLine+=1,E.originalColumn=g+A[3],g=E.originalColumn,A.length>4&&(E.name=b+A[4],b+=A[4])),_.push(E),typeof E.originalLine=="number"&&k.push(E)}i(_,t.compareByGeneratedPositionsDeflated),this.__generatedMappings=_,i(k,t.compareByOriginalPositions),this.__originalMappings=k},o.prototype._findMapping=function(f,p,h,c,a,g){if(f[h]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+f[h]);if(f[c]<0)throw new TypeError("Column must be greater than or equal to 0, got "+f[c]);return e.search(f,p,a,g)},o.prototype.computeColumnSpans=function(){for(var f=0;f<this._generatedMappings.length;++f){var p=this._generatedMappings[f];if(f+1<this._generatedMappings.length){var h=this._generatedMappings[f+1];if(p.generatedLine===h.generatedLine){p.lastGeneratedColumn=h.generatedColumn-1;continue}}p.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(f){var p={generatedLine:t.getArg(f,"line"),generatedColumn:t.getArg(f,"column")},h=this._findMapping(p,this._generatedMappings,"generatedLine","generatedColumn",t.compareByGeneratedPositionsDeflated,t.getArg(f,"bias",s.GREATEST_LOWER_BOUND));if(h>=0){var c=this._generatedMappings[h];if(c.generatedLine===p.generatedLine){var a=t.getArg(c,"source",null);a!==null&&(a=this._sources.at(a),a=t.computeSourceURL(this.sourceRoot,a,this._sourceMapURL));var g=t.getArg(c,"name",null);return g!==null&&(g=this._names.at(g)),{source:a,line:t.getArg(c,"originalLine",null),column:t.getArg(c,"originalColumn",null),name:g}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(f){return f==null}):!1},o.prototype.sourceContentFor=function(f,p){if(!this.sourcesContent)return null;var h=this._findSourceIndex(f);if(h>=0)return this.sourcesContent[h];var c=f;this.sourceRoot!=null&&(c=t.relative(this.sourceRoot,c));var a;if(this.sourceRoot!=null&&(a=t.urlParse(this.sourceRoot))){var g=c.replace(/^file:\/\//,"");if(a.scheme=="file"&&this._sources.has(g))return this.sourcesContent[this._sources.indexOf(g)];if((!a.path||a.path=="/")&&this._sources.has("/"+c))return this.sourcesContent[this._sources.indexOf("/"+c)]}if(p)return null;throw new Error('"'+c+'" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(f){var p=t.getArg(f,"source");if(p=this._findSourceIndex(p),p<0)return{line:null,column:null,lastColumn:null};var h={source:p,originalLine:t.getArg(f,"line"),originalColumn:t.getArg(f,"column")},c=this._findMapping(h,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,t.getArg(f,"bias",s.GREATEST_LOWER_BOUND));if(c>=0){var a=this._originalMappings[c];if(a.source===h.source)return{line:t.getArg(a,"generatedLine",null),column:t.getArg(a,"generatedColumn",null),lastColumn:t.getArg(a,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},yn.BasicSourceMapConsumer=o;function l(d,f){var p=d;typeof d=="string"&&(p=t.parseSourceMapInput(d));var h=t.getArg(p,"version"),c=t.getArg(p,"sections");if(h!=this._version)throw new Error("Unsupported version: "+h);this._sources=new r,this._names=new r;var a={line:-1,column:0};this._sections=c.map(function(g){if(g.url)throw new Error("Support for url field in sections not implemented.");var m=t.getArg(g,"offset"),b=t.getArg(m,"line"),x=t.getArg(m,"column");if(b<a.line||b===a.line&&x<a.column)throw new Error("Section offsets must be ordered and non-overlapping.");return a=m,{generatedOffset:{generatedLine:b+1,generatedColumn:x+1},consumer:new s(t.getArg(g,"map"),f)}})}return l.prototype=Object.create(s.prototype),l.prototype.constructor=s,l.prototype._version=3,Object.defineProperty(l.prototype,"sources",{get:function(){for(var d=[],f=0;f<this._sections.length;f++)for(var p=0;p<this._sections[f].consumer.sources.length;p++)d.push(this._sections[f].consumer.sources[p]);return d}}),l.prototype.originalPositionFor=function(f){var p={generatedLine:t.getArg(f,"line"),generatedColumn:t.getArg(f,"column")},h=e.search(p,this._sections,function(a,g){var m=a.generatedLine-g.generatedOffset.generatedLine;return m||a.generatedColumn-g.generatedOffset.generatedColumn}),c=this._sections[h];return c?c.consumer.originalPositionFor({line:p.generatedLine-(c.generatedOffset.generatedLine-1),column:p.generatedColumn-(c.generatedOffset.generatedLine===p.generatedLine?c.generatedOffset.generatedColumn-1:0),bias:f.bias}):{source:null,line:null,column:null,name:null}},l.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(f){return f.consumer.hasContentsOfAllSources()})},l.prototype.sourceContentFor=function(f,p){for(var h=0;h<this._sections.length;h++){var c=this._sections[h],a=c.consumer.sourceContentFor(f,!0);if(a)return a}if(p)return null;throw new Error('"'+f+'" is not in the SourceMap.')},l.prototype.generatedPositionFor=function(f){for(var p=0;p<this._sections.length;p++){var h=this._sections[p];if(h.consumer._findSourceIndex(t.getArg(f,"source"))!==-1){var c=h.consumer.generatedPositionFor(f);if(c){var a={line:c.line+(h.generatedOffset.generatedLine-1),column:c.column+(h.generatedOffset.generatedLine===c.line?h.generatedOffset.generatedColumn-1:0)};return a}}}return{line:null,column:null}},l.prototype._parseMappings=function(f,p){this.__generatedMappings=[],this.__originalMappings=[];for(var h=0;h<this._sections.length;h++)for(var c=this._sections[h],a=c.consumer._generatedMappings,g=0;g<a.length;g++){var m=a[g],b=c.consumer._sources.at(m.source);b=t.computeSourceURL(c.consumer.sourceRoot,b,this._sourceMapURL),this._sources.add(b),b=this._sources.indexOf(b);var x=null;m.name&&(x=c.consumer._names.at(m.name),this._names.add(x),x=this._names.indexOf(x));var w={source:b,generatedLine:m.generatedLine+(c.generatedOffset.generatedLine-1),generatedColumn:m.generatedColumn+(c.generatedOffset.generatedLine===m.generatedLine?c.generatedOffset.generatedColumn-1:0),originalLine:m.originalLine,originalColumn:m.originalColumn,name:x};this.__generatedMappings.push(w),typeof w.originalLine=="number"&&this.__originalMappings.push(w)}i(this.__generatedMappings,t.compareByGeneratedPositionsDeflated),i(this.__originalMappings,t.compareByOriginalPositions)},yn.IndexedSourceMapConsumer=l,yn}var Ls={},Ju;function vb(){if(Ju)return Ls;Ju=1;var t=Ud().SourceMapGenerator,e=Tn(),r=/(\r?\n)/,n=10,i="$$$isSourceNode$$$";function s(o,u,l,d,f){this.children=[],this.sourceContents={},this.line=o??null,this.column=u??null,this.source=l??null,this.name=f??null,this[i]=!0,d!=null&&this.add(d)}return s.fromStringWithSourceMap=function(u,l,d){var f=new s,p=u.split(r),h=0,c=function(){var x=y(),w=y()||"";return x+w;function y(){return h<p.length?p[h++]:void 0}},a=1,g=0,m=null;return l.eachMapping(function(x){if(m!==null)if(a<x.generatedLine)b(m,c()),a++,g=0;else{var w=p[h]||"",y=w.substr(0,x.generatedColumn-g);p[h]=w.substr(x.generatedColumn-g),g=x.generatedColumn,b(m,y),m=x;return}for(;a<x.generatedLine;)f.add(c()),a++;if(g<x.generatedColumn){var w=p[h]||"";f.add(w.substr(0,x.generatedColumn)),p[h]=w.substr(x.generatedColumn),g=x.generatedColumn}m=x},this),h<p.length&&(m&&b(m,c()),f.add(p.splice(h).join(""))),l.sources.forEach(function(x){var w=l.sourceContentFor(x);w!=null&&(d!=null&&(x=e.join(d,x)),f.setSourceContent(x,w))}),f;function b(x,w){if(x===null||x.source===void 0)f.add(w);else{var y=d?e.join(d,x.source):x.source;f.add(new s(x.originalLine,x.originalColumn,y,w,x.name))}}},s.prototype.add=function(u){if(Array.isArray(u))u.forEach(function(l){this.add(l)},this);else if(u[i]||typeof u=="string")u&&this.children.push(u);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+u);return this},s.prototype.prepend=function(u){if(Array.isArray(u))for(var l=u.length-1;l>=0;l--)this.prepend(u[l]);else if(u[i]||typeof u=="string")this.children.unshift(u);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+u);return this},s.prototype.walk=function(u){for(var l,d=0,f=this.children.length;d<f;d++)l=this.children[d],l[i]?l.walk(u):l!==""&&u(l,{source:this.source,line:this.line,column:this.column,name:this.name})},s.prototype.join=function(u){var l,d,f=this.children.length;if(f>0){for(l=[],d=0;d<f-1;d++)l.push(this.children[d]),l.push(u);l.push(this.children[d]),this.children=l}return this},s.prototype.replaceRight=function(u,l){var d=this.children[this.children.length-1];return d[i]?d.replaceRight(u,l):typeof d=="string"?this.children[this.children.length-1]=d.replace(u,l):this.children.push("".replace(u,l)),this},s.prototype.setSourceContent=function(u,l){this.sourceContents[e.toSetString(u)]=l},s.prototype.walkSourceContents=function(u){for(var l=0,d=this.children.length;l<d;l++)this.children[l][i]&&this.children[l].walkSourceContents(u);for(var f=Object.keys(this.sourceContents),l=0,d=f.length;l<d;l++)u(e.fromSetString(f[l]),this.sourceContents[f[l]])},s.prototype.toString=function(){var u="";return this.walk(function(l){u+=l}),u},s.prototype.toStringWithSourceMap=function(u){var l={code:"",line:1,column:0},d=new t(u),f=!1,p=null,h=null,c=null,a=null;return this.walk(function(g,m){l.code+=g,m.source!==null&&m.line!==null&&m.column!==null?((p!==m.source||h!==m.line||c!==m.column||a!==m.name)&&d.addMapping({source:m.source,original:{line:m.line,column:m.column},generated:{line:l.line,column:l.column},name:m.name}),p=m.source,h=m.line,c=m.column,a=m.name,f=!0):f&&(d.addMapping({generated:{line:l.line,column:l.column}}),p=null,f=!1);for(var b=0,x=g.length;b<x;b++)g.charCodeAt(b)===n?(l.line++,l.column=0,b+1===x?(p=null,f=!1):f&&d.addMapping({source:m.source,original:{line:m.line,column:m.column},generated:{line:l.line,column:l.column},name:m.name})):l.column++}),this.walkSourceContents(function(g,m){d.setSourceContent(g,m)}),{code:l.code,map:d}},Ls.SourceNode=s,Ls}var Zu;function wb(){return Zu||(Zu=1,gn.SourceMapGenerator=Ud().SourceMapGenerator,gn.SourceMapConsumer=xb().SourceMapConsumer,gn.SourceNode=vb().SourceNode),gn}var Xu;function kb(){return Xu||(Xu=1,(function(t,e){e.__esModule=!0;var r=Dt(),n=void 0;try{var i=wb();n=i.SourceNode}catch{}n||(n=function(u,l,d,f){this.src="",f&&this.add(f)},n.prototype={add:function(l){r.isArray(l)&&(l=l.join("")),this.src+=l},prepend:function(l){r.isArray(l)&&(l=l.join("")),this.src=l+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}});function s(u,l,d){if(r.isArray(u)){for(var f=[],p=0,h=u.length;p<h;p++)f.push(l.wrap(u[p],d));return f}else if(typeof u=="boolean"||typeof u=="number")return u+"";return u}function o(u){this.srcFile=u,this.source=[]}o.prototype={isEmpty:function(){return!this.source.length},prepend:function(l,d){this.source.unshift(this.wrap(l,d))},push:function(l,d){this.source.push(this.wrap(l,d))},merge:function(){var l=this.empty();return this.each(function(d){l.add(["  ",d,`
`])}),l},each:function(l){for(var d=0,f=this.source.length;d<f;d++)l(this.source[d])},empty:function(){var l=this.currentLocation||{start:{}};return new n(l.start.line,l.start.column,this.srcFile)},wrap:function(l){var d=arguments.length<=1||arguments[1]===void 0?this.currentLocation||{start:{}}:arguments[1];return l instanceof n?l:(l=s(l,this,d),new n(d.start.line,d.start.column,this.srcFile,l))},functionCall:function(l,d,f){return f=this.generateList(f),this.wrap([l,d?"."+d+"(":"(",f,")"])},quotedString:function(l){return'"'+(l+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(l){var d=this,f=[];Object.keys(l).forEach(function(h){var c=s(l[h],d);c!=="undefined"&&f.push([d.quotedString(h),":",c])});var p=this.generateList(f);return p.prepend("{"),p.add("}"),p},generateList:function(l){for(var d=this.empty(),f=0,p=l.length;f<p;f++)f&&d.add(","),d.add(s(l[f],this));return d},generateArray:function(l){var d=this.generateList(l);return d.prepend("["),d.add("]"),d}},e.default=o,t.exports=e.default})(Ii,Ii.exports)),Ii.exports}var Qu;function Sb(){return Qu||(Qu=1,(function(t,e){e.__esModule=!0;function r(h){return h&&h.__esModule?h:{default:h}}var n=Ba(),i=zt(),s=r(i),o=Dt(),u=kb(),l=r(u);function d(h){this.value=h}function f(){}f.prototype={nameLookup:function(c,a){return this.internalNameLookup(c,a)},depthedLookup:function(c){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(c),")"]},compilerInfo:function(){var c=n.COMPILER_REVISION,a=n.REVISION_CHANGES[c];return[c,a]},appendToBuffer:function(c,a,g){return o.isArray(c)||(c=[c]),c=this.source.wrap(c,a),this.environment.isSimple?["return ",c,";"]:g?["buffer += ",c,";"]:(c.appendToBuffer=!0,c)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(c,a){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",c,",",JSON.stringify(a),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(c,a,g,m){this.environment=c,this.options=a,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!m,this.name=this.environment.name,this.isChild=!!g,this.context=g||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(c,a),this.useDepths=this.useDepths||c.useDepths||c.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||c.useBlockParams;var b=c.opcodes,x=void 0,w=void 0,y=void 0,v=void 0;for(y=0,v=b.length;y<v;y++)x=b[y],this.source.currentLocation=x.loc,w=w||x.loc,this[x.opcode].apply(this,x.args);if(this.source.currentLocation=w,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new s.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),`;
`]),this.decorators.push("return fn;"),m?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend(`function(fn, props, container, depth0, data, blockParams, depths) {
`),this.decorators.push(`}
`),this.decorators=this.decorators.merge()));var k=this.createFunctionContext(m);if(this.isChild)return k;var _={compiler:this.compilerInfo(),main:k};this.decorators&&(_.main_d=this.decorators,_.useDecorators=!0);var E=this.context,D=E.programs,A=E.decorators;for(y=0,v=D.length;y<v;y++)D[y]&&(_[y]=D[y],A[y]&&(_[y+"_d"]=A[y],_.useDecorators=!0));return this.environment.usePartial&&(_.usePartial=!0),this.options.data&&(_.useData=!0),this.useDepths&&(_.useDepths=!0),this.useBlockParams&&(_.useBlockParams=!0),this.options.compat&&(_.compat=!0),m?_.compilerOptions=this.options:(_.compiler=JSON.stringify(_.compiler),this.source.currentLocation={start:{line:1,column:0}},_=this.objectLiteral(_),a.srcName?(_=_.toStringWithSourceMap({file:a.destName}),_.map=_.map&&_.map.toString()):_=_.toString()),_},preamble:function(){this.lastContext=0,this.source=new l.default(this.options.srcName),this.decorators=new l.default(this.options.srcName)},createFunctionContext:function(c){var a=this,g="",m=this.stackVars.concat(this.registers.list);m.length>0&&(g+=", "+m.join(", "));var b=0;Object.keys(this.aliases).forEach(function(y){var v=a.aliases[y];v.children&&v.referenceCount>1&&(g+=", alias"+ ++b+"="+y,v.children[0]="alias"+b)}),this.lookupPropertyFunctionIsUsed&&(g+=", "+this.lookupPropertyFunctionVarDeclaration());var x=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&x.push("blockParams"),this.useDepths&&x.push("depths");var w=this.mergeSource(g);return c?(x.push(w),Function.apply(this,x)):this.source.wrap(["function(",x.join(","),`) {
  `,w,"}"])},mergeSource:function(c){var a=this.environment.isSimple,g=!this.forceBuffer,m=void 0,b=void 0,x=void 0,w=void 0;return this.source.each(function(y){y.appendToBuffer?(x?y.prepend("  + "):x=y,w=y):(x&&(b?x.prepend("buffer += "):m=!0,w.add(";"),x=w=void 0),b=!0,a||(g=!1))}),g?x?(x.prepend("return "),w.add(";")):b||this.source.push('return "";'):(c+=", buffer = "+(m?"":this.initializeBuffer()),x?(x.prepend("return buffer + "),w.add(";")):this.source.push("return buffer;")),c&&this.source.prepend("var "+c.substring(2)+(m?"":`;
`)),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return`
      lookupProperty = container.lookupProperty || function(parent, propertyName) {
        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {
          return parent[propertyName];
        }
        return undefined
    }
    `.trim()},blockValue:function(c){var a=this.aliasable("container.hooks.blockHelperMissing"),g=[this.contextName(0)];this.setupHelperArgs(c,0,g);var m=this.popStack();g.splice(1,0,m),this.push(this.source.functionCall(a,"call",g))},ambiguousBlockValue:function(){var c=this.aliasable("container.hooks.blockHelperMissing"),a=[this.contextName(0)];this.setupHelperArgs("",0,a,!0),this.flushInline();var g=this.topStack();a.splice(1,0,g),this.pushSource(["if (!",this.lastHelper,") { ",g," = ",this.source.functionCall(c,"call",a),"}"])},appendContent:function(c){this.pendingContent?c=this.pendingContent+c:this.pendingLocation=this.source.currentLocation,this.pendingContent=c},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var c=this.popStack();this.pushSource(["if (",c," != null) { ",this.appendToBuffer(c,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(c){this.lastContext=c},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(c,a,g,m){var b=0;!m&&this.options.compat&&!this.lastContext?this.push(this.depthedLookup(c[b++])):this.pushContext(),this.resolvePath("context",c,b,a,g)},lookupBlockParam:function(c,a){this.useBlockParams=!0,this.push(["blockParams[",c[0],"][",c[1],"]"]),this.resolvePath("context",a,1)},lookupData:function(c,a,g){c?this.pushStackLiteral("container.data(data, "+c+")"):this.pushStackLiteral("data"),this.resolvePath("data",a,0,!0,g)},resolvePath:function(c,a,g,m,b){var x=this;if(this.options.strict||this.options.assumeObjects){this.push(p(this.options.strict&&b,this,a,g,c));return}for(var w=a.length;g<w;g++)this.replaceStack(function(y){var v=x.nameLookup(y,a[g],c);return m?[" && ",v]:[" != null ? ",v," : ",y]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(c,a){this.pushContext(),this.pushString(a),a!=="SubExpression"&&(typeof c=="string"?this.pushString(c):this.pushStackLiteral(c))},emptyHash:function(c){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(c?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var c=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(c.ids)),this.stringParams&&(this.push(this.objectLiteral(c.contexts)),this.push(this.objectLiteral(c.types))),this.push(this.objectLiteral(c.values))},pushString:function(c){this.pushStackLiteral(this.quotedString(c))},pushLiteral:function(c){this.pushStackLiteral(c)},pushProgram:function(c){c!=null?this.pushStackLiteral(this.programExpression(c)):this.pushStackLiteral(null)},registerDecorator:function(c,a){var g=this.nameLookup("decorators",a,"decorator"),m=this.setupHelperArgs(a,c);this.decorators.push(["fn = ",this.decorators.functionCall(g,"",["fn","props","container",m])," || fn;"])},invokeHelper:function(c,a,g){var m=this.popStack(),b=this.setupHelper(c,a),x=[];g&&x.push(b.name),x.push(m),this.options.strict||x.push(this.aliasable("container.hooks.helperMissing"));var w=["(",this.itemsSeparatedBy(x,"||"),")"],y=this.source.functionCall(w,"call",b.callParams);this.push(y)},itemsSeparatedBy:function(c,a){var g=[];g.push(c[0]);for(var m=1;m<c.length;m++)g.push(a,c[m]);return g},invokeKnownHelper:function(c,a){var g=this.setupHelper(c,a);this.push(this.source.functionCall(g.name,"call",g.callParams))},invokeAmbiguous:function(c,a){this.useRegister("helper");var g=this.popStack();this.emptyHash();var m=this.setupHelper(0,c,a),b=this.lastHelper=this.nameLookup("helpers",c,"helper"),x=["(","(helper = ",b," || ",g,")"];this.options.strict||(x[0]="(helper = ",x.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",x,m.paramsInit?["),(",m.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",m.callParams)," : helper))"])},invokePartial:function(c,a,g){var m=[],b=this.setupParams(a,1,m);c&&(a=this.popStack(),delete b.name),g&&(b.indent=JSON.stringify(g)),b.helpers="helpers",b.partials="partials",b.decorators="container.decorators",c?m.unshift(a):m.unshift(this.nameLookup("partials",a,"partial")),this.options.compat&&(b.depths="depths"),b=this.objectLiteral(b),m.push(b),this.push(this.source.functionCall("container.invokePartial","",m))},assignToHash:function(c){var a=this.popStack(),g=void 0,m=void 0,b=void 0;this.trackIds&&(b=this.popStack()),this.stringParams&&(m=this.popStack(),g=this.popStack());var x=this.hash;g&&(x.contexts[c]=g),m&&(x.types[c]=m),b&&(x.ids[c]=b),x.values[c]=a},pushId:function(c,a,g){c==="BlockParam"?this.pushStackLiteral("blockParams["+a[0]+"].path["+a[1]+"]"+(g?" + "+JSON.stringify("."+g):"")):c==="PathExpression"?this.pushString(a):c==="SubExpression"?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:f,compileChildren:function(c,a){for(var g=c.children,m=void 0,b=void 0,x=0,w=g.length;x<w;x++){m=g[x],b=new this.compiler;var y=this.matchExistingProgram(m);if(y==null){this.context.programs.push("");var v=this.context.programs.length;m.index=v,m.name="program"+v,this.context.programs[v]=b.compile(m,a,this.context,!this.precompile),this.context.decorators[v]=b.decorators,this.context.environments[v]=m,this.useDepths=this.useDepths||b.useDepths,this.useBlockParams=this.useBlockParams||b.useBlockParams,m.useDepths=this.useDepths,m.useBlockParams=this.useBlockParams}else m.index=y.index,m.name="program"+y.index,this.useDepths=this.useDepths||y.useDepths,this.useBlockParams=this.useBlockParams||y.useBlockParams}},matchExistingProgram:function(c){for(var a=0,g=this.context.environments.length;a<g;a++){var m=this.context.environments[a];if(m&&m.equals(c))return m}},programExpression:function(c){var a=this.environment.children[c],g=[a.index,"data",a.blockParams];return(this.useBlockParams||this.useDepths)&&g.push("blockParams"),this.useDepths&&g.push("depths"),"container.program("+g.join(", ")+")"},useRegister:function(c){this.registers[c]||(this.registers[c]=!0,this.registers.list.push(c))},push:function(c){return c instanceof d||(c=this.source.wrap(c)),this.inlineStack.push(c),c},pushStackLiteral:function(c){this.push(new d(c))},pushSource:function(c){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),c&&this.source.push(c)},replaceStack:function(c){var a=["("],g=void 0,m=void 0,b=void 0;if(!this.isInline())throw new s.default("replaceStack on non-inline");var x=this.popStack(!0);if(x instanceof d)g=[x.value],a=["(",g],b=!0;else{m=!0;var w=this.incrStack();a=["((",this.push(w)," = ",x,")"],g=this.topStack()}var y=c.call(this,g);b||this.popStack(),m&&this.stackSlot--,this.push(a.concat(y,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var c=this.inlineStack;this.inlineStack=[];for(var a=0,g=c.length;a<g;a++){var m=c[a];if(m instanceof d)this.compileStack.push(m);else{var b=this.incrStack();this.pushSource([b," = ",m,";"]),this.compileStack.push(b)}}},isInline:function(){return this.inlineStack.length},popStack:function(c){var a=this.isInline(),g=(a?this.inlineStack:this.compileStack).pop();if(!c&&g instanceof d)return g.value;if(!a){if(!this.stackSlot)throw new s.default("Invalid stack pop");this.stackSlot--}return g},topStack:function(){var c=this.isInline()?this.inlineStack:this.compileStack,a=c[c.length-1];return a instanceof d?a.value:a},contextName:function(c){return this.useDepths&&c?"depths["+c+"]":"depth"+c},quotedString:function(c){return this.source.quotedString(c)},objectLiteral:function(c){return this.source.objectLiteral(c)},aliasable:function(c){var a=this.aliases[c];return a?(a.referenceCount++,a):(a=this.aliases[c]=this.source.wrap(c),a.aliasable=!0,a.referenceCount=1,a)},setupHelper:function(c,a,g){var m=[],b=this.setupHelperArgs(a,c,m,g),x=this.nameLookup("helpers",a,"helper"),w=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:m,paramsInit:b,name:x,callParams:[w].concat(m)}},setupParams:function(c,a,g){var m={},b=[],x=[],w=[],y=!g,v=void 0;y&&(g=[]),m.name=this.quotedString(c),m.hash=this.popStack(),this.trackIds&&(m.hashIds=this.popStack()),this.stringParams&&(m.hashTypes=this.popStack(),m.hashContexts=this.popStack());var k=this.popStack(),_=this.popStack();(_||k)&&(m.fn=_||"container.noop",m.inverse=k||"container.noop");for(var E=a;E--;)v=this.popStack(),g[E]=v,this.trackIds&&(w[E]=this.popStack()),this.stringParams&&(x[E]=this.popStack(),b[E]=this.popStack());return y&&(m.args=this.source.generateArray(g)),this.trackIds&&(m.ids=this.source.generateArray(w)),this.stringParams&&(m.types=this.source.generateArray(x),m.contexts=this.source.generateArray(b)),this.options.data&&(m.data="data"),this.useBlockParams&&(m.blockParams="blockParams"),m},setupHelperArgs:function(c,a,g,m){var b=this.setupParams(c,a,g);return b.loc=JSON.stringify(this.source.currentLocation),b=this.objectLiteral(b),m?(this.useRegister("options"),g.push("options"),["options=",b]):g?(g.push(b),""):b}},(function(){for(var h="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),c=f.RESERVED_WORDS={},a=0,g=h.length;a<g;a++)c[h[a]]=!0})(),f.isValidJavaScriptVariableName=function(h){return!f.RESERVED_WORDS[h]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(h)};function p(h,c,a,g,m){var b=c.popStack(),x=a.length;for(h&&x--;g<x;g++)b=c.nameLookup(b,a[g],m);return h?[c.aliasable("container.strict"),"(",b,", ",c.quotedString(a[g]),", ",JSON.stringify(c.source.currentLocation)," )"]:b}e.default=f,t.exports=e.default})(_i,_i.exports)),_i.exports}var ec;function _b(){return ec||(ec=1,(function(t,e){e.__esModule=!0;function r(x){return x&&x.__esModule?x:{default:x}}var n=cb(),i=r(n),s=Td(),o=r(s),u=fb(),l=pb(),d=Sb(),f=r(d),p=Bd(),h=r(p),c=Ld(),a=r(c),g=i.default.create;function m(){var x=g();return x.compile=function(w,y){return l.compile(w,y,x)},x.precompile=function(w,y){return l.precompile(w,y,x)},x.AST=o.default,x.Compiler=l.Compiler,x.JavaScriptCompiler=f.default,x.Parser=u.parser,x.parse=u.parse,x.parseWithoutProcessing=u.parseWithoutProcessing,x}var b=m();b.create=m,a.default(b),b.Visitor=h.default,b.default=b,e.default=b,t.exports=e.default})(ni,ni.exports)),ni.exports}var Ib=_b();const Vd=Nd(Ib);var Sn=1,da=65535,$i=4,Ab=function(){Sn=Sn+1&da},tc=setInterval(Ab,1e3/$i|0);tc.unref&&tc.unref();function Eb(t){var e=$i*t,r=[0],n=1,i=Sn-1&da;return function(s){var o=Sn-i&da;for(o>e&&(o=e),i=Sn;o--;)n===e&&(n=0),r[n]=r[n===0?e-1:n-1],n++;s&&(r[n-1]+=s);var u=r[n-1],l=r.length<e?0:r[n===e?0:n];return r.length<$i?u:(u-l)*$i/r.length}}class Ob{constructor(e,r=1e3){this.length=parseInt(e,10)||0,this.transferred=0,this.speed=0,this.streamSpeed=Eb(this.speed||5e3),this.initial=!1,this.emitDelay=r,this.eventStart=0,this.percentage=0}getRemainingBytes(){return parseInt(this.length,10)-parseInt(this.transferred,10)}getEta(){return this.length>=this.transferred?this.getRemainingBytes()/this.speed*1e9:0}flow(e,r){const n=e.length;if(this.transferred+=n,this.speed=this.streamSpeed(n),this.percentage=Math.round(this.transferred/this.length*100),this.initial||(this.eventStart=Date.now(),this.initial=!0),this.length>=this.transferred||Date.now()-this.eventStart>this.emitDelay){this.eventStart=Date.now();const i={total:this.length,transferred:this.transferred,speed:this.speed,eta:this.getEta()};this.length&&(i.remaining=this.getRemainingBytes(),i.percentage=this.percentage),r(i)}}}function Pb(){return typeof Response<"u"&&typeof ReadableStream<"u"}function Mb({defaultSize:t=0,emitDelay:e=10,onProgress:r=()=>null,onComplete:n=()=>null,onError:i=()=>null}){return function(o){if(!Pb())return o;const{body:u,headers:l,status:d}=o,f=l.get("content-length")||t,p=new Ob(f,e),h=u.getReader(),c=new ReadableStream({start(a){function g(){h.read().then(({done:m,value:b})=>{if(m){n({}),a.close();return}b&&p.flow(b,r),a.enqueue(b),g()}).catch(m=>{i(m)})}g()}});return new Response(c,{headers:l,status:d})}}function jd(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,e(n)]))}function rc(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[e(r,n),n]))}function uv(t,e){return Kd(qa(t).map(([r,n])=>e(r,n)).filter(r=>r!==void 0))}function _n(t){return Object.keys(t)}function Kd(t){return Object.fromEntries(t)}function qa(t){return Object.entries(t)}function Cb(t,e){return e.includes(t)}function cv(t,...e){const r={};for(const n of e)r[n]=t[n];return r}function Nb(t,...e){return Kd(qa(t).filter(([r])=>!Cb(r,e)))}function lv(t){try{return JSON.parse(t?.toString()??"")}catch{return}}function Lr(t){try{return JSON.stringify(t)}catch{return}}function dv(t){return Math.sign(t)}function Hd(t,e,r){return Math.max(e,Math.min(r,t))}function $b(t,e=r=>r){const r=new Set;return t.filter(n=>{const i=e(n);return r.has(i)?!1:(r.add(i),!0)})}function hv(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function Ts(t){const e=t.match(/^([^.]+)\.(.+)$/);return e?[e[1],e[2]]:[t,""]}function Db(t){return typeof t=="string"?Db(e=>e[t]):(e,r)=>{const n=t(e),i=t(r);return n===void 0&&i===void 0?0:n===void 0?-1:i===void 0?1:n===i?0:typeof n=="string"&&typeof i=="string"?n.localeCompare(i):typeof n=="number"&&typeof i=="number"?n-i:n.toString().localeCompare(i.toString())}}function fv(t,e){const r=t==="asc"?1:-1;return(n,i)=>r*e(n,i)}function pv(t){const e=new URL(t);return e.searchParams.set("v",Date.now().toString()),typeof t=="string"?e.toString():e}function mv(t,e=void 0){return e===void 0?Array.from({length:t},(r,n)=>n):Array.from({length:e-t},(r,n)=>n+t)}async function gv(t,{cacheAs:e="",onProgress:r,signal:n}={}){let i=new URL(typeof t=="string"?t:t.url);const s=typeof t=="string"?{headers:{}}:t;return e&&i.searchParams.set("x-cigale-cache-as",e),n&&(s.signal=n),r?fetch(i,s).then(Mb({onProgress:r})):fetch(i,s)}function zd(t){return[...t].reduce((e,r)=>e+r,0)}function yv(t,e=NaN){return t.length===0?e:zd(t)/t.length}function Rb(t){return t!=null}function Lb(t,e=0){const r=Math.pow(10,Math.abs(e));return e<0?Math.round(t/r)*r:Math.round(t*r)/r}function bv({offsetX:t,offsetY:e},r,n=0){return t>=-n&&t<=r.width+n&&e>=-n&&e<=r.height+n}function xv(t){return t==="application/zip"||t==="application/x-zip-compressed"||t==="application/x-zip"}function vv(...t){let e=[];for(let r=0;r<t.length;r+=2){const n=t[r],i=t[r+1]??1-zd(e.map(([,s])=>s));e.push([n,i])}return(r,n)=>{let i=0;const s=e.findIndex(([o])=>o===r);for(const[o,[u,l]]of e.entries())o<s&&(i+=l),o===s&&(i+=l*n);return i}}function wv(t){const e=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").trim().replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"").toLowerCase();if(!e)throw new Error(`Cannot slugify "${t}" (result is empty)`);return e}function kv(t,e,r){if("groupBy"in Map&&!r)return Map.groupBy(t,e);const n=new Map;for(const i of t){const s=e(i);n.has(s)||n.set(s,[]),n.get(s).push(r?r(i):i)}return n}function Sv(t,...e){if(t>=1)return`var(--${e.at(-1)})`;if(t<=0)return`var(--${e[0]})`;const r=e.length-1,n=Math.floor(t*r);return`color-mix(
		in lab,
		var(--${e[n+1]})
		${Lb((t*r-n)*100,2)}%,
		var(--${e[n]})
	)`.replaceAll(`
`,"").replaceAll(/\s+/g," ").replaceAll("( ","(").replaceAll(" )",")")}function _v(t,e,{firstTimeDuration:r}={}){const n=!localStorage.getItem("app_started_before");localStorage.setItem("app_started_before","true"),n&&(e=r??e);const i=document.querySelector(t);if(!(i instanceof HTMLElement)){i?.remove();return}i.style.transition=`opacity ${e}ms linear`,i.style.opacity="0",setTimeout(()=>{i.remove()},e)}function Iv(t){const e=t.replace(/^#/,"").match(/.{2}/g);if(e===null)throw new Error("Invalid color, use hex notation");return Math.round((parseInt(e[0],16)*299+parseInt(e[1],16)*587+parseInt(e[2],16)*114)/1e3)>125?"#000000":"#ffffff"}function Av(t){throw new Error(t)}const Ev=`Lorem ipsum dolor sit amet. A impedit beatae sed nostrum voluptatem
ut omnis aliquid et galisum quaerat. Est sunt voluptatem aut porro iste et tempora voluptatem
aut pariatur minima sed omnis cumque est iusto fugit vel rerum magni. 33 ducimus nesciunt ut
consequuntur esse nam necessitatibus tempore sit suscipit voluptatibus qui rerum earum non autem
doloribus. Rem itaque esse est nostrum optio id repellat recusandae et ipsa quis.

Aut odio ipsa sed autem esse ut autem error qui voluptates perspiciatis aut officiis consequuntur
sit amet nihil. Eos delectus consequatur sit natus iure qui omnis omnis ea illum distinctio et
quos quidem. Et nisi autem est rerum eius ut dolorum commodi et temporibus expedita ea dolorem 
error ad asperiores facilis ad numquam libero. Aut suscipit maxime sit explicabo dolorem est
accusantium enim et repudiandae omnis cum dolorem nemo id quia facilis.

Et dolorem perferendis et rerum suscipit qui voluptatibus quia et nihil nostrum 33 omnis soluta. 
Nam minus minima et perspiciatis velit et eveniet rerum et nihil voluptates aut eaque ipsa et 
ratione facere!`;function Ov(t){return t instanceof DOMException&&t.name==="AbortError"}function Pv(t,e){return t?[e]:[]}function Mv(t,e){return t==null?[]:[e(t)]}function Cv(t,e){return t?e:{}}function Tb(t,e,r){return e===null?{}:e===void 0?{}:{[t]:r(e)}}async function Nv(t){return new Promise(e=>setTimeout(e,t))}const W=S(/^[\w._-]+$/),as=S(/[\w.-]+/).describe("Identifiant unique pour un protocole. On conseille de mettre une partie qui vous identifie dans cet identifiant, car il doit être globalement unique. Par exemple, fr.sete-moulis-cnrs.mon-protocole si vous contrôler le nom de domain sete-moulis.cnrs.fr"),Tt=S("/^([\\w.-]+)__([\\w._-]+)$/").describe('Identifiant de métadonnée avec namespace, sous la forme "protocolId__metadataId"'),Gd=W.array().pipe(t=>[...new Set(t)]),nc=S("0 <= number <= 1.0001").pipe(t=>Hd(t,0,1)),Sr=S(/https?:\/\/.+/),Bb=S(/^#?[0-9A-Fa-f]{6}$/).pipe(t=>t.startsWith("#")?t:`#${t}`),Fa=Sr.configure("L'URL à laquelle se situe le fichier. Effectue une requête GET sans en-têtes particuliers.","self").or({url:Sr.describe("L'URL de la requête"),"headers?":S({"[string]":"string"}).describe("Les en-têtes à ajouter dans la requête"),"method?":S.enumerated("GET","POST","PUT","DELETE").describe("La méthode de la requête (GET par défaut)")}).configure("Le requête HTTP pour obtenir le fichier, avec des en-têtes et une méthode personnalisable","self"),Ua=S({width:"number > 0",height:"number > 0"}).pipe(({width:t,height:e})=>({width:t,height:e,aspectRatio:t/e})),Wd={suffix:{documentation:"Ajoute un suffixe à un nom de fichier, avant l'extension",usage:"{{ suffix 'filename.jpeg' '_example' }} -> 'filename_example.jpeg'",implementation:(t,e)=>{const[r,n]=Ts(t);return`${r}${e}.${n}`}},extension:{documentation:"Récupère l’extension d’un nom de fichier",usage:"{{ extension 'filename.jpeg' }} -> 'jpeg'",implementation:t=>Ts(t)[1]},stem:{documentation:"Récupère le nom d’un fichier sans son extension",usage:"{{ stem 'filename.jpeg' }} -> 'filename'",implementation:t=>Ts(t)[0]},fallback:{documentation:"Fournit une valeur de repli si la première est indéfinie",usage:"{{ fallback obj.does_not_exist 'Unknown' }} -> 'Unknown'",implementation:(t,e)=>t??e},metadata:{documentation:"Récupère la valeur d'une métadonnée sur un subjet (une session, une observation ou une image) donnée. L'ID de la métadonnée peut ne pas comporter de namespace. Dans ce cas, le namespace correspondant au protocole courant est utilisé. Renvoie null si la métadonnée n'existe pas.",usage:"{{ metadata session 'transect_code' }} -> 'TR123'",implementation:(t,e)=>{if("metadata"in t)return t.protocolMetadata[e]?.value??t.metadata[e]?.value??null;if("metadataOverrides"in t)return t.protocolMetadataOverrides[e]?.value??t.metadataOverrides[e]?.value??null;throw new Error("Subject must have either metadata or metadataOverrides property")}},now:{documentation:"Renvoie la date actuelle dans le format précisé. Voir https://date-fns.org/v4.1.0/docs/format pour une description complète du format",usage:`{{ now "dd/MM/yyyy 'à' HH:mm" }} -> '31/12/2026 à 23:59'`,implementation:t=>$r(Date.now(),t)},year:{documentation:"Renvoie l’année d'une date sur 4 chiffres",usage:"{{ year '2024-12-31' }} -> '2024'",implementation:t=>$r(new Date(t),"yyyy")},month:{documentation:"Renvoie le mois d'une date sur 2 chiffres",usage:"{{ month '2024-12-31' }} -> '12'",implementation:t=>$r(new Date(t),"MM")},day:{documentation:"Renvoie le jour d'une date sur 2 chiffres",usage:"{{ day '2024-12-31' }} -> '31'",implementation:t=>$r(new Date(t),"dd")},hour:{documentation:"Renvoie l'heure d'une date sur 2 chiffres",usage:"{{ hour '2024-12-31T23:59' }} -> '23'",implementation:t=>$r(new Date(t),"HH")},minute:{documentation:"Renvoie les minutes d'une date sur 2 chiffres",usage:"{{ minute '2024-12-31T23:59' }} -> '59'",implementation:t=>$r(new Date(t),"mm")},second:{documentation:"Renvoie les secondes d'une date sur 2 chiffres",usage:"{{ second '2024-12-31T23:59:01' }} -> '01'",implementation:t=>$r(new Date(t),"ss")},date:{documentation:"Construire une date à partir de ses composantes. il est possible d'omettre les noms des composantes si on les donne dans l'ordre descendant (year, ..., minutes). toutes les composantes sont optionelles à partir des heures (et valent 0 par défaut). Les dates sont interprétées localement (dans le fuseau horaire local) ",usage:"{{ date year=2024 month=12 day=31 hours=23 minutes=59 seconds=1.5 }} -> '2024-12-31T23:59:01.500+02:00'",implementation:(t,e,r,n,i,{hash:s})=>{const o=s.seconds??0;return new Date(t,e-1,r,n??s.hours??0,i??s.minutes??0,Math.floor(o),Math.round((o-Math.floor(o))*1e3))}},object:{documentation:"Crée une représentation JSON d'un objet en prenant les paramètres comme paires clé-valeur",usage:`{{ object key1='value1' key2='value2' }} -> '{"key1":"value1","key2":"value2"}'`,implementation:({hash:t})=>Lr(t)},array:{documentation:"Crée une représentation JSON d'un tableau en prenant les paramètres comme éléments du tableau",usage:`{{ array 'value1' 'value2' }} -> '["value1","value2"]'`,implementation:(t,e,r,n,i,s)=>Lr([t,e,r,n,i,s].filter(o=>o!==void 0))},gps:{documentation:"Crée une représetation JSON des coordonnées GPS données (latitude puis longitude)",usage:`{{ gps 42.957408 1.0859884 }} -> '{"latitude": 42.957408, "longitude": 1.0859884}'`,implementation:(t,e)=>Lr({latitude:t,longitude:e})},boundingBox:{documentation:"Crée une représentation JSON d’une bounding box à partir de ses coordonnées normalisées (x, y, w, h)",usage:`{{ boundingBox 0.5 0.5 1 1 }} -> '{"x":0.5,"y":0.5,"w":1,"h":1}'`,implementation:(t,e,r,n)=>Lr({x:t,y:e,w:r,h:n})}};for(const[t,{implementation:e}]of Object.entries(Wd))Vd.registerHelper(t,e);const Va=(t,e)=>S.string.pipe(r=>{try{const n=Vd.compile(r,{noEscape:!0,assumeObjects:!0,knownHelpersOnly:!0,knownHelpers:jd(Wd,()=>!0)});return{toJSON:()=>r,render(i){const s=n(t.assert(i));return e?e(s):s}}}catch(n){throw new Error(`Invalid template ${Lr(r)}`,{cause:n})}}),Yd=t=>Va(t,e=>e.replaceAll("\\","/")),Bn=S(/^(application|audio|font|example|image|message|model|multipart|text|video|x-\w+)\/\w+$/),qb=S.or([/^\..+$/,"@","Une extension de fichier"],[Bn,"@","Un type MIME"],['"audio/*"',"@","Un fichier audio"],['"video/*"',"@","Un fichier vidéo"],['"image/*"',"@","Un fichier image"]),ic=/^\s*(\d+(?:[.,]\d+)?)\s+([kMGTP]?)(i?)([oBb])\s*$/i,sc=S("number").describe("Une taille de fichier exprimée en octets").or(S(ic).pipe.try(t=>{const e=t.match(ic);if(!e)throw new Error(`Invalid file size: ${t}`);const[r,n,i,s,o]=e;let u=Number.parseFloat(n.replace(",","."));if(Number.isNaN(u))throw new Error(`Invalid file size amount: ${n} is ${u}`);const l={"":0,K:3,M:6,G:9,T:12,P:15}[i.toUpperCase()];return u*=Math.pow(s?2:10,l??0),o==="b"&&(u/=8),u}).describe("Une taille de fichier sous une forme plus lisible comme '2.5 MB' (les suffixes k, M, G, T et P sont supportés, avec une base 10 ou 2 selon la présence du suffixe 'i', et les unités 'B'/'o' ou 'b' sont supportées pour indiquer si le nombre donné est en bits ou en octets)")),Fb=(t,e)=>S("Record<string, unknown>").pipe.try(r=>{const n=Object.entries(r);if(n.length!==1)throw new Error(`Expected an object with a single entry, but got ${n.length} entries: ${Lr(r)}`);const[i,s]=n[0];return{key:t.assert(i),value:e.assert(s)}});function Ub(t){return Vb(t,"yyyy-MM-dd","yyyy-MM-dd'T'HH:mm:ss","yyyy-MM-dd'T'HH:mm:ss.SSS","yyyy-MM-dd'T'HH:mm:ssXXX","yyyy-MM-dd'T'HH:mm:ss.SSSXXX")}function Vb(t,...e){for(const r of e)try{const n=Gy(t,r,new Date);if(wd(n))return n}catch{continue}}const jb={InteropIndex:1,InteropVersion:2,ProcessingSoftware:11,SubfileType:254,OldSubfileType:255,ImageWidth:256,ImageHeight:257,BitsPerSample:258,Compression:259,PhotometricInterpretation:262,Thresholding:263,CellWidth:264,CellLength:265,FillOrder:266,DocumentName:269,ImageDescription:270,Make:271,Model:272,StripOffsets:273,Orientation:274,SamplesPerPixel:277,RowsPerStrip:278,StripByteCounts:279,MinSampleValue:280,MaxSampleValue:281,XResolution:282,YResolution:283,PlanarConfiguration:284,PageName:285,XPosition:286,YPosition:287,FreeOffsets:288,FreeByteCounts:289,GrayResponseUnit:290,GrayResponseCurve:291,T4Options:292,T6Options:293,ResolutionUnit:296,PageNumber:297,ColorResponseUnit:300,TransferFunction:301,Software:305,ModifyDate:306,Artist:315,HostComputer:316,Predictor:317,WhitePoint:318,PrimaryChromaticities:319,ColorMap:320,HalftoneHints:321,TileWidth:322,TileLength:323,TileOffsets:324,TileByteCounts:325,BadFaxLines:326,CleanFaxData:327,ConsecutiveBadFaxLines:328,SubIFD:330,InkSet:332,InkNames:333,NumberofInks:334,DotRange:336,TargetPrinter:337,ExtraSamples:338,SampleFormat:339,SMinSampleValue:340,SMaxSampleValue:341,TransferRange:342,ClipPath:343,XClipPathUnits:344,YClipPathUnits:345,Indexed:346,JPEGTables:347,OPIProxy:351,GlobalParametersIFD:400,ProfileType:401,FaxProfile:402,CodingMethods:403,VersionYear:404,ModeNumber:405,Decode:433,DefaultImageColor:434,T82Options:435,JPEGProc:512,ThumbnailOffset:513,ThumbnailLength:514,JPEGRestartInterval:515,JPEGLosslessPredictors:517,JPEGPointTransforms:518,JPEGQTables:519,JPEGDCTables:520,JPEGACTables:521,YCbCrCoefficients:529,YCbCrSubSampling:530,YCbCrPositioning:531,ReferenceBlackWhite:532,StripRowCounts:559,ApplicationNotes:700,USPTOMiscellaneous:999,RelatedImageFileFormat:4096,RelatedImageWidth:4097,RelatedImageHeight:4098,Rating:18246,XP_DIP_XML:18247,StitchInfo:18248,RatingPercent:18249,ImageID:32781,WangTag1:32931,WangAnnotation:32932,WangTag3:32933,WangTag4:32934,Matteing:32995,DataType:32996,ImageDepth:32997,TileDepth:32998,Model2:33405,CFARepeatPatternDim:33421,CFAPattern2:33422,BatteryLevel:33423,KodakIFD:33424,Copyright:33432,ExposureTime:33434,FNumber:33437,MDFileTag:33445,MDScalePixel:33446,MDColorTable:33447,MDLabName:33448,MDSampleInfo:33449,MDPrepDate:33450,MDPrepTime:33451,MDFileUnits:33452,PixelScale:33550,AdventScale:33589,AdventRevision:33590,UIC1Tag:33628,UIC2Tag:33629,UIC3Tag:33630,UIC4Tag:33631,"IPTC-NAA":33723,IntergraphPacketData:33918,IntergraphFlagRegisters:33919,IntergraphMatrix:33920,INGRReserved:33921,ModelTiePoint:33922,Site:34016,ColorSequence:34017,IT8Header:34018,RasterPadding:34019,BitsPerRunLength:34020,BitsPerExtendedRunLength:34021,ColorTable:34022,ImageColorIndicator:34023,BackgroundColorIndicator:34024,ImageColorValue:34025,BackgroundColorValue:34026,PixelIntensityRange:34027,TransparencyIndicator:34028,ColorCharacterization:34029,HCUsage:34030,TrapIndicator:34031,CMYKEquivalent:34032,SEMInfo:34118,AFCP_IPTC:34152,PixelMagicJBIGOptions:34232,ModelTransform:34264,WB_GRGBLevels:34306,LeafData:34310,PhotoshopSettings:34377,ExifOffset:34665,ICC_Profile:34675,TIFF_FXExtensions:34687,MultiProfiles:34688,SharedData:34689,T88Options:34690,ImageLayer:34732,GeoTiffDirectory:34735,GeoTiffDoubleParams:34736,GeoTiffAsciiParams:34737,ExposureProgram:34850,SpectralSensitivity:34852,GPSInfo:34853,ISO:34855,"Opto-ElectricConvFactor":34856,Interlace:34857,TimeZoneOffset:34858,SelfTimerMode:34859,SensitivityType:34864,StandardOutputSensitivity:34865,RecommendedExposureIndex:34866,ISOSpeed:34867,ISOSpeedLatitudeyyy:34868,ISOSpeedLatitudezzz:34869,FaxRecvParams:34908,FaxSubAddress:34909,FaxRecvTime:34910,LeafSubIFD:34954,ExifVersion:36864,DateTimeOriginal:36867,CreateDate:36868,ComponentsConfiguration:37121,CompressedBitsPerPixel:37122,ShutterSpeedValue:37377,ApertureValue:37378,BrightnessValue:37379,ExposureCompensation:37380,MaxApertureValue:37381,SubjectDistance:37382,MeteringMode:37383,LightSource:37384,Flash:37385,FocalLength:37386,FlashEnergy:37387,SpatialFrequencyResponse:37388,Noise:37389,FocalPlaneXResolution:37390,FocalPlaneYResolution:37391,FocalPlaneResolutionUnit:37392,ImageNumber:37393,SecurityClassification:37394,ImageHistory:37395,SubjectArea:37396,ExposureIndex:37397,"TIFF-EPStandardID":37398,SensingMethod:37399,CIP3DataFile:37434,CIP3Sheet:37435,CIP3Side:37436,StoNits:37439,MakerNote:37500,UserComment:37510,SubSecTime:37520,SubSecTimeOriginal:37521,SubSecTimeDigitized:37522,MSDocumentText:37679,MSPropertySetStorage:37680,MSDocumentTextPosition:37681,ImageSourceData:37724,XPTitle:40091,XPComment:40092,XPAuthor:40093,XPKeywords:40094,XPSubject:40095,FlashpixVersion:40960,ColorSpace:40961,ExifImageWidth:40962,ExifImageHeight:40963,RelatedSoundFile:40964,InteropOffset:40965,SubjectLocation:41492,FileSource:41728,SceneType:41729,CFAPattern:41730,CustomRendered:41985,ExposureMode:41986,WhiteBalance:41987,DigitalZoomRatio:41988,FocalLengthIn35mmFormat:41989,SceneCaptureType:41990,GainControl:41991,Contrast:41992,Saturation:41993,Sharpness:41994,DeviceSettingDescription:41995,SubjectDistanceRange:41996,ImageUniqueID:42016,OwnerName:42032,SerialNumber:42033,LensInfo:42034,LensMake:42035,LensModel:42036,LensSerialNumber:42037,GDALMetadata:42112,GDALNoData:42113,Gamma:42240,ExpandSoftware:44992,ExpandLens:44993,ExpandFilm:44994,ExpandFilterLens:44995,ExpandScanner:44996,ExpandFlashLamp:44997,PixelFormat:48129,Transformation:48130,Uncompressed:48131,ImageType:48132,WidthResolution:48258,HeightResolution:48259,ImageOffset:48320,ImageByteCount:48321,AlphaOffset:48322,AlphaByteCount:48323,ImageDataDiscard:48324,AlphaDataDiscard:48325,OceScanjobDesc:50215,OceApplicationSelector:50216,OceIDNumber:50217,OceImageLogic:50218,Annotations:50255,PrintIM:50341,USPTOOriginalContentType:50560,DNGVersion:50706,DNGBackwardVersion:50707,UniqueCameraModel:50708,LocalizedCameraModel:50709,CFAPlaneColor:50710,CFALayout:50711,LinearizationTable:50712,BlackLevelRepeatDim:50713,BlackLevel:50714,BlackLevelDeltaH:50715,BlackLevelDeltaV:50716,WhiteLevel:50717,DefaultScale:50718,DefaultCropOrigin:50719,DefaultCropSize:50720,ColorMatrix1:50721,ColorMatrix2:50722,CameraCalibration1:50723,CameraCalibration2:50724,ReductionMatrix1:50725,ReductionMatrix2:50726,AnalogBalance:50727,AsShotNeutral:50728,AsShotWhiteXY:50729,BaselineExposure:50730,BaselineNoise:50731,BaselineSharpness:50732,BayerGreenSplit:50733,LinearResponseLimit:50734,CameraSerialNumber:50735,DNGLensInfo:50736,ChromaBlurRadius:50737,AntiAliasStrength:50738,ShadowScale:50739,DNGPrivateData:50740,MakerNoteSafety:50741,RawImageSegmentation:50752,CalibrationIlluminant1:50778,CalibrationIlluminant2:50779,BestQualityScale:50780,RawDataUniqueID:50781,AliasLayerMetadata:50784,OriginalRawFileName:50827,OriginalRawFileData:50828,ActiveArea:50829,MaskedAreas:50830,AsShotICCProfile:50831,AsShotPreProfileMatrix:50832,CurrentICCProfile:50833,CurrentPreProfileMatrix:50834,ColorimetricReference:50879,PanasonicTitle:50898,PanasonicTitle2:50899,CameraCalibrationSig:50931,ProfileCalibrationSig:50932,ProfileIFD:50933,AsShotProfileName:50934,NoiseReductionApplied:50935,ProfileName:50936,ProfileHueSatMapDims:50937,ProfileHueSatMapData1:50938,ProfileHueSatMapData2:50939,ProfileToneCurve:50940,ProfileEmbedPolicy:50941,ProfileCopyright:50942,ForwardMatrix1:50964,ForwardMatrix2:50965,PreviewApplicationName:50966,PreviewApplicationVersion:50967,PreviewSettingsName:50968,PreviewSettingsDigest:50969,PreviewColorSpace:50970,PreviewDateTime:50971,RawImageDigest:50972,OriginalRawFileDigest:50973,SubTileBlockSize:50974,RowInterleaveFactor:50975,ProfileLookTableDims:50981,ProfileLookTableData:50982,OpcodeList1:51008,OpcodeList2:51009,OpcodeList3:51022,NoiseProfile:51041,TimeCodes:51043,FrameRate:51044,TStop:51058,ReelName:51081,OriginalDefaultFinalSize:51089,OriginalBestQualitySize:51090,OriginalDefaultCropSize:51091,CameraLabel:51105,ProfileHueSatMapEncoding:51107,ProfileLookTableEncoding:51108,BaselineExposureOffset:51109,DefaultBlackRender:51110,NewRawImageDigest:51111,RawToPreviewGain:51112,DefaultUserCrop:51125,Padding:59932,OffsetSchema:59933,Lens:65002,KDC_IFD:65024,RawFile:65100,Converter:65101,Exposure:65105,Shadows:65106,Brightness:65107,Smoothness:65111,MoireFilter:65112},Kb={GPSVersionID:0,GPSLatitudeRef:1,GPSLatitude:2,GPSLongitudeRef:3,GPSLongitude:4,GPSAltitudeRef:5,GPSAltitude:6,GPSTimeStamp:7,GPSSatellites:8,GPSStatus:9,GPSMeasureMode:10,GPSDOP:11,GPSSpeedRef:12,GPSSpeed:13,GPSTrackRef:14,GPSTrack:15,GPSImgDirectionRef:16,GPSImgDirection:17,GPSMapDatum:18,GPSDestLatitudeRef:19,GPSDestLatitude:20,GPSDestLongitudeRef:21,GPSDestLongitude:22,GPSDestBearingRef:23,GPSDestBearing:24,GPSDestDistanceRef:25,GPSDestDistance:26,GPSProcessingMethod:27,GPSAreaInformation:28,GPSDateStamp:29,GPSDifferential:30,GPSHPositioningError:31},Hb={...jb,...Kb};var Bs={};function zb(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qs={};const Gb={},Wb=Object.freeze(Object.defineProperty({__proto__:null,default:Gb},Symbol.toStringTag,{value:"Module"})),ac=Yy(Wb);var oc;function Yb(){return oc||(oc=1,(function(t){var e=(function(){var r=function(G,$,U,H){for(U=U||{},H=G.length;H--;U[G[H]]=$);return U},n=[1,19],i=[1,20],s=[1,4],o=[1,5],u=[1,6],l=[1,7],d=[1,8],f=[1,80],p=[1,9],h=[1,11],c=[1,18],a=[1,42],g=[1,78],m=[1,79],b=[1,81],x=[1,82],w=[1,83],y=[1,84],v=[1,85],k=[1,86],_=[1,87],E=[1,88],D=[1,89],A=[1,90],I=[1,91],O=[1,92],R=[1,93],q=[1,94],V=[1,95],K=[1,96],z=[1,97],pe=[1,23],me=[1,24],ge=[1,25],ye=[1,26],be=[1,27],xe=[1,28],ve=[1,29],we=[1,30],ke=[1,31],Se=[1,32],_e=[1,33],Ie=[1,34],Ae=[1,35],Ee=[1,36],Oe=[1,37],Pe=[1,38],Me=[1,39],Ce=[1,40],Ye=[1,21],Je=[1,22],Ze=[1,44],Xe=[1,45],Qe=[1,46],et=[1,47],tt=[1,48],rt=[1,49],nt=[1,50],it=[1,51],st=[1,52],at=[1,53],ot=[1,54],ut=[1,55],ct=[1,56],lt=[1,57],dt=[1,58],ht=[1,59],ft=[1,60],pt=[1,61],mt=[1,62],gt=[1,63],yt=[1,64],bt=[1,65],xt=[1,66],vt=[1,67],wt=[1,68],kt=[1,69],St=[1,70],_t=[1,71],It=[1,72],At=[1,73],Et=[1,74],Ot=[1,75],Pt=[1,76],Mt=[1,77],Ne=[1,100],$e=[1,101],De=[1,102],Re=[1,103],Le=[1,104],Te=[1,105],Be=[1,106],qe=[1,107],cs=[1,109],qn=[1,110],Fn=[1,111],Un=[1,112],Rt=[1,113],Vn=[1,114],jn=[1,115],Kn=[1,120],Hn=[1,117],zn=[1,118],Gn=[1,119],Wn=[1,121],Yn=[1,122],Jn=[1,123],Pr=[1,134],Zn=[1,135],N=[4,6,7,8,9,13,15,20,21,22,32,37,38,39,41,42,43],mr=[1,139],Gt=[1,141],Wt=[1,142],ie=[4,6,7,8,9,13,15,18,20,21,22,32,37,38,39,41,42,43],ce=[4,6,7,8,9,13,15,18,20,21,22,32,34,37,38,39,41,42,43,45,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,124,125,126,127,128,129,130,131],Mr=[4,6,7,8,9,13,15,18,20,21,22,32,37,38,39,41,42,43,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,124,125,126,127,128,129,130,131],gr=[4,6,7,8,9,13,15,20,21,22,32,36,37,38,39,41,42,43],rr=[4,6,7,8,9,13,15,21,22,32,37,38,39,41,42,43],Wa=[1,177],Ya=[1,176],Ur=[7,8,18],Ja=[4,6,7,8,9,13,15,18,20,21,22,32,34,37,38,39,41,42,43],Za=[4,6,7,8,9,13,15,18,20,21,22,32,34,37,38,39,40,41,42,43],Xa=[4,6,7,8,9,13,15,18,20,21,22,32,37,38,39,41,42,43,45,47],ls={trace:function(){},yy:{},symbols_:{error:2,file:3,EOF:4,e:5,".":6,AND:7,",":8,THEN:9,STARTS_WITH:10,ENDS_WITH:11,GROUP:12,END_GROUP:13,CAPTURE:14,END_CAPTURE:15,CHARACTER_SET:16,charset:17,";":18,NOT_CHARACTER_SET:19,OR:20,FOLLOWED_BY:21,NOT_FOLLOWED_BY:22,repetition:23,range:24,ESCAPED:25,separatorcharacter:26,hexcharacter:27,unicodecharacter:28,specialcharacter:29,word:30,helper:31,FROM:32,character:33,TO:34,number:35,SMALLEST:36,OPTIONAL_REPETITION:37,ONE_OR_MORE_REPETITION:38,ZERO_OR_ONE_REPETITION:39,REPETITION:40,MINIMUM:41,MAXIMUM:42,FOR:43,simplecharacter:44,NUMBER:45,separators:46,CHARACTER:47,_:48,"-":49,"^":50,"+":51,"*":52,"?":53,"(":54,")":55,"{":56,"}":57,"[":58,"]":59,":":60,"!":61,$:62,"|":63,"\\\\":64,"/":65,'"':66,CONTROL_CHARACTER:67,TAB:68,VERTICAL_TAB:69,ALPHANUMERIC:70,NON_WORD:71,SPACE:72,NON_SPACE:73,NULL:74,RETURN:75,FORM_FEED:76,LINE_FEED:77,DIGIT:78,NON_DIGIT:79,BACKSPACE:80,ANY_CHARACTER:81,START:82,END:83,HEX:84,hexvalue:85,UNICODE:86,datetime:87,LETTER:88,UPPERCASE:89,LOWERCASE:90,WORD:91,TYPE_NUMBER:92,NEGATIVE:93,POSITIVE:94,DECIMAL:95,HTML_TAG:96,IPV4:97,IPV6:98,IP_ADDRESS:99,MAC_ADDRESS:100,URL:101,EMAIL:102,SLUG:103,LOCALE:104,ANYTHING:105,LATITUDE:106,LONGITUDE:107,COLOR_NAME:108,HOSTNAME:109,UUID:110,GUID:111,US_ZIP_CODE:112,CANADIAN_POSTAL_CODE:113,BRAZILIAN_POSTAL_CODE:114,UK_POSTAL_CODE:115,BIC:116,IBAN:117,BRAINFUCK:118,MORSE:119,YOUTUBE_CHANNEL:120,YOUTUBE_VIDEO:121,date:122,time:123,DATE:124,DAY:125,MONTH:126,YEAR:127,yy:128,HOURS:129,MINUTES:130,SECONDS:131,$accept:0,$end:1},terminals_:{2:"error",4:"EOF",6:".",7:"AND",8:",",9:"THEN",10:"STARTS_WITH",11:"ENDS_WITH",12:"GROUP",13:"END_GROUP",14:"CAPTURE",15:"END_CAPTURE",16:"CHARACTER_SET",18:";",19:"NOT_CHARACTER_SET",20:"OR",21:"FOLLOWED_BY",22:"NOT_FOLLOWED_BY",25:"ESCAPED",32:"FROM",34:"TO",36:"SMALLEST",37:"OPTIONAL_REPETITION",38:"ONE_OR_MORE_REPETITION",39:"ZERO_OR_ONE_REPETITION",40:"REPETITION",41:"MINIMUM",42:"MAXIMUM",43:"FOR",45:"NUMBER",46:"separators",47:"CHARACTER",48:"_",49:"-",50:"^",51:"+",52:"*",53:"?",54:"(",55:")",56:"{",57:"}",58:"[",59:"]",60:":",61:"!",62:"$",63:"|",64:"\\\\",65:"/",66:'"',67:"CONTROL_CHARACTER",68:"TAB",69:"VERTICAL_TAB",70:"ALPHANUMERIC",71:"NON_WORD",72:"SPACE",73:"NON_SPACE",74:"NULL",75:"RETURN",76:"FORM_FEED",77:"LINE_FEED",78:"DIGIT",79:"NON_DIGIT",80:"BACKSPACE",81:"ANY_CHARACTER",82:"START",83:"END",84:"HEX",86:"UNICODE",88:"LETTER",89:"UPPERCASE",90:"LOWERCASE",91:"WORD",92:"TYPE_NUMBER",93:"NEGATIVE",94:"POSITIVE",95:"DECIMAL",96:"HTML_TAG",97:"IPV4",98:"IPV6",99:"IP_ADDRESS",100:"MAC_ADDRESS",101:"URL",102:"EMAIL",103:"SLUG",104:"LOCALE",105:"ANYTHING",106:"LATITUDE",107:"LONGITUDE",108:"COLOR_NAME",109:"HOSTNAME",110:"UUID",111:"GUID",112:"US_ZIP_CODE",113:"CANADIAN_POSTAL_CODE",114:"BRAZILIAN_POSTAL_CODE",115:"UK_POSTAL_CODE",116:"BIC",117:"IBAN",118:"BRAINFUCK",119:"MORSE",120:"YOUTUBE_CHANNEL",121:"YOUTUBE_VIDEO",124:"DATE",125:"DAY",126:"MONTH",127:"YEAR",128:"yy",129:"HOURS",130:"MINUTES",131:"SECONDS"},productions_:[0,[3,1],[3,2],[5,2],[5,3],[5,3],[5,3],[5,3],[5,4],[5,4],[5,2],[5,2],[5,3],[5,3],[5,3],[5,3],[5,3],[5,3],[5,3],[5,2],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[5,1],[24,4],[24,4],[23,2],[23,1],[23,1],[23,1],[23,5],[23,3],[23,3],[23,3],[30,1],[30,1],[30,2],[30,2],[17,1],[17,1],[17,1],[17,1],[17,3],[17,3],[33,1],[33,1],[26,1],[26,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[29,1],[29,2],[29,1],[29,1],[29,1],[29,1],[29,1],[29,1],[29,1],[29,1],[29,1],[29,1],[29,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,3],[27,5],[28,5],[28,6],[85,1],[85,1],[31,1],[31,1],[31,2],[31,2],[31,1],[31,2],[31,2],[31,1],[31,2],[31,2],[31,1],[31,2],[31,2],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,1],[87,1],[87,2],[87,3],[87,1],[87,2],[87,3],[87,1],[122,1],[122,1],[122,1],[122,1],[123,1],[123,1],[123,1],[35,2],[35,1]],performAction:function(G,$,U,H,j,M,qt){var L=M.length-1;switch(j){case 1:return"";case 2:return M[L-1];case 3:this.$=M[L-1];break;case 4:case 5:case 6:case 7:this.$=M[L-2]+M[L];break;case 8:case 9:this.$=M[L-3]+M[L];break;case 10:this.$="^(?:"+M[L]+")";break;case 11:this.$=M[L]+"$";break;case 12:this.$="(?:"+M[L-1]+")";break;case 13:this.$="("+M[L-1]+")";break;case 14:this.$="["+M[L-1]+"]";break;case 15:this.$="[^"+M[L-1]+"]";break;case 16:this.$="(?:"+M[L-2]+"|"+M[L]+")";break;case 17:this.$=M[L-2]+"(?="+M[L]+")";break;case 18:this.$=M[L-2]+"(?!"+M[L]+")";break;case 19:this.$=M[L-1]+M[L];break;case 20:this.$="["+M[L]+"]";break;case 21:this.$=G.substring(1,G.length-1).replace(/\s/g,"\\s");break;case 28:case 29:this.$=M[L-2]+"-"+M[L];break;case 30:this.$=M[L-1]+"?";break;case 31:this.$="*";break;case 32:this.$="+";break;case 33:this.$="?";break;case 34:this.$="{"+M[L-3]+","+M[L-1]+"}";break;case 35:this.$="{"+M[L-1]+",}";break;case 36:this.$="{1,"+M[L-1]+"}";break;case 37:this.$="{"+M[L-1]+"}";break;case 40:case 137:case 140:this.$=M[L-1]+M[L];break;case 41:this.$=String(M[L-1])+M[L];break;case 46:case 47:this.$=M[L-2]+M[L];break;case 50:this.$="\\.";break;case 51:this.$="\\,";break;case 53:this.$="_";break;case 54:this.$=";";break;case 55:this.$="\\-";break;case 56:this.$="\\^";break;case 57:this.$="\\+";break;case 58:this.$="\\*";break;case 59:this.$="\\?";break;case 60:this.$="\\(";break;case 61:this.$="\\)";break;case 62:this.$="\\{";break;case 63:this.$="\\}";break;case 64:this.$="\\[";break;case 65:this.$="\\]";break;case 66:this.$="\\:";break;case 67:this.$="\\!";break;case 68:this.$="\\$";break;case 69:this.$="\\|";break;case 70:this.$="\\\\";break;case 71:this.$="\\/";break;case 72:this.$='\\"';break;case 73:this.$="\\c"+M[L];break;case 74:this.$="\\t";break;case 75:this.$="\\v";break;case 76:this.$="\\w";break;case 77:this.$="\\W";break;case 78:this.$="\\s";break;case 79:this.$="\\S";break;case 80:this.$="\\0";break;case 81:this.$="\\r";break;case 82:this.$="\\f";break;case 83:this.$="\\n";break;case 84:this.$="\\d";break;case 85:this.$="\\D";break;case 86:this.$="[\\b]";break;case 87:this.$=".";break;case 88:this.$="^";break;case 89:this.$="$";break;case 90:this.$="\\x"+M[L-1]+M[L];break;case 91:case 92:this.$="\\u"+M[L-3]+M[L-2]+M[L-1]+M[L];break;case 93:this.$="\\u"+M[L-4]+M[L-3]+M[L-2]+M[L-1]+M[L];break;case 95:if(!/[a-fA-F]/.test(G))throw new Error("Invalid hex value");this.$=M[L];break;case 97:this.$="[a-zA-Z]";break;case 98:this.$="[A-Z]";break;case 99:this.$="[a-z]";break;case 100:this.$="[a-zA-Z]+";break;case 101:this.$="[A-Z]+";break;case 102:this.$="[a-z]+";break;case 103:this.$="\\-?[0-9]+";break;case 104:this.$="\\-[0-9]+";break;case 105:this.$="[0-9]+";break;case 106:this.$="\\-?\\d+(?:\\.\\d{0,2})?";break;case 107:this.$="\\-\\d+(?:\\.\\d{0,2})?";break;case 108:this.$="\\d+(?:\\.\\d{0,2})?";break;case 109:this.$="<([a-z]+)([^<]+)*(?:>(.*)<\\/\\1>|\\s+\\/>)";break;case 110:this.$="(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)";break;case 111:this.$="(?:(?:[0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|(?:[0-9a-fA-F]{1,4}:){1,7}:|(?:[0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|(?:[0-9a-fA-F]{1,4}:){1,5}(?::[0-9a-fA-F]{1,4}){1,2}|(?:[0-9a-fA-F]{1,4}:){1,4}(?::[0-9a-fA-F]{1,4}){1,3}|(?:[0-9a-fA-F]{1,4}:){1,3}(?::[0-9a-fA-F]{1,4}){1,4}|(?:[0-9a-fA-F]{1,4}:){1,2}(?::[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:(?:(?::[0-9a-fA-F]{1,4}){1,6})|:(?:(?::[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(?::[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(?:ffff(?::0{1,4}){0,1}:){0,1}(?:(?:25[0-5]|(?:2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(?:25[0-5]|(?:2[0-4]|1{0,1}[0-9]){0,1}[0-9])|(?:[0-9a-fA-F]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(?:25[0-5]|(?:2[0-4]|1{0,1}[0-9]){0,1}[0-9]))";break;case 112:this.$="(?:(?:(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:(?:[0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|(?:[0-9a-fA-F]{1,4}:){1,7}:|(?:[0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|(?:[0-9a-fA-F]{1,4}:){1,5}(?::[0-9a-fA-F]{1,4}){1,2}|(?:[0-9a-fA-F]{1,4}:){1,4}(?::[0-9a-fA-F]{1,4}){1,3}|(?:[0-9a-fA-F]{1,4}:){1,3}(?::[0-9a-fA-F]{1,4}){1,4}|(?:[0-9a-fA-F]{1,4}:){1,2}(?::[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:(?:(?::[0-9a-fA-F]{1,4}){1,6})|:(?:(?::[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(?::[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(?:ffff(?::0{1,4}){0,1}:){0,1}(?:(?:25[0-5]|(?:2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(?:25[0-5]|(?:2[0-4]|1{0,1}[0-9]){0,1}[0-9])|(?:[0-9a-fA-F]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(?:25[0-5]|(?:2[0-4]|1{0,1}[0-9]){0,1}[0-9]))))";break;case 113:this.$="(?:[0-9A-Fa-f]{2}[:-]){5}(?:[0-9A-Fa-f]{2})";break;case 114:this.$="(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?";break;case 115:this.$="(?:[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22(?:[^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22)(?:\\x2e(?:[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22(?:[^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22))*\\x40(?:[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b(?:[^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d)(?:\\x2e(?:[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b(?:[^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d))*";break;case 116:this.$="[a-z0-9-]+";break;case 117:this.$="#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})";break;case 118:this.$="[a-z]{2}(?:-[A-Z]{2})?";break;case 119:this.$=".*";break;case 120:this.$="[-+]?(?:[1-8]?\\d(?:\\.\\d+)?|90(?:\\.0+)?)";break;case 121:this.$="[-+]?(?:180(?:\\.0+)?|(?:(?:1[0-7]\\d)|(?:[1-9]?\\d))(?:\\.\\d+)?)";break;case 122:this.$="(?:aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen)";break;case 123:this.$="(?:(?:[a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*(?:[A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])";break;case 124:this.$="(?:[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})";break;case 125:this.$="(?:(?:[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})|(?:00000000-0000-0000-0000-000000000000))";break;case 126:this.$="[0-9]{5}(?:-[0-9]{4})?";break;case 127:this.$="[ABCEGHJ-NPRSTVXY]{1}[0-9]{1}[ABCEGHJ-NPRSTV-Z]{1}[ ]?[0-9]{1}[ABCEGHJ-NPRSTV-Z]{1}[0-9]{1}";break;case 128:this.$="[0-9]{5}-[0-9]{3}";break;case 129:this.$="(?:(?:[gG][iI][rR] {0,}0[aA]{2})|(?:(?:(?:[a-pr-uwyzA-PR-UWYZ][a-hk-yA-HK-Y]?[0-9][0-9]?)|(?:(?:[a-pr-uwyzA-PR-UWYZ][0-9][a-hjkstuwA-HJKSTUW])|(?:[a-pr-uwyzA-PR-UWYZ][a-hk-yA-HK-Y][0-9][abehmnprv-yABEHMNPRV-Y]))) {0,}[0-9][abd-hjlnp-uw-zABD-HJLNP-UW-Z]{2}))";break;case 130:this.$="[a-zA-Z]{4}[a-zA-Z]{2}[a-zA-Z0-9]{2}(?:[a-zA-Z0-9]{3})?";break;case 131:this.$="[a-zA-Z]{2}[0-9]{2}[a-zA-Z0-9]{4}[0-9]{7}(?:[a-zA-Z0-9]?){0,16}";break;case 132:this.$="[+-<>.,\\[\\] \\t\\n\\r]+";break;case 133:this.$="[.-]{1,5}(?:[ \\t]+[.-]{1,5})*(?:[ \\t]+[.-]{1,5}(?:[ \\t]+[.-]{1,5})*)*";break;case 134:this.$="https?:\\/\\/(?:www\\.)?youtube\\.com\\/channel\\/UC(?:[-_a-zA-Z0-9]{22})";break;case 135:this.$="https?:\\/\\/(?:youtu\\.be\\/|(?:[a-z]{2,3}\\.)?youtube\\.com\\/watch(?:\\?|#\\!)v=)(?:[\\w-]{11}).*";break;case 138:case 141:this.$=M[L-2]+M[L-1]+M[L];break;case 142:this.$="(?:(?:31(\\/|-)(?:0?[13578]|1[02]))\\1|(?:(?:29|30)(\\/|-)(?:0?[1,3-9]|1[0-2])\\2))(?:(?:1[6-9]|[2-9]\\d)?\\d{2})|(?:29(\\/|-)0?2\\3(?:(?:(?:1[6-9]|[2-9]\\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))|(?:0?[1-9]|1\\d|2[0-8])(\\/|-)(?:(?:0?[1-9])|(?:1[0-2]))\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})";break;case 143:this.$="(?:0[0-9]|[1-2][0-9]|3[01])";break;case 144:this.$="(?:0[0-9]|1[0-2])";break;case 145:this.$="[0-9]{4}";break;case 146:this.$="[0-9]{2}";break;case 147:this.$="(?:0[0-9]|1[0-9]|2[0-4])";break;case 148:case 149:this.$="(?:0[0-9]|[1-5][0-9])";break;case 150:this.$=String(M[L-1])+M[L];break;case 151:this.$=M[L];break}},table:[{3:1,4:[1,2],5:3,6:n,8:i,10:s,11:o,12:u,14:l,16:d,18:f,19:p,24:10,25:h,26:12,27:13,28:14,29:15,30:16,31:17,32:c,44:41,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Ye,86:Je,87:43,88:Ze,89:Xe,90:Qe,91:et,92:tt,93:rt,94:nt,95:it,96:st,97:at,98:ot,99:ut,100:ct,101:lt,102:dt,103:ht,104:ft,105:pt,106:mt,107:gt,108:yt,109:bt,110:xt,111:vt,112:wt,113:kt,114:St,115:_t,116:It,117:At,118:Et,119:Ot,120:Pt,121:Mt,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},{1:[3]},{1:[2,1]},{4:[1,108],6:cs,7:qn,8:Fn,9:Un,20:Rt,21:Vn,22:jn,23:116,32:Kn,37:Hn,38:zn,39:Gn,41:Wn,42:Yn,43:Jn},{5:124,6:n,8:i,10:s,11:o,12:u,14:l,16:d,18:f,19:p,24:10,25:h,26:12,27:13,28:14,29:15,30:16,31:17,32:c,44:41,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Ye,86:Je,87:43,88:Ze,89:Xe,90:Qe,91:et,92:tt,93:rt,94:nt,95:it,96:st,97:at,98:ot,99:ut,100:ct,101:lt,102:dt,103:ht,104:ft,105:pt,106:mt,107:gt,108:yt,109:bt,110:xt,111:vt,112:wt,113:kt,114:St,115:_t,116:It,117:At,118:Et,119:Ot,120:Pt,121:Mt,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},{5:125,6:n,8:i,10:s,11:o,12:u,14:l,16:d,18:f,19:p,24:10,25:h,26:12,27:13,28:14,29:15,30:16,31:17,32:c,44:41,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Ye,86:Je,87:43,88:Ze,89:Xe,90:Qe,91:et,92:tt,93:rt,94:nt,95:it,96:st,97:at,98:ot,99:ut,100:ct,101:lt,102:dt,103:ht,104:ft,105:pt,106:mt,107:gt,108:yt,109:bt,110:xt,111:vt,112:wt,113:kt,114:St,115:_t,116:It,117:At,118:Et,119:Ot,120:Pt,121:Mt,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},{5:126,6:n,8:i,10:s,11:o,12:u,14:l,16:d,18:f,19:p,24:10,25:h,26:12,27:13,28:14,29:15,30:16,31:17,32:c,44:41,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Ye,86:Je,87:43,88:Ze,89:Xe,90:Qe,91:et,92:tt,93:rt,94:nt,95:it,96:st,97:at,98:ot,99:ut,100:ct,101:lt,102:dt,103:ht,104:ft,105:pt,106:mt,107:gt,108:yt,109:bt,110:xt,111:vt,112:wt,113:kt,114:St,115:_t,116:It,117:At,118:Et,119:Ot,120:Pt,121:Mt,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},{5:127,6:n,8:i,10:s,11:o,12:u,14:l,16:d,18:f,19:p,24:10,25:h,26:12,27:13,28:14,29:15,30:16,31:17,32:c,44:41,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Ye,86:Je,87:43,88:Ze,89:Xe,90:Qe,91:et,92:tt,93:rt,94:nt,95:it,96:st,97:at,98:ot,99:ut,100:ct,101:lt,102:dt,103:ht,104:ft,105:pt,106:mt,107:gt,108:yt,109:bt,110:xt,111:vt,112:wt,113:kt,114:St,115:_t,116:It,117:At,118:Et,119:Ot,120:Pt,121:Mt,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},{17:128,18:f,24:132,27:130,29:131,32:c,33:129,44:133,46:Pr,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Zn},{17:136,18:f,24:132,27:130,29:131,32:c,33:129,44:133,46:Pr,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Zn},r(N,[2,20]),r(N,[2,21]),r(N,[2,22]),r(N,[2,23]),r(N,[2,24]),r(N,[2,25]),r(N,[2,26]),r(N,[2,27]),{18:f,33:137,35:138,44:133,45:mr,46:Pr,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z},r(N,[2,50]),r(N,[2,51]),r(N,[2,117],{85:140,45:Gt,47:Wt}),{45:Gt,47:Wt,85:143},r(ie,[2,72]),{18:f,33:144,44:133,46:Pr,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z},r(ie,[2,74]),r(ie,[2,75]),r(ie,[2,76]),r(ie,[2,77]),r(ie,[2,78]),r(ie,[2,79]),r(ie,[2,80]),r(ie,[2,81]),r(ie,[2,82]),r(ie,[2,83]),r(ie,[2,84]),r(ie,[2,85]),r(ie,[2,86]),r(ie,[2,87]),r(ie,[2,88]),r(ie,[2,89]),r(N,[2,38],{44:41,30:145,18:f,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z}),r(N,[2,39],{44:41,30:146,18:f,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z}),r(N,[2,96]),r(N,[2,97]),{88:[1,147],91:[1,148]},{88:[1,149],91:[1,150]},r(N,[2,100]),r(N,[2,103]),{92:[1,151],95:[1,152]},{92:[1,153],95:[1,154]},r(N,[2,106]),r(N,[2,109]),r(N,[2,110]),r(N,[2,111]),r(N,[2,112]),r(N,[2,113]),r(N,[2,114]),r(N,[2,115]),r(N,[2,116]),r(N,[2,118]),r(N,[2,119]),r(N,[2,120]),r(N,[2,121]),r(N,[2,122]),r(N,[2,123]),r(N,[2,124]),r(N,[2,125]),r(N,[2,126]),r(N,[2,127]),r(N,[2,128]),r(N,[2,129]),r(N,[2,130]),r(N,[2,131]),r(N,[2,132]),r(N,[2,133]),r(N,[2,134]),r(N,[2,135]),r(ce,[2,52]),r(ce,[2,53]),r(ce,[2,54]),r(ce,[2,55]),r(ce,[2,56]),r(ce,[2,57]),r(ce,[2,58]),r(ce,[2,59]),r(ce,[2,60]),r(ce,[2,61]),r(ce,[2,62]),r(ce,[2,63]),r(ce,[2,64]),r(ce,[2,65]),r(ce,[2,66]),r(ce,[2,67]),r(ce,[2,68]),r(ce,[2,69]),r(ce,[2,70]),r(ce,[2,71]),r(N,[2,136],{122:98,123:99,87:155,44:156,18:f,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe}),r(N,[2,139],{122:98,123:99,87:157,44:158,18:f,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe}),r(N,[2,142]),r(Mr,[2,143]),r(Mr,[2,144]),r(Mr,[2,145]),r(Mr,[2,146]),r(Mr,[2,147]),r(Mr,[2,148]),r(Mr,[2,149]),{1:[2,2]},r([4,6,7,9,13,15,20,21,22,37,38,39,41,42,43],[2,3],{24:10,26:12,27:13,28:14,29:15,30:16,31:17,44:41,87:43,122:98,123:99,5:159,8:i,10:s,11:o,12:u,14:l,16:d,18:f,19:p,25:h,32:c,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Ye,86:Je,88:Ze,89:Xe,90:Qe,91:et,92:tt,93:rt,94:nt,95:it,96:st,97:at,98:ot,99:ut,100:ct,101:lt,102:dt,103:ht,104:ft,105:pt,106:mt,107:gt,108:yt,109:bt,110:xt,111:vt,112:wt,113:kt,114:St,115:_t,116:It,117:At,118:Et,119:Ot,120:Pt,121:Mt,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe}),{5:160,6:n,8:i,9:[1,161],10:s,11:o,12:u,14:l,16:d,18:f,19:p,24:10,25:h,26:12,27:13,28:14,29:15,30:16,31:17,32:c,44:41,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Ye,86:Je,87:43,88:Ze,89:Xe,90:Qe,91:et,92:tt,93:rt,94:nt,95:it,96:st,97:at,98:ot,99:ut,100:ct,101:lt,102:dt,103:ht,104:ft,105:pt,106:mt,107:gt,108:yt,109:bt,110:xt,111:vt,112:wt,113:kt,114:St,115:_t,116:It,117:At,118:Et,119:Ot,120:Pt,121:Mt,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},{5:162,6:n,8:i,9:[1,163],10:s,11:o,12:u,14:l,16:d,18:f,19:p,24:10,25:h,26:12,27:13,28:14,29:15,30:16,31:17,32:c,44:41,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Ye,86:Je,87:43,88:Ze,89:Xe,90:Qe,91:et,92:tt,93:rt,94:nt,95:it,96:st,97:at,98:ot,99:ut,100:ct,101:lt,102:dt,103:ht,104:ft,105:pt,106:mt,107:gt,108:yt,109:bt,110:xt,111:vt,112:wt,113:kt,114:St,115:_t,116:It,117:At,118:Et,119:Ot,120:Pt,121:Mt,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},{5:164,6:n,8:i,10:s,11:o,12:u,14:l,16:d,18:f,19:p,24:10,25:h,26:12,27:13,28:14,29:15,30:16,31:17,32:c,44:41,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Ye,86:Je,87:43,88:Ze,89:Xe,90:Qe,91:et,92:tt,93:rt,94:nt,95:it,96:st,97:at,98:ot,99:ut,100:ct,101:lt,102:dt,103:ht,104:ft,105:pt,106:mt,107:gt,108:yt,109:bt,110:xt,111:vt,112:wt,113:kt,114:St,115:_t,116:It,117:At,118:Et,119:Ot,120:Pt,121:Mt,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},{5:165,6:n,8:i,10:s,11:o,12:u,14:l,16:d,18:f,19:p,24:10,25:h,26:12,27:13,28:14,29:15,30:16,31:17,32:c,44:41,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Ye,86:Je,87:43,88:Ze,89:Xe,90:Qe,91:et,92:tt,93:rt,94:nt,95:it,96:st,97:at,98:ot,99:ut,100:ct,101:lt,102:dt,103:ht,104:ft,105:pt,106:mt,107:gt,108:yt,109:bt,110:xt,111:vt,112:wt,113:kt,114:St,115:_t,116:It,117:At,118:Et,119:Ot,120:Pt,121:Mt,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},{5:166,6:n,8:i,10:s,11:o,12:u,14:l,16:d,18:f,19:p,24:10,25:h,26:12,27:13,28:14,29:15,30:16,31:17,32:c,44:41,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Ye,86:Je,87:43,88:Ze,89:Xe,90:Qe,91:et,92:tt,93:rt,94:nt,95:it,96:st,97:at,98:ot,99:ut,100:ct,101:lt,102:dt,103:ht,104:ft,105:pt,106:mt,107:gt,108:yt,109:bt,110:xt,111:vt,112:wt,113:kt,114:St,115:_t,116:It,117:At,118:Et,119:Ot,120:Pt,121:Mt,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},{5:167,6:n,8:i,10:s,11:o,12:u,14:l,16:d,18:f,19:p,24:10,25:h,26:12,27:13,28:14,29:15,30:16,31:17,32:c,44:41,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Ye,86:Je,87:43,88:Ze,89:Xe,90:Qe,91:et,92:tt,93:rt,94:nt,95:it,96:st,97:at,98:ot,99:ut,100:ct,101:lt,102:dt,103:ht,104:ft,105:pt,106:mt,107:gt,108:yt,109:bt,110:xt,111:vt,112:wt,113:kt,114:St,115:_t,116:It,117:At,118:Et,119:Ot,120:Pt,121:Mt,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},r(N,[2,19],{36:[1,168]}),r(gr,[2,31]),r(gr,[2,32]),r(gr,[2,33]),{35:169,45:mr},{35:170,45:mr},{35:171,45:mr},{35:172,45:mr},r(rr,[2,10],{23:116,20:Rt}),r(rr,[2,11],{23:116,20:Rt}),{6:cs,7:qn,8:Fn,9:Un,13:[1,173],20:Rt,21:Vn,22:jn,23:116,32:Kn,37:Hn,38:zn,39:Gn,41:Wn,42:Yn,43:Jn},{6:cs,7:qn,8:Fn,9:Un,15:[1,174],20:Rt,21:Vn,22:jn,23:116,32:Kn,37:Hn,38:zn,39:Gn,41:Wn,42:Yn,43:Jn},{7:Wa,8:Ya,18:[1,175]},r(Ur,[2,42]),r(Ur,[2,43]),r(Ur,[2,44]),r(Ur,[2,45]),r(Ja,[2,48]),r(Ja,[2,49]),{45:Gt,47:Wt,85:140},{7:Wa,8:Ya,18:[1,178]},{34:[1,179]},{34:[1,180]},r(Za,[2,151],{35:181,45:mr}),{45:Gt,47:Wt,85:182},r(Xa,[2,94]),r(Xa,[2,95]),{45:Gt,47:Wt,85:183},r(ie,[2,73]),r(N,[2,40]),r(N,[2,41]),r(N,[2,98]),r(N,[2,101]),r(N,[2,99]),r(N,[2,102]),r(N,[2,104]),r(N,[2,107]),r(N,[2,105]),r(N,[2,108]),r(N,[2,137]),{87:184,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},r(N,[2,140]),{87:185,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},r([4,6,13,15],[2,4],{23:116,7:qn,8:Fn,9:Un,20:Rt,21:Vn,22:jn,32:Kn,37:Hn,38:zn,39:Gn,41:Wn,42:Yn,43:Jn}),r(rr,[2,5],{23:116,20:Rt}),{5:186,6:n,8:i,10:s,11:o,12:u,14:l,16:d,18:f,19:p,24:10,25:h,26:12,27:13,28:14,29:15,30:16,31:17,32:c,44:41,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Ye,86:Je,87:43,88:Ze,89:Xe,90:Qe,91:et,92:tt,93:rt,94:nt,95:it,96:st,97:at,98:ot,99:ut,100:ct,101:lt,102:dt,103:ht,104:ft,105:pt,106:mt,107:gt,108:yt,109:bt,110:xt,111:vt,112:wt,113:kt,114:St,115:_t,116:It,117:At,118:Et,119:Ot,120:Pt,121:Mt,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},r(rr,[2,6],{23:116,20:Rt}),{5:187,6:n,8:i,10:s,11:o,12:u,14:l,16:d,18:f,19:p,24:10,25:h,26:12,27:13,28:14,29:15,30:16,31:17,32:c,44:41,45:a,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Ye,86:Je,87:43,88:Ze,89:Xe,90:Qe,91:et,92:tt,93:rt,94:nt,95:it,96:st,97:at,98:ot,99:ut,100:ct,101:lt,102:dt,103:ht,104:ft,105:pt,106:mt,107:gt,108:yt,109:bt,110:xt,111:vt,112:wt,113:kt,114:St,115:_t,116:It,117:At,118:Et,119:Ot,120:Pt,121:Mt,122:98,123:99,124:Ne,125:$e,126:De,127:Re,128:Le,129:Te,130:Be,131:qe},r(rr,[2,7],{23:116,20:Rt}),r(N,[2,16],{23:116}),r(rr,[2,17],{23:116,20:Rt}),r(rr,[2,18],{23:116,20:Rt}),r(gr,[2,30]),{34:[1,188]},{40:[1,189]},{40:[1,190]},{40:[1,191]},r(N,[2,12]),r(N,[2,13]),r(N,[2,14]),{17:192,18:f,24:132,27:130,29:131,32:c,33:129,44:133,46:Pr,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Zn},{17:193,18:f,24:132,27:130,29:131,32:c,33:129,44:133,46:Pr,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z,66:pe,67:me,68:ge,69:ye,70:be,71:xe,72:ve,73:we,74:ke,75:Se,76:_e,77:Ie,78:Ae,79:Ee,80:Oe,81:Pe,82:Me,83:Ce,84:Zn},r(N,[2,15]),{18:f,33:194,44:133,46:Pr,47:g,48:m,49:b,50:x,51:w,52:y,53:v,54:k,55:_,56:E,57:D,58:A,59:I,60:O,61:R,62:q,63:V,64:K,65:z},{35:195,45:mr},r(Za,[2,150]),r(ie,[2,90],{85:196,45:Gt,47:Wt}),{45:Gt,47:Wt,85:197},r(N,[2,138]),r(N,[2,141]),r(rr,[2,9],{23:116,20:Rt}),r(rr,[2,8],{23:116,20:Rt}),{35:198,45:mr},r(gr,[2,35]),r(gr,[2,36]),r(gr,[2,37]),r(Ur,[2,46]),r(Ur,[2,47]),r(ie,[2,28]),r(ie,[2,29]),{45:Gt,47:Wt,85:199},{45:Gt,47:Wt,85:200},{40:[1,201]},r(ie,[2,91]),r(N,[2,92],{85:202,45:Gt,47:Wt}),r(gr,[2,34]),r(N,[2,93])],defaultActions:{2:[2,1],108:[2,2]},parseError:function(G,$){if($.recoverable)this.trace(G);else{var U=function(j,M){this.message=j,this.hash=M};throw U.prototype=Error,new U(G,$)}},parse:function(G){var $=this,U=[0],H=[null],j=[],M=this.table,qt="",L=0,Qa=0,vh=2,eo=1,wh=j.slice.call(arguments,1),Fe=Object.create(this.lexer),Cr={yy:{}};for(var hs in this.yy)Object.prototype.hasOwnProperty.call(this.yy,hs)&&(Cr.yy[hs]=this.yy[hs]);Fe.setInput(G,Cr.yy),Cr.yy.lexer=Fe,Cr.yy.parser=this,typeof Fe.yylloc>"u"&&(Fe.yylloc={});var fs=Fe.yylloc;j.push(fs);var kh=Fe.options&&Fe.options.ranges;typeof Cr.yy.parseError=="function"?this.parseError=Cr.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Sh=function(){var Kr;return Kr=Fe.lex()||eo,typeof Kr!="number"&&(Kr=$.symbols_[Kr]||Kr),Kr},Ct,Nr,Ft,ps,jr={},Xn,nr,to,Qn;;){if(Nr=U[U.length-1],this.defaultActions[Nr]?Ft=this.defaultActions[Nr]:((Ct===null||typeof Ct>"u")&&(Ct=Sh()),Ft=M[Nr]&&M[Nr][Ct]),typeof Ft>"u"||!Ft.length||!Ft[0]){var ms="";Qn=[];for(Xn in M[Nr])this.terminals_[Xn]&&Xn>vh&&Qn.push("'"+this.terminals_[Xn]+"'");Fe.showPosition?ms="Parse error on line "+(L+1)+`:
`+Fe.showPosition()+`
Expecting `+Qn.join(", ")+", got '"+(this.terminals_[Ct]||Ct)+"'":ms="Parse error on line "+(L+1)+": Unexpected "+(Ct==eo?"end of input":"'"+(this.terminals_[Ct]||Ct)+"'"),this.parseError(ms,{text:Fe.match,token:this.terminals_[Ct]||Ct,line:Fe.yylineno,loc:fs,expected:Qn})}if(Ft[0]instanceof Array&&Ft.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Nr+", token: "+Ct);switch(Ft[0]){case 1:U.push(Ct),H.push(Fe.yytext),j.push(Fe.yylloc),U.push(Ft[1]),Ct=null,Qa=Fe.yyleng,qt=Fe.yytext,L=Fe.yylineno,fs=Fe.yylloc;break;case 2:if(nr=this.productions_[Ft[1]][1],jr.$=H[H.length-nr],jr._$={first_line:j[j.length-(nr||1)].first_line,last_line:j[j.length-1].last_line,first_column:j[j.length-(nr||1)].first_column,last_column:j[j.length-1].last_column},kh&&(jr._$.range=[j[j.length-(nr||1)].range[0],j[j.length-1].range[1]]),ps=this.performAction.apply(jr,[qt,Qa,L,Cr.yy,Ft[1],H,j].concat(wh)),typeof ps<"u")return ps;nr&&(U=U.slice(0,-1*nr*2),H=H.slice(0,-1*nr),j=j.slice(0,-1*nr)),U.push(this.productions_[Ft[1]][0]),H.push(jr.$),j.push(jr._$),to=M[U[U.length-2]][U[U.length-1]],U.push(to);break;case 3:return!0}}return!0}},xh=(function(){var Vr={EOF:1,parseError:function($,U){if(this.yy.parser)this.yy.parser.parseError($,U);else throw new Error($)},setInput:function($,U){return this.yy=U||this.yy||{},this._input=$,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var $=this._input[0];this.yytext+=$,this.yyleng++,this.offset++,this.match+=$,this.matched+=$;var U=$.match(/(?:\r\n?|\n).*/g);return U?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),$},unput:function($){var U=$.length,H=$.split(/(?:\r\n?|\n)/g);this._input=$+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-U),this.offset-=U;var j=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),H.length-1&&(this.yylineno-=H.length-1);var M=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:H?(H.length===j.length?this.yylloc.first_column:0)+j[j.length-H.length].length-H[0].length:this.yylloc.first_column-U},this.options.ranges&&(this.yylloc.range=[M[0],M[0]+this.yyleng-U]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function($){this.unput(this.match.slice($))},pastInput:function(){var $=this.matched.substr(0,this.matched.length-this.match.length);return($.length>20?"...":"")+$.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var $=this.match;return $.length<20&&($+=this._input.substr(0,20-$.length)),($.substr(0,20)+($.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var $=this.pastInput(),U=new Array($.length+1).join("-");return $+this.upcomingInput()+`
`+U+"^"},test_match:function($,U){var H,j,M;if(this.options.backtrack_lexer&&(M={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(M.yylloc.range=this.yylloc.range.slice(0))),j=$[0].match(/(?:\r\n?|\n).*/g),j&&(this.yylineno+=j.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:j?j[j.length-1].length-j[j.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+$[0].length},this.yytext+=$[0],this.match+=$[0],this.matches=$,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice($[0].length),this.matched+=$[0],H=this.performAction.call(this,this.yy,this,U,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),H)return H;if(this._backtrack){for(var qt in M)this[qt]=M[qt];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var $,U,H,j;this._more||(this.yytext="",this.match="");for(var M=this._currentRules(),qt=0;qt<M.length;qt++)if(H=this._input.match(this.rules[M[qt]]),H&&(!U||H[0].length>U[0].length)){if(U=H,j=qt,this.options.backtrack_lexer){if($=this.test_match(H,M[qt]),$!==!1)return $;if(this._backtrack){U=!1;continue}else return!1}else if(!this.options.flex)break}return U?($=this.test_match(U,M[j]),$!==!1?$:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var $=this.next();return $||this.lex()},begin:function($){this.conditionStack.push($)},popState:function(){var $=this.conditionStack.length-1;return $>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function($){return $=this.conditionStack.length-1-Math.abs($||0),$>=0?this.conditionStack[$]:"INITIAL"},pushState:function($){this.begin($)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function($,U,H,j){switch(H){case 0:break;case 1:return 25;case 2:return 69;case 3:return 68;case 4:return 70;case 5:return 71;case 6:return 73;case 7:return 72;case 8:return 74;case 9:return 75;case 10:return 77;case 11:return 76;case 12:return 79;case 13:return 78;case 14:return 80;case 15:return 81;case 16:return 10;case 17:return 11;case 18:return 22;case 19:return 21;case 20:return 84;case 21:return 86;case 22:return 67;case 23:return 12;case 24:return 13;case 25:return 14;case 26:return 15;case 27:return 19;case 28:return 16;case 29:return 37;case 30:return 38;case 31:return 39;case 32:return 40;case 33:return 36;case 34:return 41;case 35:return 42;case 36:return 32;case 37:return 34;case 38:return 83;case 39:return 82;case 40:return 9;case 41:return 20;case 42:return 7;case 43:return 43;case 44:return 8;case 45:return 6;case 46:return 18;case 47:return 50;case 48:return 51;case 49:return 49;case 50:return 48;case 51:return 52;case 52:return 53;case 53:return 54;case 54:return 55;case 55:return 56;case 56:return 57;case 57:return 58;case 58:return 59;case 59:return 60;case 60:return 61;case 61:return 62;case 62:return 63;case 63:return 66;case 64:return 64;case 65:return 65;case 66:return 88;case 67:return 89;case 68:return 90;case 69:return 91;case 70:return 94;case 71:return 93;case 72:return 92;case 73:return 95;case 74:return 124;case 75:return 102;case 76:return 101;case 77:return 97;case 78:return 98;case 79:return 99;case 80:return 100;case 81:return 96;case 82:return 103;case 83:return 95;case 84:return 104;case 85:return 105;case 86:return 106;case 87:return 107;case 88:return 108;case 89:return 109;case 90:return 110;case 91:return 111;case 92:return 112;case 93:return 113;case 94:return 114;case 95:return 115;case 96:return 116;case 97:return 117;case 98:return 118;case 99:return 119;case 100:return 120;case 101:return 121;case 102:return 129;case 103:return 130;case 104:return 131;case 105:return 125;case 106:return 126;case 107:return 128;case 108:return 127;case 109:return 45;case 110:return 4;case 111:return 47}},rules:[/^(?:\s+)/,/^(?:(?:"(?:\\"|.)*?"))/,/^(?:vertical tab\b)/,/^(?:tab\b)/,/^(?:alphanumeric\b)/,/^(?:non alphanumeric\b)/,/^(?:non space\b)/,/^(?:space\b)/,/^(?:null\b)/,/^(?:return\b)/,/^(?:(line\sfeed|new\s?line))/,/^(?:form feed\b)/,/^(?:non digit\b)/,/^(?:digit\b)/,/^(?:backspace\b)/,/^(?:any character\b)/,/^(?:starts with\b)/,/^(?:ends with\b)/,/^(?:not followed by\b)/,/^(?:followed by\b)/,/^(?:hex\b)/,/^(?:unicode\b)/,/^(?:ctrl\+)/,/^(?:group\b)/,/^(?:end group\b)/,/^(?:capture\b)/,/^(?:end capture\b)/,/^(?:not in charset:)/,/^(?:in charset:)/,/^(?:optional more times\b)/,/^(?:one or more times\b)/,/^(?:optional\b)/,/^(?:times\b)/,/^(?:\(smallest\))/,/^(?:minimum\b)/,/^(?:maximum\b)/,/^(?:from\b)/,/^(?:to\b)/,/^(?:end\b)/,/^(?:start\b)/,/^(?:then\b)/,/^(?:or\b)/,/^(?:and\b)/,/^(?:for\b)/,/^(?:(,|comma))/,/^(?:(\.|point))/,/^(?:(;|semicolon))/,/^(?:(\^|caret))/,/^(?:(\+|plus))/,/^(?:(-|minus))/,/^(?:(_|underscore))/,/^(?:(\*|asterisk|star))/,/^(?:(\?|question\smark))/,/^(?:(\(|left\sround\sbracket))/,/^(?:(\)|right\sround\sbracket))/,/^(?:(\{|left\scurly\sbracket))/,/^(?:(\}|right\scurly\sbracket))/,/^(?:(\[|left\ssquare\sbracket))/,/^(?:(\]|right\ssquare\sbracket))/,/^(?:(:|colon))/,/^(?:(!|exclamation\smark))/,/^(?:(\$|dollar))/,/^(?:(\||pipe))/,/^(?:("|quotation\smark))/,/^(?:(\\|backslash))/,/^(?:(\/|slash))/,/^(?:letter\b)/,/^(?:uppercase\b)/,/^(?:lowercase\b)/,/^(?:word\b)/,/^(?:positive\b)/,/^(?:negative\b)/,/^(?:number\b)/,/^(?:decimal\b)/,/^(?:date\b)/,/^(?:email\b)/,/^(?:url\b)/,/^(?:ipv4\b)/,/^(?:ipv6\b)/,/^(?:ip address\b)/,/^(?:mac address\b)/,/^(?:html tag\b)/,/^(?:slug\b)/,/^(?:decimal\b)/,/^(?:locale\b)/,/^(?:anything\b)/,/^(?:latitude\b)/,/^(?:longitude\b)/,/^(?:color name\b)/,/^(?:hostname\b)/,/^(?:uuid\b)/,/^(?:guid\b)/,/^(?:(us\s(zip|postal)\scode))/,/^(?:(canadian\s(zip|postal)\scode))/,/^(?:(brazilian\s(zip|postal)\scode))/,/^(?:(uk\s(zip|postal)\scode))/,/^(?:bic\b)/,/^(?:iban\b)/,/^(?:brainfuck code\b)/,/^(?:morse code\b)/,/^(?:youtube channel\b)/,/^(?:youtube video\b)/,/^(?:(hh|hours))/,/^(?:(mm|minutes))/,/^(?:(ss|seconds))/,/^(?:(dd|day))/,/^(?:(MM|month))/,/^(?:yy\b)/,/^(?:(yyyy|year))/,/^(?:[0-9])/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111],inclusive:!0}}};return Vr})();ls.lexer=xh;function ds(){this.yy={}}return ds.prototype=ls,ls.Parser=ds,new ds})();typeof zb<"u"&&(t.parser=e,t.Parser=e.Parser,t.parse=function(){return e.parse.apply(e,arguments)},t.main=function(n){n[1]||(console.log("Usage: "+n[0]+" FILE"),process.exit(1));var i=ac.readFileSync(ac.normalize(n[1]),"utf8");return t.parser.parse(i)})})(qs)),qs}var uc;function Jb(){return uc||(uc=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},r=Yb();function n(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var i={global:"g",ignoreCase:"i",multiline:"m",unicode:"u",sticky:"y"},s=function(l){var d="";return typeof l=="string"?d=l:(typeof l>"u"?"undefined":e(l))==="object"&&Object.keys(i).forEach(function(f){l[f]&&(d+=i[f])}),d},o=function u(){n(this,u)};o.parser=r.parser,o.parse=function(u){return o.parser.parse(u)},o.from=function(u,l){return new RegExp(o.parse(u),s(l))},o.replace=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=u.string,d=l===void 0?"":l,f=u.match,p=f===void 0?"":f,h=u.replace,c=h===void 0?"":h,a=u.flags,g=a===void 0?"g":a;return d.replace(o.from(p,g),c)},t.default=o})(Bs)),Bs}var Zb=Jb();const Jd=Nd(Zb),cc=Jd.parser,Xb={STARTS_WITH:"commence par",ENDS_WITH:"finit par",GROUP:"groupe",END_GROUP:"fin groupe",CAPTURE:"capture",END_CAPTURE:"fin capture",CHARACTER_SET:"un parmi",NOT_CHARACTER_SET:"aucun parmi",AND:"et",OR:"ou",THEN:"puis",FOLLOWED_BY:"suivi de",NOT_FOLLOWED_BY:"non suivi de",OPTIONAL_REPETITION:"répété optionnellement",ONE_OR_MORE_REPETITION:"une ou plusieurs fois",ZERO_OR_ONE_REPETITION:"optionnel",REPETITION:"fois",MINIMUM:"minimum",MAXIMUM:"maximum",FOR:"pour",FROM:"de",TO:"à",SMALLEST:"le plus petit",DIGIT:"chiffre",NON_DIGIT:"non-chiffre",LETTER:"lettre",UPPERCASE:"majuscule",LOWERCASE:"minuscule",WORD:"mot",NON_WORD:"non-mot",ALPHANUMERIC:"alphanumérique",SPACE:"espace",NON_SPACE:"non-espace",ANY_CHARACTER:"tout caractère",ANYTHING:"n'importe quoi",TAB:"tabulation",VERTICAL_TAB:"tabulation verticale",NULL:"nul",RETURN:"retour chariot",LINE_FEED:"saut de ligne",FORM_FEED:"saut de page",BACKSPACE:"retour arrière",START:"début",END:"fin",HEX:"hexadécimal",UNICODE:"unicode",ESCAPED:"échappé",TYPE_NUMBER:"nombre",NEGATIVE:"négatif",POSITIVE:"positif",DECIMAL:"décimal",HTML_TAG:"balise HTML",IPV4:"IPv4",IPV6:"IPv6",IP_ADDRESS:"adresse IP",MAC_ADDRESS:"adresse MAC",URL:"URL",EMAIL:"e-mail",SLUG:"slug",LOCALE:"locale",LATITUDE:"latitude",LONGITUDE:"longitude",COLOR_NAME:"nom de couleur",HOSTNAME:"nom d'hôte",UUID:"UUID",GUID:"GUID",US_ZIP_CODE:"code postal US",CANADIAN_POSTAL_CODE:"code postal canadien",BRAZILIAN_POSTAL_CODE:"code postal brésilien",UK_POSTAL_CODE:"code postal britannique",BIC:"BIC",IBAN:"IBAN",BRAINFUCK:"brainfuck",MORSE:"morse",YOUTUBE_CHANNEL:"chaîne YouTube",YOUTUBE_VIDEO:"vidéo YouTube",DATE:"date",DAY:"jour",MONTH:"mois",YEAR:"année",yy:"année courte",HOURS:"heures",MINUTES:"minutes",SECONDS:"secondes",CONTROL_CHARACTER:"caractère de contrôle",CHARACTER:"caractère"},Qb={UPPERCASE:{LETTER:"lettre majuscule"},LOWERCASE:{LETTER:"lettre minuscule"},NEGATIVE:{TYPE_NUMBER:"nombre négatif",NUMBER:"nombre négatif"},POSITIVE:{TYPE_NUMBER:"nombre positif",NUMBER:"nombre positif"},DECIMAL:{TYPE_NUMBER:"nombre décimal",NUMBER:"nombre décimal"}};function ex(t){const e=Object.create(cc.lexer);e.setInput(t,{});const r=[];for(;;){const i=e.lex();if(i===!1)break;const s=cc.terminals_[i]??String(i);if(s==="EOF")break;r.push({type:s,text:e.yytext})}const n=[];for(let i=0;i<r.length;i++){const s=Qb[r[i].type]?.[r[i+1]?.type];s?(n.push({type:`${r[i].type}+${r[i+1].type}`,text:`${r[i].text} ${r[i+1].text}`,label:s}),i++):n.push({type:r[i].type,text:r[i].text,label:Xb[r[i].type]??r[i].text})}return n}function tx(t){return ex(t).map(e=>e.label).join(" ").trim()}const rx=S("string").pipe.try(t=>new RegExp(t)),nx=S("string").pipe.try(t=>{try{const e=Jd.from(`start, ${t}, end`);return{source:t,regex:e,display:tx(t)}}catch(e){throw e instanceof Function?new Error(e.message,{cause:e}):e}}).describe("Une description d'un motif avec la syntaxe de natural-regex, cf https://github.com/mbasso/natural-regex/wiki/Operators,-operands-and-expressions. Par exemple, 'group uppercase letter, word, space end group minimum 2 times then <, email, >' correspond à un motif pour Prénom Nom <email>. Voir https://github.com/mbasso/natural-regex/wiki/Examples pour plus d'exemples."),ix={">":"gt",">=":"gte","≥":"gte"},ja={"<":"lt","<=":"lte","≤":"lte"},Zd={...ja,...ix};function sx(t){switch(t){case"gt":return"lt";case"gte":return"lte";case"lt":return"gt";case"lte":return"gte"}}const Kt={float:"(-?\\d+(?:[.,]\\d+)?(?:[eE][+-]?\\d+)?)",comp:"("+Object.keys(Zd).join("|")+")",compLess:"("+Object.keys(ja).join("|")+")"};function ax(t){return Zd[t.match(Kt.comp)?.[1]]}function lc(t){return ja[t.match(Kt.compLess)?.[1]]}function bn(t){const e=Number.parseFloat(t.match(Kt.float)?.[1]?.replace(",",".")??"");if(!Number.isNaN(e)&&Number.isFinite(e))return e}const Oi={open:`((?:x\\s*)?${Kt.comp}\\s*${Kt.float})`,closed:`(${Kt.float}\\s*${Kt.compLess}\\s*x\\s*${Kt.compLess}\\s*${Kt.float})`,interval:`(${Kt.float}\\s*[.][.]\\s*${Kt.float})`},Xd=S(new RegExp("^"+Object.values(Oi).join("|")+"$")).pipe.try(t=>{if(new RegExp(Oi.open).test(t)){const e=ax(t),r=bn(t);if(!e)throw new Error(`Invalid comparator in range literal: ${t}`);if(r===void 0)throw new Error(`Invalid number in range literal: ${t}`);return{[e]:r}}if(new RegExp(Oi.closed).test(t)){const[e,r]=t.split(/\\s*x\\s*/),n=lc(e),i=lc(r),s=bn(e),o=bn(r);if(!n)throw new Error(`Invalid left comparator in range literal: ${t}`);if(!i)throw new Error(`Invalid right comparator in range literal: ${t}`);if(s===void 0)throw new Error(`Invalid left number in range literal: ${t}`);if(o===void 0)throw new Error(`Invalid right number in range literal: ${t}`);return{[n]:s,[sx(i)]:o}}if(new RegExp(Oi.interval).test(t)){const[e,r]=t.split(/\s*[.][.]\s*/),n=bn(e),i=bn(r);if(n===void 0)throw new Error(`Invalid minimum number in range literal: ${t}`);if(i===void 0)throw new Error(`Invalid maximum number in range literal: ${t}`);return{gte:n,lte:i}}throw new Error(`Invalid number range literal: ${t}`)}).pipe(t=>{const e="lt"in t?t.lt:"lte"in t?t.lte:void 0,r="gt"in t?t.gt:"gte"in t?t.gte:void 0;return{...t,min:r,max:e}}).describe(`Un intervalle de nombres, sous les formes suivantes: '> 5', '<= 5', '5 < x ≤ 10', '5..10'. Précisément, il y a quatres formes possibles:
- Op n (avec Op un des opérateurs >, >=, <, <=, ≥, ≤),
- x Op n (qui est équivalent à Op n, mais permet de ne pas commencer l'expression avec un caractère '>', utile en YAML),
- m Op x Op M (avec m et M des nombres, et Op un des opérateurs <, <=, ≤),
- m..M (avec m et n des nombres), qui est un équivalent de m ≤ x ≤ M.`),ox={cx:{help:"Coordonée X du point central"},cy:{help:"Coordonée Y du point central"},sy:{help:"Coordonée Y du point supérieur gauche"},sx:{help:"Coordonée X du point supérieur gauche"},ex:{help:"Coordonée X du point inférieur droit"},ey:{help:"Coordonée Y du point inférieur droit"},w:{help:"Largeur de la boîte englobante"},h:{help:"Hauteur de la boîte englobante"},score:{help:"Score de confiance de cette boîte, entre 0 et 1"},_:{help:"Autre valeur (ignorée par CIGALE)"}},Qd=S.or(...qa(ox).map(([t,{help:e}])=>S(`"${t}"`).describe(e,"self"))).array(),eh=S({width:["number < 1024","@","Largeur en pixels du tenseur d'entrée du modèle"],height:["number < 1024","@","Hauteur en pixels du tenseur d'entrée du modèle"],"disposition?":S(['"CHW"',"@","Tenseurs de la forme [3, H, W]"]).or(S(['"1CHW"',"@","Tenseurs de la forme [1, 3, H, W]"])),normalized:["boolean","@","Si les valeurs des pixels doivent être normalisées entre 0 et 1. Sinon, elles sont entre 0 et 255"],"name?":["string","@","Nom de l'input du modèle à utiliser. Par défaut, prend la première input"]}),th=S({"name?":["string","@","Nom de l'output du modèle à utiliser. output0 par défaut"]}),ux=th.and({normalized:["boolean","@","Si les coordonnées des boîtes englobantes sont normalisées par rapport aux dimensions de l'image"],shape:Qd.describe("Forme de sortie de chaque boîte englobante. Nécéssite obligatoirement d'avoir 'score'; 2 parmi 'cx', 'sx', 'ex', 'w'; et 2 parmi 'cy', 'sy', 'ey', 'h'. Si les boîtes contiennent d'autre valeurs, bien les mentionner avec '_', même quand c'est à la fin de la liste: cela permet de savoir quand on passe à la boîte suivante. Par exemple, [cx, cy, w, h, score, _] correspond à un modèle YOLO11 COCO")}),rh=S({model:Fa.describe("Lien vers le modèle de classification utilisé pour inférer les métadonnées. Au format ONNX (.onnx) seulement, pour le moment."),"name?":["string","@","Nom du réseau à afficher dans l'interface. Particulièrement utile si il y a plusieurs réseaux"],input:eh.describe("Configuration de l'entrée des modèles")}),cx=rh.and({output:ux}),lx=rh.and({"output?":th,classmapping:Fa.describe("Fichier texte contenant une clé de la métadonnée par ligne, dans le même ordre que les neurones de sortie du modèle.")});function $v(t,e){return`${t}:${e}`}function Dv(t){const e=t.split(":");if(e.length<2)throw new Error(`Invalid metadata option ID: ${t}`);const r=e.slice(0,-1).join(":"),n=e[e.length-1];return{metadataId:r,key:n}}const sr={string:{label:"texte",help:"du texte"},boolean:{label:"booléen",help:"vrai ou faux"},integer:{label:"entier",help:"un entier"},float:{label:"nombre",help:"un nombre, potentiellement à virgule"},enum:{label:"énumération",help:"un ensemble de valeur fixes"},date:{label:"date",help:"une date"},location:{label:"localisation",help:"un objet avec deux nombres, `latitude` et `longitude`"},boundingbox:{label:"région d'image",help:"un objet représentant une région rectangulaire au format YOLO"},file:{label:"fichier",help:"un fichier, représenté par une référence à un MetadataFile, qui est exporté séparément"}},dx=S.or(S("'string'","@",sr.string.help),S("'boolean'","@",sr.boolean.help),S("'integer'","@",sr.integer.help),S("'float'","@",sr.float.help),S("'enum'","@",sr.enum.help),S("'date'","@",sr.date.help),S("'location'","@",sr.location.help),S("'boundingbox'","@",sr.boundingbox.help),S("'file'","@",sr.file.help)),ze={string:S("string"),boolean:S("boolean"),integer:S("number"),float:S("number"),enum:S("string | number"),date:S("Date"),location:S({latitude:"number",longitude:"number"}),boundingbox:S({x:"number",y:"number",w:"number",h:"number"}),file:S(W)},nh=S.or(ze.string,ze.boolean,ze.integer,ze.float,ze.enum,ze.date,ze.location,ze.boundingbox),hx=S({message:"string",details:"unknown",stack:'string = ""',ignored:"boolean = false",happenedAt:["string.date.iso","=",()=>new Date().toISOString()],kind:S.or(S('"inference"',"@","Erreur survenue lors de l'inférence de la valeur de cette métadonnée"))}),os=S.Record(Tt,hx.array()),Ka=S({value:S("string.json").pipe(t=>{let e=JSON.parse(t);return typeof e=="string"&&(e=Ub(e)??e),e},nh),confidence:nc.default(1),confirmed:S("boolean").describe("Si la valeur a été manuellement confirmée comme correcte").default(!1),manuallyModified:S("boolean").describe("Si la valeur a été modifiée manuellement").default(!1),isDefault:S("boolean").describe("Si la valeur est la valeur par défaut définie dans le protocole").default(!1),alternatives:{"[string.json]":nc}}),Ha=S.Record(Tt,Ka),fx=Ka.omit("value").and({value:[S.or("null",ze.boolean,ze.integer,ze.float,ze.string,"string.date.iso",ze.location,ze.boundingbox,ze.file),"@","Valeur de la métadonnée"],"valueLabel?":["string","@","Label de la valeur de la métadonnée. Existe pour les métadonnées de type enum, contient dans ce cas le label associé à la clé de l'option de l'enum choisie"]}),kr=t=>S.Record(t,fx),Zr={min:{label:"Minimum",help:"Choisir la valeur avec la meilleure confiance, et prendre la plus petite valeur en cas d'ambuiguité"},max:{label:"Maximum",help:"Choisir la valeur avec la meilleure confiance, et prendre la plus grande valeur en cas d'ambuiguité"},average:{label:"Moyenne",help:"Prend la moyenne des valeurs"},median:{label:"Médiane",help:"Prend la médiane des valeurs"},union:{label:"Union",help:"Spécifique aux boîtes de recadrage: fusionne les boîtes de recadrage en la plus petite boîte englobant toutes les boîtes"},none:{label:"Aucune",help:"Ne pas fusionner"}},px=S.or(S('"min"',"@",Zr.min.help),S('"max"',"@",Zr.max.help),S('"average"',"@",Zr.average.help),S('"median"',"@",Zr.median.help),S('"none"',"@",Zr.none.help),S('"union"',"@",Zr.union.help)),ih=S({key:[W,"@","Identifiant unique pour cette option"],label:["string","@","Nom de l'option, affichable dans une interface utilisateur"],synonyms:S("string[]").describe("Synonymes (labels alternatifs) pour cette option").default(()=>[]),"description?":S("string").describe("Description (optionnelle) de cette option"),"index?":S("number").describe("Nombre permettant de trier les options dans l'interface. Par défaut, correspond à l'indice de l'option dans l'ordre de définition de sa métadonnée"),"image?":Sr.configure({deprecated:!0,description:"Image illustrant cette option de l'énumération. Utiliser plutôt `images` avec un seul élément."}),"images?":Sr.array().describe("Liste d'images illustrant cette option de l'énumération. Permet d'en spécifier plusieurs"),"learnMore?":Sr.describe("Lien pour en savoir plus sur cette option de l'énumération en particulier"),"color?":Bb.describe("Code hexadécimal (avec ou sans le # préfixe) d'une couleur associée à cette option, pour l'affichage dans l'interface"),"icon?":S(/^ri:[\w-]+$/).describe("Code Iconify d'une icône associée à cette option, provenant du pack d'icônes “Remix Icon”. Voir https://icon-sets.iconify.design/ri/ pour la liste."),"cascade?":S.Record(W,W).describe('Objet contenant pour clés des identifiants d\'autres métadonnées, et pour valeurs la valeur à assigner à cette métadonnée si cette option est choisie. Le processus est récursif: Imaginons une métadonnée species ayant une option avec `{ key: "1", cascade: { genus: "2" } }`, une métadonnée genus ayant une option `{ key: "2", cascade: { family: "3" } }`. Si l\'option "1" de la métadonnée species est choisie, la métadonnée genus sera définie sur l\'option "2" et la métadonnée family sera à son tour définie sur l\'option "3".')}),mx=S.enumerated(..._n(Hb)),Ir=mx.describe("Inférer depuis un champ EXIF","self"),gx=S({protocolMetadata:kr(Tt),metadata:kr(W),session:{protocolMetadata:kr(Tt),metadata:kr(W),createdAt:"string.date.iso"}}),Or=Da({MetadataRuntimeValueAny:nh}).type("<static extends MetadataRuntimeValueAny>",[["Exclude<static, string>","@","Une valeur par défaut pour une métadonnée. Pour l'instant, uniquement supportée sur les métadonnées de session"],"|",Va(gx,t=>{const e=Ka.get("value")(t);return e instanceof lr?t.trim():e}).describe("Une valeur par défaut dynamique. Pour l'instant, uniquement supportée sur les métadonnées de session. C'est une templates Handlebars, avec pour variables `protocolMetadata` (contenant les métadonnées du protocole courant) et `metadata` (contenant les métadonnées de _toutes_ les métadonnées). La valeur par défaut sera évaluée en considérant que le texte final (après éxécution de la template Handlebars) est une représentation JSON (sauf pour les métadonnées de type texte ou enum, où le text final est pris tel-quel). Les helpers gps, boundingBox, date, object et array sont disponibles pour facilement construire des représentations JSON de valeurs complexes")]);S.or();const pr=S({id:Tt.describe("Identifiant unique pour la métadonnée. On conseille de mettre une partie qui vous identifie dans cet identifiant, car il doit être globalement unique. Par exemple, mon-organisation.ma-métadonnée"),"inheritedFrom?":as.describe("Si cette métadonnée est héritée d'un autre protocole, indique de quel protocole elle est héritée"),label:["string","@","Nom de la métadonnée"],mergeMethod:px.configure("Méthode utiliser pour fusionner plusieurs différentes valeurs d'une métadonnée. Notamment utilisé pour calculer la valeur d'une métadonnée sur une Observation à partir de ses images","self"),required:["boolean","@","Si la métadonnée est obligatoire"],description:["string","@","Description, pour aider à comprendre la métadonnée"],sortable:S("boolean").describe("Si la métadonnée peut être utilisée pour trier des images ou observations").default(!1),groupable:S("boolean").describe("Si la métadonnée peut être utilisée pour grouper des images ou observations").default(!1),"options?":ih.array().pipe(t=>$b(t,e=>e.key)).pipe(t=>t.map((e,r)=>({index:r,...e}))).describe('Les options valides. Uniquement utile pour une métadonnée de type "enum"'),learnMore:Sr.describe("Un lien pour en apprendre plus sur ce que cette métadonnée décrit").optional()}),yx=pr.and({type:'"boolean"',"default?":Or("boolean"),"infer?":S.or({exif:Ir})}),bx=pr.and({type:'"string"',"default?":Or("string"),"infer?":S.or({exif:Ir}),"regex?":rx.describe("Une expression régulière que la valeur de cette métadonnée doit respecter"),"pattern?":nx}),xx=pr.and({type:'"integer"',"range?":Xd,"default?":Or("number.integer"),"infer?":S.or({exif:Ir})}).pipe(),vx=pr.and({type:'"float"',"range?":Xd,"default?":Or("number"),"infer?":S.or({exif:Ir})}),wx=pr.and({type:'"date"',"range?":'"future" | "past"',"default?":Or("string.date.iso"),"infer?":S.or({exif:Ir})}),kx=pr.and({type:'"location"',"default?":Or({latitude:"number",longitude:"number"}),"infer?":S({latitude:S.or({exif:Ir}),longitude:S.or({exif:Ir})})}),Sx=pr.and({type:'"enum"',"default?":Or("string | number"),"infer?":S.or({exif:Ir},{neural:lx.array()})}),_x=pr.and({type:'"boundingbox"',"default?":Or({x:"0 <= number <= 1",y:"0 <= number <= 1",w:"0 <= number <= 1",h:"0 <= number <= 1"}),"infer?":S.or({neural:cx.array()})}),Ix=pr.and({type:'"file"',"default?":"null","infer?":"null",size:S({"minimum?":sc,"maximum?":sc}).describe("Limites sur la taille du fichier").default(()=>({})),accept:qb.array().pipe(t=>t.join(", ")).describe("Fichiers acceptés pour cette métadonnée").default(()=>[])}),zi=S.or(yx,bx,xx,vx,wx,kx,Sx,_x,Ix);function xr(t,e){return e=e.replace(/^.+__/,""),`${t}__${e}`}function Rv(t,e){return Ax(e,t)?t:xr(e,t)}function Ax(t,e){return e.startsWith(`${t}__`)}function Ex(t){return t.replace(/^.+__/,"")}function Ox(t){const e=t.split("__");if(!(e.length<2))return e.slice(0,-1).join("__")}function Lv(t){return{namespace:Ox(t),id:Ex(t)}}const sh=S({id:/\d+(_\d+)*/,filename:"string",addedAt:"string.date.iso.parse",dimensions:Ua,metadata:Ha,metadataErrors:os.default(()=>({})),contentType:/\w+\/\w+/,fileId:W.or("null").describe("ID vers l'objet ImageFile associé"),sessionId:W.describe("ID de la session à laquelle cette image appartient"),boundingBoxesAnalyzed:"boolean = false"}),ah=S({id:W,sessionId:W.describe("ID de la session à laquelle cette observation appartient"),label:"string",addedAt:"string.date.iso.parse",metadataOverrides:Ha,metadataErrors:os.default(()=>({})),images:Gd}),Gi=S({id:["string","@","ID de l'image"],fileId:["string | null","@","ID du fichier source de l'image"],filename:["string","@","Nom du fichier utilisé pour cette image"],contentType:["string","@","Type de contenu de l'image, au format MIME (exemple: image/jpeg)"],sequence:["number > 0","@","Numéro de séquence de l'image dans l'archive .zip. Unique à l'entièreté de l'export"],numberInObservation:["number > 0","@","Numéro de l'image dans l'observation"],metadata:kr(Tt),protocolMetadata:kr(W).describe("Même logique que protocolMetadata pour les observations"),metadataErrors:os.default(()=>({})),exportedAs:S({original:["string","@","Chemin vers l'image originale"],cropped:["string","@","Chemin vers l'image recadrée"]}).describe("Chemins dans l'archive .zip vers l'image exportée")}),oh=S({number:["number > 0","@","Numéro de l'observation dans l'export"],label:["string","@","Label de l'observation"],images:Gi.array(),metadata:kr(Tt),metadataErrors:os.default(()=>({})),protocolMetadata:kr(W).describe("Métadonnées définies par le protocole. Les clés de l'objet sont les identifiants des métadonnées, sans le préfixe qui identifie leur protocole de provenance")});function Tv(t){return jd(t,({value:e,...r})=>({value:e instanceof Date?e.toISOString():e,...r}))}const dc=Yd(S({observation:oh.omit("images"),image:Gi.omit("exportedAs")}).and(Gi.pick("sequence","numberInObservation"))),Px=Yd(S({observation:["undefined","|",oh.omit("images")],image:["undefined","|",Gi.omit("exportedAs")],session:["undefined","|",{id:"string"}],metadata:zi,metadataKey:["string","@","ID de la métadonnée, sans namespace"],size:["number","@","Taille du fichier en octets"],filename:"string",contentType:Bn,id:["string","@",'Référence du fichier, correspondant à la valeur de la métadonnée de type "file"']})),hc="analysis.json";S({protocols:S({id:as,url:Sr.describe("URL où télécharger le protocole")}).array()});const fc=S.or(W.describe("Clé de métadonnée à importer, sans le namespace"),Fb(W,W).describe("Import avec renommage. ")).pipe(t=>typeof t=="string"?{source:t,target:t}:{source:t.value,target:t.key}).array().describe("Clés (sans le namespace) de métadonnées à hériter du protocole spécifié dans 'from'. List de simples clés, ou d'objet avec une seule paire, de la forme { cible: source } où source est la clé dans le protocole duquel on importe, et cible est la clé que l'on donne à cette métadonnée dans le protocole courant (les deux sont sans namespace). Astuce: en YAML, quand on décrit une liste, les {} autour des objets sont optionnels. Par exemple: metadata: [a, b: b_source, c] ou - a↵ - b: b_source↵ - c importera la métadonnée 'a', la métadonnée 'b_source' renommée en 'b', et la métadonnée 'c' du protocole spécifié dans 'from'.").default(()=>[]),Mx=S({from:as.describe("ID du protocole duquel importer"),sessionMetadata:fc,metadata:fc}).narrow(({sessionMetadata:t,metadata:e},r)=>t.length+e.length>0?!0:r.reject("Un import ne peut pas être vide")),uh=S({id:as,dirty:S("boolean").describe("Si le protocole a été modifié depuis sa dernière exportation").default(!1),importedMetadata:S({sessionwide:["boolean","@","True si la métadonnée s'importe en tant que sessionMetadata plutôt que metadata classique"],source:Tt.describe("ID de la métadonnée dans le protocole d'où elle est importée, avec namespace"),target:Tt.describe("ID de la métadonnée dans le protocole courant, avec namespace")}).array().describe("Toutes les métadonnées importées depuis d'autres protocoles").default(()=>[]),metadata:Tt.array().describe("Toutes les métadonnées du protocole (qu'elles soient associées aux sessions ou aux observations/images)"),sessionMetadata:Tt.array().describe("Métadonnées associées à la session entière").default(()=>[]),name:["string","@","Nom du protocole"],description:["string","@","Description du protocole"],"learnMore?":Sr.describe("Lien vers un site où l'on peut se renseigner sur ce protocole. Cela peut aussi être simplement un lien de téléchargement direct de ce fichier"),"version?":["number","@","Version actuelle du protocole"],updates:S.enumerated("automatic","manual").describe("Mode de mise à jour du protocole").default("manual"),"source?":Fa.describe(`Requête ou URL devant mener à un fichier JSON contenant la version la plus récente du protocole. Permet de proposer des mises à jour.
		
		Si le champ "version" n'existe pas (que ce soit dans le protocole local ou distant), aucune mise à jour ne sera proposée.`),authors:S({"email?":["string.email","@","Adresse email"],name:["string","@","Prénom Nom"]}).array().describe("Les auteurices ayant participé à l'élaboration du protocole"),"metadataOrder?":S(Tt.array()).describe("L'ordre dans lequel les métadonnées doivent être présentées dans l'interface utilisateur. Les métadonnées non listées ici seront affichées après toutes celles listées ici"),"observations?":{"defaultLabel?":Va(S({images:sh.array(),observation:ah})).describe("Label par défaut pour les observations. Template Handlebars, recevant une liste des images de l'observation à crééer (clé images) et l'observation elle-même (clé observation)")},"crop?":S({padding:S(/^\d+(%|px)$/).describe("Pixels de marge à rajouter autour de la boîte englobante au moment d'exporter les images recadrées. Nombre suivi de 'px' pour un nombre de pixels fixe, ou de '%' pour un pourcentage des dimensions de chaque image.").default("0px")}).describe("Configuration de la partie recadrage"),exports:S({images:S({cropped:dc.describe("Chemins des images recadrées"),original:dc.describe("Chemins des images originales"),"mtime?":["string","@","Métadonnée à utiliser pour la date de modification des fichiers exportés"]}).describe(`Chemins où sauvegarder les images. Vous pouvez utiliser {{observation.metadata.identifiant.value}} pour insérer la valeur d'une métadonnée, {{image.filename}} pour le nom de fichier, {{observation.label}} pour le label (nom) de l'observation, et {{sequence}} pour un numéro d'image, commençant à 1. {{observation.metadata.identifiant.valueLabel}} peut être pratique pour obtenir le label associé au choix d'une métadonnée de type 'enum'. Enfin, il est possible de faire {{suffix image.filename "_exemple"}} pour ajouter "_exemple" à la fin d'un nom de fichier, mais avant son extension (par exemple: {{suffix image.filename "_cropped"}} donnera "IMG_1245_cropped.JPEG" si l'image avait pour nom de fichier "IMG_12345.JPEG"); Vous pouvez faire {{extension image.filename}} pour avoir l'extension d'un fichier, et {{fallback image.metadata.exemple "(Inconnnu)"}} pour utiliser "(Inconnu)" si image.metadata.example n'existe pas. Ce sont enfait des templates Handlebars, en savoir plus: https://handlebarsjs.com/guide/`),metadata:{json:S(`"${hc}"`).describe("Chemin du fichier JSON complet. Il n'est pas possible de le modifier, car CIGALE doit connaître son emplacement dans un .zip pour pouvoir importer des analyses.").default(hc),csv:S.string.describe("Chemin du fichier CSV contenant les résultats de l'analyse").pipe(t=>t.replaceAll("\\","/")),files:Px.describe('Chemins où sauvegarder les fichiers pour les métadonnées de type "file". Même syntaxe que pour les images, mais avec en plus {{metadata}} pour accéder à la métadonnée elle-même, {{metadataKey}} pour accéder à la clé de la métadonnée (sans namespace), {{filename}} pour le nom du fichier, {{contentType}} pour son type MIME, {{id}} pour sa référence (cette référence est ce qui est stocké dans la valeur de la métadonnée de type "file", et peut être utilisée pour faire le lien entre les fichiers et les métadonnées), et {{size}} pour sa taille en octets.').default("{{ metadataKey }}-files/{{ stem filename }}-{{ id }}.{{ extension filename }}")}}).describe("La structure du fichier .zip d'export pour ce protocole.").optional()}),Bv=uh.omit("metadata","sessionMetadata","metadataOrder","dirty","importedMetadata").in.and({imports:Mx.array().default(()=>[]),"metadataOrder?":W.array().describe("L'ordre dans lequel les métadonnées doivent être présentées dans l'interface utilisateur. Les métadonnées non listées ici seront affichées après toutes celles listées ici"),metadata:S.Record(W,zi.in.omit("id").describe("Métadonnées associées aux observations/imagess")),"sessionMetadata?":S.Record(W,zi.in.omit("id").describe("Métadonnées associées à la session entière"))}).pipe(t=>({...Nb(t,"imports"),...Tb("metadataOrder",t.metadataOrder,e=>e.map(r=>xr(t.id,r))),importedMetadata:t.imports.flatMap(({from:e,metadata:r,sessionMetadata:n})=>[...r.map(({source:i,target:s})=>({sessionwide:!1,source:xr(e,i),target:xr(t.id,s)})),...n.map(({source:i,target:s})=>({sessionwide:!0,source:xr(e,i),target:xr(t.id,s)}))]),metadata:rc(t.metadata,e=>xr(t.id,e)),sessionMetadata:rc(t.sessionMetadata??{},e=>xr(t.id,e))}));function qv(t,e){return[...t.metadata,...t.importedMetadata.flatMap(({source:r,target:n})=>[r,n])].includes(e)}const ch={metadataValue:{label:"Métadonnée…",needsMetadata:!0},metadataConfidence:{label:"Confiance en…",needsMetadata:!0},id:{label:"ID",needsMetadata:!1},name:{label:"Nom",needsMetadata:!1}},lh={metadataValue:{label:"Métadonnée…",needsMetadata:!0,needsTolerance:!0},metadataPresence:{label:"Présence de…",needsMetadata:!0,needsTolerance:!1},metadataConfidence:{label:"Confiance en…",needsMetadata:!0,needsTolerance:!1},none:{label:"Aucun regroupement",needsMetadata:!1,needsTolerance:!1}},pc={dates:{label:"Dates",help:"Précision des dates",affectedTypes:["date"],options:{year:{scientific:"",casual:"Par année"},month:{scientific:"",casual:"Par mois"},day:{scientific:"",casual:"Par jour"},hour:{scientific:"",casual:"Par heure"},minute:{scientific:"",casual:"Par minute"}}},decimal:{label:"Nombres",help:"Précision des nombres",affectedTypes:["integer","float","boundingbox","location"],options:{giga:{scientific:"G",casual:"Au milliard"},mega:{scientific:"M",casual:"Au million"},kilo:{scientific:"k",casual:"Au millier"},hecto:{scientific:"100",casual:"À la centaine"},deca:{scientific:"10",casual:"À la dizaine"},unit:{scientific:"1",casual:"À l'entier"},deci:{scientific:"0.1",casual:"Au dixième"},centi:{scientific:"0.01",casual:"Au centième"},milli:{scientific:"m",casual:"Au millième"},micro:{scientific:"µ",casual:"Au millionième"},nano:{scientific:"n",casual:"Au milliardième"}}}},Cx=["top-bottom","left-right"];function Fv(...[t,e]){switch(t){case"sort":return ch[e].needsMetadata;case"group":return lh[e].needsMetadata}}const Pi=S({field:S.enumerated(..._n(ch)),"metadata?":W,direction:S.enumerated("asc","desc")}),Mi=S({field:S.enumerated(..._n(lh)),"metadata?":W,tolerances:S({dates:S.enumerated(..._n(pc.dates.options)),decimal:S.enumerated(..._n(pc.decimal.options))}).default(()=>({dates:"day",decimal:"unit"}))}),Nx=S({id:W,name:"string",createdAt:"string.date.iso",openedAt:"string.date.iso",description:"string",protocol:W,metadata:Ha,fullscreenClassifier:S({layout:S.enumerated(...Cx),"focusedMetadata?":W}).default(()=>({layout:"top-bottom"})),sort:S({global:Pi,"import?":Pi,"crop?":Pi,"classify?":Pi}).default(()=>({global:{field:"id",direction:"asc"}})),group:S({global:Mi,"import?":Mi,"crop?":Mi,"classify?":Mi}).default(()=>({global:{field:"none"}})),inferenceModels:Da({ID:W}).type({"[ID]":"number.integer >= -1"}).describe("Maps metadata IDs to selected model indices").default(()=>({}))});function $x(t){return t.slice(0,1).toLowerCase()+Math.random().toString(36).slice(2,9)}const Dx=tr(["id","sessionId"],S({id:W,bytes:"ArrayBuffer",filename:"string",contentType:Bn,dimensions:Ua,sessionId:W})),Rx=tr(["id","sessionId"],S({id:W,bytes:"ArrayBuffer",filename:"string",contentType:Bn,dimensions:Ua,sessionId:W})),Lx=tr(["id","sessionId"],S({id:W,sessionId:W,bytes:"ArrayBuffer",filename:"string",contentType:Bn,size:["number","@","in bytes"],lastModifiedAt:"string.date.iso"})),Tx=tr(["id","addedAt","sessionId"],sh),Bx=tr(["id","addedAt","sessionId"],ah),qx=tr(["id"],Nx),dh=tr("id",zi.omit("options")),Fx=tr(["id"],ih.and({id:[/\w+__\w+:\w+/,"@","ID of the form namespaced_metadata_id:key"],metadataId:Tt})),Ux=tr("id",uh),hh=tr("id",S({id:'"defaults" | "user"',protocols:Gd,theme:S.enumerated("dark","light","auto"),gridSize:S.number.pipe(t=>t===10?1:Hd(t,.5,2)),notifications:"boolean | null = null",language:S.enumerated("fr","en").default(()=>{try{const t=localStorage.getItem("PARAGLIDE_LOCALE");if(t==="fr"||t==="en")return localStorage.removeItem("PARAGLIDE_LOCALE"),t}catch(t){t instanceof ReferenceError||console.warn("Error migrating from PARAGLIDE_LOCALE ",t)}try{return J0()}catch(t){return console.warn("Error getting navigator.language, defaulting to fr",t),"fr"}}),showInputHints:"boolean",showTechnicalMetadata:"boolean",cropAutoNext:"boolean = false",parallelism:S("number").default(()=>{try{return Math.ceil(navigator.hardwareConcurrency/3)}catch(t){return console.warn("Couldn't get navigator.hardwareConcurrency, defaulting to 1",t),1}}),gallerySort:S({direction:S.enumerated("asc","desc"),key:S.enumerated("filename","date")}).configure({deprecated:!0}).default(()=>({direction:"asc",key:"date"})),autoUpdateProtocols:S("Record<string, boolean>").default(()=>({}))})),Uv={ModelInput:eh,ModelDetectionOutputShape:Qd,MetadataTypeSchema:dx,Metadata:dh,Settings:hh},Vx=["ImageFile","ImagePreviewFile","MetadataOption","MetadataValueFile"],jx=["Image","Observation"];function Wi(t){return Vx.every(e=>e!==t)}function mc(t){return jx.some(e=>e===t)}const Vt={Image:Tx,ImageFile:Dx,ImagePreviewFile:Rx,MetadataValueFile:Lx,Observation:Bx,Session:qx,Metadata:dh,MetadataOption:Fx,Protocol:Ux,Settings:hh};function tr(t,e){const r=Array.isArray(t)?t.map(n=>n):[t];return e.configure({table:{indexes:r}})}const En=(t,e)=>typeof t=="object"&&"id"in t||typeof e=="object"&&"id"in e?En(t.id,e.id):typeof t=="number"&&typeof e=="number"?t-e:typeof t=="number"?-1:typeof e=="number"?1:/^\d+$/.test(t)&&/^\d+$/.test(e)?Number(t)-Number(e):t.localeCompare(e),Kx=null,za="database",fh=6,ha=Object.keys(Vt),Ke=_h({Image:[],Metadata:[],Observation:[],Protocol:[],Settings:[],Session:[]}),us={...Object.fromEntries(ha.filter(Wi).map(t=>[t,Hx(t)])),async initialize(t){for(const e of ha)Wi(e)&&await us[e].refresh(t)}};function Hx(t){return{get state(){return Ke[t]},async refresh(e){!e&&mc(t)?(console.debug(`refresh ${t} without session: clearing state`),Ke[t]=[]):e&&mc(t)?(console.debug(`refresh ${t} for session ${e}`),Ke[t]=await this.list("sessionId",e)):(console.debug(`refresh ${t}`),Ke[t]=await this.list())},getMany:async e=>Promise.all(e.map(r=>Di(t,r))).then(r=>r.filter(Rb)),get:async e=>Di(t,e),getOrThrow:async e=>{const r=await Di(t,e);if(!r)throw new Error(`Item not found in ${t} with key ${e}`);return r},getFromState:e=>Ke[t].find(r=>r.id===e),async set(e){await fa(t,e);const r=Vt[t].assert(e),n=Ke[t].findIndex(i=>i.id===e.id);return n!==-1?Ke[t][n]=r:(Ke[t].push(r),Ke[t].sort(En)),r},async update(e,r,n){const i=`upd ${t} ${e} ${typeof r=="string"?r:"<Symbol>"} = ${typeof n=="object"?Lr(n):n}`,s=await this.raw.get(e);if(!s)return console.error(`${i}: item not found`),!1;s[r]=n,await fa(t,s);const o=Ke[t].findIndex(u=>u.id===e);return o===-1?(console.debug(`${i}: item not found in reactive state, refetching entire list`),Ke[t]=await this.list()):(console.debug(`${i}: updating state @ ${t}[${o}]`),Ke[t][o]=Vt[t].assert(s)),!0},async add(e){return this.set({...e,id:$x(t)})},async clear(){await ph(t),Ke[t]=[]},async remove(e){await gh(t,e);const r=Ke[t].findIndex(n=>n.id===e);r!==-1?(console.warn(`del ${t} ${e}: not found in reactive state, re-fetching`),Ke[t]=await this.list()):delete Ke[t][r]},async do(e,r){const n=`do ${t} #${Sc()}`;console.debug(n),await bh([t],{mode:"readwrite",abortSignal:e},async(i,s)=>{await r(i.objectStore(t),s)})},list:async(e,r)=>e&&r?mh(t,e,r):Ga(t),all:()=>yh(t),count:async()=>await(await Bt()).count(t),raw:{async set(e){return await(await Bt()).put(t,e)},async get(e){return await(await Bt()).get(t,e)},async list(){return await(await Bt()).getAll(t)}}}}async function fa(t,e){const r=await Bt();return Vt[t].assert(e),await r.put(t,e).then(i=>i)}async function ph(t){await(await Bt()).clear(t).then(r=>r)}async function Di(t,e){const r=await Bt(),n=Vt[t];return await r.get(t,e).then(i=>i?n.assert(i):void 0)}async function Ga(t,e=void 0){const r=await Bt(),n=Vt[t];return await r.getAll(t,e).then(i=>i.map(s=>n.assert(s)).sort(En)).then(i=>i)}async function mh(t,e,r=void 0){const n=await Bt(),i=Vt[t];return await n.getAllFromIndex(t,e,typeof r=="string"?IDBKeyRange.only(r):r).then(s=>s.map(o=>i.assert(o)).sort(En)).then(s=>s)}async function gh(t,e){return await(await Bt()).delete(t,e).then(()=>Ga(t)).then(n=>{console.debug(`delete ${t} ${e}: objects are now ${n.map(i=>i.id).join(", ")}`)})}async function*yh(t,e=void 0){const r=await Bt(),n=Vt[t],i=r.transaction(t).store,s=e?i.index(e).iterate():i.iterate();for await(const o of s)yield n.assert(o.value)}function zx(t,e,...r){return["idb:/",t,e,...r].filter(Boolean).join("/")}async function bh(t,{mode:e,session:r,abortSignal:n},i){e??="readwrite",r??=localStorage.getItem("currentSessionId")||"";const s=Sc(8);console.debug(`txn open ${s} tables ${t} mode ${e}`);const u=(await Bt()).transaction(t,e);u.id=s,await i(u,n),console.debug(`txn commit ${s} `),await u.done;for(const l of t.filter(Wi))await us[l].refresh(r)}function Gx(){if(!Xt)throw new Error("Database not initialized. Call openDatabase() first.");return Xt}async function Bt(){if(Xt)return Xt;const t=Object.entries(Vt);return Xt=await Hh(za,fh,{upgrade(e,r,n,i){const s=(u,l)=>{if(!l.meta.table)return;const d=l.meta.table.indexes[0];if(e.objectStoreNames.contains(u)){console.warn(`Table ${u} already exists, skipping creation`);return}const f=e.createObjectStore(u,{keyPath:d});for(const p of l.meta.table.indexes.slice(1))f.createIndex(p,p)},o=async u=>{const l=Vt[u];if(!l.meta.table)return;const d=i.objectStore(u);for(const f of d.indexNames)d.deleteIndex(f);for(const f of l.meta.table.indexes.slice(1))d.createIndex(f,f)};if(r===1)for(const u of e.objectStoreNames)e.deleteObjectStore(u);if(r===2){s("ImagePreviewFile",Vt.ImagePreviewFile);return}r===3&&s("Session",Vt.Session),r===4&&(o("ImageFile"),o("ImagePreviewFile"));for(const[u,l]of t)s(u,l)}}),window.devalue={stringify:Bh,parse:Lh},window.DB=Xt,window.refreshDB=()=>{const e=localStorage.getItem("currentSessionId")||void 0;if(!e){console.warn("No current session ID set, cannot refresh reactive tables");return}for(const r of ha)Wi(r)&&us[r].refresh(e??"")},Xt}function Wx(){Xt&&(Xt.close(),Xt=void 0),indexedDB.deleteDatabase(za)}let Xt;const Vv=Object.freeze(Object.defineProperty({__proto__:null,_tablesState:Ke,clear:ph,databaseHandle:Gx,databaseName:za,databaseRevision:fh,dependencyURI:zx,drop:gh,get:Di,iterator:yh,list:Ga,listByIndex:mh,nukeDatabase:Wx,openDatabase:Bt,openTransaction:bh,previewingPrNumber:Kx,set:fa,tables:us},Symbol.toStringTag,{value:"Module"}));export{mv as $,lr as A,Sc as B,qa as C,tv as D,Hb as E,Sv as F,kv as G,gh as H,Ex as I,wv as J,fa as K,$r as L,ze as M,wd as N,$v as O,zd as P,Dv as Q,cv as R,Uv as S,Ka as T,Ox as U,Rv as V,hx as W,rv as X,Di as Y,vv as Z,gv as _,Rb as a,Vv as a$,Ev as a0,Gx as a1,nv as a2,sr as a3,iv as a4,Lb as a5,pc as a6,Lv as a7,fv as a8,Wd as a9,hv as aA,hc as aB,xv as aC,Cx as aD,Nv as aE,rc as aF,Bt as aG,Mv as aH,Gy as aI,Pv as aJ,ov as aK,Ps as aL,fn as aM,pn as aN,_2 as aO,J0 as aP,fh as aQ,za as aR,ch as aS,Fv as aT,lh as aU,uh as aV,En as aW,pv as aX,qv as aY,Bv as aZ,_v as a_,Cv as aa,Zr as ab,W as ac,bv as ad,Vt as ae,Tv as af,uv as ag,Nd as ah,je as ai,t2 as aj,hn as ak,kd as al,Ki as am,av as an,sv as ao,dv as ap,Kd as aq,Av as ar,Iv as as,Lr as at,Qx as au,Nx as av,kr as aw,Tt as ax,oh as ay,lv as az,W0 as b,Db as c,zx as d,Y0 as e,S as f,$x as g,yv as h,he as i,Z as j,Wx as k,Ga as l,jd as m,xr as n,bh as o,mh as p,Ov as q,Hd as r,Ax as s,us as t,$b as u,ev as v,Nb as w,_n as x,mx as y,X0 as z};
