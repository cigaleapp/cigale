import"./DsnmJJEf.js";import{aF as w,ak as v,a8 as I,z as E,t as q,v as T,aG as A,aH as V,y as z,w as k,p as C,c as D,q as F,aa as G,a as H,b as M,g as _,s as O,u as P,i as g}from"./Bn_ZbADV.js";import{e as x}from"./C0Q0tU0C.js";import{a as W,t as j}from"./DX-V7JoH.js";import{r as B,s as m,b as J}from"./ByTqR5TD.js";import{p as u}from"./dHQvgpC_.js";import{g as K}from"./D9uJnc4X.js";function L(e,l,r=l){var f=new WeakSet;w(e,"input",async s=>{var c=s?e.defaultValue:e.value;if(c=b(e)?y(c):c,r(c),v!==null&&f.add(v),await I(),c!==(c=l())){var t=e.selectionStart,d=e.selectionEnd,o=e.value.length;if(e.value=c??"",d!==null){var a=e.value.length;t===d&&d===o&&a>o?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=t,e.selectionEnd=Math.min(d,a))}}}),(E&&e.defaultValue!==e.value||q(l)==null&&e.value)&&(r(b(e)?y(e.value):e.value),v!==null&&f.add(v)),T(()=>{var s=l();if(e===document.activeElement){var c=A??v;if(f.has(c))return}b(e)&&s===y(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}const h=new Set;function $(e,l,r,f,s=f){var c=r.getAttribute("type")==="checkbox",t=e;let d=!1;if(l!==null)for(var o of l)t=t[o]??=[];t.push(r),w(r,"change",()=>{var a=r.__value;c&&(a=S(t,a,r.checked)),s(a)},()=>s(c?[]:null)),T(()=>{var a=f();if(E&&r.defaultChecked!==r.checked){d=!0;return}c?(a=a||[],r.checked=a.includes(r.__value)):r.checked=V(r.__value,a)}),z(()=>{var a=t.indexOf(r);a!==-1&&t.splice(a,1)}),h.has(t)||(h.add(t),k(()=>{t.sort((a,i)=>a.compareDocumentPosition(i)===4?-1:1),h.delete(t)})),k(()=>{if(d){var a;if(c)a=S(t,a,r.checked);else{var i=t.find(n=>n.checked);a=i?.__value}s(a)}})}function S(e,l,r){for(var f=new Set,s=0;s<e.length;s+=1)e[s].checked&&f.add(e[s].__value);return r||f.delete(l),Array.from(f)}function b(e){var l=e.type;return l==="number"||l==="range"}function y(e){return e===""?null:+e}var N=D("<input/>");function ee(e,l){C(l,!0);let r=u(l,"value",15),f=u(l,"placeholder",3,""),s=u(l,"type",3,"text"),c=u(l,"Type",19,()=>K.string);const t=P(()=>typeof f()=="string"?{idle:f(),focused:f()}:f());let d=O(!1);var o=N();B(o);let a;W(o,(i,n)=>j?.(i,n),()=>l.discreet?l.label:void 0),F(()=>L(o,r)),G(()=>{m(o,"type",s()),m(o,"aria-label",l.label),a=J(o,1,"inline-input svelte-85fk79",null,a,{monospace:l.monospace,discreet:l.discreet}),m(o,"placeholder",_(d)?_(t).focused:_(t).idle)}),x("focus",o,()=>g(d,!0)),x("blur",o,async({currentTarget:i})=>{g(d,!1);try{await l.onblur(c().assert(i.value),n=>r(n))}catch(n){l.onerror?.(n)}}),H(e,o),M()}export{ee as I,L as a,$ as b};
