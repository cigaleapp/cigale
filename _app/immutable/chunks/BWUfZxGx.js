import"./DsnmJJEf.js";import{a_ as w,l as u,aI as T,h as E,y as A,x as I,a$ as V,b0 as z,t as C,z as g,p as D,H as G,w as H,G as M,a as O,b as P,g as m,aq as W,u as j,as as x}from"./BwdvgNQo.js";import{e as S}from"./HTLptRgQ.js";import{a as B,t as F}from"./C6sIn56-.js";import{r as J,s as h,c as K}from"./08d27X49.js";import{p as _}from"./CKH9F0ww.js";import{f as L}from"./Don2Ydo1.js";function N(e,r,l=r){var f=new WeakSet;w(e,"input",async t=>{var c=t?e.defaultValue:e.value;if(c=y(e)?k(c):c,l(c),u!==null&&f.add(u),await T(),c!==(c=r())){var s=e.selectionStart,o=e.selectionEnd,d=e.value.length;if(e.value=c??"",o!==null){var a=e.value.length;s===o&&o===d&&a>d?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=s,e.selectionEnd=Math.min(o,a))}}}),(E&&e.defaultValue!==e.value||A(r)==null&&e.value)&&(l(y(e)?k(e.value):e.value),u!==null&&f.add(u)),I(()=>{var t=r();if(e===document.activeElement){var c=V??u;if(f.has(c))return}y(e)&&t===k(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}const b=new Set;function ee(e,r,l,f,t=f){var c=l.getAttribute("type")==="checkbox",s=e;let o=!1;if(r!==null)for(var d of r)s=s[d]??=[];s.push(l),w(l,"change",()=>{var a=l.__value;c&&(a=q(s,a,l.checked)),t(a)},()=>t(c?[]:null)),I(()=>{var a=f();if(E&&l.defaultChecked!==l.checked){o=!0;return}c?(a=a||[],l.checked=a.includes(l.__value)):l.checked=z(l.__value,a)}),C(()=>{var a=s.indexOf(l);a!==-1&&s.splice(a,1)}),b.has(s)||(b.add(s),g(()=>{s.sort((a,i)=>a.compareDocumentPosition(i)===4?-1:1),b.delete(s)})),g(()=>{if(o){var a;if(c)a=q(s,a,l.checked);else{var i=s.find(n=>n.checked);a=i?.__value}t(a)}})}function q(e,r,l){for(var f=new Set,t=0;t<e.length;t+=1)e[t].checked&&f.add(e[t].__value);return l||f.delete(r),Array.from(f)}function y(e){var r=e.type;return r==="number"||r==="range"}function k(e){return e===""?null:+e}var Q=G("<input/>");function ae(e,r){D(r,!0);let l=_(r,"value",15),f=_(r,"onblur",3,()=>{}),t=_(r,"placeholder",3,""),c=_(r,"type",3,"text"),s=_(r,"Type",19,()=>L.string);const o=j(()=>typeof t()=="string"?{idle:t(),focused:t()}:t());let d=W(!1);var a=Q();J(a);let i;B(a,(n,v)=>F?.(n,v),()=>r.discreet?r.label:void 0),H(()=>N(a,l)),M(()=>{h(a,"type",c()),h(a,"aria-label",r.label),i=K(a,1,"inline-input svelte-85fk79",null,i,{monospace:r.monospace,discreet:r.discreet}),a.required=r.required,h(a,"placeholder",m(d)?m(o).focused:m(o).idle)}),S("focus",a,()=>x(d,!0)),S("blur",a,async({currentTarget:n})=>{x(d,!1);try{await f()(s().assert(n.value),v=>l(v))}catch(v){r.onerror?.(v)}}),O(e,a),P()}export{ae as I,N as a,ee as b};
