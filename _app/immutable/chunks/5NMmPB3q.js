import"./DsnmJJEf.js";import{f as z,a as s,p as Ae,H as M,I as Fe,G as A,b as Be,ap as d,ar as f,g as e,u as m,D as O,J as c,L as Le,C as ce,F as E,at as Ie,aJ as je}from"./BwdvgNQo.js";import{s as j}from"./HTLptRgQ.js";import{s as We}from"./DYy3QkOc.js";import{r as $,p as Je,i as w}from"./CKH9F0ww.js";import{e as Oe}from"./CuPIRSst.js";import{c as me}from"./CaPT1Hnn.js";import{a as Pe}from"./DJvCDsRa.js";import{a as x,b as Re,c as Ze}from"./08d27X49.js";import{C as De}from"./Bf6VYV6I.js";import{F as Ge}from"./0FVT5fxA.js";import{I as Ke}from"./T09AO1QC.js";import{I as oe}from"./BWUfZxGx.js";import{t as Te}from"./BYqiwRWy.js";import{T as Ee}from"./BxmDjSVm.js";import{B as Qe}from"./CrYFLP04.js";import{v as ge}from"./Don2Ydo1.js";import{l as H,a as le,L as ue}from"./BwliMRya.js";import{s as Se}from"./CeMO3KJO.js";var Ue=z('<svg><path fill="currentColor" d="M11 7h2v10h-2zm4 4h2v6h-2zm-8 2h2v4H7zm8-9H5v16h14V8h-4zM3 2.992C3 2.444 3.447 2 3.999 2H16l5 5v13.993A1 1 0 0 1 20.007 22H3.993A1 1 0 0 1 3 21.008z"></path></svg>');function Xe(l,r){const o=$(r,["$$slots","$$events","$$legacy"]);var a=Ue();x(a,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...o})),s(l,a)}var Ye=z('<svg><path fill="currentColor" d="M15 4H5v16h14V8h-4zM3 2.992C3 2.444 3.447 2 3.999 2H16l5 5v13.993A1 1 0 0 1 20.007 22H3.993A1 1 0 0 1 3 21.008zM17.657 12l-3.536 3.536l-1.414-1.415L14.828 12l-2.12-2.121l1.413-1.415zM6.343 12L9.88 8.464l1.414 1.415L9.172 12l2.12 2.121l-1.413 1.415z"></path></svg>');function Ne(l,r){const o=$(r,["$$slots","$$events","$$legacy"]);var a=Ye();x(a,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...o})),s(l,a)}var ea=z('<svg><path fill="currentColor" d="M15 8V4H5v16h14V8zM3 2.992C3 2.444 3.447 2 3.999 2H16l5 5v13.993A1 1 0 0 1 20.007 22H3.993A1 1 0 0 1 3 21.008zM11 9.5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0m6.5 7.5l-4-7L8 17z"></path></svg>');function aa(l,r){const o=$(r,["$$slots","$$events","$$legacy"]);var a=ea();x(a,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...o})),s(l,a)}var ta=z('<svg><path fill="currentColor" d="M9 2.003V2h10.998C20.55 2 21 2.455 21 2.992v18.016a.993.993 0 0 1-.993.992H3.993A1 1 0 0 1 3 20.993V8zM5.83 8H9V4.83zM11 4v5a1 1 0 0 1-1 1H5v10h14V4z"></path></svg>');function he(l,r){const o=$(r,["$$slots","$$events","$$legacy"]);var a=ta();x(a,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...o})),s(l,a)}var ra=z('<svg><path fill="currentColor" d="M16 8v2h-3v4.5a2.5 2.5 0 1 1-2-2.45V8h4V4H5v16h14V8zM3 2.992C3 2.444 3.447 2 3.999 2H16l5 5v13.993A1 1 0 0 1 20.007 22H3.993A1 1 0 0 1 3 21.008z"></path></svg>');function sa(l,r){const o=$(r,["$$slots","$$events","$$legacy"]);var a=ra();x(a,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...o})),s(l,a)}var oa=z('<svg><path fill="currentColor" d="M5 4h10v4h4v12H5zM3.999 2A.995.995 0 0 0 3 2.992v18.016a1 1 0 0 0 .993.992h16.014A1 1 0 0 0 21 20.992V7l-5-5zm6.5 5.5c0 1.577-.455 3.437-1.224 5.153c-.772 1.723-1.814 3.197-2.9 4.066l1.18 1.613c2.927-1.952 6.168-3.29 9.304-2.842l.457-1.939C14.644 12.661 12.5 9.99 12.5 7.5zm.6 5.972c.268-.597.505-1.216.705-1.843a9.7 9.7 0 0 0 1.706 1.966c-.982.176-1.944.465-2.875.833q.248-.471.465-.956"></path></svg>');function la(l,r){const o=$(r,["$$slots","$$events","$$legacy"]);var a=oa();x(a,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...o})),s(l,a)}var va=z('<svg><path fill="currentColor" d="M21 8v12.993A1 1 0 0 1 20.007 22H3.993A.993.993 0 0 1 3 21.008V2.992C3 2.455 3.449 2 4.002 2h10.995zm-2 1h-5V4H5v16h14zM8 7h3v2H8zm0 4h8v2H8zm0 4h8v2H8z"></path></svg>');function na(l,r){const o=$(r,["$$slots","$$events","$$legacy"]);var a=va();x(a,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...o})),s(l,a)}var ia=z('<svg><path fill="currentColor" d="M15 4v4h4v12H5V4zM3.999 2A.995.995 0 0 0 3 2.992v18.016a1 1 0 0 0 .993.992h16.014A1 1 0 0 0 21 20.992V7l-5-5zM15 11.667l-4.88-3.253a.4.4 0 0 0-.621.333v6.505a.4.4 0 0 0 .622.333L15 12.333a.4.4 0 0 0 0-.666"></path></svg>');function fa(l,r){const o=$(r,["$$slots","$$events","$$legacy"]);var a=ia();x(a,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...o})),s(l,a)}var ca=z('<svg><path fill="currentColor" d="M12.414 5H21a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h7.414zM20 11H4v8h16zm0-2V7h-8.414l-2-2H4v4z"></path></svg>');function ma(l,r){const o=$(r,["$$slots","$$events","$$legacy"]);var a=ca();x(a,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...o})),s(l,a)}var ga=z('<svg><path fill="currentColor" d="M12.414 5H21a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h7.414zM4 5v14h16V7h-8.414l-2-2zm7 7V9h2v3h3v2h-3v3h-2v-3H8v-2z"></path></svg>');function ua(l,r){const o=$(r,["$$slots","$$events","$$legacy"]);var a=ga();x(a,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...o})),s(l,a)}var ha=M('<li class="new-folder svelte-12kq3qg"><button class="svelte-12kq3qg"><!> <!></button></li>'),pa=M('<!> <div class="text svelte-12kq3qg"><!></div>',1),_a=M('<!> <div class="text svelte-12kq3qg"><!></div> <!>',1),da=M('<!> <div class="text svelte-12kq3qg"><span class="filename"><!></span> <span class="help svelte-12kq3qg"> </span></div>',1),Ha=M('<li class="svelte-12kq3qg"><!></li> <!>',1),za=M('<li class="empty svelte-12kq3qg"><i> </i></li>'),$a=M("<ul><!> <!></ul>"),xa=M('<span class="help svelte-12kq3qg"><!></span>'),qa=M('<ul class="tree svelte-12kq3qg"><li class="svelte-12kq3qg"><!> <div class="text svelte-12kq3qg"><span class="filename"> </span> <!></div></li> <!></ul>');function Da(l,r){Ae(r,!0);const o=(n,v=Fe,q)=>{let F=Le(()=>je(q?.(),()=>[],!0));const R=m(()=>Array.isArray(v())&&v().every(p=>!H(p)||!("children"in p)));var h=$a();let y;var Z=f(h);{var xe=p=>{var t=ha(),W=f(t),B=f(W);ua(B,{});var L=d(B,2);{let Y=m(()=>e(a)(254)),N=m(()=>e(a)(255));oe(L,{discreet:!0,value:"",get placeholder(){return e(Y)},get label(){return e(N)},onblur:(D,ee)=>{if(!D.trim()){Te.error(e(a)(256));return}ee(""),v().push({folder:D,children:[]})}})}c(W),c(t),s(p,t)};w(Z,p=>{Q()&&p(xe)})}var qe=d(Z,2);Oe(qe,19,v,(p,t)=>_e(p,t),(p,t,W)=>{var B=Ha(),L=O(B),Y=f(L);{var N=u=>{var C=pa(),V=O(C);he(V,{});var k=d(V,2),b=f(k);le(b,{get value(){return ue},mask:{words:6}}),c(k),s(u,C)},D=m(()=>!H(e(t))),ee=u=>{const C=m(()=>e(t).icon??ma);var V=_a(),k=O(V);me(k,()=>e(C),(g,i)=>{i(g,{})});var b=d(k,2),P=f(b);{var ae=g=>{{let i=m(()=>e(a)(257));oe(g,{discreet:!0,get value(){return e(t).folder},get label(){return e(i)},onblur:async _=>{e(t).folder=_,e(t).children.every(H)&&e(F).every(H)&&await ve(e(t).children,[...e(F),_].join("/"))}})}},te=m(()=>Q()&&H(e(t).folder)),re=g=>{le(g,{get value(){return e(t).folder},mask:{words:6}})};w(P,g=>{e(te)?g(ae):g(re,!1)})}c(b);var se=d(b,2);{var G=g=>{Qe(g,{children:(i,_)=>{var I=ce(),fe=O(I);{var K=J=>{var T=E();A(be=>j(T,be),[()=>ge(e(t).children.length,e(a).p(331),e(a)._.p)]),s(J,T)},Ve=m(()=>e(t).children.every(H)),ke=J=>{{let T=m(()=>ge(e(t).children.length,e(a).p(331),e(a)._.p));le(J,{get value(){return ue},get mask(){return e(T)}})}};w(fe,J=>{e(Ve)?J(K):J(ke,!1)})}s(i,I)}})};w(se,g=>{"children"in e(t)&&e(t).children.length>5&&g(G)})}s(u,V)},we=u=>{const C=m(()=>pe(e(t)));var V=da(),k=O(V);me(k,()=>e(C),(i,_)=>{_(i,{})});var b=d(k,2),P=f(b),ae=f(P);{var te=i=>{var _=E();A(()=>j(_,e(t).filename)),s(i,_)},re=i=>{{let _=m(()=>e(a)(391));Ee(i,{get text(){return e(_)},children:(I,fe)=>{Ie();var K=E();A(()=>j(K,e(t).filename)),s(I,K)},$$slots:{default:!0}})}},se=i=>{{let _=m(()=>e(a)(258));oe(i,{discreet:!0,get value(){return e(t).filename},get label(){return e(_)},onblur:async I=>{e(t).filename=I,e(F).every(H)&&await r.onedit?.(e(t).provenance,[...e(F),I].join("/"))}})}};w(ae,i=>{Q()?e(t).provenance==="metadata.json"?i(re,1):i(se,!1):i(te)})}c(P);var G=d(P,2),g=f(G,!0);c(G),c(b),A(()=>j(g,e(t).help)),s(u,V)};w(Y,u=>{e(D)?u(N):"folder"in e(t)?u(ee,1):u(we,!1)})}c(L);var Me=d(L,2);{var ye=u=>{{let C=m(()=>[...e(F),e(t).folder]);o(u,()=>e(t).children,()=>e(C))}},Ce=m(()=>H(e(t))&&"children"in e(t));w(Me,u=>{e(Ce)&&u(ye)})}s(p,B)},p=>{var t=za(),W=f(t),B=f(W,!0);c(W),c(t),A(L=>j(B,L),[()=>e(a)(403)]),s(p,t)}),c(h),Pe(h,()=>e(R)?Se:()=>{}),A(()=>y=Ze(h,1,"tree svelte-12kq3qg",null,y,{"leaves-only":e(R)})),s(n,h)},a=m(()=>Re("main")),Q=Je(r,"editable",3,!1);async function ve(n,v){for(const q of n)"folder"in q?await ve(q.children,`${v}/${q.folder}`):await r.onedit?.(q.provenance,`${v}/${q.filename}`)}function pe({provenance:n,contentType:v}){switch(n){case"metadata.csv":return Xe;case"metadata.json":return Ne;case"images.cropped":return De;case"images.original":return Ke;default:return v.startsWith("image/")?aa:v.startsWith("audio/")?sa:v.startsWith("video/")?fa:v==="application/pdf"?la:v.startsWith("text/")?na:he}}function _e(n,v){return H(n)?"folder"in n?H(n.folder)?n.folder:v:n.filename:v}var S=qa(),U=f(S),ne=f(U);Ge(ne,{});var ie=d(ne,2),X=f(ie),de=f(X,!0);c(X);var He=d(X,2);{var ze=n=>{var v=xa(),q=f(v);{var F=h=>{var y=E();A(()=>j(y,r.rootHelp)),s(h,y)},R=h=>{var y=ce(),Z=O(y);We(Z,()=>r.rootHelp),s(h,y)};w(q,h=>{typeof r.rootHelp=="string"?h(F):h(R,!1)})}c(v),s(n,v)};w(He,n=>{r.rootHelp&&n(ze)})}c(ie),c(U);var $e=d(U,2);o($e,()=>r.tree),c(S),A(n=>j(de,n),[()=>e(a)(402)]),s(l,S),Be()}export{Da as Z};
