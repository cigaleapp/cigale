import"./DsnmJJEf.js";import{a as je,c as Be,b as Ce}from"./08d27X49.js";import{R as ce}from"./DWCXZatK.js";import{f as Pe,a as t,p as qe,C as i,D as n,b as Ae,g as e,u as s,H as V,ar as E,ap as R,J as I,F as X,G as F,aq as fe,as as ae}from"./BwdvgNQo.js";import{s as Y}from"./HTLptRgQ.js";import{s as G}from"./DYy3QkOc.js";import{a as De}from"./DbetVW2v.js";import{r as ye,i as k}from"./CKH9F0ww.js";import{k as Le}from"./DcdGX-PW.js";import{c as H}from"./CaPT1Hnn.js";import{A as Re}from"./Cyizp9nt.js";import{A as Ve}from"./G4wa9As3.js";import{C as Se}from"./B6dy2sqQ.js";import{E as Te}from"./3hMEuLq3.js";import{L as Ue}from"./B-T9H-ER.js";import{p as ze}from"./BzM0mbGE.js";import{B as Ee}from"./DgJA6oA6.js";import{L as Ie}from"./DkW1Bdbi.js";import{h as Fe,u as Ge}from"./Xiow3_xo.js";import{t as _e}from"./BYqiwRWy.js";import{B as He}from"./LNwaZJFt.js";var Je=Pe('<svg><path fill="currentColor" d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10m0-2a8 8 0 1 0 0-16a8 8 0 0 0 0 16m-1-5h2v2h-2zm2-1.645V14h-2v-1.5a1 1 0 0 1 1-1a1.5 1.5 0 1 0-1.471-1.794l-1.962-.393A3.501 3.501 0 1 1 13 13.355"></path></svg>');function me(te,a){const f=ye(a,["$$slots","$$events","$$legacy"]);var Z=Je();je(Z,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...f})),t(te,Z)}var Me=V("<span><!></span>"),Qe=V('<span class="version-check up-to-date svelte-1h004jq"><!> <!></span> <!>',1),Ke=V("<span><!> <!></span>"),Ne=V('<span class="version-check error svelte-1h004jq"><!> <!></span>'),Oe=V("<!> <!>",1),We=V('<span class="version-check not-applicable svelte-1h004jq"><!> <!></span>'),Xe=V('<span class="version-check not-applicable svelte-1h004jq"><!> <!></span>');function pa(te,a){qe(a,!0);const f=s(()=>Ce("main")),Z=s(()=>ze.data.swarpc);let re=fe(0),S=fe(!1);const T=s(()=>a.compact?He:Ee);var ue=i(),de=n(ue);{var ge=_=>{var g=i(),x=n(g);Le(x,()=>e(re),J=>{var U=i(),M=n(U);De(M,()=>Fe({id:a.id,version:a.version,source:a.source}),j=>{var B=i(),m=n(B);{var d=c=>{var o=i(),l=n(o);G(l,()=>a.button,()=>({onclick:()=>{},help:"Recherche de mise à jour…",state:"checking",current:a.version,newest:void 0})),t(c,o)},h=c=>{var o=i(),l=n(o);{let p=s(()=>e(f)(142));H(l,()=>e(T),(y,Q)=>{Q(y,{get help(){return e(p)},disabled:!0,onclick:()=>{},children:(K,$)=>{var r=Oe(),u=n(r);Ue(u,{});var b=R(u,2);{var q=C=>{var A=X();F(L=>Y(A,L),[()=>e(f)(120)]),t(C,A)};k(b,C=>{a.compact||C(q)})}t(K,r)},$$slots:{default:!0}})})}t(c,o)};k(m,c=>{a.button?c(d):c(h,!1)})}t(j,B)},(j,B)=>{var m=s(()=>{var{upToDate:r,newVersion:u}=e(B);return{upToDate:r,newVersion:u}}),d=s(()=>e(m).upToDate),h=s(()=>e(m).newVersion);const c=s(()=>async()=>{e(d)?ae(re,Date.now(),!0):(ae(S,!0),await Ge({version:a.version,source:a.source,id:a.id,swarpc:e(Z)}).then(({version:r})=>{_e.success(e(f)(329,[r])),a.onupgrade?.(r)}).catch(r=>{_e.error(e(f)(330,[r]))}).finally(()=>{ae(S,!1)}))}),o=s(()=>e(d)?`Le protocole est à jour (v${e(h)}). Cliquer pour vérifier à nouveau`:`Une mise à jour vers la v${e(h)} est disponible`);var l=i(),p=n(l);{var y=r=>{var u=i(),b=n(u);G(b,()=>a.button,()=>({onclick:e(c),help:e(o),state:"uptodate",current:a.version,newest:e(h)})),t(r,u)},Q=r=>{var u=i(),b=n(u);H(b,()=>e(T),(q,C)=>{C(q,{get help(){return e(o)},onclick:e(c),children:(A,L)=>{var w=Qe(),D=n(w),N=E(D);Se(N,{});var ne=R(N,2);{var oe=v=>{var P=X();F(O=>Y(P,O),[()=>e(f)(184)]),t(v,P)};k(ne,v=>{a.compact||v(oe)})}I(D);var se=R(D,2);{var ie=v=>{var P=Me(),O=E(P);{let le=s(()=>e(f).c(181)),ve=s(()=>[a.version]);ce(O,{get x(){return e(le)},get a(){return e(ve)}})}I(P),t(v,P)};k(se,v=>{a.compact||v(ie)})}t(A,w)},$$slots:{default:!0}})}),t(r,u)},K=r=>{var u=i(),b=n(u);G(b,()=>a.button,()=>({onclick:e(c),help:e(o),state:e(S)?"upgrading":"available",current:a.version,newest:e(h)})),t(r,u)},$=r=>{var u=i(),b=n(u);H(b,()=>e(T),(q,C)=>{C(q,{onclick:e(c),get help(){return e(o)},children:(A,L)=>{var w=Ke();let D;var N=E(w);{var ne=v=>{Ie(v,{})},oe=v=>{Ve(v,{})};k(N,v=>{e(S)?v(ne):v(oe,!1)})}var se=R(N,2);{var ie=v=>{var P=i(),O=n(P);{var le=z=>{var ee=X();F(W=>Y(ee,W),[()=>e(f)(121)]),t(z,ee)},ve=z=>{const ee=W=>{Re(W,{})};{let W=s(()=>[ee]),we=s(()=>e(f).c(182)),xe=s(()=>[a.version,e(h)]);ce(z,{get t(){return e(W)},get x(){return e(we)},get a(){return e(xe)}})}};k(O,z=>{e(S)?z(le):z(ve,!1)})}t(v,P)};k(se,v=>{a.compact||v(ie)})}I(w),F(()=>D=Be(w,1,"version-check svelte-1h004jq",null,D,{"update-available":!e(S)})),t(A,w)},$$slots:{default:!0}})}),t(r,u)};k(p,r=>{e(d)&&a.button?r(y):e(d)?r(Q,1):a.button?r(K,2):r($,!1)})}t(j,l)},(j,B)=>{const m=s(()=>()=>{ae(re,Date.now(),!0)});var d=i(),h=n(d);{var c=l=>{var p=i(),y=n(p);G(y,()=>a.button,()=>({onclick:e(m),help:`Impossible de vérifier les mises à jour: ${e(B)}`,state:"error",current:a.version,newest:void 0})),t(l,p)},o=l=>{var p=i(),y=n(p);{let Q=s(()=>e(f)(202,[e(B)]));H(y,()=>e(T),(K,$)=>{$(K,{onclick:e(m),get help(){return e(Q)},children:(r,u)=>{var b=Ne(),q=E(b);Te(q,{});var C=R(q,2);{var A=L=>{var w=X();F(D=>Y(w,D),[()=>e(f)(149)]),t(L,w)};k(C,L=>{a.compact||L(A)})}I(b),t(r,b)},$$slots:{default:!0}})})}t(l,p)};k(h,l=>{a.button?l(c):l(o,!1)})}t(j,d)}),t(J,U)}),t(_,g)},he=_=>{var g=i(),x=n(g);G(x,()=>a.button,()=>({onclick:()=>{},help:"Ce protocole ne supporte pas la vérification des mises à jour",state:"error",current:a.version,newest:void 0})),t(_,g)},pe=_=>{var g=i(),x=n(g);{let J=s(()=>e(f)(49));H(x,()=>e(T),(U,M)=>{M(U,{onclick:()=>{},get help(){return e(J)},children:(j,B)=>{var m=We(),d=E(m);me(d,{});var h=R(d,2);{var c=o=>{{let l=s(()=>e(f).c(181)),p=s(()=>[a.version]);ce(o,{get x(){return e(l)},get a(){return e(p)}})}};k(h,o=>{a.compact||o(c)})}I(m),t(j,m)},$$slots:{default:!0}})})}t(_,g)},be=_=>{var g=i(),x=n(g);G(x,()=>a.button,()=>({onclick:()=>{},help:"Ce protocole n'est pas versionné, pour le mettre à jour, supprimer le et importez la nouvelle version",state:"error",current:void 0,newest:void 0})),t(_,g)},ke=_=>{var g=i(),x=n(g);{let J=s(()=>e(f)(48));H(x,()=>e(T),(U,M)=>{M(U,{onclick:()=>{},get help(){return e(J)},children:(j,B)=>{var m=Xe(),d=E(m);me(d,{});var h=R(d,2);{var c=o=>{var l=X();F(p=>Y(l,p),[()=>e(f)(332)]),t(o,l)};k(h,o=>{a.compact||o(c)})}I(m),t(j,m)},$$slots:{default:!0}})})}t(_,g)};k(de,_=>{a.version&&a.source?_(ge):a.version&&a.button?_(he,1):a.version?_(pe,2):a.button?_(be,3):_(ke,!1)})}t(te,ue),Ae()}export{pa as B};
