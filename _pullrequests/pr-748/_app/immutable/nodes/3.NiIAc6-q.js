import"../chunks/DsnmJJEf.js";import{j as nn,k as sn,A as ke,J as K,G as E,g as o,D as w,i as u,B as xe,F as P,aD as q,aC as pe,a as Mt,u as an,I as nt,aB as V,aA as C,K as S,h as Te,ag as Me,bu as Xt,bv as on,t as J,a1 as yt,e as Qe,aF as st,b as ln,aM as vr,bw as cn,aV as mr,b4 as un,aE as qe,bx as hn}from"../chunks/DLg_PPZ_.js";import{s as ye}from"../chunks/USdlu_3B.js";import{p as F,i as B,r as ve,s as Fe,u as br}from"../chunks/D67Hg_eN.js";import{a as ie,b as je,c as Jt,s as be,r as ct,d as Yt}from"../chunks/BNnFn6yw.js";import{t as dn,f as pn}from"../chunks/CKZ3iiSi.js";import{p as St}from"../chunks/BGdIILBs.js";import{t as gn}from"../chunks/C8qYVKmu.js";import{t as se,f as er,Y as fn,B as vn,Z as mn,_ as bn,I as kn,$ as xn,o as tr,H as ut}from"../chunks/BCT7fajR.js";import{f as _n,n as wn,d as yn}from"../chunks/BbY4Fv7Y.js";import{i as kr,u as Z,k as Se,l as Sn,n as In,o as Rn,g as An,p as rr,d as Pn,b as Cn}from"../chunks/yjQBtq-m.js";import{b as Tn,d as Nn,n as On,m as Mn,i as zn,A as Hn}from"../chunks/hwqyxWC0.js";import{s as En}from"../chunks/DgdFC4m6.js";import{t as It}from"../chunks/BVoxKip6.js";import{w as xr}from"../chunks/B6p9bkuE.js";import{m as Ce,s as Ln,C as _r,u as zt,w as ze,E as wr,A as Ye,a as pt,b as qn,c as Bn,S as Dn,d as Vn,e as Fn,f as jn,M as $n,g as yr,F as Zn,h as Kn,i as Un,j as Wn,k as Gn,l as Qn,n as Xn,o as Jn,p as Yn,q as es,r as ts,t as rs,T as nr,B as ns,P as Sr,H as Ir,v as Rr,x as Ar,y as ss,z as is,D as as,G as os,I as Pr,J as Cr,K as ls,L as cs,N as us,O as hs,Q as Tr,R as ds,U as ps,V as ee,W as $e,X as gs,Y as Ht,Z as fs,$ as vs,a0 as ms,a1 as bs,a2 as ks,a3 as sr}from"../chunks/BCd8JXwC.js";import{o as xs,e as et,s as ue,d as Nr}from"../chunks/9TbOa8jV.js";import{e as Ze,i as Or}from"../chunks/C4hQLFL9.js";import{B as ht}from"../chunks/BPUwB5iN.js";import{C as _s}from"../chunks/CK85Hv2l.js";import{b as Rt,I as ws}from"../chunks/JIaph16c.js";import{L as At}from"../chunks/Bx3yqWKm.js";import{a as Be,t as De}from"../chunks/Cmdet9fQ.js";import{C as Mr}from"../chunks/DceiQKom.js";import{X as ys}from"../chunks/CaI1kqC-.js";import{C as Pt}from"../chunks/4spNFoJP.js";import{a as ir}from"../chunks/C_q2VfFz.js";import{h as ar}from"../chunks/C9plLwmr.js";import{c as Ve}from"../chunks/Dm35MxJ2.js";import"../chunks/K-UyIQrW.js";import{o as Ss}from"../chunks/D6ilWQdm.js";import{b as Is}from"../chunks/eMcr3I6C.js";import{b as or}from"../chunks/BEYaBP-8.js";import{i as Rs}from"../chunks/BCnWpx2z.js";import{A as As}from"../chunks/B5LfmK4E.js";import{S as Ps}from"../chunks/BVbUXEB0.js";import{l as gt,t as zr}from"../chunks/Csf0LG85.js";import{I as Cs}from"../chunks/C3T_LJvL.js";import{T as Ts}from"../chunks/Di2wCwy7.js";import{U as Ns}from"../chunks/CvUVJ5gc.js";import{p as Os}from"../chunks/hFci9Gn4.js";function Ms(r,e,t,s,n){nn&&sn();var a=e.$$slots?.[t],i=!1;a===!0&&(a=e.children,i=!0),a===void 0?n!==null&&n(r):a(r,i?()=>s:s)}var zs=P("<input/>"),Hs=P("<input/>");function Es(r,e){ke(e,!0);let t=F(e,"value",15),s=ve(e,["$$slots","$$events","$$legacy","value"]);const n=w(()=>Ce(s,{"aria-hidden":"true",tabindex:-1,style:Ln}));var a=K(),i=E(a);{var l=h=>{var v=zs();ie(v,()=>({...o(n),value:t()}),void 0,void 0,void 0,!0),u(h,v)},c=h=>{var v=Hs();ie(v,()=>({...o(n)}),void 0,void 0,void 0,!0),Rt(v,t),u(h,v)};B(i,h=>{o(n).type==="checkbox"?h(l):h(c,!1)})}u(r,a),xe()}const lr=[qn,wr,Bn,Dn,Vn,Fn,jn,$n,yr,Zn,Kn,Un,Wn,Gn,Qn,Xn,Jn,Yn,es,ts,rs],Ls=[pt,Sr,Ir],qs=[Ye,Rr,Ar],Bs=[...Ls,...qs];class Hr{opts;#e=pe(!1);get touchedInput(){return o(this.#e)}set touchedInput(e){q(this.#e,e,!0)}#t=pe("");get inputValue(){return o(this.#t)}set inputValue(e){q(this.#t,e,!0)}#n=pe(null);get inputNode(){return o(this.#n)}set inputNode(e){q(this.#n,e,!0)}#r=pe(null);get contentNode(){return o(this.#r)}set contentNode(e){q(this.#r,e,!0)}#s=pe(null);get triggerNode(){return o(this.#s)}set triggerNode(e){q(this.#s,e,!0)}#i=pe("");get valueId(){return o(this.#i)}set valueId(e){q(this.#i,e,!0)}#a=pe(null);get highlightedNode(){return o(this.#a)}set highlightedNode(e){q(this.#a,e,!0)}#o=w(()=>this.highlightedNode?this.highlightedNode.getAttribute("data-value"):null);get highlightedValue(){return o(this.#o)}set highlightedValue(e){q(this.#o,e)}#l=w(()=>{if(this.highlightedNode)return this.highlightedNode.id});get highlightedId(){return o(this.#l)}set highlightedId(e){q(this.#l,e)}#c=w(()=>this.highlightedNode?this.highlightedNode.getAttribute("data-label"):null);get highlightedLabel(){return o(this.#c)}set highlightedLabel(e){q(this.#c,e)}isUsingKeyboard=!1;isCombobox=!1;bitsAttrs;constructor(e){this.opts=e,this.isCombobox=e.isCombobox,this.bitsAttrs=Ys(this),an(()=>{this.opts.open.current||this.setHighlightedNode(null)})}setHighlightedNode(e,t=!1){this.highlightedNode=e,e&&(this.isUsingKeyboard||t)&&e.scrollIntoView({block:this.opts.scrollAlignment.current})}getCandidateNodes(){const e=this.contentNode;return e?Array.from(e.querySelectorAll(`[${this.bitsAttrs.item}]:not([data-disabled])`)):[]}setHighlightedToFirstCandidate(){this.setHighlightedNode(null);const e=this.getCandidateNodes();e.length&&this.setHighlightedNode(e[0])}getNodeByValue(e){return this.getCandidateNodes().find(s=>s.dataset.value===e)??null}setOpen(e){this.opts.open.current=e}toggleOpen(){this.opts.open.current=!this.opts.open.current}handleOpen(){this.setOpen(!0)}handleClose(){this.setHighlightedNode(null),this.setOpen(!1)}toggleMenu(){this.toggleOpen()}}class Ds extends Hr{opts;isMulti=!1;#e=w(()=>this.opts.value.current!=="");get hasValue(){return o(this.#e)}set hasValue(e){q(this.#e,e)}#t=w(()=>this.opts.items.current.length?this.opts.items.current.find(t=>t.value===this.opts.value.current)?.label??"":"");get currentLabel(){return o(this.#t)}set currentLabel(e){q(this.#t,e)}#n=w(()=>this.opts.items.current.length?this.opts.items.current.filter(t=>!t.disabled).map(t=>t.label):[]);get candidateLabels(){return o(this.#n)}set candidateLabels(e){q(this.#n,e)}#r=w(()=>!(this.isMulti||this.opts.items.current.length===0));get dataTypeaheadEnabled(){return o(this.#r)}set dataTypeaheadEnabled(e){q(this.#r,e)}constructor(e){super(e),this.opts=e,Mt(()=>{!this.opts.open.current&&this.highlightedNode&&this.setHighlightedNode(null)}),ze(()=>this.opts.open.current,()=>{this.opts.open.current&&this.setInitialHighlightedNode()})}includesItem(e){return this.opts.value.current===e}toggleItem(e,t=e){this.opts.value.current=this.includesItem(e)?"":e,this.inputValue=t}setInitialHighlightedNode(){Tr(()=>{if(this.highlightedNode&&document.contains(this.highlightedNode))return;if(this.opts.value.current!==""){const t=this.getNodeByValue(this.opts.value.current);if(t){this.setHighlightedNode(t,!0);return}}const e=this.getCandidateNodes()[0];e&&this.setHighlightedNode(e,!0)})}}class Vs extends Hr{opts;isMulti=!0;#e=w(()=>this.opts.value.current.length>0);get hasValue(){return o(this.#e)}set hasValue(e){q(this.#e,e)}constructor(e){super(e),this.opts=e,Mt(()=>{!this.opts.open.current&&this.highlightedNode&&this.setHighlightedNode(null)}),ze(()=>this.opts.open.current,()=>{this.opts.open.current&&this.setInitialHighlightedNode()})}includesItem(e){return this.opts.value.current.includes(e)}toggleItem(e,t=e){this.includesItem(e)?this.opts.value.current=this.opts.value.current.filter(s=>s!==e):this.opts.value.current=[...this.opts.value.current,e],this.inputValue=t}setInitialHighlightedNode(){Tr(()=>{if(this.highlightedNode&&document.contains(this.highlightedNode))return;if(this.opts.value.current.length&&this.opts.value.current[0]!==""){const t=this.getNodeByValue(this.opts.value.current[0]);if(t){this.setHighlightedNode(t,!0);return}}const e=this.getCandidateNodes()[0];e&&this.setHighlightedNode(e,!0)})}}class Fs{opts;root;constructor(e,t){this.opts=e,this.root=t,zt({...e,onRefChange:s=>{this.root.inputNode=s}}),this.onkeydown=this.onkeydown.bind(this),this.oninput=this.oninput.bind(this),ze([()=>this.root.opts.value.current,()=>this.opts.clearOnDeselect.current],([s,n],[a])=>{n&&(Array.isArray(s)&&Array.isArray(a)?s.length===0&&a.length!==0&&(this.root.inputValue=""):s===""&&a!==""&&(this.root.inputValue=""))})}onkeydown(e){if(this.root.isUsingKeyboard=!0,e.key!==wr){if((e.key===Ye||e.key===pt)&&e.preventDefault(),!this.root.opts.open.current){if(lr.includes(e.key)||e.key===nr||e.key===ns&&this.root.inputValue===""||(this.root.handleOpen(),this.root.hasValue))return;const t=this.root.getCandidateNodes();if(!t.length)return;if(e.key===pt){const s=t[0];this.root.setHighlightedNode(s)}else if(e.key===Ye){const s=t[t.length-1];this.root.setHighlightedNode(s)}return}if(e.key===nr){this.root.handleClose();return}if(e.key===yr&&!e.isComposing){e.preventDefault();const t=this.root.highlightedValue===this.root.opts.value.current;if(!this.root.opts.allowDeselect.current&&t&&!this.root.isMulti){this.root.handleClose();return}this.root.highlightedValue&&this.root.toggleItem(this.root.highlightedValue,this.root.highlightedLabel??void 0),!this.root.isMulti&&!t&&this.root.handleClose()}if(e.key===Ye&&e.altKey&&this.root.handleClose(),Bs.includes(e.key)){e.preventDefault();const t=this.root.getCandidateNodes(),s=this.root.highlightedNode,n=s?t.indexOf(s):-1,a=this.root.opts.loop.current;let i;if(e.key===pt?i=ss(t,n,a):e.key===Ye?i=is(t,n,a):e.key===Rr?i=as(t,n,10,a):e.key===Sr?i=os(t,n,10,a):e.key===Ir?i=t[0]:e.key===Ar&&(i=t[t.length-1]),!i)return;this.root.setHighlightedNode(i);return}lr.includes(e.key)||this.root.highlightedNode||this.root.setHighlightedToFirstCandidate()}}oninput(e){this.root.inputValue=e.currentTarget.value,this.root.setHighlightedToFirstCandidate()}#e=w(()=>({id:this.opts.id.current,role:"combobox",disabled:this.root.opts.disabled.current?!0:void 0,"aria-activedescendant":this.root.highlightedId,"aria-autocomplete":"list","aria-expanded":ls(this.root.opts.open.current),"data-state":Cr(this.root.opts.open.current),"data-disabled":Pr(this.root.opts.disabled.current),onkeydown:this.onkeydown,oninput:this.oninput,[this.root.bitsAttrs.input]:""}));get props(){return o(this.#e)}set props(e){q(this.#e,e)}}class js{opts;root;#e=pe(null);get viewportNode(){return o(this.#e)}set viewportNode(e){q(this.#e,e,!0)}#t=pe(!1);get isPositioned(){return o(this.#t)}set isPositioned(e){q(this.#t,e,!0)}constructor(e,t){this.opts=e,this.root=t,zt({...e,onRefChange:s=>{this.root.contentNode=s},deps:()=>this.root.opts.open.current}),cs(()=>{this.root.contentNode=null,this.isPositioned=!1}),ze(()=>this.root.opts.open.current,()=>{this.root.opts.open.current||(this.isPositioned=!1)}),this.onpointermove=this.onpointermove.bind(this)}onpointermove(e){this.root.isUsingKeyboard=!1}#n=w(()=>{const e=this.root.isCombobox?"--bits-combobox":"--bits-select";return{[`${e}-content-transform-origin`]:"var(--bits-floating-transform-origin)",[`${e}-content-available-width`]:"var(--bits-floating-available-width)",[`${e}-content-available-height`]:"var(--bits-floating-available-height)",[`${e}-anchor-width`]:" var(--bits-floating-anchor-width)",[`${e}-anchor-height`]:"var(--bits-floating-anchor-height)"}});onInteractOutside=e=>{if(e.target===this.root.triggerNode||e.target===this.root.inputNode){e.preventDefault();return}this.opts.onInteractOutside.current(e),!e.defaultPrevented&&this.root.handleClose()};onEscapeKeydown=e=>{this.opts.onEscapeKeydown.current(e),!e.defaultPrevented&&this.root.handleClose()};onOpenAutoFocus=e=>{e.preventDefault()};onCloseAutoFocus=e=>{e.preventDefault()};#r=w(()=>({open:this.root.opts.open.current}));get snippetProps(){return o(this.#r)}set snippetProps(e){q(this.#r,e)}#s=w(()=>({id:this.opts.id.current,role:"listbox","aria-multiselectable":this.root.isMulti?"true":void 0,"data-state":Cr(this.root.opts.open.current),[this.root.bitsAttrs.content]:"",style:{display:"flex",flexDirection:"column",outline:"none",boxSizing:"border-box",pointerEvents:"auto",...o(this.#n)},onpointermove:this.onpointermove}));get props(){return o(this.#s)}set props(e){q(this.#s,e)}popperProps={onInteractOutside:this.onInteractOutside,onEscapeKeydown:this.onEscapeKeydown,onOpenAutoFocus:this.onOpenAutoFocus,onCloseAutoFocus:this.onCloseAutoFocus,trapFocus:!1,loop:!1,onPlaced:()=>{this.root.opts.open.current&&(this.isPositioned=!0)}}}class $s{opts;root;#e=w(()=>this.root.includesItem(this.opts.value.current));get isSelected(){return o(this.#e)}set isSelected(e){q(this.#e,e)}#t=w(()=>this.root.highlightedValue===this.opts.value.current);get isHighlighted(){return o(this.#t)}set isHighlighted(e){q(this.#t,e)}prevHighlighted=new us(()=>this.isHighlighted);#n=pe(!1);get mounted(){return o(this.#n)}set mounted(e){q(this.#n,e,!0)}constructor(e,t){this.opts=e,this.root=t,zt({...e,deps:()=>this.mounted}),ze([()=>this.isHighlighted,()=>this.prevHighlighted.current],()=>{this.isHighlighted?this.opts.onHighlight.current():this.prevHighlighted.current&&this.opts.onUnhighlight.current()}),ze(()=>this.mounted,()=>{this.mounted&&this.root.setInitialHighlightedNode()}),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this),this.onpointermove=this.onpointermove.bind(this)}handleSelect(){if(this.opts.disabled.current)return;const e=this.opts.value.current===this.root.opts.value.current;if(!this.root.opts.allowDeselect.current&&e&&!this.root.isMulti){this.root.handleClose();return}this.root.toggleItem(this.opts.value.current,this.opts.label.current),!this.root.isMulti&&!e&&this.root.handleClose()}#r=w(()=>({selected:this.isSelected,highlighted:this.isHighlighted}));get snippetProps(){return o(this.#r)}set snippetProps(e){q(this.#r,e)}onpointerdown(e){e.preventDefault()}onpointerup(e){if(!(e.defaultPrevented||!this.opts.ref.current)){if(e.pointerType==="touch"&&!hs){xs(this.opts.ref.current,"click",()=>{this.handleSelect(),this.root.setHighlightedNode(this.opts.ref.current)},{once:!0});return}e.preventDefault(),this.handleSelect(),e.pointerType==="touch"&&this.root.setHighlightedNode(this.opts.ref.current)}}onpointermove(e){e.pointerType!=="touch"&&this.root.highlightedNode!==this.opts.ref.current&&this.root.setHighlightedNode(this.opts.ref.current)}#s=w(()=>({id:this.opts.id.current,role:"option","aria-selected":this.root.includesItem(this.opts.value.current)?"true":void 0,"data-value":this.opts.value.current,"data-disabled":Pr(this.opts.disabled.current),"data-highlighted":this.root.highlightedValue===this.opts.value.current&&!this.opts.disabled.current?"":void 0,"data-selected":this.root.includesItem(this.opts.value.current)?"":void 0,"data-label":this.opts.label.current,[this.root.bitsAttrs.item]:"",onpointermove:this.onpointermove,onpointerdown:this.onpointerdown,onpointerup:this.onpointerup}));get props(){return o(this.#s)}set props(e){q(this.#s,e)}}class Zs{opts;root;#e=w(()=>this.root.opts.name.current!=="");get shouldRender(){return o(this.#e)}set shouldRender(e){q(this.#e,e)}constructor(e,t){this.opts=e,this.root=t,this.onfocus=this.onfocus.bind(this)}onfocus(e){e.preventDefault(),this.root.isCombobox?this.root.inputNode?.focus():this.root.triggerNode?.focus()}#t=w(()=>({disabled:ps(this.root.opts.disabled.current),required:ds(this.root.opts.required.current),name:this.root.opts.name.current,value:this.opts.value.current,onfocus:this.onfocus}));get props(){return o(this.#t)}set props(e){q(this.#t,e)}}const it=new _r("Select.Root | Combobox.Root"),Ks=new _r("Select.Content | Combobox.Content");function Us(r){const{type:e,...t}=r,s=e==="single"?new Ds(t):new Vs(t);return it.set(s)}function Ws(r){return new Fs(r,it.get())}function Gs(r){return Ks.set(new js(r,it.get()))}function Qs(r){return new $s(r,it.get())}function Xs(r){return new Zs(r,it.get())}const Js=["trigger","content","item","viewport","scroll-up-button","scroll-down-button","group","group-label","separator","arrow","input","content-wrapper","item-text","value"];function Ys(r){const e=r.isCombobox,t={};for(const s of Js)t[s]=e?`data-combobox-${s}`:`data-select-${s}`;return t}function cr(r,e){ke(e,!0);let t=F(e,"value",15,"");const s=Xs({value:ee.with(()=>t())});var n=K(),a=E(n);{var i=l=>{Es(l,Fe(()=>s.props,{get value(){return t()},set value(c){t(c)}}))};B(a,l=>{s.shouldRender&&l(i)})}u(r,n),xe()}var ei=P("<!> <!>",1);function ti(r,e){ke(e,!0);let t=F(e,"value",15),s=F(e,"onValueChange",3,$e),n=F(e,"name",3,""),a=F(e,"disabled",3,!1),i=F(e,"open",15,!1),l=F(e,"onOpenChange",3,$e),c=F(e,"loop",3,!1),h=F(e,"scrollAlignment",3,"nearest"),v=F(e,"required",3,!1),y=F(e,"items",19,()=>[]),I=F(e,"allowDeselect",3,!0);if(t()===void 0){const p=e.type==="single"?"":[];t(p)}ze.pre(()=>t(),()=>{t()===void 0&&t(e.type==="single"?"":[])});const D=Us({type:e.type,value:ee.with(()=>t(),p=>{t(p),s()(p)}),disabled:ee.with(()=>a()),required:ee.with(()=>v()),open:ee.with(()=>i(),p=>{i(p),l()(p)}),loop:ee.with(()=>c()),scrollAlignment:ee.with(()=>h()),name:ee.with(()=>n()),isCombobox:!0,items:ee.with(()=>y()),allowDeselect:ee.with(()=>I())});var _=ei(),z=E(_);gs(z,{children:(p,f)=>{var d=K(),R=E(d);ye(R,()=>e.children??nt),u(p,d)},$$slots:{default:!0}});var M=V(z,2);{var m=p=>{var f=K(),d=E(f);{var R=k=>{var O=K(),A=E(O);Ze(A,17,()=>D.opts.value.current,Or,(g,b)=>{cr(g,{get value(){return o(b)}})}),u(k,O)};B(d,k=>{D.opts.value.current.length&&k(R)})}u(p,f)},T=p=>{cr(p,{get value(){return D.opts.value.current},set value(f){D.opts.value.current=f}})};B(M,p=>{Array.isArray(D.opts.value.current)?p(m):p(T,!1)})}u(r,_),xe()}var ri=P("<input/>");function ni(r,e){ke(e,!0);let t=F(e,"id",19,Ht),s=F(e,"ref",15,null),n=F(e,"clearOnDeselect",3,!1),a=ve(e,["$$slots","$$events","$$legacy","id","ref","child","defaultValue","clearOnDeselect"]);const i=Ws({id:ee.with(()=>t()),ref:ee.with(()=>s(),v=>s(v)),clearOnDeselect:ee.with(()=>n())});e.defaultValue&&(i.root.inputValue=e.defaultValue);const l=w(()=>Ce(a,i.props,{value:i.root.inputValue}));var c=K(),h=E(c);Ve(h,()=>fs,(v,y)=>{y(v,{get id(){return t()},children:(I,D)=>{var _=K(),z=E(_);{var M=T=>{var p=K(),f=E(p);ye(f,()=>e.child,()=>({props:o(l)})),u(T,p)},m=T=>{var p=ri();ie(p,()=>({...o(l)}),void 0,void 0,void 0,!0),u(T,p)};B(z,T=>{e.child?T(M):T(m,!1)})}u(I,_)},$$slots:{default:!0}})}),u(r,c),xe()}var si=P("<div><div><!></div></div>"),ii=P("<div><div><!></div></div>");function ai(r,e){ke(e,!0);let t=F(e,"id",19,Ht),s=F(e,"ref",15,null),n=F(e,"forceMount",3,!1),a=F(e,"side",3,"bottom"),i=F(e,"onInteractOutside",3,$e),l=F(e,"onEscapeKeydown",3,$e),c=F(e,"preventScroll",3,!1),h=ve(e,["$$slots","$$events","$$legacy","id","ref","forceMount","side","onInteractOutside","onEscapeKeydown","children","child","preventScroll"]);const v=Gs({id:ee.with(()=>t()),ref:ee.with(()=>s(),M=>s(M)),onInteractOutside:ee.with(()=>i()),onEscapeKeydown:ee.with(()=>l())}),y=w(()=>Ce(h,v.props));var I=K(),D=E(I);{var _=M=>{vs(M,Fe(()=>o(y),()=>v.popperProps,{get side(){return a()},get enabled(){return v.root.opts.open.current},get id(){return t()},get preventScroll(){return c()},forceMount:!0,popper:(T,p)=>{let f=()=>p?.().props,d=()=>p?.().wrapperProps;const R=w(()=>Ce(f(),{style:v.props.style}));var k=K(),O=E(k);{var A=b=>{var x=K(),N=E(x);{let H=w(()=>({props:o(R),wrapperProps:d(),...v.snippetProps}));ye(N,()=>e.child,()=>o(H))}u(b,x)},g=b=>{var x=si();ie(x,()=>({...d()}));var N=C(x);ie(N,()=>({...o(R)}));var H=C(N);ye(H,()=>e.children??nt),S(N),S(x),u(b,x)};B(O,b=>{e.child?b(A):b(g,!1)})}u(T,k)},$$slots:{popper:!0}}))},z=M=>{var m=K(),T=E(m);{var p=f=>{ms(f,Fe(()=>o(y),()=>v.popperProps,{get side(){return a()},get present(){return v.root.opts.open.current},get id(){return t()},get preventScroll(){return c()},forceMount:!1,popper:(R,k)=>{let O=()=>k?.().props,A=()=>k?.().wrapperProps;const g=w(()=>Ce(O(),{style:v.props.style}));var b=K(),x=E(b);{var N=$=>{var L=K(),j=E(L);{let U=w(()=>({props:o(g),wrapperProps:A(),...v.snippetProps}));ye(j,()=>e.child,()=>o(U))}u($,L)},H=$=>{var L=ii();ie(L,()=>({...A()}));var j=C(L);ie(j,()=>({...o(g)}));var U=C(j);ye(U,()=>e.children??nt),S(j),S(L),u($,L)};B(x,$=>{e.child?$(N):$(H,!1)})}u(R,b)},$$slots:{popper:!0}}))};B(T,f=>{n()||f(p)},!0)}u(M,m)};B(D,M=>{n()?M(_):M(z,!1)})}u(r,I),xe()}var oi=P("<div><!></div>"),li=P("<!> <!>",1);function ci(r,e){ke(e,!0);let t=F(e,"id",19,Ht),s=F(e,"ref",15,null),n=F(e,"label",19,()=>e.value),a=F(e,"disabled",3,!1),i=F(e,"onHighlight",3,$e),l=F(e,"onUnhighlight",3,$e),c=ve(e,["$$slots","$$events","$$legacy","id","ref","value","label","disabled","children","child","onHighlight","onUnhighlight"]);const h=Qs({id:ee.with(()=>t()),ref:ee.with(()=>s(),M=>s(M)),value:ee.with(()=>e.value),disabled:ee.with(()=>a()),label:ee.with(()=>n()),onHighlight:ee.with(()=>i()),onUnhighlight:ee.with(()=>l())}),v=w(()=>Ce(c,h.props));var y=li(),I=E(y);{var D=M=>{var m=K(),T=E(m);{let p=w(()=>({props:o(v),...h.snippetProps}));ye(T,()=>e.child,()=>o(p))}u(M,m)},_=M=>{var m=oi();ie(m,()=>({...o(v)}));var T=C(m);ye(T,()=>e.children??nt,()=>h.snippetProps),S(m),u(M,m)};B(I,M=>{e.child?M(D):M(_,!1)})}var z=V(I,2);bs(z,{get mounted(){return h.mounted},set mounted(M){h.mounted=M}}),u(r,y),xe()}var ui=Te('<svg><path fill="currentColor" d="M230.91 172a8 8 0 0 1-2.91 10.91l-96 56a8 8 0 0 1-8.06 0l-96-56A8 8 0 0 1 36 169.09l92 53.65l92-53.65a8 8 0 0 1 10.91 2.91M220 121.09l-92 53.65l-92-53.65a8 8 0 0 0-8 13.82l96 56a8 8 0 0 0 8.06 0l96-56a8 8 0 1 0-8.06-13.82M24 80a8 8 0 0 1 4-6.91l96-56a8 8 0 0 1 8.06 0l96 56a8 8 0 0 1 0 13.82l-96 56a8 8 0 0 1-8.06 0l-96-56A8 8 0 0 1 24 80m23.88 0L128 126.74L208.12 80L128 33.26Z"></path></svg>');function hi(r,e){const t=ve(e,["$$slots","$$events","$$legacy"]);var s=ui();ie(s,()=>({class:"icon",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em",...t})),u(r,s)}var di=Te('<svg><path fill="currentColor" d="M226.76 69a8 8 0 0 0-12.84-2.88l-40.3 37.19l-17.23-3.7l-3.7-17.23l37.19-40.3A8 8 0 0 0 187 29.24A72 72 0 0 0 88 96a72.3 72.3 0 0 0 6 28.94L33.79 177c-.15.12-.29.26-.43.39a32 32 0 0 0 45.26 45.26c.13-.13.27-.28.39-.42L131.06 162A72 72 0 0 0 232 96a71.6 71.6 0 0 0-5.24-27M160 152a56.14 56.14 0 0 1-27.07-7a8 8 0 0 0-9.92 1.77l-55.9 64.74a16 16 0 0 1-22.62-22.62L109.18 133a8 8 0 0 0 1.77-9.93a56 56 0 0 1 58.36-82.31l-31.2 33.81a8 8 0 0 0-1.94 7.1l5.66 26.33a8 8 0 0 0 6.14 6.14l26.35 5.66a8 8 0 0 0 7.1-1.94l33.81-31.2A56.06 56.06 0 0 1 160 152"></path></svg>');function pi(r,e){const t=ve(e,["$$slots","$$events","$$legacy"]);var s=di();ie(s,()=>({class:"icon",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em",...t})),u(r,s)}var gi=Te('<svg><path fill="currentColor" d="M200 24H56a16 16 0 0 0-16 16v176a16 16 0 0 0 16 16h144a16 16 0 0 0 16-16V40a16 16 0 0 0-16-16m-72 136a12 12 0 1 1-12 12a12 12 0 0 1 12-12m-8-24V80a8 8 0 0 1 16 0v56a8 8 0 0 1-16 0"></path></svg>');function fi(r,e){const t=ve(e,["$$slots","$$events","$$legacy"]);var s=gi();ie(s,()=>({class:"icon",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em",...t})),u(r,s)}var vi=Te('<svg><path fill="currentColor" d="M224 128a8 8 0 0 1-8 8H40a8 8 0 0 1 0-16h176a8 8 0 0 1 8 8"></path></svg>');function mi(r,e){const t=ve(e,["$$slots","$$events","$$legacy"]);var s=vi();ie(s,()=>({class:"icon",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em",...t})),u(r,s)}var bi=Te('<svg><path fill="currentColor" d="M224 128a8 8 0 0 1-8 8h-80v80a8 8 0 0 1-16 0v-80H40a8 8 0 0 1 0-16h80V40a8 8 0 0 1 16 0v80h80a8 8 0 0 1 8 8"></path></svg>');function ki(r,e){const t=ve(e,["$$slots","$$events","$$legacy"]);var s=bi();ie(s,()=>({class:"icon",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em",...t})),u(r,s)}var xi=P("<svelte-virtual-list-row><!></svelte-virtual-list-row>",2),_i=P("<svelte-virtual-list-viewport><svelte-virtual-list-contents></svelte-virtual-list-contents></svelte-virtual-list-viewport>",2);function wi(r,e){ke(e,!1);let t=F(e,"items",8),s=F(e,"height",8,"100%"),n=F(e,"itemHeight",8,void 0),a=F(e,"start",12,0),i=F(e,"end",12,0),l=[],c,h=Me(),v=Me(),y=Me(0),I=Me(),D=Me(),_=Me(0),z=Me(0),M;async function m(d,R,k){const{scrollTop:O}=o(h);await yt();let A=o(_)-O,g=a();for(;A<R&&g<d.length;){let x=c[g-a()];x||(i(g+1),await yt(),x=c[g-a()]);const N=l[g]=k||x.offsetHeight;A+=N,g+=1}i(g);const b=d.length-i();M=(o(_)+A)/i(),q(z,b*M),l.length=d.length}async function T(){const{scrollTop:d}=o(h),R=a();for(let g=0;g<c.length;g+=1)l[a()+g]=n()||c[g].offsetHeight;let k=0,O=0;for(;k<t().length;){const g=l[k]||M;if(O+g>d){a(k),q(_,O);break}O+=g,k+=1}for(;k<t().length&&(O+=l[k]||M,k+=1,!(O>d+o(y))););i(k);const A=t().length-i();for(M=O/i();k<t().length;)l[k++]=M;if(q(z,A*M),a()<R){await yt();let g=0,b=0;for(let N=a();N<R;N+=1)c[N-a()]&&(g+=l[N],b+=n()||c[N-a()].offsetHeight);const x=b-g;o(h).scrollTo(0,d+x)}}Ss(()=>{c=o(v).getElementsByTagName("svelte-virtual-list-row"),q(D,!0)}),Xt(()=>(Qe(t()),Qe(a()),Qe(i())),()=>{q(I,t().slice(a(),i()).map((d,R)=>({index:R+a(),data:d})))}),Xt(()=>(o(D),Qe(t()),o(y),Qe(n())),()=>{o(D)&&m(t(),o(y),n())}),on(),Rs();var p=_i();je(p,1,"svelte-m5no5e");var f=C(p);je(f,1,"svelte-m5no5e"),Ze(f,5,()=>o(I),d=>d.index,(d,R)=>{var k=xi();je(k,1,"svelte-m5no5e");var O=C(k);Ms(O,e,"default",{get item(){return o(R),ln(()=>o(R).data)}},A=>{var g=st("Missing template");u(A,g)}),S(k),u(d,k)}),S(f),or(f,d=>q(v,d),()=>o(v)),S(p),or(p,d=>q(h,d),()=>o(h)),J(()=>{Jt(p,`height: ${s()??""};`),Jt(f,`padding-top: ${o(_)??""}px; padding-bottom: ${o(z)??""}px;`)}),Is(p,"offsetHeight",d=>q(y,d)),et("scroll",p,T),u(r,p),xe()}function Et(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Ee=Et();function Er(r){Ee=r}var rt={exec:()=>null};function W(r,e=""){let t=typeof r=="string"?r:r.source,s={replace:(n,a)=>{let i=typeof a=="string"?a:a.source;return i=i.replace(ge.caret,"$1"),t=t.replace(n,i),s},getRegex:()=>new RegExp(t,e)};return s}var ge={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:r=>new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}#`),htmlBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}<(?:[a-z].*>|!--)`,"i")},yi=/^(?:[ \t]*(?:\n|$))+/,Si=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Ii=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,at=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ri=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Lt=/(?:[*+-]|\d{1,9}[.)])/,Lr=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,qr=W(Lr).replace(/bull/g,Lt).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Ai=W(Lr).replace(/bull/g,Lt).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),qt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Pi=/^[^\n]+/,Bt=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Ci=W(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Bt).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ti=W(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Lt).getRegex(),bt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Dt=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ni=W("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Dt).replace("tag",bt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Br=W(qt).replace("hr",at).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bt).getRegex(),Oi=W(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Br).getRegex(),Vt={blockquote:Oi,code:Si,def:Ci,fences:Ii,heading:Ri,hr:at,html:Ni,lheading:qr,list:Ti,newline:yi,paragraph:Br,table:rt,text:Pi},ur=W("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",at).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bt).getRegex(),Mi={...Vt,lheading:Ai,table:ur,paragraph:W(qt).replace("hr",at).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ur).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bt).getRegex()},zi={...Vt,html:W(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Dt).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:rt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:W(qt).replace("hr",at).replace("heading",` *#{1,6} *[^
]`).replace("lheading",qr).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Hi=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ei=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Dr=/^( {2,}|\\)\n(?!\s*$)/,Li=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,kt=/[\p{P}\p{S}]/u,Ft=/[\s\p{P}\p{S}]/u,Vr=/[^\s\p{P}\p{S}]/u,qi=W(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Ft).getRegex(),Fr=/(?!~)[\p{P}\p{S}]/u,Bi=/(?!~)[\s\p{P}\p{S}]/u,Di=/(?:[^\s\p{P}\p{S}]|~)/u,Vi=/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,jr=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Fi=W(jr,"u").replace(/punct/g,kt).getRegex(),ji=W(jr,"u").replace(/punct/g,Fr).getRegex(),$r="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",$i=W($r,"gu").replace(/notPunctSpace/g,Vr).replace(/punctSpace/g,Ft).replace(/punct/g,kt).getRegex(),Zi=W($r,"gu").replace(/notPunctSpace/g,Di).replace(/punctSpace/g,Bi).replace(/punct/g,Fr).getRegex(),Ki=W("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Vr).replace(/punctSpace/g,Ft).replace(/punct/g,kt).getRegex(),Ui=W(/\\(punct)/,"gu").replace(/punct/g,kt).getRegex(),Wi=W(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Gi=W(Dt).replace("(?:-->|$)","-->").getRegex(),Qi=W("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Gi).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ft=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,Xi=W(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ft).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Zr=W(/^!?\[(label)\]\[(ref)\]/).replace("label",ft).replace("ref",Bt).getRegex(),Kr=W(/^!?\[(ref)\](?:\[\])?/).replace("ref",Bt).getRegex(),Ji=W("reflink|nolink(?!\\()","g").replace("reflink",Zr).replace("nolink",Kr).getRegex(),jt={_backpedal:rt,anyPunctuation:Ui,autolink:Wi,blockSkip:Vi,br:Dr,code:Ei,del:rt,emStrongLDelim:Fi,emStrongRDelimAst:$i,emStrongRDelimUnd:Ki,escape:Hi,link:Xi,nolink:Kr,punctuation:qi,reflink:Zr,reflinkSearch:Ji,tag:Qi,text:Li,url:rt},Yi={...jt,link:W(/^!?\[(label)\]\((.*?)\)/).replace("label",ft).getRegex(),reflink:W(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ft).getRegex()},Ct={...jt,emStrongRDelimAst:Zi,emStrongLDelim:ji,url:W(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ea={...Ct,br:W(Dr).replace("{2,}","*").getRegex(),text:W(Ct.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},dt={normal:Vt,gfm:Mi,pedantic:zi},Xe={normal:jt,gfm:Ct,breaks:ea,pedantic:Yi},ta={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hr=r=>ta[r];function we(r,e){if(e){if(ge.escapeTest.test(r))return r.replace(ge.escapeReplace,hr)}else if(ge.escapeTestNoEncode.test(r))return r.replace(ge.escapeReplaceNoEncode,hr);return r}function dr(r){try{r=encodeURI(r).replace(ge.percentDecode,"%")}catch{return null}return r}function pr(r,e){let t=r.replace(ge.findPipe,(a,i,l)=>{let c=!1,h=i;for(;--h>=0&&l[h]==="\\";)c=!c;return c?"|":" |"}),s=t.split(ge.splitPipe),n=0;if(s[0].trim()||s.shift(),s.length>0&&!s.at(-1)?.trim()&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;n<s.length;n++)s[n]=s[n].trim().replace(ge.slashPipe,"|");return s}function Je(r,e,t){let s=r.length;if(s===0)return"";let n=0;for(;n<s&&r.charAt(s-n-1)===e;)n++;return r.slice(0,s-n)}function ra(r,e){if(r.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<r.length;s++)if(r[s]==="\\")s++;else if(r[s]===e[0])t++;else if(r[s]===e[1]&&(t--,t<0))return s;return t>0?-2:-1}function gr(r,e,t,s,n){let a=e.href,i=e.title||null,l=r[1].replace(n.other.outputLinkReplace,"$1");s.state.inLink=!0;let c={type:r[0].charAt(0)==="!"?"image":"link",raw:t,href:a,title:i,text:l,tokens:s.inlineTokens(l)};return s.state.inLink=!1,c}function na(r,e,t){let s=r.match(t.other.indentCodeCompensation);if(s===null)return e;let n=s[1];return e.split(`
`).map(a=>{let i=a.match(t.other.beginningSpace);if(i===null)return a;let[l]=i;return l.length>=n.length?a.slice(n.length):a}).join(`
`)}var vt=class{options;rules;lexer;constructor(r){this.options=r||Ee}space(r){let e=this.rules.block.newline.exec(r);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(r){let e=this.rules.block.code.exec(r);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Je(t,`
`)}}}fences(r){let e=this.rules.block.fences.exec(r);if(e){let t=e[0],s=na(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:s}}}heading(r){let e=this.rules.block.heading.exec(r);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let s=Je(t,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(t=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(r){let e=this.rules.block.hr.exec(r);if(e)return{type:"hr",raw:Je(e[0],`
`)}}blockquote(r){let e=this.rules.block.blockquote.exec(r);if(e){let t=Je(e[0],`
`).split(`
`),s="",n="",a=[];for(;t.length>0;){let i=!1,l=[],c;for(c=0;c<t.length;c++)if(this.rules.other.blockquoteStart.test(t[c]))l.push(t[c]),i=!0;else if(!i)l.push(t[c]);else break;t=t.slice(c);let h=l.join(`
`),v=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${h}`:h,n=n?`${n}
${v}`:v;let y=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(v,a,!0),this.lexer.state.top=y,t.length===0)break;let I=a.at(-1);if(I?.type==="code")break;if(I?.type==="blockquote"){let D=I,_=D.raw+`
`+t.join(`
`),z=this.blockquote(_);a[a.length-1]=z,s=s.substring(0,s.length-D.raw.length)+z.raw,n=n.substring(0,n.length-D.text.length)+z.text;break}else if(I?.type==="list"){let D=I,_=D.raw+`
`+t.join(`
`),z=this.list(_);a[a.length-1]=z,s=s.substring(0,s.length-I.raw.length)+z.raw,n=n.substring(0,n.length-D.raw.length)+z.raw,t=_.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:a,text:n}}}list(r){let e=this.rules.block.list.exec(r);if(e){let t=e[1].trim(),s=t.length>1,n={type:"list",raw:"",ordered:s,start:s?+t.slice(0,-1):"",loose:!1,items:[]};t=s?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=s?t:"[*+-]");let a=this.rules.other.listItemRegex(t),i=!1;for(;r;){let c=!1,h="",v="";if(!(e=a.exec(r))||this.rules.block.hr.test(r))break;h=e[0],r=r.substring(h.length);let y=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,m=>" ".repeat(3*m.length)),I=r.split(`
`,1)[0],D=!y.trim(),_=0;if(this.options.pedantic?(_=2,v=y.trimStart()):D?_=e[1].length+1:(_=e[2].search(this.rules.other.nonSpaceChar),_=_>4?1:_,v=y.slice(_),_+=e[1].length),D&&this.rules.other.blankLine.test(I)&&(h+=I+`
`,r=r.substring(I.length+1),c=!0),!c){let m=this.rules.other.nextBulletRegex(_),T=this.rules.other.hrRegex(_),p=this.rules.other.fencesBeginRegex(_),f=this.rules.other.headingBeginRegex(_),d=this.rules.other.htmlBeginRegex(_);for(;r;){let R=r.split(`
`,1)[0],k;if(I=R,this.options.pedantic?(I=I.replace(this.rules.other.listReplaceNesting,"  "),k=I):k=I.replace(this.rules.other.tabCharGlobal,"    "),p.test(I)||f.test(I)||d.test(I)||m.test(I)||T.test(I))break;if(k.search(this.rules.other.nonSpaceChar)>=_||!I.trim())v+=`
`+k.slice(_);else{if(D||y.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||p.test(y)||f.test(y)||T.test(y))break;v+=`
`+I}!D&&!I.trim()&&(D=!0),h+=R+`
`,r=r.substring(R.length+1),y=k.slice(_)}}n.loose||(i?n.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(i=!0));let z=null,M;this.options.gfm&&(z=this.rules.other.listIsTask.exec(v),z&&(M=z[0]!=="[ ] ",v=v.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:h,task:!!z,checked:M,loose:!1,text:v,tokens:[]}),n.raw+=h}let l=n.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let c=0;c<n.items.length;c++)if(this.lexer.state.top=!1,n.items[c].tokens=this.lexer.blockTokens(n.items[c].text,[]),!n.loose){let h=n.items[c].tokens.filter(y=>y.type==="space"),v=h.length>0&&h.some(y=>this.rules.other.anyLine.test(y.raw));n.loose=v}if(n.loose)for(let c=0;c<n.items.length;c++)n.items[c].loose=!0;return n}}html(r){let e=this.rules.block.html.exec(r);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(r){let e=this.rules.block.def.exec(r);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:s,title:n}}}table(r){let e=this.rules.block.table.exec(r);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=pr(e[1]),s=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===s.length){for(let i of s)this.rules.other.tableAlignRight.test(i)?a.align.push("right"):this.rules.other.tableAlignCenter.test(i)?a.align.push("center"):this.rules.other.tableAlignLeft.test(i)?a.align.push("left"):a.align.push(null);for(let i=0;i<t.length;i++)a.header.push({text:t[i],tokens:this.lexer.inline(t[i]),header:!0,align:a.align[i]});for(let i of n)a.rows.push(pr(i,a.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:a.align[c]})));return a}}lheading(r){let e=this.rules.block.lheading.exec(r);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(r){let e=this.rules.block.paragraph.exec(r);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(r){let e=this.rules.block.text.exec(r);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(r){let e=this.rules.inline.escape.exec(r);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(r){let e=this.rules.inline.tag.exec(r);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(r){let e=this.rules.inline.link.exec(r);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let a=Je(t.slice(0,-1),"\\");if((t.length-a.length)%2===0)return}else{let a=ra(e[2],"()");if(a===-2)return;if(a>-1){let i=(e[0].indexOf("!")===0?5:4)+e[1].length+a;e[2]=e[2].substring(0,a),e[0]=e[0].substring(0,i).trim(),e[3]=""}}let s=e[2],n="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(s);a&&(s=a[1],n=a[3])}else n=e[3]?e[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?s=s.slice(1):s=s.slice(1,-1)),gr(e,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(r,e){let t;if((t=this.rules.inline.reflink.exec(r))||(t=this.rules.inline.nolink.exec(r))){let s=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=e[s.toLowerCase()];if(!n){let a=t[0].charAt(0);return{type:"text",raw:a,text:a}}return gr(t,n,t[0],this.lexer,this.rules)}}emStrong(r,e,t=""){let s=this.rules.inline.emStrongLDelim.exec(r);if(!(!s||s[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!t||this.rules.inline.punctuation.exec(t))){let n=[...s[0]].length-1,a,i,l=n,c=0,h=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,e=e.slice(-1*r.length+n);(s=h.exec(e))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(i=[...a].length,s[3]||s[4]){l+=i;continue}else if((s[5]||s[6])&&n%3&&!((n+i)%3)){c+=i;continue}if(l-=i,l>0)continue;i=Math.min(i,i+l+c);let v=[...s[0]][0].length,y=r.slice(0,n+s.index+v+i);if(Math.min(n,i)%2){let D=y.slice(1,-1);return{type:"em",raw:y,text:D,tokens:this.lexer.inlineTokens(D)}}let I=y.slice(2,-2);return{type:"strong",raw:y,text:I,tokens:this.lexer.inlineTokens(I)}}}}codespan(r){let e=this.rules.inline.code.exec(r);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(t),n=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return s&&n&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(r){let e=this.rules.inline.br.exec(r);if(e)return{type:"br",raw:e[0]}}del(r){let e=this.rules.inline.del.exec(r);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(r){let e=this.rules.inline.autolink.exec(r);if(e){let t,s;return e[2]==="@"?(t=e[1],s="mailto:"+t):(t=e[1],s=t),{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}url(r){let e;if(e=this.rules.inline.url.exec(r)){let t,s;if(e[2]==="@")t=e[0],s="mailto:"+t;else{let n;do n=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(n!==e[0]);t=e[0],e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(r){let e=this.rules.inline.text.exec(r);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},Ie=class Tt{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ee,this.options.tokenizer=this.options.tokenizer||new vt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:ge,block:dt.normal,inline:Xe.normal};this.options.pedantic?(t.block=dt.pedantic,t.inline=Xe.pedantic):this.options.gfm&&(t.block=dt.gfm,this.options.breaks?t.inline=Xe.breaks:t.inline=Xe.gfm),this.tokenizer.rules=t}static get rules(){return{block:dt,inline:Xe}}static lex(e,t){return new Tt(t).lex(e)}static lexInline(e,t){return new Tt(t).inlineTokens(e)}lex(e){e=e.replace(ge.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],s=!1){for(this.options.pedantic&&(e=e.replace(ge.tabCharGlobal,"    ").replace(ge.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some(i=>(n=i.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);let i=t.at(-1);n.raw.length===1&&i!==void 0?i.raw+=`
`:t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);let i=t.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+n.raw,i.text+=`
`+n.text,this.inlineQueue.at(-1).src=i.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);let i=t.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+n.raw,i.text+=`
`+n.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title},t.push(n));continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}let a=e;if(this.options.extensions?.startBlock){let i=1/0,l=e.slice(1),c;this.options.extensions.startBlock.forEach(h=>{c=h.call({lexer:this},l),typeof c=="number"&&c>=0&&(i=Math.min(i,c))}),i<1/0&&i>=0&&(a=e.substring(0,i+1))}if(this.state.top&&(n=this.tokenizer.paragraph(a))){let i=t.at(-1);s&&i?.type==="paragraph"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):t.push(n),s=a.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);let i=t.at(-1);i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):t.push(n);continue}if(e){let i="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let s=e,n=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)l.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,n.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(n=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=this.options.hooks?.emStrongMask?.call({lexer:this},s)??s;let a=!1,i="";for(;e;){a||(i=""),a=!1;let l;if(this.options.extensions?.inline?.some(h=>(l=h.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);let h=t.at(-1);l.type==="text"&&h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):t.push(l);continue}if(l=this.tokenizer.emStrong(e,s,i)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),t.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),t.push(l);continue}let c=e;if(this.options.extensions?.startInline){let h=1/0,v=e.slice(1),y;this.options.extensions.startInline.forEach(I=>{y=I.call({lexer:this},v),typeof y=="number"&&y>=0&&(h=Math.min(h,y))}),h<1/0&&h>=0&&(c=e.substring(0,h+1))}if(l=this.tokenizer.inlineText(c)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(i=l.raw.slice(-1)),a=!0;let h=t.at(-1);h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):t.push(l);continue}if(e){let h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return t}},mt=class{options;parser;constructor(r){this.options=r||Ee}space(r){return""}code({text:r,lang:e,escaped:t}){let s=(e||"").match(ge.notSpaceStart)?.[0],n=r.replace(ge.endingNewline,"")+`
`;return s?'<pre><code class="language-'+we(s)+'">'+(t?n:we(n,!0))+`</code></pre>
`:"<pre><code>"+(t?n:we(n,!0))+`</code></pre>
`}blockquote({tokens:r}){return`<blockquote>
${this.parser.parse(r)}</blockquote>
`}html({text:r}){return r}def(r){return""}heading({tokens:r,depth:e}){return`<h${e}>${this.parser.parseInline(r)}</h${e}>
`}hr(r){return`<hr>
`}list(r){let e=r.ordered,t=r.start,s="";for(let i=0;i<r.items.length;i++){let l=r.items[i];s+=this.listitem(l)}let n=e?"ol":"ul",a=e&&t!==1?' start="'+t+'"':"";return"<"+n+a+`>
`+s+"</"+n+`>
`}listitem(r){let e="";if(r.task){let t=this.checkbox({checked:!!r.checked});r.loose?r.tokens[0]?.type==="paragraph"?(r.tokens[0].text=t+" "+r.tokens[0].text,r.tokens[0].tokens&&r.tokens[0].tokens.length>0&&r.tokens[0].tokens[0].type==="text"&&(r.tokens[0].tokens[0].text=t+" "+we(r.tokens[0].tokens[0].text),r.tokens[0].tokens[0].escaped=!0)):r.tokens.unshift({type:"text",raw:t+" ",text:t+" ",escaped:!0}):e+=t+" "}return e+=this.parser.parse(r.tokens,!!r.loose),`<li>${e}</li>
`}checkbox({checked:r}){return"<input "+(r?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:r}){return`<p>${this.parser.parseInline(r)}</p>
`}table(r){let e="",t="";for(let n=0;n<r.header.length;n++)t+=this.tablecell(r.header[n]);e+=this.tablerow({text:t});let s="";for(let n=0;n<r.rows.length;n++){let a=r.rows[n];t="";for(let i=0;i<a.length;i++)t+=this.tablecell(a[i]);s+=this.tablerow({text:t})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+s+`</table>
`}tablerow({text:r}){return`<tr>
${r}</tr>
`}tablecell(r){let e=this.parser.parseInline(r.tokens),t=r.header?"th":"td";return(r.align?`<${t} align="${r.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:r}){return`<strong>${this.parser.parseInline(r)}</strong>`}em({tokens:r}){return`<em>${this.parser.parseInline(r)}</em>`}codespan({text:r}){return`<code>${we(r,!0)}</code>`}br(r){return"<br>"}del({tokens:r}){return`<del>${this.parser.parseInline(r)}</del>`}link({href:r,title:e,tokens:t}){let s=this.parser.parseInline(t),n=dr(r);if(n===null)return s;r=n;let a='<a href="'+r+'"';return e&&(a+=' title="'+we(e)+'"'),a+=">"+s+"</a>",a}image({href:r,title:e,text:t,tokens:s}){s&&(t=this.parser.parseInline(s,this.parser.textRenderer));let n=dr(r);if(n===null)return we(t);r=n;let a=`<img src="${r}" alt="${t}"`;return e&&(a+=` title="${we(e)}"`),a+=">",a}text(r){return"tokens"in r&&r.tokens?this.parser.parseInline(r.tokens):"escaped"in r&&r.escaped?r.text:we(r.text)}},$t=class{strong({text:r}){return r}em({text:r}){return r}codespan({text:r}){return r}del({text:r}){return r}html({text:r}){return r}text({text:r}){return r}link({text:r}){return""+r}image({text:r}){return""+r}br(){return""}},Re=class Nt{options;renderer;textRenderer;constructor(e){this.options=e||Ee,this.options.renderer=this.options.renderer||new mt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new $t}static parse(e,t){return new Nt(t).parse(e)}static parseInline(e,t){return new Nt(t).parseInline(e)}parse(e,t=!0){let s="";for(let n=0;n<e.length;n++){let a=e[n];if(this.options.extensions?.renderers?.[a.type]){let l=a,c=this.options.extensions.renderers[l.type].call({parser:this},l);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){s+=c||"";continue}}let i=a;switch(i.type){case"space":{s+=this.renderer.space(i);continue}case"hr":{s+=this.renderer.hr(i);continue}case"heading":{s+=this.renderer.heading(i);continue}case"code":{s+=this.renderer.code(i);continue}case"table":{s+=this.renderer.table(i);continue}case"blockquote":{s+=this.renderer.blockquote(i);continue}case"list":{s+=this.renderer.list(i);continue}case"html":{s+=this.renderer.html(i);continue}case"def":{s+=this.renderer.def(i);continue}case"paragraph":{s+=this.renderer.paragraph(i);continue}case"text":{let l=i,c=this.renderer.text(l);for(;n+1<e.length&&e[n+1].type==="text";)l=e[++n],c+=`
`+this.renderer.text(l);t?s+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):s+=c;continue}default:{let l='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}parseInline(e,t=this.renderer){let s="";for(let n=0;n<e.length;n++){let a=e[n];if(this.options.extensions?.renderers?.[a.type]){let l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){s+=l||"";continue}}let i=a;switch(i.type){case"escape":{s+=t.text(i);break}case"html":{s+=t.html(i);break}case"link":{s+=t.link(i);break}case"image":{s+=t.image(i);break}case"strong":{s+=t.strong(i);break}case"em":{s+=t.em(i);break}case"codespan":{s+=t.codespan(i);break}case"br":{s+=t.br(i);break}case"del":{s+=t.del(i);break}case"text":{s+=t.text(i);break}default:{let l='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return s}},tt=class{options;block;constructor(r){this.options=r||Ee}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(r){return r}postprocess(r){return r}processAllTokens(r){return r}emStrongMask(r){return r}provideLexer(){return this.block?Ie.lex:Ie.lexInline}provideParser(){return this.block?Re.parse:Re.parseInline}},sa=class{defaults=Et();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Re;Renderer=mt;TextRenderer=$t;Lexer=Ie;Tokenizer=vt;Hooks=tt;constructor(...r){this.use(...r)}walkTokens(r,e){let t=[];for(let s of r)switch(t=t.concat(e.call(this,s)),s.type){case"table":{let n=s;for(let a of n.header)t=t.concat(this.walkTokens(a.tokens,e));for(let a of n.rows)for(let i of a)t=t.concat(this.walkTokens(i.tokens,e));break}case"list":{let n=s;t=t.concat(this.walkTokens(n.items,e));break}default:{let n=s;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(a=>{let i=n[a].flat(1/0);t=t.concat(this.walkTokens(i,e))}):n.tokens&&(t=t.concat(this.walkTokens(n.tokens,e)))}}return t}use(...r){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return r.forEach(t=>{let s={...t};if(s.async=this.defaults.async||s.async||!1,t.extensions&&(t.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let a=e.renderers[n.name];a?e.renderers[n.name]=function(...i){let l=n.renderer.apply(this,i);return l===!1&&(l=a.apply(this,i)),l}:e.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=e[n.level];a?a.unshift(n.tokenizer):e[n.level]=[n.tokenizer],n.start&&(n.level==="block"?e.startBlock?e.startBlock.push(n.start):e.startBlock=[n.start]:n.level==="inline"&&(e.startInline?e.startInline.push(n.start):e.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(e.childTokens[n.name]=n.childTokens)}),s.extensions=e),t.renderer){let n=this.defaults.renderer||new mt(this.defaults);for(let a in t.renderer){if(!(a in n))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let i=a,l=t.renderer[i],c=n[i];n[i]=(...h)=>{let v=l.apply(n,h);return v===!1&&(v=c.apply(n,h)),v||""}}s.renderer=n}if(t.tokenizer){let n=this.defaults.tokenizer||new vt(this.defaults);for(let a in t.tokenizer){if(!(a in n))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let i=a,l=t.tokenizer[i],c=n[i];n[i]=(...h)=>{let v=l.apply(n,h);return v===!1&&(v=c.apply(n,h)),v}}s.tokenizer=n}if(t.hooks){let n=this.defaults.hooks||new tt;for(let a in t.hooks){if(!(a in n))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let i=a,l=t.hooks[i],c=n[i];tt.passThroughHooks.has(a)?n[i]=h=>{if(this.defaults.async&&tt.passThroughHooksRespectAsync.has(a))return Promise.resolve(l.call(n,h)).then(y=>c.call(n,y));let v=l.call(n,h);return c.call(n,v)}:n[i]=(...h)=>{let v=l.apply(n,h);return v===!1&&(v=c.apply(n,h)),v}}s.hooks=n}if(t.walkTokens){let n=this.defaults.walkTokens,a=t.walkTokens;s.walkTokens=function(i){let l=[];return l.push(a.call(this,i)),n&&(l=l.concat(n.call(this,i))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(r){return this.defaults={...this.defaults,...r},this}lexer(r,e){return Ie.lex(r,e??this.defaults)}parser(r,e){return Re.parse(r,e??this.defaults)}parseMarkdown(r){return(e,t)=>{let s={...t},n={...this.defaults,...s},a=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&s.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));n.hooks&&(n.hooks.options=n,n.hooks.block=r);let i=n.hooks?n.hooks.provideLexer():r?Ie.lex:Ie.lexInline,l=n.hooks?n.hooks.provideParser():r?Re.parse:Re.parseInline;if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(e):e).then(c=>i(c,n)).then(c=>n.hooks?n.hooks.processAllTokens(c):c).then(c=>n.walkTokens?Promise.all(this.walkTokens(c,n.walkTokens)).then(()=>c):c).then(c=>l(c,n)).then(c=>n.hooks?n.hooks.postprocess(c):c).catch(a);try{n.hooks&&(e=n.hooks.preprocess(e));let c=i(e,n);n.hooks&&(c=n.hooks.processAllTokens(c)),n.walkTokens&&this.walkTokens(c,n.walkTokens);let h=l(c,n);return n.hooks&&(h=n.hooks.postprocess(h)),h}catch(c){return a(c)}}}onError(r,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,r){let s="<p>An error occurred:</p><pre>"+we(t.message+"",!0)+"</pre>";return e?Promise.resolve(s):s}if(e)return Promise.reject(t);throw t}}},He=new sa;function G(r,e){return He.parse(r,e)}G.options=G.setOptions=function(r){return He.setOptions(r),G.defaults=He.defaults,Er(G.defaults),G};G.getDefaults=Et;G.defaults=Ee;G.use=function(...r){return He.use(...r),G.defaults=He.defaults,Er(G.defaults),G};G.walkTokens=function(r,e){return He.walkTokens(r,e)};G.parseInline=He.parseInline;G.Parser=Re;G.parser=Re.parse;G.Renderer=mt;G.TextRenderer=$t;G.Lexer=Ie;G.lexer=Ie.lex;G.Tokenizer=vt;G.Hooks=tt;G.parse=G;G.options;G.setOptions;G.use;G.walkTokens;G.parseInline;Re.parse;Ie.lex;var ia=P("<input/>"),aa=P('<div><div class="check svelte-15tu99"><!></div> <span class="label"> </span> <div class="confidence svelte-15tu99"><!></div></div>'),oa=P('<span class="no-results svelte-15tu99">Aucun résultat :/</span>'),la=P('<img alt="" class="thumb svelte-15tu99"/>'),ca=P("<h2> </h2>"),ua=P('<p class="error svelte-15tu99"> </p>'),ha=P("<!> ",1),da=P('<section class="description svelte-15tu99"><!></section>'),pa=P('<a target="_blank" class="learn-more svelte-15tu99"><!> <div class="text svelte-15tu99"><span>En savoir plus</span> <code class="domain svelte-15tu99"> </code></div></a>'),ga=P("<tr><td><!> </td><td> </td></tr>"),fa=P("<p><em>Métadonées mise à jour à la sélection de cette option</em></p>"),va=P("<table><tbody></tbody></table> <!>",1),ma=P('<p class="error"> </p>'),ba=P('<section class="empty svelte-15tu99"><!></section>'),ka=P('<div class="viewport svelte-15tu99" data-testid="metadata-combobox-viewport"><div class="items svelte-15tu99"><!> <!></div> <div class="docs svelte-15tu99"><!> <!> <!> <!> <!></div></div>'),xa=P("<!> <!>",1);function _a(r,e){ke(e,!0);let t=F(e,"confidences",19,()=>({})),s=F(e,"open",15,!1),n=ve(e,["$$slots","$$events","$$legacy","options","confidences","value","open","inputProps","contentProps"]),a=pe("");const i=w(()=>e.options.some(p=>p.image)),l=w(()=>e.options.find(p=>p.key===e.value)?.label??""),c=w(()=>e.options.map(p=>({value:p.key,label:p.label}))),h=w(()=>o(a)===""?[...o(c).filter(({value:p})=>p in t()).toSorted((p,f)=>t()[f.value]-t()[p.value]),...o(c).filter(({value:p})=>!(p in t()))]:o(c).filter(p=>p.label.toLowerCase().includes(o(a).toLowerCase())));function v(p){q(a,p.currentTarget.value,!0)}function y(p){p||q(a,"")}const I=w(()=>Ce(n,{onOpenChange:y})),D=w(()=>Ce(e.inputProps,{oninput:v,onfocus:()=>s(!0),defaultValue:o(l)}));let _=pe(void 0),z=pe(vr({}));Mt(()=>{Object.keys(o(z)).length>4e3&&(console.debug("Halving cascadeLabels cache"),q(z,Object.fromEntries(Object.entries(o(z)).slice(2e3)),!0))});async function M(){const p=Z.currentProtocol?.id;if(!p)return{};if(!o(_))return{};if(o(_).key in o(z))return o(z)[o(_).key];async function f(d,R,k,O=0){const A={};for(const[g,b]of Object.entries(R??{})){if(k.has(g))continue;k.add(g);const x=await se.Metadata.get(er(d,g));if(x)if(x.type==="enum"){const N=await fn("MetadataOption",vn(er(d,x.id),b));if(!N)continue;A[x.id]={value:N.label,metadata:x.label,depth:O},Object.keys(N.cascade??{}).length>0&&await f(d,N.cascade??{},k,O+1).then(H=>{Object.assign(A,H)})}else A[x.id]={value:b,metadata:x.label,depth:O}}return A}return o(z)[o(_).key]=await f(p,o(_).cascade??{},new Set),o(z)[o(_).key]}var m=K(),T=E(m);Ve(T,()=>ti,(p,f)=>{f(p,Fe({get value(){return e.value}},()=>o(I),{get items(){return o(c)},get open(){return s()},set open(d){s(d)},children:(d,R)=>{var k=xa(),O=E(k);{const g=(b,x)=>{let N=()=>x?.().props.value,H=()=>un(x?.().props,["value"]);var $=ia();ie($,()=>({...H(),value:s()?N():N()||o(l)}),void 0,void 0,"svelte-15tu99",!0),u(b,$)};Ve(O,()=>ni,(b,x)=>{x(b,Fe(()=>o(D),{child:g,$$slots:{child:!0}}))})}var A=V(O,2);Ve(A,()=>ks,(g,b)=>{b(g,{children:(x,N)=>{var H=K(),$=E(H);{let L=w(()=>o(i)?!0:void 0);Ve($,()=>ai,(j,U)=>{U(j,Fe(()=>e.contentProps,{sideOffset:8,get"data-wide-docs"(){return o(L)},children:(re,te)=>{var ae=ka(),Y=C(ae),he=C(Y);wi(he,{get items(){return o(h)},children:cn,$$slots:{default:(Q,X)=>{const ne=w(()=>X.item);var oe=K(),le=E(oe);{const ce=(me,Ne)=>{let de=()=>Ne?.().selected;var fe=aa();let Pe;var Oe=C(fe),Ue=C(Oe);Mr(Ue,{}),S(Oe);var We=V(Oe,2),xt=C(We,!0);S(We);var ot=V(We,2),lt=C(ot);Pt(lt,{get value(){return t()[o(ne).value]}}),S(ot),S(fe),J(Ge=>{Pe=je(fe,1,"item svelte-15tu99",null,Pe,Ge),ue(xt,o(ne).label)},[()=>({selected:de()})]),u(me,fe)};Ve(le,()=>ci,(me,Ne)=>{Ne(me,{get value(){return o(ne).value},get label(){return o(ne).label},onHighlight:()=>{q(_,e.options.find(de=>de.key===o(ne).value),!0)},children:ce,$$slots:{default:!0}})})}u(Q,oe)}}});var _e=V(he,2);{var Ke=Q=>{var X=oa();u(Q,X)};B(_e,Q=>{o(h).length===0&&Q(Ke)})}S(Y);var Ae=V(Y,2),Le=C(Ae);{var Ur=Q=>{var X=la();J(()=>be(X,"src",o(_).image)),u(Q,X)},Wr=Q=>{var X=K(),ne=E(X);{var oe=le=>{var ce=ca(),me=C(ce,!0);S(ce),J(()=>ue(me,o(_).label)),u(le,ce)};B(ne,le=>{(o(_)?.description||o(_)?.learnMore)&&le(oe)},!0)}u(Q,X)};B(Le,Q=>{o(_)?.image?Q(Ur):Q(Wr,!1)})}var Zt=V(Le,2);{var Gr=Q=>{var X=da(),ne=C(X);ir(ne,()=>G(o(_).description),null,(oe,le)=>{var ce=K(),me=E(ce);ar(me,()=>o(le)),u(oe,ce)},(oe,le)=>{var ce=ha(),me=E(ce);{var Ne=fe=>{var Pe=ua(),Oe=C(Pe);S(Pe),J(()=>ue(Oe,`Markdown invalide: ${o(le)??""}`)),u(fe,Pe)};B(me,fe=>{kr()&&fe(Ne)})}var de=V(me);J(()=>ue(de,` ${o(_).description??""}`)),u(oe,ce)}),S(X),u(Q,X)};B(Zt,Q=>{o(_)?.description&&Q(Gr)})}var Kt=V(Zt,2);{var Qr=Q=>{var X=pa(),ne=C(X);As(ne,{});var oe=V(ne,2),le=V(C(oe),2),ce=C(le,!0);S(le),S(oe),S(X),J(()=>{be(X,"href",o(_).learnMore),ue(ce,new URL(o(_).learnMore).hostname)}),u(Q,X)};B(Kt,Q=>{o(_)?.learnMore&&Q(Qr)})}var Ut=V(Kt,2);ir(Ut,M,null,(Q,X)=>{const ne=w(()=>Math.max(...Object.values(o(X)).map(de=>de.depth)));var oe=va(),le=E(oe),ce=C(le);Ze(ce,21,()=>Object.entries(o(X)).toReversed(),([de,{value:fe,metadata:Pe,depth:Oe}])=>de,(de,fe,Pe,Oe)=>{var Ue=w(()=>mr(o(fe),2));let We=()=>o(Ue)[1].value,xt=()=>o(Ue)[1].metadata,ot=()=>o(Ue)[1].depth;const lt=w(()=>o(ne)-ot());var Ge=ga(),_t=C(Ge),Wt=C(_t);{var Yr=wt=>{var Qt=K(),rn=E(Qt);ar(rn,()=>"&nbsp;".repeat((o(lt)-1)*3)+"└─"),u(wt,Qt)};B(Wt,wt=>{o(lt)>0&&wt(Yr)})}var en=V(Wt);S(_t);var Gt=V(_t),tn=C(Gt,!0);S(Gt),S(Ge),J(()=>{ue(en,` ${xt()??""}`),ue(tn,We())}),u(de,Ge)}),S(ce),S(le);var me=V(le,2);{var Ne=de=>{var fe=fa();u(de,fe)};B(me,de=>{Object.keys(o(X)).length>0&&de(Ne)})}u(Q,oe)},(Q,X)=>{var ne=ma(),oe=C(ne);S(ne),J(()=>ue(oe,`Erreur lors de la récupération des étiquettes en cascade: ${o(X)??""}`)),u(Q,ne)});var Xr=V(Ut,2);{var Jr=Q=>{var X=ba(),ne=C(X);At(ne,{variant:"empty"}),S(X),u(Q,X)};B(Xr,Q=>{!o(_)?.description&&!o(_)?.learnMore&&!o(_)?.image&&Q(Jr)})}S(Ae),S(ae),u(re,ae)},$$slots:{default:!0}}))})}u(x,H)},$$slots:{default:!0}})}),u(d,k)},$$slots:{default:!0}}))}),u(r,m),xe()}var wa=P('<div class="boolean-switch svelte-q62q36"><!> <!></div>'),ya=P('<input type="text" class="svelte-q62q36"/>'),Sa=(r,e,t)=>{(e()===void 0||e()===null)&&e(0),br(e,-1),e(zr(e(),5)),t.onblur?.(e())},Ia=(r,e,t)=>{(e()===void 0||e()===null)&&e(0),br(e),e(zr(e(),5)),t.onblur?.(e())},Ra=P('<input type="text" inputmode="numeric" class="svelte-q62q36"/> <button class="decrement" aria-label="Décrémenter"><!></button> <button class="increment" aria-label="Incrémenter"><!></button>',1),Aa=P('<input type="date" class="svelte-q62q36"/>'),Pa=P('<input type="text" class="svelte-q62q36"/>'),Ca=P('<div class="unrepresentable svelte-q62q36"><!> <p>Irreprésentable</p></div>'),Ta=P('<div class="metadata-input svelte-q62q36"><!></div>');function Na(r,e){ke(e,!0);let t=F(e,"value",15),s=F(e,"confidences",19,()=>({})),n=F(e,"options",19,()=>[]);const{type:a}=e.definition;var i=Ta(),l=C(i);{var c=v=>{{let y=w(()=>gt(t()?.toString())?.toString()??t());_a(v,{get id(){return e.id},get disabled(){return e.disabled},get options(){return n()},get confidences(){return s()},type:"single",get value(){return o(y)},onValueChange:I=>{if(I===void 0){e.onblur?.(void 0);return}e.onblur?.(I.toString())}})}},h=v=>{var y=K(),I=E(y);{var D=z=>{var M=wa(),m=C(M);Ps(m,{get value(){return t()},onchange:d=>{e.onblur?.(d)}});var T=V(m,2);{var p=d=>{var R=st("Oui");u(d,R)},f=d=>{var R=K(),k=E(R);{var O=A=>{var g=st("Non");u(A,g)};B(k,A=>{t()===!1&&A(O)},!0)}u(d,R)};B(T,d=>{t()?d(p):d(f,!1)})}S(M),u(z,M)},_=z=>{var M=K(),m=E(M);{var T=f=>{var d=ya();ct(d),J(()=>{be(d,"id",e.id),d.disabled=e.disabled}),et("blur",d,()=>e.onblur?.(t())),Rt(d,t),u(f,d)},p=f=>{var d=K(),R=E(d);{var k=A=>{var g=Ra(),b=E(g);ct(b);var x=V(b,2);x.__click=[Sa,t,e];var N=C(x);mi(N,{}),S(x);var H=V(x,2);H.__click=[Ia,t,e];var $=C(H);ki($,{}),S(H),J(L=>{be(b,"id",e.id),b.disabled=e.disabled,Yt(b,L)},[()=>t()?.toString()??""]),et("blur",b,({currentTarget:L})=>{if(!(L instanceof HTMLInputElement))return;const j=L.value;if(!j){e.onblur?.(void 0);return}let U=a==="integer"?Number.parseInt(j,10):Number.parseFloat(j);Number.isNaN(U)&&(U=void 0),e.onblur?.(U)}),u(A,g)},O=A=>{var g=K(),b=E(g);{var x=H=>{var $=Aa();ct($),J(()=>{be($,"id",e.id),$.disabled=e.disabled}),et("blur",$,()=>e.onblur?.(t())),Rt($,()=>{if(Se("date",a,t())&&t()!==void 0)return Sn(t(),"yyyy-MM-dd")},L=>{if(L===void 0){e.onblur?.(void 0);return}return e.onblur?.(mn(L,"yyyy-MM-dd",new Date)),L}),u(H,$)},N=H=>{var $=K(),L=E($);{var j=re=>{var te=Pa();ct(te),J(()=>{be(te,"id",e.id),te.disabled=e.disabled,Yt(te,t()?`${t().latitude}, ${t().longitude}`:"")}),et("blur",te,({currentTarget:ae})=>{let Y=ae.value;if(Y===void 0){e.onblur?.(void 0);return}if(!Y.includes(",")||Y.split(",").length>3)return;Y.split(",").length===3&&(Y=Y.replace(",",".").replace(";",","));const[he,_e]=Y.split(",").map(Ke=>parseFloat(Ke.trim()));e.onblur?.({latitude:he,longitude:_e})}),u(re,te)},U=re=>{var te=Ca(),ae=C(te);fi(ae,{}),qe(2),S(te),Be(te,(Y,he)=>De?.(Y,he),()=>JSON.stringify(t(),null,2)),u(re,te)};B(L,re=>{Se("location",a,t())?re(j):re(U,!1)},!0)}u(H,$)};B(b,H=>{Se("date",a,t())?H(x):H(N,!1)},!0)}u(A,g)};B(R,A=>{Se("integer",a,t())||Se("float",a,t())?A(k):A(O,!1)},!0)}u(f,d)};B(m,f=>{Se("string",a,t())?f(T):f(p,!1)},!0)}u(z,M)};B(I,z=>{Se("boolean",a,t())?z(D):z(_,!1)},!0)}u(v,y)};B(l,v=>{Se("enum",a,t())?v(c):v(h,!1)})}S(i),J(()=>{be(i,"data-type",a),be(i,"data-metadata-id",e.definition.id)}),u(r,i),xe()}Nr(["click"]);var Oa=P('<div class="technical-indicator"><!></div> <code> </code>',1),Ma=P('<div class="merged-indicator svelte-ev234i"><!></div>'),za=(r,e,t)=>{e()&&(e(void 0),t()(void 0))},Ha=(r,e,t,s,n)=>{e({value:JSON.parse(t()),confidence:s(),alternatives:e()?.alternatives??{}}),n()(e()?.value)},Ea=P('<li class="svelte-ev234i"><div class="value svelte-ev234i"> </div> <!> <button class="svelte-ev234i"><!></button></li>'),La=P('<section class="alternatives svelte-ev234i"><div class="title svelte-ev234i">Alternatives</div> <ul class="options svelte-ev234i"></ul></section>'),qa=P("<p> </p>"),Ba=P('<a target="_blank">En savoir plus</a>'),Da=P('<section class="learnmore"><!> <!></section>'),Va=P('<pre class="debug svelte-ev234i"> </pre>'),Fa=P('<div class="metadata svelte-ev234i"><section class="first-line svelte-ev234i"><label class="svelte-ev234i"><!></label> <div class="value svelte-ev234i"><!> <!> <!> <button class="clear svelte-ev234i"><!></button></div></section> <!> <!> <!></div>');function ja(r,e){const t=hn();ke(e,!0);let s=F(e,"value",7),n=F(e,"options",19,()=>[]),a=F(e,"onchange",3,()=>{});var i=Fa(),l=C(i),c=C(l),h=C(c);{var v=g=>{var b=st();J(()=>ue(b,e.definition.label)),u(g,b)},y=g=>{var b=Oa(),x=E(b),N=C(x);pi(N,{}),S(x),Be(x,(L,j)=>De?.(L,j),()=>"Métadonnée technique");var H=V(x,2),$=C(H,!0);S(H),J(()=>ue($,e.definition.id)),u(g,b)};B(h,g=>{e.definition.label?g(v):g(y,!1)})}S(c);var I=V(c,2),D=C(I);{let g=w(()=>s()?.value),b=w(()=>Object.fromEntries([...Object.entries(s()?.alternatives??{}).map(([x,N])=>[gt(x)?.toString(),N]),[gt(s()?.value)?.toString(),s()?.confidence]]));Na(D,{get id(){return t},get definition(){return e.definition},get options(){return n()},get value(){return o(g)},get onblur(){return a()},get merged(){return e.merged},get confidences(){return o(b)}})}var _=V(D,2);{var z=g=>{Pt(g,{get value(){return s().confidence}})};B(_,g=>{s()?.confidence&&g(z)})}var M=V(_,2);{var m=g=>{var b=Ma(),x=C(b);hi(x,{}),S(b),Be(b,(N,H)=>De?.(N,H),()=>"Valeur issue de la fusion de plusieurs valeurs différentes. Modifier cette valeur pour modifier toutes les valeurs de la sélection"),u(g,b)};B(M,g=>{e.merged&&g(m)})}var T=V(M,2);T.__click=[za,s,a];var p=C(T);ys(p,{}),S(T),Be(T,(g,b)=>De?.(g,b),()=>"Supprimer cette valeur"),S(I),S(l);var f=V(l,2);{var d=g=>{var b=La(),x=V(C(b),2);Ze(x,21,()=>Object.entries(s().alternatives).sort(([,N],[,H])=>H-N).slice(0,3),([N,H])=>N,(N,H)=>{var $=w(()=>mr(o(H),2));let L=()=>o($)[0],j=()=>o($)[1];const U=w(()=>gt(L())?.toString()),re=w(()=>Se("enum",e.definition.type,o(U))?n()?.find(({key:Ae})=>Ae===o(U)):void 0);var te=Ea(),ae=C(te),Y=C(ae,!0);S(ae),Be(ae,(Ae,Le)=>De?.(Ae,Le),()=>o(re)?.description);var he=V(ae,2);Pt(he,{get value(){return j()}});var _e=V(he,2);_e.__click=[Ha,s,L,j,a];var Ke=C(_e);Mr(Ke,{}),S(_e),Be(_e,(Ae,Le)=>De?.(Ae,Le),()=>"Sélectionner cette valeur"),S(te),J(()=>ue(Y,o(re)?.label||o(U))),u(N,te)}),S(x),S(b),u(g,b)};B(f,g=>{s()&&Object.keys(s().alternatives).length>0&&g(d)})}var R=V(f,2);{var k=g=>{var b=Da(),x=C(b);{var N=L=>{var j=qa(),U=C(j,!0);S(j),J(()=>ue(U,e.definition.description)),u(L,j)};B(x,L=>{e.definition.description&&L(N)})}var H=V(x,2);{var $=L=>{var j=Ba();J(()=>be(j,"href",e.definition.learnMore)),u(L,j)};B(H,L=>{e.definition.learnMore&&L($)})}S(b),u(g,b)};B(R,g=>{(e.definition.description||e.definition.learnMore)&&g(k)})}var O=V(R,2);{var A=g=>{var b=Va(),x=C(b,!0);S(b),J(N=>ue(x,N),[()=>JSON.stringify({...bn(e.definition.id),value:s()},null,2)]),u(g,b)};B(O,g=>{kr()&&g(A)})}S(i),J(()=>{be(c,"for",t),T.disabled=!s()}),u(r,i),xe()}Nr(["click"]);var $a=P('<div class="liste svelte-6gm1gm"><!></div>');function Za(r,e){var t=$a(),s=C(t);ye(s,()=>e.children),S(t),u(r,t)}var fr=Object.prototype.hasOwnProperty;function Ot(r,e){var t,s;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((s=r.length)===e.length)for(;s--&&Ot(r[s],e[s]););return s===-1}if(!t||typeof r=="object"){s=0;for(t in r)if(fr.call(r,t)&&++s&&!fr.call(e,t)||!(t in e)||!Ot(r[t],e[t]))return!1;return Object.keys(e).length===s}}return r!==r&&e!==e}var Ka=Te('<svg><path fill="currentColor" d="M214 48v48a6 6 0 0 1-12 0V62.48l-45.76 45.76a6 6 0 0 1-8.48-8.48L193.52 54H160a6 6 0 0 1 0-12h48a6 6 0 0 1 6 6M99.76 147.76L54 193.52V160a6 6 0 0 0-12 0v48a6 6 0 0 0 6 6h48a6 6 0 0 0 0-12H62.48l45.76-45.76a6 6 0 0 0-8.48-8.48M208 154a6 6 0 0 0-6 6v33.52l-45.76-45.76a6 6 0 0 0-8.48 8.48L193.52 202H160a6 6 0 0 0 0 12h48a6 6 0 0 0 6-6v-48a6 6 0 0 0-6-6M62.48 54H96a6 6 0 0 0 0-12H48a6 6 0 0 0-6 6v48a6 6 0 0 0 12 0V62.48l45.76 45.76a6 6 0 0 0 8.48-8.48Z"></path></svg>');function Ua(r,e){const t=ve(e,["$$slots","$$events","$$legacy"]);var s=Ka();ie(s,()=>({class:"icon",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em",...t})),u(r,s)}var Wa=Te('<svg><path fill="currentColor" d="M208 152h16a8 8 0 0 0 0-16h-16v-16h16a8 8 0 0 0 0-16h-16.4a79.76 79.76 0 0 0-21.44-46.85l19.5-19.49a8 8 0 0 0-11.32-11.32l-20.29 20.3a79.74 79.74 0 0 0-92.1 0l-20.29-20.3a8 8 0 0 0-11.32 11.32l19.5 19.49A79.76 79.76 0 0 0 48.4 104H32a8 8 0 0 0 0 16h16v16H32a8 8 0 0 0 0 16h16v8c0 2.7.14 5.37.4 8H32a8 8 0 0 0 0 16h19.68a80 80 0 0 0 152.64 0H224a8 8 0 0 0 0-16h-16.4c.26-2.63.4-5.3.4-8ZM128 48a64.07 64.07 0 0 1 63.48 56h-127A64.07 64.07 0 0 1 128 48m8 175.48V144a8 8 0 0 0-16 0v79.48A64.07 64.07 0 0 1 64 160v-40h128v40a64.07 64.07 0 0 1-56 63.48"></path></svg>');function Ga(r,e){const t=ve(e,["$$slots","$$events","$$legacy"]);var s=Wa();ie(s,()=>({class:"icon",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em",...t})),u(r,s)}var Qa=Te('<svg><path fill="currentColor" d="M160 80H48a16 16 0 0 0-16 16v112a16 16 0 0 0 16 16h112a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16m0 128H48V96h112ZM136 40a8 8 0 0 1 8-8h16a8 8 0 0 1 0 16h-16a8 8 0 0 1-8-8m88 8v8a8 8 0 0 1-16 0v-8h-8a8 8 0 0 1 0-16h8a16 16 0 0 1 16 16m0 48v16a8 8 0 0 1-16 0V96a8 8 0 0 1 16 0m0 56v8a16 16 0 0 1-16 16h-8a8 8 0 0 1 0-16h8v-8a8 8 0 0 1 16 0M80 56v-8a16 16 0 0 1 16-16h8a8 8 0 0 1 0 16h-8v8a8 8 0 0 1-16 0"></path></svg>');function Xa(r,e){const t=ve(e,["$$slots","$$events","$$legacy"]);var s=Qa();ie(s,()=>({class:"icon",viewBox:"0 0 256 256",width:"1.2em",height:"1.2em",...t})),u(r,s)}var Ja=P("<img/>"),Ya=P("<!> <!>",1),eo=P("<!> ",1),to=P('<div class="images svelte-xtkozr"></div> <h2 class="svelte-xtkozr"><!></h2> <!>',1),ro=P('<section class="empty-selection svelte-xtkozr"><!> <p>Chargement des options…</p></section>'),no=P('<section class="empty-selection svelte-xtkozr"><!> <p>Sélectionnez une ou plusieurs images pour voir et modifier leurs métadonnées</p></section>'),so=P("<!> Regrouper",1),io=P("<!> Séparer",1),ao=P('<div class="side-by-side svelte-xtkozr"><!> <!></div>'),oo=P("<!> Importer d'autres images",1),lo=P("<!> ",1),co=P('<aside data-testid="sidepanel"><!> <section class="button svelte-xtkozr"><!> <!> <!></section></aside>');function uo(r,e){ke(e,!0);const t=w(()=>{const f=se.Protocol.state.find(d=>d.id===Z.currentProtocolId);return f?f.metadata.map(d=>se.Metadata.state.find(R=>R.id===d)).filter(d=>d!==void 0).toSorted(Rn(f)):[]}),s={};let n=pe(!0);xr([()=>o(t)],()=>{if(Object.keys(s).length>0){q(n,!1);return}kn("MetadataOption",In(Z.currentProtocolId)).then(f=>{if(Object.keys(s).length>0){q(n,!1);return}for(const{metadataId:d,key:R,...k}of f)s[d]??=[],s[d].push({key:R.toString(),...k});for(const d of Object.keys(s))s[d].sort((R,k)=>R.label.localeCompare(k.label));q(n,!1)})});const a=w(()=>An().showTechnicalMetadata),i=w(()=>Z.selection.length===1?se.Observation.state.find(f=>f.id===Z.selection[0]):void 0),l=w(()=>Z.selection.length===1?se.Image.state.find(f=>f.fileId===Z.selection[0]):void 0),c=w(()=>({image:Z.selection.filter(f=>se.Image.state.some(d=>d.fileId===f)).length,observation:Z.selection.filter(f=>se.Observation.state.some(d=>d.id===f)).length}));var h=co();let v;var y=C(h);{var I=f=>{var d=to(),R=E(d);Ze(R,21,()=>e.images,Or,(x,N,H)=>{let $=()=>o(N).src,L=()=>o(N).box;const j=w(()=>o(i)?`Image ${H+1} de l'observation ${o(i).label}`:`Image ${H+1} de la sélection`);var U=K(),re=E(U);{var te=Y=>{_s(Y,{blurfill:!0,get src(){return $()},get alt(){return o(j)},get box(){return L()}})},ae=Y=>{var he=Ja();J(()=>{be(he,"src",$()),be(he,"alt",o(j))}),u(Y,he)};B(re,Y=>{L()?Y(te):Y(ae,!1)})}u(x,U)}),S(R);var k=V(R,2),O=C(k);{var A=x=>{var N=Ya(),H=E(N);Ga(H,{});var $=V(H,2);ws($,{label:"Nom de l'observation",get value(){return o(i).label},onblur:async L=>{L!==o(i).label&&await se.Observation.update(o(i).id,"label",L)}}),u(x,N)},g=x=>{var N=K(),H=E(N);{var $=j=>{var U=eo(),re=E(U);Cs(re,{});var te=V(re);J(()=>ue(te,` ${o(l).filename??""}`)),u(j,U)},L=j=>{var U=st();J(re=>ue(U,re),[()=>xn(o(c))]),u(j,U)};B(H,j=>{o(l)?j($):j(L,!1)},!0)}u(x,N)};B(O,x=>{o(i)?x(A):x(g,!1)})}S(k);var b=V(k,2);Za(b,{children:(x,N)=>{var H=K(),$=E(H);Ze($,17,()=>o(t),L=>L.id,(L,j)=>{const U=w(()=>e.metadata[o(j).id]);var re=K(),te=E(re);{var ae=Y=>{{let he=w(()=>o(U)?.merged);ja(Y,{get merged(){return o(he)},get definition(){return o(j)},get value(){return o(U)},get options(){return s[o(j).id]},onchange:async _e=>{Ot(_e,o(U)?.value)||e.onmetadatachange(o(j).id,_e)}})}};B(te,Y=>{(o(j).label||o(a))&&Y(ae)})}u(L,re)}),u(x,H)}}),u(f,d)},D=f=>{var d=K(),R=E(d);{var k=A=>{var g=ro(),b=C(g);At(b,{variant:"empty"}),qe(2),S(g),u(A,g)},O=A=>{var g=no(),b=C(g);At(b,{variant:"empty"}),qe(2),S(g),u(A,g)};B(R,A=>{o(n)?A(k):A(O,!1)},!0)}u(f,d)};B(y,f=>{e.images.length>0&&!o(n)?f(I):f(D,!1)})}var _=V(y,2),z=C(_);{var M=f=>{var d=ao(),R=C(d);{let O=w(()=>!e.canmerge);ht(R,{get disabled(){return o(O)},get onclick(){return e.onmerge},keyboard:"$mod+g",help:"Regrouper les images et/ou observations sélectionnées en une observation",children:(A,g)=>{var b=so(),x=E(b);Xa(x,{}),qe(),u(A,b)},$$slots:{default:!0}})}var k=V(R,2);{let O=w(()=>!e.cansplit);ht(k,{get disabled(){return o(O)},get onclick(){return e.onsplit},keyboard:"$mod+Shift+g",help:"Séparer toutes les observations sélectionnées en images seules",children:(A,g)=>{var b=io(),x=E(b);Ua(x,{}),qe(),u(A,b)},$$slots:{default:!0}})}S(d),u(f,d)};B(z,f=>{e.onmerge&&e.onsplit&&f(M)})}var m=V(z,2);{var T=f=>{ht(f,{get onclick(){return e.onimport},children:(d,R)=>{var k=oo(),O=E(k);Ns(O,{}),qe(),u(d,k)},$$slots:{default:!0}})};B(m,f=>{e.onimport&&f(T)})}var p=V(m,2);{let f=w(()=>e.images.length===0);ht(p,{get disabled(){return o(f)},get onclick(){return e.ondelete},keyboard:"Delete",help:"Supprimer toutes les images sélectionnées. Attention, impossible d'annuler",danger:!0,children:(d,R)=>{var k=lo(),O=E(k);Ts(O,{});var A=V(O);J(()=>ue(A,` Supprimer ${e.images.length??""} images`)),u(d,k)},$$slots:{default:!0}})}S(_),S(h),J(f=>v=je(h,1,"sidepanel svelte-xtkozr",null,v,f),[()=>({empty:e.images.length===0||o(n)})]),u(r,h),xe()}var ho=P('<div><main data-testid="app-main" class="svelte-di4wkt"><!></main> <!></div>');function el(r,e){ke(e,!0),En({title:"Importer"});async function t(){zn(await Os({accept:Hn,multiple:!0}))}async function s(){const m=await Mn(Z.selection);Z.setSelection?.([m])}async function n(){const m=[],T=Z.currentProtocol;if(!T)throw new Error("No protocol selected");await se.Observation.do(async p=>{for(const f of Z.selection){const d=se.Observation.getFromState(f);if(d){p.delete(f);for(const R of d.images){const k=await se.Image.raw.get(R);if(!k)continue;const O=On(k,T);p.add(O),m.push(O.id)}}}}),Z.setSelection?.(m)}async function a(){await tr(["Image","Observation","ImageFile","ImagePreviewFile"],{},async m=>{for(const T of Z.selection)Tn(T,"Cancelled by user"),await Nn(T,{tx:m,notFoundOk:!0,recursive:!0}),await yn(T,m,!0)}),Z.setSelection?.([])}_n("observations",{"x x":{help:"Mettre en erreur la sélection",debug:!0,do(){for(const m of Z.selection)Z.erroredImages.has(m)||Z.erroredImages.set(m,"Errored!")}},"x u":{help:"Enlever les erreurs de la sélection",debug:!0,do(){for(const m of Z.selection)Z.erroredImages.delete(m)}},"x f":{help:"Créer une image en chargement",debug:!0,do(){Z.processing.files.push({id:wn(),name:"Debug image.jpeg",addedAt:new Date})}},"$mod+u":{help:"Supprimer toutes les images et observations",async do(){It.warn("Suppression de toutes les images et observations…"),await tr(["Image","ImageFile","ImagePreviewFile","Observation"],{},m=>{m.objectStore("Observation").clear(),m.objectStore("ImageFile").clear(),Z.previewURLs.clear(),m.objectStore("Image").clear(),Z.queuedImages.clear(),Z.erroredImages.clear(),Z.loadingImages.clear(),Z.processing.files=[],Z.setSelection?.([]),sr.forEach(T=>T("Cancelled by user")),sr.clear()})}},"$mod+g":{help:"Fusionner des observations ou images",do:s},"$mod+Shift+g":{help:"Séparer toutes les observations sélectionnées en images seules",do:n},Delete:{help:"Supprimer les images et observations sélectionnées",do:a}});let i=w(()=>Z.processing.files.length+se.Observation.state.length+se.Image.state.length>0);const l=w(()=>Z.selection.flatMap(m=>{const T=se.Image.state.find(p=>p.fileId===m);return T?[T]:se.Observation.state.find(p=>p.id===m)?.images.map(p=>se.Image.state.find(f=>f.id===p)).filter(p=>p!==void 0)}).filter(m=>m!==void 0)),c=w(()=>Z.selection.map(m=>se.Observation.state.find(T=>T.id===m)).filter(m=>m!==void 0)),h=w(()=>o(l).map(m=>{if(!m.fileId)return;const T=Z.previewURLs.get(m.fileId);if(!T)return;const p=Z.cropMetadataValueOf(m)?.value;return{src:T,box:p?gn(p):void 0}}).filter(m=>m!==void 0));let v=pe(vr({}));xr([()=>o(l),()=>o(c)],()=>{rr(ut(),o(l),o(c)).then(m=>{q(v,m,!0)}).catch(m=>It.error(m))});var y=ho();let I;var D=C(y),_=C(D);ye(_,()=>e.children??nt),S(D);var z=V(D,2);{var M=m=>{{let T=w(()=>Z.selection.length>0),p=w(()=>St.route.id?.endsWith("classify")?s:void 0),f=w(()=>Z.selection.some(k=>se.Observation.state.some(O=>O.id===k))),d=w(()=>St.route.id?.endsWith("classify")?n:void 0),R=w(()=>St.route.id?.endsWith("import")?t:void 0);uo(m,{get images(){return o(h)},get metadata(){return o(v)},get canmerge(){return o(T)},get onmerge(){return o(p)},get cansplit(){return o(f)},get onsplit(){return o(d)},get onimport(){return o(R)},ondelete:a,onaddmetadata:()=>{},onmetadatachange:async(k,O)=>{if(Z.currentProtocol){for(const A of Z.selection)O===void 0?await Pn({db:ut(),subjectId:A,metadataId:k,recursive:!0}):await Cn({db:ut(),subjectId:A,metadataId:k,confidence:1,manuallyModified:!0,value:O});await rr(ut(),o(l),o(c)).then(A=>{q(v,A,!0)}).catch(A=>It.error(A))}}})}};B(z,m=>{o(i)&&m(M)})}S(y),J(m=>I=je(y,1,"main-and-sidepanel svelte-di4wkt",null,I,m),[()=>({"has-sidepanel":o(i)})]),dn(1,y,()=>pn,()=>({duration:100})),u(r,y),xe()}export{el as component};
