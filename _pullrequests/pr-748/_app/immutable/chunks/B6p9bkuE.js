import{c as d,o as i}from"./9TbOa8jV.js";import{u as w,a as p,b as m}from"./DLg_PPZ_.js";const h=typeof window<"u"?window:void 0;function b(t){let e=t.activeElement;for(;e?.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}class v{#e;#t;constructor(e={}){const{window:n=h,document:u=n?.document}=e;n!==void 0&&(this.#e=u,this.#t=d(c=>{const o=i(n,"focusin",c),r=i(n,"focusout",c);return()=>{o(),r()}}))}get current(){return this.#t?.(),this.#e?b(this.#e):null}}new v;function y(t,e){switch(t){case"post":p(e);break;case"pre":w(e);break}}function a(t,e,n,u={}){const{lazy:c=!1}=u;let o=!c,r=Array.isArray(t)?[]:void 0;y(e,()=>{const s=Array.isArray(t)?t.map(l=>l()):t();if(!o){o=!0,r=s;return}const f=m(()=>n(s,r));return r=s,f})}function A(t,e,n){a(t,"post",e,n)}function E(t,e,n){a(t,"pre",e,n)}A.pre=E;export{A as w};
