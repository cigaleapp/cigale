import"./DsnmJJEf.js";import{A as v,B as b,g as r,D as a}from"./DLg_PPZ_.js";import{p as c,s as I,r as C}from"./D67Hg_eN.js";import{t as x}from"./C8qYVKmu.js";import{C as M}from"./CxK3DY_r.js";import{u as i,i as O}from"./yjQBtq-m.js";import{n as g}from"./Csf0LG85.js";function B(d,e){v(e,!0);const u=c(e,"highlighted",3,!1),m=C(e,["$$slots","$$events","$$legacy","observation","images","highlighted"]),o=a(()=>e.images.some(({id:t})=>i.queuedImages.has(t))?"queued":e.images.some(({id:t})=>i.loadingImages.has(t))?"loading":e.images.some(({id:t})=>i.erroredImages.has(t))?"errored":"ok"),l=a(()=>{if(r(o)==="errored")return e.images.map(({id:t})=>i.erroredImages.get(t)).filter(g).join("; ");if(O())return`${e.observation.id} @ ${e.observation.addedAt.toISOString()}`}),n=a(()=>e.images.length>0?e.images[0]:void 0);{let t=a(()=>r(n)?.fileId?i.previewURLs.get(r(n).fileId):void 0),f=a(()=>i.selection.includes(e.observation.id)),h=a(()=>e.images.map(s=>i.cropMetadataValueOf(s)?.value).filter(g).map(s=>x(s)));M(d,I({get id(){return e.observation.id},get title(){return e.observation.label},get image(){return r(t)},get selected(){return r(f)},get stacksize(){return e.observation.images.length},boxes:"apply-first",get tooltip(){return r(l)},get status(){return r(o)},get highlighted(){return u()}},()=>m,{get boundingBoxes(){return r(h)}}))}b()}export{B as C};
