var o=1,g=65535,u=4,O=function(){o=o+1&g},d=setInterval(O,1e3/u|0);d.unref&&d.unref();function R(t){var e=u*t,r=[0],n=1,i=o-1&g;return function(s){var a=o-i&g;for(a>e&&(a=e),i=o;a--;)n===e&&(n=0),r[n]=r[n===0?e-1:n-1],n++;s&&(r[n-1]+=s);var c=r[n-1],f=r.length<e?0:r[n===e?0:n];return r.length<u?c:(c-f)*u/r.length}}class x{constructor(e,r=1e3){this.length=parseInt(e,10)||0,this.transferred=0,this.speed=0,this.streamSpeed=R(this.speed||5e3),this.initial=!1,this.emitDelay=r,this.eventStart=0,this.percentage=0}getRemainingBytes(){return parseInt(this.length,10)-parseInt(this.transferred,10)}getEta(){return this.length>=this.transferred?this.getRemainingBytes()/this.speed*1e9:0}flow(e,r){const n=e.length;if(this.transferred+=n,this.speed=this.streamSpeed(n),this.percentage=Math.round(this.transferred/this.length*100),this.initial||(this.eventStart=Date.now(),this.initial=!0),this.length>=this.transferred||Date.now()-this.eventStart>this.emitDelay){this.eventStart=Date.now();const i={total:this.length,transferred:this.transferred,speed:this.speed,eta:this.getEta()};this.length&&(i.remaining=this.getRemainingBytes(),i.percentage=this.percentage),r(i)}}}function B(){return typeof Response<"u"&&typeof ReadableStream<"u"}function M({defaultSize:t=0,emitDelay:e=10,onProgress:r=()=>null,onComplete:n=()=>null,onError:i=()=>null}){return function(a){if(!B())return a;const{body:c,headers:f,status:y}=a,S=f.get("content-length")||t,b=new x(S,e),v=c.getReader(),w=new ReadableStream({start(p){function m(){v.read().then(({done:h,value:l})=>{if(h){n({}),p.close();return}l&&b.flow(l,r),p.enqueue(l),m()}).catch(h=>{i(h)})}m()}});return new Response(w,{headers:f,status:y})}}function I(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,e(n)]))}function L(t){return Object.keys(t)}function k(t){return Object.fromEntries(t)}function E(t){return Object.entries(t)}function $(t,e){return e.includes(t)}function P(t,...e){const r={};for(const n of e)r[n]=t[n];return r}function _(t,...e){return k(E(t).filter(([r])=>!$(r,e)))}function z(t){try{return JSON.parse(t?.toString()??"")}catch{return}}function A(t){try{return JSON.stringify(t)}catch{return}}function C(t){return Math.sign(t)}function J(t,e,r){return Math.max(e,Math.min(r,t))}function N(t,e=r=>r){const r=new Set;return t.filter(n=>{const i=e(n);return r.has(i)?!1:(r.add(i),!0)})}function F(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function U(t){const e=t.match(/^([^.]+)\.(.+)$/);return e?[e[1],e[2]]:[t,""]}function H(t){return(e,r)=>{const n=t(e),i=t(r);return n===i?0:typeof n=="string"&&typeof i=="string"?n.localeCompare(i):typeof n=="number"&&typeof i=="number"?n-i:n.toString().localeCompare(i.toString())}}function K(t){const e=new URL(t);return e.searchParams.set("v",Date.now().toString()),typeof t=="string"?e.toString():e}function T(t,e=void 0){return e===void 0?Array.from({length:t},(r,n)=>n):Array.from({length:e-t},(r,n)=>n+t)}async function q(t,{cacheAs:e="",onProgress:r}){let n=new URL(typeof t=="string"?t:t.url);const i=typeof t=="string"?{headers:{}}:t;return e&&n.searchParams.set("x-cigale-cache-as",e),r?fetch(n,i).then(M({onProgress:r})):fetch(n,i)}function j(t){return[...t].reduce((e,r)=>e+r,0)}function V(t){return j(t)/t.length}function Z(t){return t!=null}function D(t,e=0){if(e<0)throw new Error("decimals must be non-negative");const r=Math.pow(10,e);return Math.round(t*r)/r}function G({offsetX:t,offsetY:e},r,n=0){return t>=-n&&t<=r.width+n&&e>=-n&&e<=r.height+n}function Q(t){return t==="application/zip"||t==="application/x-zip-compressed"||t==="application/x-zip"}function W(t,e,r){if("groupBy"in Map&&!r)return Map.groupBy(t,e);const n=new Map;for(const i of t){const s=e(i);n.has(s)||n.set(s,[]),n.get(s).push(r?r(i):i)}return n}function X(t,...e){if(t>=1)return`var(--${e.at(-1)})`;if(t<=0)return`var(--${e[0]})`;const r=e.length-1,n=Math.floor(t*r);return`color-mix(
		in lab,
		var(--${e[n+1]})
		${D((t*r-n)*100,2)}%,
		var(--${e[n]})
	)`.replaceAll(`
`,"").replaceAll(/\s+/g," ").replaceAll("( ","(").replaceAll(" )",")")}function Y(t,e,{firstTimeDuration:r}={}){const n=!localStorage.getItem("app_started_before");localStorage.setItem("app_started_before","true"),n&&(e=r??e);const i=document.querySelector(t);if(!(i instanceof HTMLElement)){i?.remove();return}i.style.transition=`opacity ${e}ms linear`,i.style.opacity="0",setTimeout(()=>{i.remove()},e)}export{W as a,V as b,J as c,H as d,E as e,Y as f,X as g,K as h,C as i,k as j,L as k,z as l,I as m,Z as n,F as o,P as p,Q as q,T as r,j as s,D as t,N as u,_ as v,G as w,q as x,A as y,U as z};
