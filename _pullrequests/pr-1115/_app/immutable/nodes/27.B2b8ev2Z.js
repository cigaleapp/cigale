import"../chunks/DsnmJJEf.js";import{p as D,D as F,F as M,a as p,b as G,I as x,ak as h,K as w,H as U,am as N,ai as I,g as t,u as e,aG as W,J as z,al as L,aj as S}from"../chunks/Dt6m180S.js";import{s as d}from"../chunks/BqMK6M8M.js";import{i as H}from"../chunks/cmrSGx3m.js";import{b as A}from"../chunks/CyxF7S3o.js";import{p as $}from"../chunks/BQgdUy12.js";import{s as B,b as E}from"../chunks/CoW7fDOc.js";import{t as j}from"../chunks/h9n_zjAt.js";import{M as O}from"../chunks/9-skrIsR.js";import{g as q}from"../chunks/CoCzgeuV.js";import{t as C}from"../chunks/DM93I2Od.js";import{R as Q}from"../chunks/CH5FdpMr.js";var T=x(" <strong> </strong> ",1),V=x("<a><!></a>");function X(y,l){D(l,!0);const i=r=>{N();var a=T(),o=M(a,!0),s=I(o),u=h(s,!0);w(s);var _=I(s,1,!0);U(()=>{d(o,t(f)),d(u,t(g)),d(_,t(c))}),p(r,a)},g=e(()=>URL.canParse(l.url)?new URL(l.url).hostname:""),b=e(()=>l.url.toString().split(t(g),2)),m=e(()=>W(t(b),2)),f=e(()=>t(m)[0]),c=e(()=>t(m)[1]);var n=F(),v=M(n);{var R=r=>{var a=V(),o=h(a);i(o),w(a),U(s=>B(a,"href",s),[()=>l.url.toString()]),p(r,a)},k=r=>{i(r)};H(v,r=>{l.linkify?r(R):r(k,!1)})}p(y,n),G()}var Y=x("<p> </p>"),Z=x('<section class="modal-import-loading svelte-dq2kpr"><!></section>');function ct(y,l){D(l,!0);const i=e(()=>E("main")),g=e(()=>$.data),b=e(()=>t(g).swarpc);let m=S(!1);const f=e(()=>{const n=$.params.url;return n&&n.startsWith("https:")&&URL.canParse(n)?new URL(n):null});let c=S(void 0);A(()=>{t(c)&&t(f)&&!t(m)&&t(c)()});{const n=r=>{var a=F(),o=M(a);{var s=u=>{X(u,{linkify:!0,get url(){return t(f)}})};H(o,u=>{t(f)&&u(s)})}p(r,a)},v=(r,a=z)=>{var o=Z(),s=h(o);{var u=_=>{var P=Y(),J=h(P,!0);w(P),U(K=>d(J,K),[()=>t(i).x(a())]),p(_,P)};H(s,_=>{t(m)&&_(u)})}w(o),p(r,o)};let R=e(()=>t(i)(107)),k=e(()=>t(i)(104));O(y,{get title(){return t(R)},key:"modal_import_remote_protocol",get confirm(){return t(k)},oncancel:async()=>{await q("/")},onconfirm:async()=>{if(!t(f))return;L(m,!0);const r=await fetch(t(f)).then(a=>a.text()).catch(a=>(C.error(t(i)(88,[a])),null));if(r)try{await t(b).importProtocol({contents:r}),await j.Protocol.refresh(null),await j.Metadata.refresh(null),await q("/protocols")}catch(a){C.error(t(i)(88,[a]))}finally{L(m,!1)}},get open(){return t(c)},set open(r){L(c,r,!0)},_w_snippet_0:n,_w_snippet_1:v,children:(r,a)=>{{let o=e(()=>[n,v]),s=e(()=>t(i).c(47));Q(r,{get t(){return t(o)},get x(){return t(s)}})}},$$slots:{_w_snippet_0:!0,_w_snippet_1:!0,default:!0}})}G()}export{ct as component};
