import"../chunks/DsnmJJEf.js";import{p as Z,I as p,a as u,b as $,ak as o,g as e,u as n,K as i,F as j,ai as w,H as F,D as ee}from"../chunks/Dt6m180S.js";import{s as ae}from"../chunks/CFbM8ao4.js";import{s as E,e as te}from"../chunks/BqMK6M8M.js";import{i as z}from"../chunks/cmrSGx3m.js";import{e as re}from"../chunks/Bmx3KKup.js";import{a as ne,f as ie,t as se}from"../chunks/DM93I2Od.js";import{b as oe,r as le,e as ue}from"../chunks/CoW7fDOc.js";import{t as I,E as B,j as fe,A as de}from"../chunks/h9n_zjAt.js";import{a as R}from"../chunks/CyxF7S3o.js";import{F as me}from"../chunks/B07Li1wJ.js";import{R as ve}from"../chunks/C6gbgflb.js";import{o as pe,k as ce}from"../chunks/C0SiBqD8.js";var _e=p("<option> </option>"),xe=p('<div class="field svelte-s8isad"><label><span class="label"> </span> <input type="text" list="exif-fields"/> <datalist id="exif-fields"></datalist></label></div>'),he=p('<h3 class="svelte-s8isad"> </h3> <!>',1),be=p('<div class="content"><!></div>');function Ne(H,c){Z(c,!0);const _=n(()=>oe("main")),A=n(()=>c.data.metadata),a=n(()=>e(A).infer),S=n(()=>e(A).id),K=[{key:"none",label:"Pas d'inférence"},{key:"neural",label:"Réseau neuronal"},{key:"exif",label:"EXIF"}],P=n(()=>!e(a)||!("neural"in e(a))||!e(a).neural.model?"":typeof e(a).neural.model=="string"?e(a).neural.model:e(a).neural.model.url),q={model:"http://example.com/model.onnx",input:{width:224,height:224,normalized:!0}},X=n(()=>e(a)?"exif"in e(a)?"exif":"neural"in e(a)?"neural":"none":"none");var f=be(),C=o(f);ve(C,{get options(){return K},get value(){return e(X)},onchange:async x=>{x==="none"&&e(X)!=="none"&&(await I.Metadata.set(pe(c.data.metadata,"infer")),await R())},children:(x,D)=>{let L=()=>D?.().key,G=()=>D?.().label;var M=he(),h=j(M),J=o(h,!0);i(h);var O=w(h,2);{var Q=s=>{{let d=n(()=>e(_)(303));me(s,{check:!0,get label(){return e(d)},get value(){return e(P)},onblur:async m=>{if(!m)return;const b=ae(e(a)&&"neural"in e(a)&&e(a).neural?e(a).neural:{});await I.Metadata.update(e(S),"infer",{neural:{...q,...b,model:m}}),await R()}})}},V=s=>{var d=ee(),m=j(d);{var b=g=>{var y=xe(),N=o(y),k=o(N),W=o(k,!0);i(k);var v=w(k,2);le(v);var T=w(v,2);re(T,20,()=>ce(B),t=>t,(t,r)=>{var l=_e(),Y=o(l,!0);i(l);var U={};F(()=>{E(Y,B[r]),U!==(U=r)&&(l.value=(l.__value=r)??"")}),u(t,l)}),i(T),i(N),i(y),F(t=>{E(W,t),ue(v,e(a)&&"exif"in e(a)?e(a).exif:"")},[()=>e(_)(304)]),te("blur",v,async({currentTarget:t})=>{const r=fe(t.value);if(r instanceof de){se.error(e(_)(305,[r.summary]));return}await I.Metadata.update(e(S),"infer",{exif:r}),await R()}),u(g,y)};z(m,g=>{L()==="exif"&&g(b)},!0)}u(s,d)};z(O,s=>{L()==="neural"?s(Q):s(V,!1)})}F(()=>E(J,G())),u(x,M)},$$slots:{default:!0}}),i(f),ne(1,f,()=>ie,()=>({duration:100})),u(H,f),$()}export{Ne as component};
