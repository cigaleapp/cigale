import"./DsnmJJEf.js";import{f as te,a as r,p as Te,D as V,F as c,b as je,I as w,ai as k,ak as i,K as f,H as C,g as e,u as h,G as ae,J as Ee,M as Ge,am as Je,aF as Ue}from"./Dt6m180S.js";import{s as I}from"./BqMK6M8M.js";import{s as Oe}from"./BEu91mT_.js";import{r as re,p as Pe,i as p}from"./cmrSGx3m.js";import{e as Re,i as Qe}from"./Bmx3KKup.js";import{c as Me}from"./BV68B1uN.js";import{a as J,c as Ke,b as Se,f as We}from"./CoW7fDOc.js";import{C as Xe}from"./Dwrc_ql2.js";import{F as Ye}from"./DeKZ_c75.js";import{I as Ne}from"./nVGfHLWF.js";import{I as ye}from"./DRBqBfVL.js";import{a as Le,f as Ce,t as $e}from"./DM93I2Od.js";import{T as ea}from"./BJm0yZll.js";import{B as aa}from"./DZd6ULkr.js";import{p as Ve}from"./h9n_zjAt.js";import{e as Fe}from"./gWcRFNzI.js";import{a as Ie,t as Be}from"./C3lM_sxf.js";import{L as Ae}from"./C0SiBqD8.js";import{s as ta}from"./CeMO3KJO.js";var ra=te('<svg><path fill="currentColor" d="M11 7h2v10h-2zm4 4h2v6h-2zm-8 2h2v4H7zm8-9H5v16h14V8h-4zM3 2.992C3 2.444 3.447 2 3.999 2H16l5 5v13.993A1 1 0 0 1 20.007 22H3.993A1 1 0 0 1 3 21.008z"></path></svg>');function sa(m,a){const u=re(a,["$$slots","$$events","$$legacy"]);var s=ra();J(s,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...u})),r(m,s)}var na=te('<svg><path fill="currentColor" d="M15 4H5v16h14V8h-4zM3 2.992C3 2.444 3.447 2 3.999 2H16l5 5v13.993A1 1 0 0 1 20.007 22H3.993A1 1 0 0 1 3 21.008zM17.657 12l-3.536 3.536l-1.414-1.415L14.828 12l-2.12-2.121l1.413-1.415zM6.343 12L9.88 8.464l1.414 1.415L9.172 12l2.12 2.121l-1.413 1.415z"></path></svg>');function oa(m,a){const u=re(a,["$$slots","$$events","$$legacy"]);var s=na();J(s,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...u})),r(m,s)}var la=te('<svg><path fill="currentColor" d="M9 2.003V2h10.998C20.55 2 21 2.455 21 2.992v18.016a.993.993 0 0 1-.993.992H3.993A1 1 0 0 1 3 20.993V8zM5.83 8H9V4.83zM11 4v5a1 1 0 0 1-1 1H5v10h14V4z"></path></svg>');function va(m,a){const u=re(a,["$$slots","$$events","$$legacy"]);var s=la();J(s,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...u})),r(m,s)}var ia=te('<svg><path fill="currentColor" d="M12.414 5H21a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h7.414zM20 11H4v8h16zm0-2V7h-8.414l-2-2H4v4z"></path></svg>');function fa(m,a){const u=re(a,["$$slots","$$events","$$legacy"]);var s=ia();J(s,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...u})),r(m,s)}var ua=te('<svg><path fill="currentColor" d="M12.414 5H21a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h7.414zM4 5v14h16V7h-8.414l-2-2zm7 7V9h2v3h3v2h-3v3h-2v-3H8v-2z"></path></svg>');function ma(m,a){const u=re(a,["$$slots","$$events","$$legacy"]);var s=ua();J(s,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...u})),r(m,s)}const be=Symbol("LoadingTextLoading");function b(m){return m!==be}var _a=w('<br class="svelte-uehut2"/>'),ca=w('<!> <span class="svelte-uehut2"> </span>',1);function He(m,a){Te(a,!0);const u=Pe(a,"tag",3,"span"),s=h(()=>Se("main")),U=h(()=>{if(!a.mask)return[e(s)(293)];let v=[];return typeof a.mask=="string"?v=a.mask.split(`
`):"words"in a.mask?v=[Ae.split(/\s+/).slice(0,a.mask.words).join(" ")]:v=Ae.split(`
`).slice(0,a.mask.lines),v=v.filter(Boolean),v.length>0?v:[e(s)(293)]});var Q=V(),ie=c(Q);{var fe=v=>{var B=V(),S=c(B);Fe(S,()=>u()==="code"?"span":u(),!1,(y,X)=>{Ie(y,(O,o)=>Be?.(O,o),()=>a.help),Ke(y,0,"skeleton-text svelte-uehut2"),Le(1,y,()=>Ce,()=>({duration:200}));var j=V(),Y=c(j);Re(Y,17,()=>e(U),Qe,(O,o,n)=>{var l=ca(),x=c(l);{var Z=A=>{var ue=_a();r(A,ue)};p(x,A=>{n>0&&A(Z)})}var _=k(x,2),z=i(_,!0);f(_),C(()=>I(z,e(o))),r(O,l)}),r(X,j)}),r(v,B)},W=v=>{var B=V(),S=c(B);Fe(S,u,!1,(y,X)=>{Ie(y,(n,l)=>Be?.(n,l),()=>a.help),J(y,()=>({"data-loaded":!0,class:""}),void 0,void 0,void 0,"svelte-uehut2"),Le(1,y,()=>Ce,()=>({duration:200}));var j=V(),Y=c(j);{var O=n=>{var l=V(),x=c(l);Oe(x,()=>a.loaded,()=>a.value),r(n,l)},o=n=>{var l=ae();C(()=>I(l,a.value)),r(n,l)};p(Y,n=>{a.loaded?n(O):n(o,!1)})}r(X,j)}),r(v,B)};p(ie,v=>{!b(a.value)||a.value===null||a.value===void 0?v(fe):v(W,!1)})}r(m,Q),je()}var da=w('<li class="new-folder svelte-12kq3qg"><button class="svelte-12kq3qg"><!> <!></button></li>'),ga=w('<!> <div class="text svelte-12kq3qg"><!></div>',1),pa=w('<!> <div class="text svelte-12kq3qg"><!></div> <!>',1),ha=w('<!> <div class="text svelte-12kq3qg"><span class="filename"><!></span> <span class="help svelte-12kq3qg"> </span></div>',1),xa=w('<li class="svelte-12kq3qg"><!></li> <!>',1),qa=w('<li class="empty svelte-12kq3qg"><i> </i></li>'),ka=w("<ul><!> <!></ul>"),ya=w('<span class="help svelte-12kq3qg"><!></span>'),Ha=w('<ul class="tree svelte-12kq3qg"><li class="svelte-12kq3qg"><!> <div class="text svelte-12kq3qg"><span class="filename"> </span> <!></div></li> <!></ul>');function Ea(m,a){Te(a,!0);const u=(o,n=Ee,l)=>{let x=Ge(()=>Ue(l?.(),()=>[],!0));const Z=h(()=>Array.isArray(n())&&n().every(q=>!b(q)||!("children"in q)));var _=ka();let z;var A=i(_);{var ue=q=>{var t=da(),D=i(t),P=i(D);ma(P,{});var R=k(P,2);{let me=h(()=>e(s)(267)),_e=h(()=>e(s)(268));ye(R,{discreet:!0,value:"",get placeholder(){return e(me)},get label(){return e(_e)},onblur:(se,ce)=>{if(!se.trim()){$e.error(e(s)(269));return}ce(""),n().push({folder:se,children:[]})}})}f(D),f(t),r(q,t)};p(A,q=>{U()&&q(ue)})}var Ze=k(A,2);Re(Ze,19,n,(q,t)=>fe(q,t),(q,t,D)=>{var P=xa(),R=c(P),me=i(R);{var _e=M=>{var K=ga(),ne=c(K);va(ne,{});var oe=k(ne,2),de=i(oe);He(de,{get value(){return be},mask:{words:6}}),f(oe),r(M,K)},se=M=>{var K=V(),ne=c(K);{var oe=E=>{const ge=h(()=>e(t).icon??fa);var N=pa(),$=c(N);Me($,()=>e(ge),(d,g)=>{g(d,{})});var G=k($,2),ee=i(G);{var pe=d=>{{let g=h(()=>e(s)(270));ye(d,{discreet:!0,get value(){return e(t).folder},get label(){return e(g)},onblur:async H=>{e(t).folder=H,e(t).children.every(b)&&e(x).every(b)&&await Q(e(t).children,[...e(x),H].join("/"))}})}},he=d=>{He(d,{get value(){return e(t).folder},mask:{words:6}})};p(ee,d=>{U()&&b(e(t).folder)?d(pe):d(he,!1)})}f(G);var xe=k(G,2);{var le=d=>{aa(d,{children:(g,H)=>{var ve=V(),qe=c(ve);{var ke=L=>{var F=ae();C(we=>I(F,we),[()=>Ve(e(t).children.length,e(s).p(344),e(s)._.p)]),r(L,F)},T=L=>{{let F=h(()=>Ve(e(t).children.length,e(s).p(344),e(s)._.p));He(L,{get value(){return be},get mask(){return e(F)}})}};p(qe,L=>{e(t).children.every(b)?L(ke):L(T,!1)})}r(g,ve)}})};p(xe,d=>{"children"in e(t)&&e(t).children.length>5&&d(le)})}r(E,N)},de=E=>{const ge=h(()=>ie(e(t).provenance));var N=ha(),$=c(N);Me($,()=>e(ge),(g,H)=>{H(g,{})});var G=k($,2),ee=i(G),pe=i(ee);{var he=g=>{var H=ae();C(()=>I(H,e(t).filename)),r(g,H)},xe=g=>{var H=V(),ve=c(H);{var qe=T=>{{let L=h(()=>e(s)(405));ea(T,{get text(){return e(L)},children:(F,we)=>{Je();var ze=ae();C(()=>I(ze,e(t).filename)),r(F,ze)},$$slots:{default:!0}})}},ke=T=>{{let L=h(()=>e(s)(271));ye(T,{discreet:!0,get value(){return e(t).filename},get label(){return e(L)},onblur:async F=>{e(t).filename=F,e(x).every(b)&&await a.onedit?.(e(t).provenance,[...e(x),F].join("/"))}})}};p(ve,T=>{e(t).provenance==="metadata.json"?T(qe):T(ke,!1)},!0)}r(g,H)};p(pe,g=>{U()?g(xe,!1):g(he)})}f(ee);var le=k(ee,2),d=i(le,!0);f(le),f(G),C(()=>I(d,e(t).help)),r(E,N)};p(ne,E=>{"folder"in e(t)?E(oe):E(de,!1)},!0)}r(M,K)};p(me,M=>{b(e(t))?M(se,!1):M(_e)})}f(R);var ce=k(R,2);{var De=M=>{{let K=h(()=>[...e(x),e(t).folder]);u(M,()=>e(t).children,()=>e(K))}};p(ce,M=>{b(e(t))&&"children"in e(t)&&M(De)})}r(q,P)},q=>{var t=qa(),D=i(t),P=i(D,!0);f(D),f(t),C(R=>I(P,R),[()=>e(s)(417)]),r(q,t)}),f(_),We(_,()=>e(Z)?ta:()=>{}),C(()=>z=Ke(_,1,"tree svelte-12kq3qg",null,z,{"leaves-only":e(Z)})),r(o,_)},s=h(()=>Se("main")),U=Pe(a,"editable",3,!1);async function Q(o,n){for(const l of o)"folder"in l?await Q(l.children,`${n}/${l.folder}`):await a.onedit?.(l.provenance,`${n}/${l.filename}`)}function ie(o){switch(o){case"metadata.csv":return sa;case"metadata.json":return oa;case"images.cropped":return Xe;case"images.original":return Ne}}function fe(o,n){return b(o)?"folder"in o?b(o.folder)?o.folder:n:o.filename:n}var W=Ha(),v=i(W),B=i(v);Ye(B,{});var S=k(B,2),y=i(S),X=i(y,!0);f(y);var j=k(y,2);{var Y=o=>{var n=ya(),l=i(n);{var x=_=>{var z=ae();C(()=>I(z,a.rootHelp)),r(_,z)},Z=_=>{var z=V(),A=c(z);Oe(A,()=>a.rootHelp),r(_,z)};p(l,_=>{typeof a.rootHelp=="string"?_(x):_(Z,!1)})}f(n),r(o,n)};p(j,o=>{a.rootHelp&&o(Y)})}f(S),f(v);var O=k(v,2);u(O,()=>a.tree),f(W),C(o=>I(X,o),[()=>e(s)(416)]),r(m,W),je()}export{be as L,Ea as Z,He as a};
