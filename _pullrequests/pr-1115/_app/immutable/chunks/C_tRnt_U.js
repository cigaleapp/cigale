import"./DsnmJJEf.js";import{p as b,b as v,g as i,u as a}from"./Dt6m180S.js";import{p as c,s as I,r as C}from"./cmrSGx3m.js";import{t as x}from"./yErRaHIP.js";import{C as M}from"./BXclFgBD.js";import{i as O}from"./JZH0u_ZA.js";import{u as r}from"./fpNj8U5y.js";import{n as g}from"./C0SiBqD8.js";function z(d,e){b(e,!0);const m=c(e,"highlighted",3,!1),u=C(e,["$$slots","$$events","$$legacy","observation","images","highlighted"]),o=a(()=>e.images.some(({id:t})=>r.queuedImages.has(t))?"queued":e.images.some(({id:t})=>r.loadingImages.has(t))?"loading":e.images.some(({id:t})=>r.erroredImages.has(t))?"errored":"ok"),l=a(()=>{if(i(o)==="errored")return e.images.map(({id:t})=>r.erroredImages.get(t)).filter(g).join("; ");if(O())return`${e.observation.id} @ ${e.observation.addedAt.toISOString()} [${e.observation.sessionId}]`}),n=a(()=>e.images.length>0?e.images[0]:void 0);{let t=a(()=>i(n)?.fileId?r.getPreviewURL(i(n).fileId):void 0),f=a(()=>r.selection.includes(e.observation.id)),h=a(()=>e.images.map(s=>r.cropMetadataValueOf(s)?.value).filter(g).map(s=>x(s)));M(d,I({get id(){return e.observation.id},get title(){return e.observation.label},get image(){return i(t)},get selected(){return i(f)},get stacksize(){return e.observation.images.length},boxes:"apply-first",get tooltip(){return i(l)},get status(){return i(o)},get highlighted(){return m()}},()=>u,{get boundingBoxes(){return i(h)}}))}v()}export{z as C};
