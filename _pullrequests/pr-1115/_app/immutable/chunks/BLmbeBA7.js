import"./DsnmJJEf.js";import{a as Ae,c as De,b as ye}from"./CoW7fDOc.js";import{R as _e}from"./CH5FdpMr.js";import{f as Le,a as r,p as Re,D as n,F as t,b as Ve,g as e,u as s,I as U,ak as K,ai as T,K as M,G as Z,H as Q,al as oe,aj as he}from"./Dt6m180S.js";import{s as $}from"./BqMK6M8M.js";import{s as J}from"./BEu91mT_.js";import{a as Ie}from"./CWyL6lkj.js";import{r as Se,i}from"./cmrSGx3m.js";import{k as Te}from"./DNPeFE5u.js";import{c as N}from"./BV68B1uN.js";import{A as Ue}from"./KZAX_y5O.js";import{A as ze}from"./ChO_7ts8.js";import{C as Ee}from"./DWc3crYF.js";import{E as Fe}from"./CWl5damc.js";import{L as Ge}from"./DLaqQXcP.js";import{p as He}from"./BQgdUy12.js";import{B as Ke}from"./BWvVnymT.js";import{L as Me}from"./CJbDBvUJ.js";import{h as Qe,u as Je}from"./BgPK52sz.js";import{t as pe}from"./DM93I2Od.js";import{B as Ne}from"./BAG1AaOD.js";var Oe=Le('<svg><path fill="currentColor" d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10m0-2a8 8 0 1 0 0-16a8 8 0 0 0 0 16m-1-5h2v2h-2zm2-1.645V14h-2v-1.5a1 1 0 0 1 1-1a1.5 1.5 0 1 0-1.471-1.794l-1.962-.393A3.501 3.501 0 1 1 13 13.355"></path></svg>');function be(se,a){const f=Se(a,["$$slots","$$events","$$legacy"]);var ee=Oe();Ae(ee,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...f})),r(se,ee)}var We=U("<span><!></span>"),Xe=U('<span class="version-check up-to-date svelte-1h004jq"><!> <!></span> <!>',1),Ye=U("<span><!> <!></span>"),Ze=U('<span class="version-check error svelte-1h004jq"><!> <!></span>'),$e=U("<!> <!>",1),ea=U('<span class="version-check not-applicable svelte-1h004jq"><!> <!></span>'),aa=U('<span class="version-check not-applicable svelte-1h004jq"><!> <!></span>');function ja(se,a){Re(a,!0);const f=s(()=>ye("main")),ee=s(()=>He.data.swarpc);let ve=he(0),z=he(!1);const E=s(()=>a.compact?Ne:Ke);var me=n(),ke=t(me);{var we=F=>{var O=n(),ie=t(O);Te(ie,()=>e(ve),le=>{var ae=n(),R=t(ae);Ie(R,()=>Qe({id:a.id,version:a.version,source:a.source}),x=>{var j=n(),D=t(j);{var B=v=>{var _=n(),l=t(_);J(l,()=>a.button,()=>({onclick:()=>{},help:"Recherche de mise à jour…",state:"checking",current:a.version,newest:void 0})),r(v,_)},u=v=>{var _=n(),l=t(_);{let p=s(()=>e(f)(143));N(l,()=>e(E),(m,b)=>{b(m,{get help(){return e(p)},disabled:!0,onclick:()=>{},children:(o,d)=>{var k=$e(),y=t(k);Ge(y,{});var P=T(y,2);{var g=c=>{var w=Z();Q(C=>$(w,C),[()=>e(f)(121)]),r(c,w)};i(P,c=>{a.compact||c(g)})}r(o,k)},$$slots:{default:!0}})})}r(v,_)};i(D,v=>{a.button?v(B):v(u,!1)})}r(x,j)},(x,j)=>{var D=s(()=>{var{upToDate:o,newVersion:d}=e(j);return{upToDate:o,newVersion:d}}),B=s(()=>e(D).upToDate),u=s(()=>e(D).newVersion);const v=s(()=>async()=>{e(B)?oe(ve,Date.now(),!0):(oe(z,!0),await Je({version:a.version,source:a.source,id:a.id,swarpc:e(ee)}).then(({version:o})=>{pe.success(e(f)(342,[o])),a.onupgrade?.(o)}).catch(o=>{pe.error(e(f)(343,[o]))}).finally(()=>{oe(z,!1)}))}),_=s(()=>e(B)?`Le protocole est à jour (v${e(u)}). Cliquer pour vérifier à nouveau`:`Une mise à jour vers la v${e(u)} est disponible`);var l=n(),p=t(l);{var m=o=>{var d=n(),k=t(d);J(k,()=>a.button,()=>({onclick:e(v),help:e(_),state:"uptodate",current:a.version,newest:e(u)})),r(o,d)},b=o=>{var d=n(),k=t(d);{var y=g=>{var c=n(),w=t(c);N(w,()=>e(E),(C,V)=>{V(C,{get help(){return e(_)},onclick:e(v),children:(h,L)=>{var I=Xe(),W=t(I),re=K(W);Ee(re,{});var ce=T(re,2);{var de=q=>{var S=Z();Q(X=>$(S,X),[()=>e(f)(185)]),r(q,S)};i(ce,q=>{a.compact||q(de)})}M(W);var G=T(W,2);{var te=q=>{var S=We(),X=K(S);{let fe=s(()=>e(f).c(182)),ue=s(()=>[a.version]);_e(X,{get x(){return e(fe)},get a(){return e(ue)}})}M(S),r(q,S)};i(G,q=>{a.compact||q(te)})}r(h,I)},$$slots:{default:!0}})}),r(g,c)},P=g=>{var c=n(),w=t(c);{var C=h=>{var L=n(),I=t(L);J(I,()=>a.button,()=>({onclick:e(v),help:e(_),state:e(z)?"upgrading":"available",current:a.version,newest:e(u)})),r(h,L)},V=h=>{var L=n(),I=t(L);N(I,()=>e(E),(W,re)=>{re(W,{onclick:e(v),get help(){return e(_)},children:(ce,de)=>{var G=Ye();let te;var q=K(G);{var S=A=>{Me(A,{})},X=A=>{ze(A,{})};i(q,A=>{e(z)?A(S):A(X,!1)})}var fe=T(q,2);{var ue=A=>{var ge=n(),je=t(ge);{var Be=H=>{var ne=Z();Q(Y=>$(ne,Y),[()=>e(f)(122)]),r(H,ne)},Pe=H=>{const ne=Y=>{Ue(Y,{})};{let Y=s(()=>[ne]),Ce=s(()=>e(f).c(183)),qe=s(()=>[a.version,e(u)]);_e(H,{get t(){return e(Y)},get x(){return e(Ce)},get a(){return e(qe)}})}};i(je,H=>{e(z)?H(Be):H(Pe,!1)})}r(A,ge)};i(fe,A=>{a.compact||A(ue)})}M(G),Q(()=>te=De(G,1,"version-check svelte-1h004jq",null,te,{"update-available":!e(z)})),r(ce,G)},$$slots:{default:!0}})}),r(h,L)};i(w,h=>{a.button?h(C):h(V,!1)},!0)}r(g,c)};i(k,g=>{e(B)?g(y):g(P,!1)},!0)}r(o,d)};i(p,o=>{e(B)&&a.button?o(m):o(b,!1)})}r(x,l)},(x,j)=>{const D=s(()=>()=>{oe(ve,Date.now(),!0)});var B=n(),u=t(B);{var v=l=>{var p=n(),m=t(p);J(m,()=>a.button,()=>({onclick:e(D),help:`Impossible de vérifier les mises à jour: ${e(j)}`,state:"error",current:a.version,newest:void 0})),r(l,p)},_=l=>{var p=n(),m=t(p);{let b=s(()=>e(f)(203,[e(j)]));N(m,()=>e(E),(o,d)=>{d(o,{onclick:e(D),get help(){return e(b)},children:(k,y)=>{var P=Ze(),g=K(P);Fe(g,{});var c=T(g,2);{var w=C=>{var V=Z();Q(h=>$(V,h),[()=>e(f)(150)]),r(C,V)};i(c,C=>{a.compact||C(w)})}M(P),r(k,P)},$$slots:{default:!0}})})}r(l,p)};i(u,l=>{a.button?l(v):l(_,!1)})}r(x,B)}),r(le,ae)}),r(F,O)},xe=F=>{var O=n(),ie=t(O);{var le=R=>{var x=n(),j=t(x);J(j,()=>a.button,()=>({onclick:()=>{},help:"Ce protocole ne supporte pas la vérification des mises à jour",state:"error",current:a.version,newest:void 0})),r(R,x)},ae=R=>{var x=n(),j=t(x);{var D=u=>{var v=n(),_=t(v);{let l=s(()=>e(f)(49));N(_,()=>e(E),(p,m)=>{m(p,{onclick:()=>{},get help(){return e(l)},children:(b,o)=>{var d=ea(),k=K(d);be(k,{});var y=T(k,2);{var P=g=>{{let c=s(()=>e(f).c(182)),w=s(()=>[a.version]);_e(g,{get x(){return e(c)},get a(){return e(w)}})}};i(y,g=>{a.compact||g(P)})}M(d),r(b,d)},$$slots:{default:!0}})})}r(u,v)},B=u=>{var v=n(),_=t(v);{var l=m=>{var b=n(),o=t(b);J(o,()=>a.button,()=>({onclick:()=>{},help:"Ce protocole n'est pas versionné, pour le mettre à jour, supprimer le et importez la nouvelle version",state:"error",current:void 0,newest:void 0})),r(m,b)},p=m=>{var b=n(),o=t(b);{let d=s(()=>e(f)(48));N(o,()=>e(E),(k,y)=>{y(k,{onclick:()=>{},get help(){return e(d)},children:(P,g)=>{var c=aa(),w=K(c);be(w,{});var C=T(w,2);{var V=h=>{var L=Z();Q(I=>$(L,I),[()=>e(f)(345)]),r(h,L)};i(C,h=>{a.compact||h(V)})}M(c),r(P,c)},$$slots:{default:!0}})})}r(m,b)};i(_,m=>{a.button?m(l):m(p,!1)},!0)}r(u,v)};i(j,u=>{a.version?u(D):u(B,!1)},!0)}r(R,x)};i(ie,R=>{a.version&&a.button?R(le):R(ae,!1)},!0)}r(F,O)};i(ke,F=>{a.version&&a.source?F(we):F(xe,!1)})}r(se,me),Ve()}export{ja as B};
