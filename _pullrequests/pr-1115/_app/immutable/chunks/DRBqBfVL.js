import"./DsnmJJEf.js";import{aU as I,n as u,ao as w,h as T,A,z as q,aV as V,aW as W,t as j,B as g,p as z,I as B,y as C,H as D,a as H,b as M,g as m,aj as O,u as P,al as x}from"./Dt6m180S.js";import{e as S}from"./BqMK6M8M.js";import{a as U,t as F}from"./C3lM_sxf.js";import{r as G,s as h,c as J}from"./CoW7fDOc.js";import{p as _}from"./cmrSGx3m.js";import{b as K}from"./h9n_zjAt.js";function L(e,r,l=r){var o=new WeakSet;I(e,"input",async t=>{var c=t?e.defaultValue:e.value;if(c=y(e)?k(c):c,l(c),u!==null&&o.add(u),await w(),c!==(c=r())){var s=e.selectionStart,f=e.selectionEnd,d=e.value.length;if(e.value=c??"",f!==null){var a=e.value.length;s===f&&f===d&&a>d?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=s,e.selectionEnd=Math.min(f,a))}}}),(T&&e.defaultValue!==e.value||A(r)==null&&e.value)&&(l(y(e)?k(e.value):e.value),u!==null&&o.add(u)),q(()=>{var t=r();if(e===document.activeElement){var c=V??u;if(o.has(c))return}y(e)&&t===k(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}const b=new Set;function ee(e,r,l,o,t=o){var c=l.getAttribute("type")==="checkbox",s=e;let f=!1;if(r!==null)for(var d of r)s=s[d]??=[];s.push(l),I(l,"change",()=>{var a=l.__value;c&&(a=E(s,a,l.checked)),t(a)},()=>t(c?[]:null)),q(()=>{var a=o();if(T&&l.defaultChecked!==l.checked){f=!0;return}c?(a=a||[],l.checked=a.includes(l.__value)):l.checked=W(l.__value,a)}),j(()=>{var a=s.indexOf(l);a!==-1&&s.splice(a,1)}),b.has(s)||(b.add(s),g(()=>{s.sort((a,n)=>a.compareDocumentPosition(n)===4?-1:1),b.delete(s)})),g(()=>{if(f){var a;if(c)a=E(s,a,l.checked);else{var n=s.find(i=>i.checked);a=n?.__value}t(a)}})}function E(e,r,l){for(var o=new Set,t=0;t<e.length;t+=1)e[t].checked&&o.add(e[t].__value);return l||o.delete(r),Array.from(o)}function y(e){var r=e.type;return r==="number"||r==="range"}function k(e){return e===""?null:+e}var N=B("<input/>");function ae(e,r){z(r,!0);let l=_(r,"value",15),o=_(r,"onblur",3,()=>{}),t=_(r,"placeholder",3,""),c=_(r,"type",3,"text"),s=_(r,"Type",19,()=>K.string);const f=P(()=>typeof t()=="string"?{idle:t(),focused:t()}:t());let d=O(!1);var a=N();G(a);let n;U(a,(i,v)=>F?.(i,v),()=>r.discreet?r.label:void 0),C(()=>L(a,l)),D(()=>{h(a,"type",c()),h(a,"aria-label",r.label),n=J(a,1,"inline-input svelte-85fk79",null,n,{monospace:r.monospace,discreet:r.discreet}),a.required=r.required,h(a,"placeholder",m(d)?m(f).focused:m(f).idle)}),S("focus",a,()=>x(d,!0)),S("blur",a,async({currentTarget:i})=>{x(d,!1);try{await o()(s().assert(i.value),v=>l(v))}catch(v){r.onerror?.(v)}}),H(e,a),M()}export{ae as I,L as a,ee as b};
