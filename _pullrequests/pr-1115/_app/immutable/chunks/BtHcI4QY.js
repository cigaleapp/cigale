import"./DsnmJJEf.js";import{p as C,I as B,a as h,b as J,ak as i,g as t,u as s,K as o,F as E,ai as f,H as R,am as O,G as Q}from"./Dt6m180S.js";import{s as w}from"./BqMK6M8M.js";import{i as F}from"./cmrSGx3m.js";import{A as S}from"./KZAX_y5O.js";import{E as T}from"./CWl5damc.js";import{g as K}from"./CyxF7S3o.js";import{p as U}from"./BQgdUy12.js";import{B as N}from"./cTmsNnlM.js";import{I as V}from"./B1xj52Zc.js";import{h as A,r as W}from"./h9n_zjAt.js";import{u as X}from"./B5pl0uZM.js";import{b as Y}from"./CoW7fDOc.js";import{R as P}from"./CH5FdpMr.js";var Z=B('<div class="text svelte-1kjizd4"><p class="svelte-1kjizd4"><!> </p> <small> </small></div> <div class="actions"><!></div>',1),$=B('<div class="text empty svelte-1kjizd4"><p class="svelte-1kjizd4"><!></p> <small> </small></div> <div class="actions"><!></div>',1),tt=B('<div class="metadata-link svelte-1kjizd4"><!></div>');function pt(D,a){C(a,!0);const I=s(()=>Y("main")),m=s(()=>a.key?W(a.key):void 0),b=s(()=>U.params.id??""),j=s(()=>a.key?a.definitions.find(d=>A(d.id,t(b))===A(a.key,t(b))):void 0);var z=tt(),G=i(z);{var H=d=>{var _=Z(),l=E(_),v=i(l),p=i(v);V(p,{tooltip:!1,get type(){return t(j).type}});var u=f(p);o(v);var g=f(v,2),k=i(g,!0);o(g),o(l);var x=f(l,2),M=i(x);{const n=e=>{S(e,{})};N(M,{onclick:async()=>K("/(app)/protocols/[id]/metadata/[metadata]/infos",{id:t(b),metadata:t(m)}),_w_snippet_0:n,children:(e,r)=>{{let y=s(()=>[n]),c=s(()=>t(I).c(231));P(e,{get t(){return t(y)},get x(){return t(c)}})}},$$slots:{_w_snippet_0:!0,default:!0}})}o(x),R(()=>{w(u,` ${(t(j).label||t(m))??""}`),w(k,a.help)}),h(d,_)},L=d=>{var _=$(),l=E(_),v=i(l);{const n=e=>{T(e,{})};var p=i(v);{let e=s(()=>[n]),r=s(()=>t(I).c(232));P(p,{get t(){return t(e)},get x(){return t(r)}})}o(v)}var u=f(v,2),g=i(u,!0);o(u),o(l);var k=f(l,2),x=i(k);{var M=n=>{{let e=s(()=>X(async r=>{if(!a.key)return;const y=A(t(m),r.id);a.definitions.some(c=>c.id===y)||(await a.oncreate?.(t(m)),r.metadata.push(t(m))),a.onupdate?.(r,t(m)),await K("/(app)/protocols/[id]/metadata/[metadata]/infos",{id:r.id,metadata:t(m)})}));N(n,{get onclick(){return t(e)},children:(r,y)=>{O();var c=Q();R(q=>w(c,q),[()=>t(I)(212)]),h(r,c)},$$slots:{default:!0}})}};F(x,n=>{a.oncreate&&n(M)})}o(k),R(()=>w(g,a["no-metadata"])),h(d,_)};F(G,d=>{t(j)?d(H):d(L,!1)})}o(z),h(D,z),J()}export{pt as M};
