import"./DsnmJJEf.js";import{b as $t,a as St,s as ge,r as Ha,d as ga,c as Er}from"./CoW7fDOc.js";import{o as Ua}from"./D6d8D7oP.js";import{s as za,d as Fa,bK as Na,h as dr,m as qa,R as Ba,a2 as qr,Q as Br,C as Vr,l as Va,p as pt,c as Ge,b as ft,D as ue,F as X,I as N,ak as w,K as m,ai as h,H as q,g as e,u as n,a as g,aG as Or,f as Et,G as Ie,J as dt,am as Ve,aj as be,aX as Ga,al as ae}from"./Dt6m180S.js";import{e as Yt}from"./Bmx3KKup.js";import{s as Wa}from"./BEu91mT_.js";import{p as kt,i as te,r as Ot,s as ma}from"./cmrSGx3m.js";import{w as wa}from"./C02cds9o.js";import{S as ba}from"./BnBXxctm.js";import{v as Mr}from"./q17Uu2xG.js";import{p as ut}from"./BQgdUy12.js";import{al as tt,f as ja,y as Gr,v as Ka,t as at,am as Xa,an as cr,r as Wr,ao as Ja,a0 as Ya,z as jr}from"./h9n_zjAt.js";import{l as Qa}from"./CXutPItK.js";import{e as Qt,h as ha,j as Cr,s as _a,k as Za,u as ei}from"./62CSzXnv.js";import{s as F,e as ya,d as xa}from"./BqMK6M8M.js";import{c as Zt}from"./BptB6vFW.js";import{K as ti,a as ur,t as vr}from"./C3lM_sxf.js";import{h as Kr,M as ir,B as ri,t as ai,T as ii}from"./DgZz-4De.js";import{i as er,s as ze,b as ka,a as Kt}from"./JZH0u_ZA.js";import{e as tr,C as oi,b as $a,n as Ir,f as si,x as ni}from"./C0SiBqD8.js";import{r as je,g as nt}from"./CoCzgeuV.js";import{u as z}from"./fpNj8U5y.js";import{t as Be,a as pr,f as fr}from"./DM93I2Od.js";import{b as Xr}from"./BmoBKd8Q.js";import{A as gr}from"./BuG2oAVv.js";import{B as xt,C as li}from"./BAG1AaOD.js";import{B as di}from"./cTmsNnlM.js";import{L as ci}from"./DJljq93Y.js";import{P as Sa}from"./1LLQNKI6.js";import{a as wt}from"./CWyL6lkj.js";import{B as ht}from"./BWvVnymT.js";import{D as ui,f as vi}from"./ipq46OeX.js";import{R as Oe}from"./CH5FdpMr.js";import{c as Ar}from"./BV68B1uN.js";import{a as Ea,I as Oa}from"./DRBqBfVL.js";import{B as Pr}from"./CSftjQJd.js";import{F as Jr}from"./DwPLocwb.js";import{b as pi}from"./jhyMdidl.js";import{A as fi}from"./DkZwE8qq.js";import{C as gi}from"./Dt76QxNz.js";import{L as mi}from"./DLaqQXcP.js";import{S as wi,A as bi}from"./SDlUiTWo.js";import{S as hi}from"./BiVo_KZK.js";import{S as mr}from"./BOHcG-kb.js";import{s as Yr}from"./CFbM8ao4.js";import{A as _i}from"./C6eaVtgl.js";import{C as yi}from"./BpKhbQBB.js";import{D as xi}from"./By2MCAXu.js";import{m as ki}from"./BgPK52sz.js";import{L as $i}from"./CJbDBvUJ.js";import{m as Qr}from"./yErRaHIP.js";function Si(t,r){let a=null,i=dr;var _;if(dr){a=Va;for(var p=qa(document.head);p!==null&&(p.nodeType!==Ba||p.data!==t);)p=qr(p);if(p===null)Br(!1);else{var s=qr(p);p.remove(),Vr(s)}}dr||(_=document.head.appendChild(za()));try{Fa(()=>r(_),Na)}finally{i&&(Br(!0),Vr(a))}}var Ei=["Shift","Meta","Alt","Control"],Ma=typeof navigator=="object"?navigator.platform:"",Ca=/Mac|iPod|iPhone|iPad/.test(Ma),Oi=Ca?"Meta":"Control",Mi=Ma==="Win32"?["Control","Alt"]:Ca?["Alt"]:[];function Rr(t,r){return typeof t.getModifierState=="function"&&(t.getModifierState(r)||Mi.includes(r)&&t.getModifierState("AltGraph"))}function Ci(t){return t.trim().split(" ").map(function(r){var a=r.split(/\b\+/),i=a.pop(),_=i.match(/^\((.+)\)$/);return _&&(i=new RegExp("^"+_[1]+"$")),[a=a.map(function(p){return p==="$mod"?Oi:p}),i]})}function Ii(t,r){var a=r[0],i=r[1];return!((i instanceof RegExp?!i.test(t.key)&&!i.test(t.code):i.toUpperCase()!==t.key.toUpperCase()&&i!==t.code)||a.find(function(_){return!Rr(t,_)})||Ei.find(function(_){return!a.includes(_)&&i!==_&&Rr(t,_)}))}function Ai(t,r){var a;r===void 0&&(r={});var i=(a=r.timeout)!=null?a:1e3,_=Object.keys(t).map(function(y){return[Ci(y),t[y]]}),p=new Map,s=null;return function(y){y instanceof KeyboardEvent&&(_.forEach(function(l){var f=l[0],b=l[1],D=p.get(f)||f;Ii(y,D[0])?D.length>1?p.set(f,D.slice(1)):(p.delete(f),b(y)):Rr(y,y.key)||p.delete(f)}),s&&clearTimeout(s),s=setTimeout(p.clear.bind(p),i))}}function Pi(t,r,a){var i={},_=i.event,p=_===void 0?"keydown":_,s=i.capture,y=Ai(r,{timeout:i.timeout});return t.addEventListener(p,y,s),function(){t.removeEventListener(p,y,s)}}var Ri=N('<h2 class="svelte-6wpiuz"> </h2>'),Ti=N('<dt class="svelte-6wpiuz"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></dt> <dd class="svelte-6wpiuz"> </dd>',1),Li=N('<!> <dl class="svelte-6wpiuz"></dl>',1),Di=N('<dl class="svelte-6wpiuz"><div class="empty svelte-6wpiuz"><div class="sad svelte-6wpiuz"> </div> <p> </p></div></dl>');function Hi(t,r){pt(r,!0);const a=n(()=>$t("main"));let i=kt(r,"openHelp",15),_=kt(r,"preventDefault",3,!1);const p=l=>(l instanceof KeyboardEvent||l instanceof MouseEvent)&&(l.target instanceof HTMLInputElement||l.target instanceof HTMLTextAreaElement);Ge(()=>Pi(window,Object.fromEntries(Object.entries(r.binds).flatMap(([l,f])=>{if(l.startsWith("Digit")&&!l.includes(" ")){const b=l.replace("Digit","");return[[l,f],[b,f],[`Shift+${b}`,f]]}return[[l,f]]}).map(([l,f])=>[l,async b=>{if(!f?.allowInModals&&Kr(ut)){console.warn(`a modal is open, ignoring keybinding ${l}`,ut.state);return}if(p(b)&&!l.startsWith("$mod+")){console.warn(`in input, ignoring keybinding ${l}`,b.target);return}f.when&&!f.when(b)||f.debug&&!er()||(_()&&b.preventDefault(),await f.do(b))}]))));const s=["Recadrage","Observations","Général","Navigation","Debug mode"],y=n(()=>tr(tr(r.binds).reduce((l,[f,b])=>{if(b.hidden||b.debug&&!er())return l;const D=b.group??"Général";return l[D]||(l[D]=[]),l[D].push([f,b]),l},{})).toSorted(([l],[f])=>s.indexOf(l)-s.indexOf(f)));Ge(()=>{const l=f=>{f.key==="?"&&!p(f)&&!Kr(ut)&&i()?.()};return window.addEventListener("keyup",l),()=>window.removeEventListener("keyup",l)});{let l=n(()=>e(a)(138));ir(t,{key:"modal_keyboard_shortcuts_help",get title(){return e(l)},get open(){return i()},set open(f){i(f)},children:(f,b)=>{var D=ue(),C=X(D);Yt(C,17,()=>e(y),([P,E])=>P,(P,E,x,A)=>{var R=n(()=>Or(e(E),2));let k=()=>e(R)[0],$=()=>e(R)[1];var S=Li(),L=X(S);{var M=T=>{var H=Ri(),V=w(H,!0);m(H),q(()=>F(V,k())),g(T,H)};te(L,T=>{e(y).length>=2&&T(M)})}var O=h(L,2);Yt(O,21,$,([T,{help:H}])=>T,(T,H)=>{var V=n(()=>Or(e(H),2));let j=()=>e(V)[0],Q=()=>e(V)[1].help;var G=Ti(),K=X(G),_e=w(K);Zt(_e,()=>({"--size":"1.2em"})),ti(_e.lastChild,{get shortcut(){return j()},get help(){return Q()}}),m(_e),m(K);var ee=h(K,2),ye=w(ee,!0);m(ee),q(()=>F(ye,Q())),g(T,G)}),m(O),g(P,S)},P=>{var E=Di(),x=w(E),A=w(x),R=w(A,!0);m(A);var k=h(A,2),$=w(k,!0);m(k),m(x),m(E),q((S,L)=>{F(R,S),F($,L)},[()=>e(a)(184),()=>e(a)(35)]),g(P,E)}),g(f,D)},$$slots:{default:!0}})}ft()}var Ui=Et('<svg><path fill="currentColor" d="M22 20H2v-2h1v-6.969C3 6.043 7.03 2 12 2s9 4.043 9 9.031V18h1zM5 18h14v-6.969C19 7.148 15.866 4 12 4s-7 3.148-7 7.031zm4.5 3h5a2.5 2.5 0 0 1-5 0"></path></svg>');function zi(t,r){const a=Ot(r,["$$slots","$$events","$$legacy"]);var i=Ui();St(i,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...a})),g(t,i)}var Fi=N('<a class="github-user svelte-yvr6h4"><img class="svelte-yvr6h4"/> <!></a>'),Ni=N("<!> <!> <!> <!> <!>",1),qi=N('<span class="build-date"> </span>'),Bi=N(" <a> </a> <!>",1),Vi=N('<li class="svelte-yvr6h4"><!></li>'),Gi=N('<!> <p class="svelte-yvr6h4"> </p> <ul><li class="svelte-yvr6h4"> <a> </a> <!></li> <!> <br/></ul> <p class="svelte-yvr6h4"> </p>',1),Wi=N("<a><!></a>"),ji=N('<p class="svelte-yvr6h4"><!></p>');function Ki(t,r){pt(r,!0);const a=(l,f=dt)=>{var b=Fi(),D=w(b),C=h(D,2);wt(C,()=>fetch(f().url).then(P=>P.json()),P=>{var E=Ie();q(()=>F(E,f().login)),g(P,E)},(P,E)=>{var x=n(()=>{var{name:k}=e(E);return{name:k}}),A=n(()=>e(x).name),R=Ie();q(()=>F(R,e(A)||f().login)),g(P,R)},(P,E)=>{var x=Ie();q(()=>F(x,f().login)),g(P,x)}),m(b),q(P=>{ge(b,"href",f().html_url),ge(b,"title",`@${f().login}`),ge(D,"src",f().avatar_url),ge(D,"alt",P)},[()=>e(i)(40,[f().login])]),g(l,b)},i=n(()=>$t("main")),_="a884e227225bc5174e2ae8f78448a1f4f3644abd";let p=kt(r,"open",15);function s(l){return`https://cigaleapp.github.io/cigale/${l}/pr-${tt}`}async function y(l){return fetch(s(l),{method:"HEAD"}).then(f=>f.ok).catch(()=>!1)}{const l=(b,D)=>{let C=()=>D?.().close;const P=n(()=>S=>()=>{window.open(S),C()?.()});var E=Ni(),x=X(E);{let S=n(()=>e(i)(153));ht(x,{get help(){return e(S)},onclick:()=>{ja(),window.location.reload()},children:(L,M)=>{Ve();var O=Ie();q(T=>F(O,T),[()=>e(i)(124)]),g(L,O)},$$slots:{default:!0}})}var A=h(x,2);{let S=n(()=>e(P)(`https://github.com/cigaleapp/cigale/pull/${tt}`));ht(A,{get onclick(){return e(S)},children:(L,M)=>{Ve();var O=Ie();q(T=>F(O,T),[()=>e(i)(173)]),g(L,O)},$$slots:{default:!0}})}var R=h(A,2);wt(R,()=>y("_playwright"),null,(S,L)=>{var M=ue(),O=X(M);{var T=H=>{{let V=n(()=>e(P)(s("_playwright")));ht(H,{get onclick(){return e(V)},children:(j,Q)=>{Ve();var G=Ie();q(K=>F(G,K),[()=>e(i)(165)]),g(j,G)},$$slots:{default:!0}})}};te(O,H=>{e(L)&&H(T)})}g(S,M)});var k=h(R,2);wt(k,()=>y("_vitest"),null,(S,L)=>{var M=ue(),O=X(M);{var T=H=>{{let V=n(()=>e(P)(s("_vitest")));ht(H,{get onclick(){return e(V)},children:(j,Q)=>{Ve();var G=Ie();q(K=>F(G,K),[()=>e(i)(166)]),g(j,G)},$$slots:{default:!0}})}};te(O,H=>{e(L)&&H(T)})}g(S,M)});var $=h(k,2);wt($,()=>y("_coverage"),null,(S,L)=>{var M=ue(),O=X(M);{var T=H=>{{let V=n(()=>e(P)(s("_coverage")));ht(H,{get onclick(){return e(V)},children:(j,Q)=>{Ve();var G=Ie();q(K=>F(G,K),[()=>e(i)(71)]),g(j,G)},$$slots:{default:!0}})}};te(O,H=>{e(L)&&H(T)})}g(S,M)}),g(b,E)};let f=n(()=>e(i)(77,[tt]));ir(t,{key:"modal_preview_pr",get title(){return e(f)},get open(){return p()},set open(b){p(b)},footer:l,children:(b,D)=>{const C=n(()=>`https://github.com/cigaleapp/cigale/pull/${tt}`);var P=ue(),E=X(P);wt(E,()=>fetch(`https://api.github.com/repos/cigaleapp/cigale/pulls/${tt}`).then(x=>x.json()),x=>{var A=ji();{const k=($,S=dt)=>{var L=Wi(),M=w(L);{let O=n(()=>[tt]);Oe(M,{get x(){return S()},n:!0,get a(){return e(O)}})}m(L),q(()=>ge(L,"href",e(C))),g($,L)};var R=w(A);{let $=n(()=>[k]),S=n(()=>e(i).c(76));Oe(R,{get t(){return e($)},get x(){return e(S)}})}m(A)}g(x,A)},(x,A)=>{var R=n(()=>{var{title:pe,user:xe,body:Se}=e(A);return{title:pe,user:xe,body:Se}}),k=n(()=>e(R).title),$=n(()=>e(R).user),S=n(()=>e(R).body);const L=n(()=>/(Closes|Fixes) #(\d+)/i.exec(e(S))?.[2]);var M=Gi(),O=X(M);{var T=pe=>{var xe=ue(),Se=X(xe);wt(Se,()=>fetch(`https://api.github.com/repos/cigaleapp/cigale/commits/${_}`).then(he=>he.json()),he=>{var Pe=qi(),Re=w(Pe,!0);m(Pe),q(J=>F(Re,J),[()=>e(i)(57)]),g(he,Pe)},(he,Pe)=>{var Re=n(()=>{var{commit:{committer:{date:Z}}}=e(Pe);return{date:Z}}),J=n(()=>e(Re).date);ui(he,{get value(){return e(J)},show:"both"})}),g(pe,xe)};te(O,pe=>{pe(T)})}var H=h(O,2),V=w(H,!0);m(H);var j=h(H,2),Q=w(j),G=w(Q),K=h(G),_e=w(K);m(K);var ee=h(K),ye=h(ee);a(ye,()=>e($)),m(Q);var Ue=h(Q,2);{var Qe=pe=>{var xe=Vi(),Se=w(xe);wt(Se,()=>fetch(`https://api.github.com/repos/cigaleapp/cigale/issues/${e(L)}`).then(he=>he.json()),null,(he,Pe)=>{var Re=n(()=>{var{title:Te,number:Me,user:I,html_url:B}=e(Pe);return{title:Te,number:Me,user:I,html_url:B}}),J=n(()=>e(Re).title),Z=n(()=>e(Re).number),se=n(()=>e(Re).user),ke=n(()=>e(Re).html_url),me=Bi(),qe=X(me),le=h(qe),ne=w(le);m(le);var we=h(le),We=h(we);a(We,()=>e(se)),q((Te,Me)=>{F(qe,`${Te??""} `),ge(le,"href",e(ke)),F(ne,`#${e(Z)??""} ${e(J)??""}`),F(we,` ${Me??""} `)},[()=>e(i)(179),()=>e(i)(415)]),g(he,me)}),m(xe),g(pe,xe)};te(Ue,pe=>{e(L)&&pe(Qe)})}Ve(2),m(j);var Ne=h(j,2),$e=w(Ne,!0);m(Ne),q((pe,xe,Se)=>{F(V,pe),F(G,`${xe??""} `),ge(K,"href",e(C)),F(_e,`#${tt} ${e(k)??""}`),F(ee,` ${Se??""} `),F($e,e(S))},[()=>e(i)(51),()=>e(i)(180),()=>e(i)(415)]),g(x,M)},(x,A)=>{var R=Ie();q(()=>F(R,`#${tt}`)),g(x,R)}),g(b,P)},$$slots:{footer:!0,default:!0}})}ft()}var Xi="2.0.8",Ji=500,Zr="user-agent",Pt="",ea="?",ve={FUNCTION:"function",OBJECT:"object",STRING:"string",UNDEFINED:"undefined"},He="browser",it="cpu",Ye="device",Xe="engine",Fe="os",Rt="result",c="name",o="type",u="vendor",v="version",Ae="architecture",qt="major",d="model",Xt="console",U="mobile",re="tablet",fe="smarttv",Je="wearable",Vt="xr",Nt="embedded",Mt="inapp",zr="brands",_t="formFactors",Fr="fullVersionList",Tt="platform",Nr="platformVersion",or="bitness",gt="sec-ch-ua",Yi=gt+"-full-version-list",Qi=gt+"-arch",Zi=gt+"-"+or,eo=gt+"-form-factors",to=gt+"-"+U,ro=gt+"-"+d,Ia=gt+"-"+Tt,ao=Ia+"-version",Aa=[zr,Fr,U,d,Tt,Nr,Ae,_t,or],Gt="Amazon",Ct="Apple",ta="ASUS",ra="BlackBerry",bt="Google",aa="Huawei",wr="Lenovo",ia="Honor",Wt="LG",br="Microsoft",hr="Motorola",oa="Nvidia",sa="OnePlus",_r="OPPO",Dt="Samsung",na="Sharp",Ht="Sony",yr="Xiaomi",xr="Zebra",la="Chrome",da="Chromium",lt="Chromecast",Jt="Edge",Ut="Firefox",It="Opera",kr="Facebook",ca="Sogou",At="Mobile ",zt=" Browser",Tr="Windows",io=typeof window!==ve.UNDEFINED,De=io&&window.navigator?window.navigator:void 0,yt=De&&De.userAgentData?De.userAgentData:void 0,oo=function(t,r){var a={},i=r;if(!rr(r)){i={};for(var _ in r)for(var p in r[_])i[p]=r[_][p].concat(i[p]?i[p]:[])}for(var s in t)a[s]=i[s]&&i[s].length%2===0?i[s].concat(t[s]):t[s];return a},sr=function(t){for(var r={},a=0;a<t.length;a++)r[t[a].toUpperCase()]=t[a];return r},Lr=function(t,r){if(typeof t===ve.OBJECT&&t.length>0){for(var a in t)if(ct(r)==ct(t[a]))return!0;return!1}return Bt(t)?ct(r)==ct(t):!1},rr=function(t,r){for(var a in t)return/^(browser|cpu|device|engine|os)$/.test(a)||(r?rr(t[a]):!1)},Bt=function(t){return typeof t===ve.STRING},$r=function(t){if(t){for(var r=[],a=Lt(/\\?\"/g,t).split(","),i=0;i<a.length;i++)if(a[i].indexOf(";")>-1){var _=ar(a[i]).split(";v=");r[i]={brand:_[0],version:_[1]}}else r[i]=ar(a[i]);return r}},ct=function(t){return Bt(t)?t.toLowerCase():t},Dr=function(t){return Bt(t)?Lt(/[^\d\.]/g,t).split(".")[0]:void 0},rt=function(t){for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];typeof a==ve.OBJECT&&a.length==2?this[a[0]]=a[1]:this[a]=void 0}return this},Lt=function(t,r){return Bt(r)?r.replace(t,Pt):r},Ft=function(t){return Lt(/\\?\"/g,t)},ar=function(t,r){return t=Lt(/^\s\s*/,String(t)),typeof r===ve.UNDEFINED?t:t.substring(0,r)},Hr=function(t,r){if(!(!t||!r))for(var a=0,i,_,p,s,y,l;a<r.length&&!y;){var f=r[a],b=r[a+1];for(i=_=0;i<f.length&&!y&&f[i];)if(y=f[i++].exec(t),y)for(p=0;p<b.length;p++)l=y[++_],s=b[p],typeof s===ve.OBJECT&&s.length>0?s.length===2?typeof s[1]==ve.FUNCTION?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:s.length>=3&&(typeof s[1]===ve.FUNCTION&&!(s[1].exec&&s[1].test)?s.length>3?this[s[0]]=l?s[1].apply(this,s.slice(2)):void 0:this[s[0]]=l?s[1].call(this,l,s[2]):void 0:s.length==3?this[s[0]]=l?l.replace(s[1],s[2]):void 0:s.length==4?this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):void 0:s.length>4&&(this[s[0]]=l?s[3].apply(this,[l.replace(s[1],s[2])].concat(s.slice(4))):void 0)):this[s]=l||void 0;a+=2}},Ke=function(t,r){for(var a in r)if(typeof r[a]===ve.OBJECT&&r[a].length>0){for(var i=0;i<r[a].length;i++)if(Lr(r[a][i],t))return a===ea?void 0:a}else if(Lr(r[a],t))return a===ea?void 0:a;return r.hasOwnProperty("*")?r["*"]:t},ua={ME:"4.90","NT 3.51":"3.51","NT 4.0":"4.0",2e3:["5.0","5.01"],XP:["5.1","5.2"],Vista:"6.0",7:"6.1",8:"6.2","8.1":"6.3",10:["6.4","10.0"],NT:""},va={embedded:"Automotive",mobile:"Mobile",tablet:["Tablet","EInk"],smarttv:"TV",wearable:"Watch",xr:["VR","XR"],"?":["Desktop","Unknown"],"*":void 0},so={Chrome:"Google Chrome",Edge:"Microsoft Edge","Edge WebView2":"Microsoft Edge WebView2","Chrome WebView":"Android WebView","Chrome Headless":"HeadlessChrome","Huawei Browser":"HuaweiBrowser","MIUI Browser":"Miui Browser","Opera Mobi":"OperaMobile",Yandex:"YaBrowser"},pa={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[c,At+"Chrome"]],[/webview.+edge\/([\w\.]+)/i],[v,[c,Jt+" WebView"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,v],[/opios[\/ ]+([\w\.]+)/i],[v,[c,It+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[v,[c,It+" GX"]],[/\bopr\/([\w\.]+)/i],[v,[c,It]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[v,[c,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[v,[c,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(atlas|flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:hi|lg |ovi|qute)browser|palemoon)\/v?([-\w\.]+)/i,/(brave)(?: chrome)?\/([\d\.]+)/i,/(heytap|ovi|115|surf|qwant)browser\/([\d\.]+)/i,/(qwant)(?:ios|mobile)\/([\d\.]+)/i,/(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i],[c,v],[/quark(?:pc)?\/([-\w\.]+)/i],[v,[c,"Quark"]],[/\bddg\/([\w\.]+)/i],[v,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[c,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[v,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[v,[c,"Smart "+wr+zt]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure"+zt],v],[/\bfocus\/([\w\.]+)/i],[v,[c,Ut+" Focus"]],[/ mms\/([\w\.]+)$/i],[v,[c,It+" Neon"]],[/ opt\/([\w\.]+)$/i],[v,[c,It+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[c,It+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[c,"MIUI"+zt]],[/fxios\/([\w\.-]+)/i],[v,[c,At+Ut]],[/\bqihoobrowser\/?([\w\.]*)/i],[v,[c,"360"]],[/\b(qq)\/([\w\.]+)/i],[[c,/(.+)/,"$1Browser"],v],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1"+zt],v],[/samsungbrowser\/([\w\.]+)/i],[v,[c,Dt+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[v,[c,ca+" Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,ca+" Mobile"],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[c,v],[/(lbbrowser|rekonq|steam(?= (clie|tenf|gameo)))/i],[c],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[v,c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,kr],v,[o,Mt]],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/(daum)apps[\/ ]([\w\.]+)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(bing)(?:web|sapphire)\/([\w\.]+)/i,/(instagram|snapchat|klarna)[\/ ]([-\w\.]+)/i],[c,v,[o,Mt]],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[c,"GSA"],[o,Mt]],[/(?:musical_ly|trill)(?:.+app_?version\/|_)([\w\.]+)/i],[v,[c,"TikTok"],[o,Mt]],[/\[(linkedin)app\]/i],[c,[o,Mt]],[/(zalo(?:app)?)[\/\sa-z]*([\w\.-]+)/i],[[c,/(.+)/,"Zalo"],v,[o,Mt]],[/(chromium)[\/ ]([-\w\.]+)/i],[c,v],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[c,la+" Headless"]],[/wv\).+chrome\/([\w\.]+).+edgw\//i],[v,[c,Jt+" WebView2"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,la+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[c,"Android"+zt]],[/chrome\/([\w\.]+) mobile/i],[v,[c,At+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,v],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[v,[c,At+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[c,At+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[v,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[v,"1"]],[/(webkit|khtml)\/([\w\.]+)/i],[c,v],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[c,At+Ut],v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],v],[/(wolvic|librewolf)\/([\w\.]+)/i],[c,v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[c,Ut+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+(?= .+rv\:.+gecko\/\d+)|[0-4][\w\.]+(?!.+compatible))/i,/(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/\b(links) \(([\w\.]+)/i],[c,[v,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[c,[v,/[^\d\.]+./,Pt]]],cpu:[[/\b((amd|x|x86[-_]?|wow|win)64)\b/i],[[Ae,"amd64"]],[/(ia32(?=;))/i,/\b((i[346]|x)86)(pc)?\b/i],[[Ae,"ia32"]],[/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i],[[Ae,"arm64"]],[/\b(arm(v[67])?ht?n?[fl]p?)\b/i],[[Ae,"armhf"]],[/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i],[[Ae,"arm"]],[/ sun4\w[;\)]/i],[[Ae,"sparc"]],[/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i,/((ppc|powerpc)(64)?)( mac|;|\))/i,/(?:osf1|[freopnt]{3,4}bsd) (alpha)/i],[[Ae,/ower/,Pt,ct]],[/mc680.0/i],[[Ae,"68k"]],[/winnt.+\[axp/i],[[Ae,"alpha"]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[u,Dt],[o,re]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr]|browser)[-\w]+)/i,/sec-(sgh\w+)/i],[d,[u,Dt],[o,U]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)[\/\);]/i],[d,[u,Ct],[o,U]],[/\b(?:ios|apple\w+)\/.+[\(\/](ipad)/i,/\b(ipad)[\d,]*[;\] ].+(mac |i(pad)?)os/i],[d,[u,Ct],[o,re]],[/(macintosh);/i],[d,[u,Ct]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[u,na],[o,U]],[/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i],[d,[u,ia],[o,re]],[/honor([-\w ]+)[;\)]/i],[d,[u,ia],[o,U]],[/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i],[d,[u,aa],[o,re]],[/(?:huawei) ?([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][\dc][adnt]?)\b(?!.+d\/s)/i],[d,[u,aa],[o,U]],[/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i,/\b(?:xiao)?((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i],[[d,/_/g," "],[u,yr],[o,re]],[/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/oid[^\)]+; (redmi[\-_ ]?(?:note|k)?[\w_ ]+|m?[12]\d[01]\d\w{3,6}|poco[\w ]+|(shark )?\w{3}-[ah]0|qin ?[1-3](s\+|ultra| pro)?)( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note|max|cc)?[_ ]?(?:\d{0,2}\w?)[_ ]?(?:plus|se|lite|pro)?( 5g|lte)?)(?: bui|\))/i,/ ([\w ]+) miui\/v?\d/i],[[d,/_/g," "],[u,yr],[o,U]],[/droid.+; (cph2[3-6]\d[13579]|((gm|hd)19|(ac|be|in|kb)20|(d[en]|eb|le|mt)21|ne22)[0-2]\d|p[g-l]\w[1m]10)\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[u,sa],[o,U]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[u,_r],[o,U]],[/\b(opd2(\d{3}a?))(?: bui|\))/i],[d,[u,Ke,{OnePlus:["203","304","403","404","413","415"],"*":_r}],[o,re]],[/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i],[d,[u,"BLU"],[o,U]],[/; vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[u,"Vivo"],[o,U]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[u,"Realme"],[o,U]],[/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i,/lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i],[d,[u,wr],[o,re]],[/lenovo[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i],[d,[u,wr],[o,U]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ]([\w\s]+)(\)| bui)/i,/((?:moto(?! 360)[-\w\(\) ]+|xt\d{3,4}[cgkosw\+]?[-\d]*|nexus 6)(?= bui|\)))/i],[d,[u,hr],[o,U]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[u,hr],[o,re]],[/\b(?:lg)?([vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[u,Wt],[o,re]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch|webos))(\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[u,Wt],[o,U]],[/(nokia) (t[12][01])/i],[u,d,[o,re]],[/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i,/nokia[-_ ]?(([-\w\. ]*?))( bui|\)|;|\/)/i],[[d,/_/g," "],[o,U],[u,"Nokia"]],[/(pixel (c|tablet))\b/i],[d,[u,bt],[o,re]],[/droid.+;(?: google)? (g(01[13]a|020[aem]|025[jn]|1b60|1f8f|2ybb|4s1m|576d|5nz6|8hhn|8vou|a02099|c15s|d1yq|e2ae|ec77|gh2x|kv4x|p4bc|pj41|r83y|tt9q|ur25|wvk6)|pixel[\d ]*a?( pro)?( xl)?( fold)?( \(5g\))?)( bui|\))/i],[d,[u,bt],[o,U]],[/(google) (pixelbook( go)?)/i],[u,d],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-\w\w\d\d)(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[u,Ht],[o,U]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[u,Ht],[o,re]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[u,Gt],[o,re]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[u,Gt],[o,U]],[/(playbook);[-\w\),; ]+(rim)/i],[d,u,[o,re]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/(?:blackberry|\(bb10;) (\w+)/i],[d,[u,ra],[o,U]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[u,ta],[o,re]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[u,ta],[o,U]],[/(nexus 9)/i],[d,[u,"HTC"],[o,re]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[d,/_/g," "],[o,U]],[/tcl (xess p17aa)/i,/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i],[d,[u,"TCL"],[o,re]],[/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i],[d,[u,"TCL"],[o,U]],[/(itel) ((\w+))/i],[[u,ct],d,[o,Ke,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[u,"Acer"],[o,re]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[u,"Meizu"],[o,U]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[u,"Ulefone"],[o,U]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[d,[u,"Energizer"],[o,U]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[d,[u,"Cat"],[o,U]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[d,[u,"Smartfren"],[o,U]],[/droid.+; (a(in)?(0(15|59|6[35])|142)p?)/i],[d,[u,"Nothing"],[o,U]],[/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i,/archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i],[d,[u,"Archos"],[o,re]],[/archos ([\w ]+)( b|\))/i,/; (ac[3-6]\d\w{2,8})( b|\))/i],[d,[u,"Archos"],[o,U]],[/; (n159v)/i],[d,[u,"HMD"],[o,U]],[/(imo) (tab \w+)/i,/(infinix|tecno) (x1101b?|p904|dp(7c|8d|10a)( pro)?|p70[1-3]a?|p904|t1101)/i],[u,d,[o,re]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (blu|hmd|imo|infinix|lava|oneplus|tcl|wiko)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i,/(hp) ([\w ]+\w)/i,/(microsoft); (lumia[\w ]+)/i,/(oppo) ?([\w ]+) bui/i,/(hisense) ([ehv][\w ]+)\)/i,/droid[^;]+; (philips)[_ ]([sv-x][\d]{3,4}[xz]?)/i],[u,d,[o,U]],[/(kobo)\s(ereader|touch)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[u,d,[o,re]],[/(surface duo)/i],[d,[u,br],[o,re]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[u,"Fairphone"],[o,U]],[/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i],[d,[u,oa],[o,re]],[/(sprint) (\w+)/i],[u,d,[o,U]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[u,br],[o,U]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[u,xr],[o,re]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[u,xr],[o,U]],[/(philips)[\w ]+tv/i,/smart-tv.+(samsung)/i],[u,[o,fe]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[u,Dt],[o,fe]],[/(vizio)(?: |.+model\/)(\w+-\w+)/i,/tcast.+(lg)e?. ([-\w]+)/i],[u,d,[o,fe]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,Wt],[o,fe]],[/(apple) ?tv/i],[u,[d,Ct+" TV"],[o,fe]],[/crkey.*devicetype\/chromecast/i],[[d,lt+" Third Generation"],[u,bt],[o,fe]],[/crkey.*devicetype\/([^/]*)/i],[[d,/^/,"Chromecast "],[u,bt],[o,fe]],[/fuchsia.*crkey/i],[[d,lt+" Nest Hub"],[u,bt],[o,fe]],[/crkey/i],[[d,lt],[u,bt],[o,fe]],[/(portaltv)/i],[d,[u,kr],[o,fe]],[/droid.+aft(\w+)( bui|\))/i],[d,[u,Gt],[o,fe]],[/(shield \w+ tv)/i],[d,[u,oa],[o,fe]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[u,na],[o,fe]],[/(bravia[\w ]+)( bui|\))/i],[d,[u,Ht],[o,fe]],[/(mi(tv|box)-?\w+) bui/i],[d,[u,yr],[o,fe]],[/Hbbtv.*(technisat) (.*);/i],[u,d,[o,fe]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,/.+\/(\w+)/,"$1",Ke,{LG:"lge"}],[d,ar],[o,fe]],[/(playstation \w+)/i],[d,[u,Ht],[o,Xt]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[u,br],[o,Xt]],[/(ouya)/i,/(nintendo) (\w+)/i,/(retroid) (pocket ([^\)]+))/i,/(valve).+(steam deck)/i,/droid.+; ((shield|rgcube|gr0006))( bui|\))/i],[[u,Ke,{Nvidia:"Shield",Anbernic:"RGCUBE",Logitech:"GR0006"}],d,[o,Xt]],[/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i],[d,[u,Dt],[o,Je]],[/((pebble))app/i,/(asus|google|lg|oppo|xiaomi) ((pixel |zen)?watch[\w ]*)( bui|\))/i],[u,d,[o,Je]],[/(ow(?:19|20)?we?[1-3]{1,3})/i],[d,[u,_r],[o,Je]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[u,Ct],[o,Je]],[/(opwwe\d{3})/i],[d,[u,sa],[o,Je]],[/(moto 360)/i],[d,[u,hr],[o,Je]],[/(smartwatch 3)/i],[d,[u,Ht],[o,Je]],[/(g watch r)/i],[d,[u,Wt],[o,Je]],[/droid.+; (wt63?0{2,3})\)/i],[d,[u,xr],[o,Je]],[/droid.+; (glass) \d/i],[d,[u,bt],[o,Vt]],[/(pico) ([\w ]+) os\d/i],[u,d,[o,Vt]],[/(quest( \d| pro)?s?).+vr/i],[d,[u,kr],[o,Vt]],[/mobile vr; rv.+firefox/i],[[o,Vt]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[o,Nt]],[/(aeobc)\b/i],[d,[u,Gt],[o,Nt]],[/(homepod).+mac os/i],[d,[u,Ct],[o,Nt]],[/windows iot/i],[[o,Nt]],[/droid.+; ([\w- ]+) (4k|android|smart|google)[- ]?tv/i],[d,[o,fe]],[/\b((4k|android|smart|opera)[- ]?tv|tv; rv:|large screen[\w ]+safari)\b/i],[[o,fe]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew|; hmsc).+?(mobile|vr|\d) safari/i],[d,[o,Ke,{mobile:"Mobile",xr:"VR","*":re}]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[o,re]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[o,U]],[/droid .+?; ([\w\. -]+)( bui|\))/i],[d,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[c,Jt+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[c,v],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links|dillo)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,v],[/ladybird\//i],[[c,"LibWeb"]],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,c]],os:[[/(windows nt) (6\.[23]); arm/i],[[c,/N/,"R"],[v,Ke,ua]],[/(windows (?:phone|mobile|iot))(?: os)?[\/ ]?([\d\.]*( se)?)/i,/(windows)[\/ ](1[01]|2000|3\.1|7|8(\.1)?|9[58]|me|server 20\d\d( r2)?|vista|xp)/i],[c,v],[/windows nt ?([\d\.\)]*)(?!.+xbox)/i,/\bwin(?=3| ?9|n)(?:nt| 9x )?([\d\.;]*)/i],[[v,/(;|\))/g,"",Ke,ua],[c,Tr]],[/(windows ce)\/?([\d\.]*)/i],[c,v],[/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv|ios(?=.+ip(?:ad|hone)|.+apple ?tv)|ip(?:ad|hone)(?: |.+i(?:pad)?)os|apple ?tv.+ios)[\/ ]([\w\.]+)/i,/\btvos ?([\w\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+(haiku|morphos))/i],[[c,"macOS"],[v,/_/g,"."]],[/android ([\d\.]+).*crkey/i],[v,[c,lt+" Android"]],[/fuchsia.*crkey\/([\d\.]+)/i],[v,[c,lt+" Fuchsia"]],[/crkey\/([\d\.]+).*devicetype\/smartspeaker/i],[v,[c,lt+" SmartSpeaker"]],[/linux.*crkey\/([\d\.]+)/i],[v,[c,lt+" Linux"]],[/crkey\/([\d\.]+)/i],[v,[c,lt]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[v,c],[/(ubuntu) ([\w\.]+) like android/i],[[c,/(.+)/,"$1 Touch"],v],[/(harmonyos)[\/ ]?([\d\.]*)/i,/(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen)\w*[-\/\.; ]?([\d\.]*)/i],[c,v],[/\(bb(10);/i],[v,[c,ra]],[/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i],[v,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile[;\w ]*|tablet|tv|[^\)]*(?:viera|lg(?:l25|-d300)|alcatel ?o.+|y300-f1)); rv:([\w\.]+)\).+gecko\//i],[v,[c,Ut+" OS"]],[/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i,/webos(?:[ \/]?|\.tv-20(?=2[2-9]))(\d[\d\.]*)/i],[v,[c,"webOS"]],[/web0s;.+?(?:chr[o0]me|safari)\/(\d+)/i],[[v,Ke,{25:"120",24:"108",23:"94",22:"87",6:"79",5:"68",4:"53",3:"38",2:"538",1:"537","*":"TV"}],[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[c,"watchOS"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,"Chrome OS"],v],[/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/(pico) .+os([\w\.]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/linux.+(mint)[\/\(\) ]?([\w\.]*)/i,/(mageia|vectorlinux|fuchsia|arcaos|arch(?= ?linux))[;l ]([\d\.]*)/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire|knoppix)(?: gnu[\/ ]linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/\b(aix)[; ]([1-9\.]{0,4})/i,/(hurd|linux|morphos)(?: (?:arm|x86|ppc)\w*| ?)([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) ?(r\d)?/i],[c,v],[/(sunos) ?([\d\.]*)/i],[[c,"Solaris"],v],[/\b(beos|os\/2|amigaos|openvms|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,v]]},jt=(function(){var t={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}};return rt.call(t.init,[[He,[c,v,qt,o]],[it,[Ae]],[Ye,[o,d,u]],[Xe,[c,v]],[Fe,[c,v]]]),rt.call(t.isIgnore,[[He,[v,qt]],[Xe,[v]],[Fe,[v]]]),rt.call(t.isIgnoreRgx,[[He,/ ?browser$/i],[Fe,/ ?os$/i]]),rt.call(t.toString,[[He,[c,v]],[it,[Ae]],[Ye,[u,d]],[Xe,[c,v]],[Fe,[c,v]]]),t})(),no=function(t,r){var a=jt.init[r],i=jt.isIgnore[r]||0,_=jt.isIgnoreRgx[r]||0,p=jt.toString[r]||0;function s(){rt.call(this,a)}return s.prototype.getItem=function(){return t},s.prototype.withClientHints=function(){return yt?yt.getHighEntropyValues(Aa).then(function(y){return t.setCH(new Pa(y,!1)).parseCH().get()}):t.parseCH().get()},s.prototype.withFeatureCheck=function(){return t.detectFeature().get()},r!=Rt&&(s.prototype.is=function(y){var l=!1;for(var f in this)if(this.hasOwnProperty(f)&&!Lr(i,f)&&ct(_?Lt(_,this[f]):this[f])==ct(_?Lt(_,y):y)){if(l=!0,y!=ve.UNDEFINED)break}else if(y==ve.UNDEFINED&&l){l=!l;break}return l},s.prototype.toString=function(){var y=Pt;for(var l in p)typeof this[p[l]]!==ve.UNDEFINED&&(y+=(y?" ":Pt)+this[p[l]]);return y||ve.UNDEFINED}),s.prototype.then=function(y){var l=this,f=function(){for(var D in l)l.hasOwnProperty(D)&&(this[D]=l[D])};f.prototype={is:s.prototype.is,toString:s.prototype.toString,withClientHints:s.prototype.withClientHints,withFeatureCheck:s.prototype.withFeatureCheck};var b=new f;return y(b),b},new s};function Pa(t,r){if(t=t||{},rt.call(this,Aa),r)rt.call(this,[[zr,$r(t[gt])],[Fr,$r(t[Yi])],[U,/\?1/.test(t[to])],[d,Ft(t[ro])],[Tt,Ft(t[Ia])],[Nr,Ft(t[ao])],[Ae,Ft(t[Qi])],[_t,$r(t[eo])],[or,Ft(t[Zi])]]);else for(var a in t)this.hasOwnProperty(a)&&typeof t[a]!==ve.UNDEFINED&&(this[a]=t[a])}function vt(t,r,a,i){return rt.call(this,[["itemType",t],["ua",r],["uaCH",i],["rgxMap",a],["data",no(this,t)]]),this}vt.prototype.get=function(t){return t?this.data.hasOwnProperty(t)?this.data[t]:void 0:this.data};vt.prototype.set=function(t,r){return this.data[t]=r,this};vt.prototype.setCH=function(t){return this.uaCH=t,this};vt.prototype.detectFeature=function(){if(De&&De.userAgent==this.ua)switch(this.itemType){case He:De.brave&&typeof De.brave.isBrave==ve.FUNCTION&&this.set(c,"Brave");break;case Ye:!this.get(o)&&yt&&yt[U]&&this.set(o,U),this.get(d)=="Macintosh"&&De&&typeof De.standalone!==ve.UNDEFINED&&De.maxTouchPoints&&De.maxTouchPoints>2&&this.set(d,"iPad").set(o,re);break;case Fe:!this.get(c)&&yt&&yt[Tt]&&this.set(c,yt[Tt]);break;case Rt:var t=this.data,r=function(a){return t[a].getItem().detectFeature().get()};this.set(He,r(He)).set(it,r(it)).set(Ye,r(Ye)).set(Xe,r(Xe)).set(Fe,r(Fe))}return this};vt.prototype.parseUA=function(){switch(this.itemType!=Rt&&Hr.call(this.data,this.ua,this.rgxMap),this.itemType){case He:this.set(qt,Dr(this.get(v)));break;case Fe:if(this.get(c)=="iOS"&&this.get(v)=="18.6"){var t=/\) Version\/([\d\.]+)/.exec(this.ua);t&&parseInt(t[1].substring(0,2),10)>=26&&this.set(v,t[1])}break}return this};vt.prototype.parseCH=function(){var t=this.uaCH,r=this.rgxMap;switch(this.itemType){case He:case Xe:var a=t[Fr]||t[zr],i;if(a)for(var _=0;_<a.length;_++){var p=a[_].brand||a[_],s=a[_].version;this.itemType==He&&!/not.a.brand/i.test(p)&&(!i||/Chrom/.test(i)&&p!=da||i==Jt&&/WebView2/.test(p))&&(p=Ke(p,so),i=this.get(c),i&&!/Chrom/.test(i)&&/Chrom/.test(p)||this.set(c,p).set(v,s).set(qt,Dr(s)),i=p),this.itemType==Xe&&p==da&&this.set(v,s)}break;case it:var y=t[Ae];y&&(y&&t[or]=="64"&&(y+="64"),Hr.call(this.data,y+";",r));break;case Ye:if(t[U]&&this.set(o,U),t[d]&&(this.set(d,t[d]),!this.get(o)||!this.get(u))){var l={};Hr.call(l,"droid 9; "+t[d]+")",r),!this.get(o)&&l.type&&this.set(o,l.type),!this.get(u)&&l.vendor&&this.set(u,l.vendor)}if(t[_t]){var f;if(typeof t[_t]!="string")for(var b=0;!f&&b<t[_t].length;)f=Ke(t[_t][b++],va);else f=Ke(t[_t],va);this.set(o,f)}break;case Fe:var D=t[Tt];if(D){var C=t[Nr];D==Tr&&(C=parseInt(Dr(C),10)>=13?"11":"10"),this.set(c,D).set(v,C)}this.get(c)==Tr&&t[d]=="Xbox"&&this.set(c,"Xbox").set(v,void 0);break;case Rt:var P=this.data,E=function(x){return P[x].getItem().setCH(t).parseCH().get()};this.set(He,E(He)).set(it,E(it)).set(Ye,E(Ye)).set(Xe,E(Xe)).set(Fe,E(Fe))}return this};function ot(t,r,a){if(typeof t===ve.OBJECT?(rr(t,!0)?(typeof r===ve.OBJECT&&(a=r),r=t):(a=t,r=void 0),t=void 0):typeof t===ve.STRING&&!rr(r,!0)&&(a=r,r=void 0),a)if(typeof a.append===ve.FUNCTION){var i={};a.forEach(function(b,D){i[String(D).toLowerCase()]=b}),a=i}else{var _={};for(var p in a)a.hasOwnProperty(p)&&(_[String(p).toLowerCase()]=a[p]);a=_}if(!(this instanceof ot))return new ot(t,r,a).getResult();var s=typeof t===ve.STRING?t:a&&a[Zr]?a[Zr]:De&&De.userAgent?De.userAgent:Pt,y=new Pa(a,!0),l=r?oo(pa,r):pa,f=function(b){return b==Rt?function(){return new vt(b,s,l,y).set("ua",s).set(He,this.getBrowser()).set(it,this.getCPU()).set(Ye,this.getDevice()).set(Xe,this.getEngine()).set(Fe,this.getOS()).get()}:function(){return new vt(b,s,l[b],y).parseUA().get()}};return rt.call(this,[["getBrowser",f(He)],["getCPU",f(it)],["getDevice",f(Ye)],["getEngine",f(Xe)],["getOS",f(Fe)],["getResult",f(Rt)],["getUA",function(){return s}],["setUA",function(b){return Bt(b)&&(s=ar(b,Ji)),this}]]).setUA(s),this}ot.VERSION=Xi;ot.BROWSER=sr([c,v,qt,o]);ot.CPU=sr([Ae]);ot.DEVICE=sr([d,u,o,Xt,U,fe,re,Je,Nt]);ot.ENGINE=ot.OS=sr([c,v]);var lo=Et('<svg><path fill="currentColor" d="M9.973 18H11v-5h2v5h1.027c.132-1.202.745-2.193 1.74-3.277c.113-.122.832-.867.917-.973a6 6 0 1 0-9.37-.002c.086.107.807.853.918.974c.996 1.084 1.609 2.076 1.741 3.278M10 20v1h4v-1zm-4.246-5a8 8 0 1 1 12.49.002C17.624 15.774 16 17 16 18.5V21a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-2.5C8 17 6.375 15.774 5.754 15"></path></svg>');function co(t,r){const a=Ot(r,["$$slots","$$events","$$legacy"]);var i=lo();St(i,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...a})),g(t,i)}var uo=N("<p> </p>"),vo=N('<textarea rows="6"></textarea>'),po=N('<form class="svelte-2tf4df"><!> <!> <!></form>'),fo=N("<!> <!>",1);function fa(t,r){pt(r,!0);let a=be(""),i=be(""),_=be(void 0),p=be(void 0),s=be(!1);const y=n(()=>r.type==="bug"?ri:co),l=n(()=>$t("main"));Qt("general",{[r.type==="bug"?"$mod+!":"$mod+*"]:{help:r.type==="bug"?e(l)(407):e(l)(408),do:()=>e(_)?.()}});var f=fo(),b=X(f);{let C=n(()=>r.type==="bug"?"Signaler un bug":"Proposer une fonctionnalité");ir(b,{get key(){return`modal_submit_issue_${r.type??""}`},get title(){return e(C)},get open(){return e(_)},set open(P){ae(_,P,!0)},get close(){return e(p)},set close(P){ae(p,P,!0)},children:(P,E)=>{var x=po(),A=w(x);Jr(A,{label:S=>{const L=M=>{var O=ue(),T=X(O);{var H=V=>{var j=uo(),Q=w(j,!0);m(j),q(G=>F(Q,G),[()=>e(l)(424)]),g(V,j)};te(T,V=>{r.type==="bug"&&V(H)})}g(M,O)};{let M=n(()=>[L]),O=n(()=>e(l).c(409));Oe(S,{get t(){return e(M)},get x(){return e(O)}})}},children:(S,L)=>{var M=vo();Ga(M),Ea(M,()=>e(a),O=>ae(a,O)),g(S,M)}});var R=h(A,2);{let $=n(()=>e(l)(410));Jr(R,{get label(){return e($)},children:(S,L)=>{{let M=n(()=>e(l)(410));Oa(S,{required:!0,get label(){return e(M)},get value(){return e(i)},set value(O){ae(i,O,!0)}})}}})}var k=h(R,2);{let $=n(()=>e(s)?"always":!1);Pr(k,{submits:!0,get loading(){return e($)},onclick:void 0,children:(S,L)=>{Ve();var M=Ie();q(O=>F(M,O),[()=>e(l)(414)]),g(S,M)},$$slots:{default:!0}})}m(x),ya("submit",x,async $=>{ae(s,!0),$.preventDefault();const S=ot(navigator.userAgent),L=z.currentSession?{images:await Gr("Image","sessionId",z.currentSession.id),observations:await Gr("Observation","sessionId",z.currentSession.id),toString(){return`${this.images.length} images, ${this.observations.length} observations`}}:void 0,M=Ka(),O=await fetch("https://mkissue.cigale.gwen.works/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:r.type,title:e(i),body:e(a),metadata:{Version:Mr,"User Agent":navigator.userAgent,Page:window.location.href,OS:S.os.toString(),Browser:S.browser.toString(),Device:S.device.toString(),Protocol:z.currentProtocol?`${z.currentProtocol.id} v${z.currentProtocol.version}`:"_None_","Open session":L?.toString()||"_None_","Database rev.":M.version.toString()}})});if(ae(s,!1),e(p)?.(),O.ok){const T=await O.json();Be.success(e(l)(411),{data:!0,lifetime:1/0,action:new URL(T.url),labels:{action:e(l)(412)}})}else console.error("Error submitting issue:",O.statusText,await O.text()),Be.error(e(l)(413))}),g(P,x)},$$slots:{default:!0}})}var D=h(b,2);{let C=n(()=>r.type==="bug"?"Signaler un bug":"Proposer une fonctionnalité"),P=n(()=>r.type==="bug"?"open-bug-report":"open-feature-request");xt(D,{onclick:()=>e(_)?.(),get help(){return e(C)},get"data-testid"(){return e(P)},children:(E,x)=>{var A=ue(),R=X(A);Ar(R,()=>e(y),(k,$)=>{$(k,{})}),g(E,A)},$$slots:{default:!0}})}g(t,f),ft()}var go=Et('<svg><path fill="currentColor" d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2h.1A6.98 6.98 0 0 0 10 7m-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938A8 8 0 0 0 4 12"></path></svg>');function mo(t,r){const a=Ot(r,["$$slots","$$events","$$legacy"]);var i=go();St(i,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...a})),g(t,i)}var wo=Et('<svg><path fill="currentColor" d="M3.34 17a10 10 0 0 1-.979-2.326a3 3 0 0 0 .003-5.347a10 10 0 0 1 2.5-4.337a3 3 0 0 0 4.632-2.674a10 10 0 0 1 5.007.003a3 3 0 0 0 4.632 2.671a10.06 10.06 0 0 1 2.503 4.336a3 3 0 0 0-.002 5.347a10 10 0 0 1-2.501 4.337a3 3 0 0 0-4.632 2.674a10 10 0 0 1-5.007-.002a3 3 0 0 0-4.631-2.672A10 10 0 0 1 3.339 17m5.66.196a5 5 0 0 1 2.25 2.77q.75.07 1.499.002a5 5 0 0 1 2.25-2.772a5 5 0 0 1 3.526-.564q.435-.614.748-1.298A5 5 0 0 1 18 12c0-1.26.47-2.437 1.273-3.334a8 8 0 0 0-.75-1.298A5 5 0 0 1 15 6.804a5 5 0 0 1-2.25-2.77q-.75-.071-1.5-.001A5 5 0 0 1 9 6.804a5 5 0 0 1-3.526.564q-.436.614-.747 1.298A5 5 0 0 1 6 12c0 1.26-.471 2.437-1.273 3.334a8 8 0 0 0 .75 1.298A5 5 0 0 1 9 17.196M12 15a3 3 0 1 1 0-6a3 3 0 0 1 0 6m0-2a1 1 0 1 0 0-2a1 1 0 0 0 0 2"></path></svg>');function bo(t,r){const a=Ot(r,["$$slots","$$events","$$legacy"]);var i=wo();St(i,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...a})),g(t,i)}var ho=Et('<svg><path fill="currentColor" d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12m0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8M11 1h2v3h-2zm0 19h2v3h-2zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414zM23 11v2h-3v-2zM4 11v2H1v-2z"></path></svg>');function _o(t,r){const a=Ot(r,["$$slots","$$events","$$legacy"]);var i=ho();St(i,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...a})),g(t,i)}var yo=N('<p class="details svelte-qprabs"> </p>'),xo=N('<p class="details svelte-qprabs"> </p>'),ko=N("<a> </a>"),$o=N("<a> </a>"),So=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <dialog class="container svelte-qprabs" data-testid="app-settings"><header class="svelte-qprabs"> </header> <div class="listParam svelte-qprabs"><div class="label svelte-qprabs"> </div> <div class="setting svelte-qprabs"><!> <!></div> <div class="label svelte-qprabs"><!></div> <div class="setting svelte-qprabs"><!></div> <div class="label svelte-qprabs"> </div> <div class="setting svelte-qprabs"><!></div> <div class="label svelte-qprabs"> </div> <div class="setting svelte-qprabs"><input type="range" min="0.5" max="2" step="0.01" list="gridsize-marks"/> <datalist id="gridsize-marks"><option></option></datalist></div> <div class="label svelte-qprabs"> </div> <div class="setting svelte-qprabs"><!></div> <div class="label svelte-qprabs"><!></div> <div class="setting svelte-qprabs"><!> <div class="number-input svelte-qprabs"><!></div> <!></div></div> <section class="actions svelte-qprabs"><!> <!></section> <footer class="svelte-qprabs"><!></footer></dialog>',1);function Eo(t,r){pt(r,!0);const a=n(()=>$t("main"));let i=be(!1),_=be(void 0);const p=n(()=>Cr()&&Kt().notifications);Ge(()=>{window.addEventListener("mouseup",({target:I})=>{I!==e(_)&&(e(_)?.contains(I)||ae(i,!1))})});const s=n(Kt),y=n(()=>e(s).theme),l=n(()=>e(s).showTechnicalMetadata),f=n(()=>e(s).gridSize),b=n(()=>e(s).language),D=n(()=>e(s).parallelism);let C=be(!0);Ge(()=>{window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",I=>{ae(C,!I.matches)})});const P=n(()=>{const I=Kt().theme;return I==="auto"?e(C)?"light":"dark":I});wa(()=>e(P),I=>{window.nativeWindow?.setControlsColor(getComputedStyle(document.documentElement).getPropertyValue(`--${I}__fg-primary`))});var E=So(),x=X(E);{let I=n(()=>e(i)?"Fermer":"Réglages");Zt(x,()=>({"--fg":"var(--trigger-fg)","--bg":"var(--trigger-bg)","--hover-fg":"var(--trigger-hover-fg)","--hover-bg":"var(--trigger-hover-bg)"})),xt(x.lastChild,{"data-testid":"settings-button",get help(){return e(I)},onclick:()=>{ae(i,!e(i))},children:(B,W)=>{var Y=ue(),ie=X(Y);{var Ee=Le=>{gi(Le,{})},st=Le=>{bo(Le,{})};te(ie,Le=>{e(i)?Le(Ee):Le(st,!1)})}g(B,Y)},$$slots:{default:!0}}),m(x)}var A=h(x,2);let R;var k=w(A),$=w(k,!0);m(k);var S=h(k,2),L=w(S),M=w(L,!0);m(L);var O=h(L,2),T=w(O);{let I=n(()=>e(y)==="auto"?e(C):e(y)==="light"),B=n(()=>({on:_o,off:mo}));mr(T,{get value(){return e(I)},onchange:async W=>{await ze("theme",W?"light":"dark")},get icons(){return e(B)}})}var H=h(T,2);{let I=n(()=>e(y)==="auto"),B=n(()=>e(a)(159));xt(H,{get disabled(){return e(I)},onclick:async()=>await ze("theme","auto"),get help(){return e(B)},children:(W,Y)=>{mi(W,{})},$$slots:{default:!0}})}m(O);var V=h(O,2);{const I=(B,W=dt)=>{var Y=yo(),ie=w(Y,!0);m(Y),q(Ee=>F(ie,Ee),[()=>e(a).x(W())]),g(B,Y)};var j=w(V);{let B=n(()=>[I]),W=n(()=>e(a).c(353));Oe(j,{get t(){return e(B)},get x(){return e(W)}})}m(V)}var Q=h(V,2),G=w(Q);mr(G,{"data-testid":"notifications",get value(){return e(p)},onchange:async I=>{I?(await ha(),ze("notifications",Cr())):ze("notifications",!1)}}),m(Q);var K=h(Q,2),_e=w(K,!0);m(K);var ee=h(K,2),ye=w(ee);mr(ye,{"data-testid":"debug-mode",get value(){return e(l)},onchange:async I=>{await ze("showTechnicalMetadata",I)}}),m(ee);var Ue=h(ee,2),Qe=w(Ue,!0);m(Ue);var Ne=h(Ue,2),$e=w(Ne);Ha($e);var pe=h($e,2),xe=w(pe);xe.value=xe.__value="1",m(pe),m(Ne);var Se=h(Ne,2),he=w(Se,!0);m(Se);var Pe=h(Se,2),Re=w(Pe);{const I=(W,Y=dt)=>{const ie=n(()=>({en:"English",fr:"Français",ja:"日本語"}));Ve();var Ee=Ie();q(()=>F(Ee,e(ie)[Y()]||Y())),g(W,Ee)};let B=n(()=>e(a)(113));hi(Re,{"data-testid":"language-selection",get"aria-label"(){return e(B)},"clickable-custom-options":!0,options:["en","fr"],get value(){return e(b)},onchange:async W=>{await ze("language",W),window.location.reload()},customOption:I,$$slots:{customOption:!0}})}m(Pe);var J=h(Pe,2);{const I=(B,W=dt)=>{var Y=xo(),ie=w(Y,!0);m(Y),q(Ee=>F(ie,Ee),[()=>e(a).x(W())]),g(B,Y)};var Z=w(J);{let B=n(()=>[I]),W=n(()=>e(a).c(334));Oe(Z,{get t(){return e(B)},get x(){return e(W)}})}m(J)}var se=h(J,2),ke=w(se);{let I=n(()=>e(a)(335));xt(ke,{get help(){return e(I)},onclick:async()=>{await ze("parallelism",Math.max(1,e(D)-1))},children:(B,W)=>{wi(B,{})},$$slots:{default:!0}})}var me=h(ke,2),qe=w(me);{let I=n(()=>e(a)(336));Oa(qe,{get label(){return e(I)},get value(){return e(D)},onblur:async B=>{await ze("parallelism",Number.parseInt(B))}})}m(me);var le=h(me,2);{let I=n(()=>e(a)(337));xt(le,{get help(){return e(I)},onclick:async()=>{await ze("parallelism",e(D)+1)},children:(B,W)=>{fi(B,{})},$$slots:{default:!0}})}m(se),m(S);var ne=h(S,2),we=w(ne);ht(we,{onclick:()=>{r.openKeyboardShortcuts?.()},children:(I,B)=>{Ve();var W=Ie();q(Y=>F(W,Y),[()=>e(a)(138)]),g(I,W)},$$slots:{default:!0}});var We=h(we,2);{let I=n(()=>e(a)(171));ht(We,{get help(){return e(I)},onclick:()=>{r.openPrepareForOfflineUse?.()},children:(B,W)=>{Ve();var Y=Ie();q(ie=>F(Y,ie),[()=>e(a)(136)]),g(B,Y)},$$slots:{default:!0}})}m(ne);var Te=h(ne,2);{const I=W=>{var Y=ko(),ie=w(Y,!0);m(Y),q(Ee=>{ge(Y,"href","https://github.com/cigaleapp/cigale/tree/a884e227225bc5174e2ae8f78448a1f4f3644abd"),F(ie,Ee)},[()=>"a884e227225bc5174e2ae8f78448a1f4f3644abd".slice(0,7)]),g(W,Y)},B=(W,Y=dt)=>{var ie=$o();ie.__click=()=>{ae(i,!1)};var Ee=w(ie,!0);m(ie),q((st,Le)=>{ge(ie,"href",st),F(Ee,Le)},[()=>je("/about"),()=>e(a).x(Y())]),g(W,ie)};var Me=w(Te);{let W=n(()=>[I,B]),Y=n(()=>e(a).c(45));Oe(Me,{get t(){return e(W)},get x(){return e(Y)}})}m(Te)}m(A),pi(A,I=>ae(_,I),()=>e(_)),q((I,B,W,Y,ie,Ee)=>{A.open=e(i)?!0:void 0,R=ga(A,"",R,I),F($,B),F(M,W),F(_e,Y),F(Qe,ie),F(he,Ee)},[()=>({"color-scheme":ka()}),()=>e(a)(148),()=>e(a)(167),()=>e(a)(123),()=>e(a)(164),()=>e(a)(112)]),ya("blur",$e,async()=>ze("gridSize",e(f))),Ea($e,()=>e(f),I=>{const B=at.Settings.state;B[B.findIndex(W=>W.id==="user")].gridSize=I}),g(t,E),ft()}xa(["click"]);var Oo=Et('<svg><path fill="currentColor" d="m19 3l4 5h-3v12h-2V8h-3zm-5 15v2H3v-2zm0-7v2H3v-2zm-2-7v2H3V4z"></path></svg>');function Mo(t,r){const a=Ot(r,["$$slots","$$events","$$legacy"]);var i=Oo();St(i,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...a})),g(t,i)}var Co=Et('<svg><path fill="currentColor" d="M20 4v12h3l-4 5l-4-5h3V4zm-8 14v2H3v-2zm2-7v2H3v-2zm0-7v2H3V4z"></path></svg>');function Io(t,r){const a=Ot(r,["$$slots","$$events","$$legacy"]);var i=Co();St(i,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...a})),g(t,i)}var Ao=N('<div class="icon svelte-1w1wea9"><!></div> <div class="label svelte-1w1wea9"> </div> <div class="icon svelte-1w1wea9"><!></div>',1),Po=N('<div class="inference svelte-1w1wea9"><!></div>');function Sr(t,r){pt(r,!0);const a=n(()=>{switch(ut.route.id){case"/(app)/(sidepanel)/crop":return r.tab==="crop";case"/(app)/(sidepanel)/classify":return r.tab==="classify";case"/(app)/(sidepanel)/import":return r.tab==="import";default:return!1}});function i(C,P){return{type:"selectable",data:{direction:null},key:C,label:P,selected:r.currentModelIndex===C,async onclick(){await r.setModel(C),e(a)&&r.currentModelIndex!==C&&window.location.reload()}}}const _=n(()=>ki(z.currentProtocol??{metadataOrder:void 0})),p=n(()=>at.Metadata.state.filter(C=>Ya(C.id)===z.currentProtocolId).sort(e(_))),s=n(()=>e(p).filter(C=>C.sortable)),y=n(()=>e(p).filter(C=>C.groupable)),l=n(()=>z.currentSession?{sort:z.currentSession.sort[r.tab]??z.currentSession.sort.global,group:z.currentSession.group[r.tab]??z.currentSession.group.global}:void 0);async function f(C,P){if(!z.currentSession||!e(l))return;const E={...e(l)[C],...P};if(cr(C,E.field)&&!E.metadata){console.warn("Not updating in DB yet, user needs to select metadata too");return}if(C==="sort"){const x=Yr({...z.currentSession.sort,[r.tab]:{direction:"asc",...E}});await at.Session.update(z.currentSession.id,"sort",x)}else{const x=Yr({...z.currentSession.group,[r.tab]:{...E}});await at.Session.update(z.currentSession.id,"group",x)}}var b=Po(),D=w(b);{const C=(x,A=dt)=>{xt(x,ma({help:""},A,{children:(R,k)=>{_i(R,{})},$$slots:{default:!0}}))},P=(x,A,R)=>{let k=()=>A?.().direction,$=()=>R?.().label,S=()=>R?.().selected,L=()=>R?.().type;var M=Ao(),O=X(M),T=w(O);{var H=ee=>{Io(ee,{})},V=ee=>{var ye=ue(),Ue=X(ye);{var Qe=$e=>{Mo($e,{})},Ne=$e=>{var pe=ue(),xe=X(pe);{var Se=he=>{yi(he,{})};te(xe,he=>{S()&&he(Se)},!0)}g($e,pe)};te(Ue,$e=>{S()&&k()==="desc"?$e(Qe):$e(Ne,!1)},!0)}g(ee,ye)};te(T,ee=>{S()&&k()==="asc"?ee(H):ee(V,!1)})}m(O);var j=h(O,2),Q=w(j,!0);m(j);var G=h(j,2),K=w(G);{var _e=ee=>{bi(ee,{})};te(K,ee=>{L()==="submenu"&&ee(_e)})}m(G),q(()=>F(Q,$())),g(x,M)};let E=n(()=>[{testid:`${r.tab}-settings-sort`,label:"Trier par…",items:tr(Xa).map(([x,{label:A}])=>{const R=e(l)?.sort.direction??null,k=e(l)?.sort.field,$=e(l)?.sort.metadata,S=k===x;return cr("sort",x)?{type:"submenu",data:{direction:null},label:A,selected:S,submenu:{label:"Métadonnée",testid:`${r.tab}-settings-sort-by-${x}-metadata`,empty:"Le protocole ne définit aucune métadonnée triable.",items:e(s).map(M=>({type:"selectable",data:{direction:R},key:M.id,label:M.label||Wr(M.id),selected:S&&$===M.id,closeOnSelect:!1,async onclick(){S&&$===M.id?await f("sort",{direction:R==="asc"?"desc":"asc"}):await f("sort",{metadata:M.id,field:x})}}))}}:{key:x,label:A,selected:S,data:{direction:R},type:"selectable",closeOnSelect:!1,async onclick(){S?await f("sort",{direction:R==="asc"?"desc":"asc"}):await f("sort",{field:x})}}})},{label:"Regrouper par…",items:tr(Ja).map(([x,{label:A}])=>{const R=e(l)?.group.field,k=e(l)?.group.metadata,$=R===x;return cr("group",x)?{type:"submenu",data:{direction:null},label:A,selected:$,submenu:{label:"Métadonnée",testid:`${r.tab}-settings-group-by-${x}-metadata`,empty:"Le protocole ne définit aucune métadonnée groupable.",items:e(y).map(L=>({type:"selectable",data:{direction:null},key:L.id,label:L.label||Wr(L.id),selected:$&&k===L.id,closeOnSelect:!1,async onclick(){$&&k===L.id?await f("group",{field:"none"}):await f("group",{metadata:L.id,field:x})}}))}}:{type:"selectable",data:{direction:null},key:x,label:A,selected:$,closeOnSelect:!1,async onclick(){await f("group",{field:x})}}})},...oi(z.currentProtocol&&r.models.length>0,{label:"Modèle d'inférence",testid:`${r.tab}-settings-inference-model`,items:[i(-1,"Aucune inférence"),...r.models.map((x,A)=>i(A,x.name??`Modèle ${A+1}`))]})]);xi(D,{get testid(){return`${r.tab??""}-settings`},get items(){return e(E)},trigger:C,item:P,$$slots:{trigger:!0,item:!0}})}m(b),g(t,b),ft()}var Ro=N('<div class="progress-overlay svelte-1nmekgl"> </div>'),To=N('<button class="pr-number svelte-1nmekgl"><!></button>'),Lo=N('<div class="line svelte-1nmekgl"></div>'),Do=N('<div class="line svelte-1nmekgl"></div>'),Ho=N('<div class="line svelte-1nmekgl"></div>'),Uo=N('<div class="line svelte-1nmekgl"></div>'),zo=N('<div class="line svelte-1nmekgl"></div>'),Fo=N('<div class="steps svelte-1nmekgl"><a class="session-link svelte-1nmekgl" data-testid="goto-current-session"> <!></a> <div class="with-inference-indicator svelte-1nmekgl"><a data-testid="goto-import" class="svelte-1nmekgl"><!></a> <!></div> <div class="separator svelte-1nmekgl"><!></div> <div class="with-inference-indicator svelte-1nmekgl"><a data-testid="goto-crop" class="svelte-1nmekgl"><!></a> <!></div> <div class="separator svelte-1nmekgl"><!></div> <div class="with-inference-indicator svelte-1nmekgl"><a data-testid="goto-classify" class="svelte-1nmekgl"><!></a> <!></div> <div class="separator svelte-1nmekgl"><!></div> <a data-testid="goto-results" class="svelte-1nmekgl"><!></a></div>'),No=N('<div class="line svelte-1nmekgl"></div>'),qo=N('<div class="line svelte-1nmekgl"></div>'),Bo=N('<div class="steps svelte-1nmekgl"><a data-testid="goto-sessions" class="svelte-1nmekgl"><!></a> <a data-testid="goto-protocols" class="svelte-1nmekgl"><!></a></div>'),Vo=N('<div class="notifications svelte-1nmekgl"><!> <!></div>'),Go=N('<nav data-testid="app-nav" class="svelte-1nmekgl"><div class="logo svelte-1nmekgl"><button data-testid="goto-home" class="svelte-1nmekgl"><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button> <!></div> <!> <aside><!> <!> <!> <div class="settings svelte-1nmekgl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div></aside></nav>'),Wo=N('<!> <header><div class="progressbar svelte-1nmekgl"><!></div> <!></header>',1);function jo(t,r){pt(r,!0);let a=kt(r,"progress",3,0),i=kt(r,"eta",3,1/0),_=kt(r,"progressbarOnly",3,!1);const p=n(()=>ut.url.hash.replace(/^#/,"")),s=n(()=>at.Image.state.length>0);let y=be(void 0),l=be(void 0),f=be(void 0),b=be(!0),D=be(!1),C=be(!1);Ge(()=>{ae(C,"nativeWindow"in window)}),Ge(()=>{e(l)&&window.nativeWindow?.setControlsHeight(e(l))}),Ge(()=>{window.nativeWindow?.setProgress($a(a(),0,1)),a()>=1&&window.nativeWindow?.startCallingAttention()});const P=n(()=>i()<1/0&&a()>0&&a()<1);Ge(()=>{if(e(C))return;const T=document.title.replace(/^(⏳ \d+% ·|🆗) /,"");a()>=1||e(D)?document.title=`🆗 ${T}`:a()===0?document.title=T:document.title=`⏳ ${jr(a())} · ${T}`}),Ge(()=>{document.addEventListener("processing-queue-drained",()=>{e(b)||ae(D,!0)}),window.addEventListener("focus",()=>{ae(D,!1),ae(b,!0)}),window.addEventListener("blur",()=>{ae(b,!1)})});const E=n(()=>$t("main"));Qt("navigation",{"g p":{do:()=>nt("/"),help:e(E)(59)},"g i":{do:()=>nt("/import"),help:e(E)(106)},"g r":{do:()=>nt("/crop"),help:e(E)(141)},"g n":{do:()=>nt("/classify"),help:e(E)(64)},"g x":{do:()=>nt("/results"),help:e(E)(92)},"g m":{do:()=>nt("/protocols"),help:e(E)(98)}});var x=Wo(),A=X(x);{var R=T=>{Ki(T,{get open(){return e(f)},set open(H){ae(f,H,!0)}})};te(A,T=>{T(R)})}var k=h(A,2);let $;var S=w(k),L=w(S);Sa(L,{get progress(){return a()}}),m(S);var M=h(S,2);{var O=T=>{var H=Go(),V=w(H),j=w(V);j.__click=async()=>{z.currentSession?(await nt("/(app)/sessions"),await _a(null)):await nt("/")};var Q=w(j);{var G=J=>{var Z=Ro(),se=w(Z,!0);m(Z),q(ke=>F(se,ke),[()=>jr(a())]),pr(3,Z,()=>fr),g(J,Z)};te(Q,J=>{e(P)&&J(G)})}var K=h(Q,2);Zt(K,()=>({"--stroke-width":"75","--size":"2rem","--fill":"transparent"})),ci(K.lastChild,{}),m(K),m(j),ur(j,(J,Z)=>vr?.(J,Z),()=>e(P)?`Termine ${vi(Date.now()+i(),{addSuffix:!0,includeSeconds:!0})}`:"Accueil");var _e=h(j,2);{var ee=J=>{var Z=To();Z.__click=function(...ke){e(f)?.apply(this,ke)};var se=w(Z);{let ke=n(()=>e(E).c(132)),me=n(()=>[tt]);Oe(se,{get x(){return e(ke)},get a(){return e(me)}})}m(Z),g(J,Z)};te(_e,J=>{J(ee)})}m(V);var ye=h(V,2);{var Ue=J=>{var Z=Fo(),se=w(Z),ke=w(se),me=h(ke);{var qe=de=>{var oe=Lo();g(de,oe)};te(me,de=>{e(p)===`/sessions/${z.currentSession.id}`&&de(qe)})}m(se),ur(se,(de,oe)=>vr?.(de,oe),()=>"Session");var le=h(se,2),ne=w(le);{const de=oe=>{var ce=ue(),Ze=X(ce);{var et=Ce=>{var mt=Do();g(Ce,mt)};te(Ze,Ce=>{e(p)=="/import"&&Ce(et)})}g(oe,ce)};var we=w(ne);{let oe=n(()=>[de]),ce=n(()=>e(E).c(105));Oe(we,{get t(){return e(oe)},get x(){return e(ce)}})}m(ne)}var We=h(ne,2);Sr(We,{tab:"import",models:[],currentModelIndex:-1,setModel:async()=>{}}),m(le);var Te=h(le,2),Me=w(Te);gr(Me,{}),m(Te);var I=h(Te,2),B=w(I);{const de=oe=>{var ce=ue(),Ze=X(ce);{var et=Ce=>{var mt=Ho();g(Ce,mt)};te(Ze,Ce=>{e(p).startsWith("/crop")&&Ce(et)})}g(oe,ce)};var W=w(B);{let oe=n(()=>[de]),ce=n(()=>e(E).c(140));Oe(W,{get t(){return e(oe)},get x(){return e(ce)}})}m(B)}var Y=h(B,2);Sr(Y,{tab:"crop",get models(){return z.cropModels},get currentModelIndex(){return z.selectedCropModel},setModel:async de=>z.setModelSelections({crop:de})}),m(I);var ie=h(I,2),Ee=w(ie);gr(Ee,{}),m(ie);var st=h(ie,2),Le=w(st);{const de=oe=>{var ce=ue(),Ze=X(ce);{var et=Ce=>{var mt=Uo();g(Ce,mt)};te(Ze,Ce=>{e(p)=="/classify"&&Ce(et)})}g(oe,ce)};var Ra=w(Le);{let oe=n(()=>[de]),ce=n(()=>e(E).c(63));Oe(Ra,{get t(){return e(oe)},get x(){return e(ce)}})}m(Le)}var Ta=h(Le,2);Sr(Ta,{tab:"classify",get models(){return z.classificationModels},get currentModelIndex(){return z.selectedClassificationModel},setModel:async de=>z.setModelSelections({classification:de})}),m(st),ur(st,(de,oe)=>vr?.(de,oe),()=>z.processing.task==="detection"&&z.processing.progress<1?"Veuillez attendre la fin de l'analyse des images avant de les classifier":void 0);var nr=h(st,2),La=w(nr);gr(La,{}),m(nr);var lr=h(nr,2);{const de=oe=>{var ce=ue(),Ze=X(ce);{var et=Ce=>{var mt=zo();g(Ce,mt)};te(Ze,Ce=>{e(p)=="/results"&&Ce(et)})}g(oe,ce)};var Da=w(lr);{let oe=n(()=>[de]),ce=n(()=>e(E).c(418));Oe(Da,{get t(){return e(oe)},get x(){return e(ce)}})}m(lr)}m(Z),q((de,oe,ce,Ze,et)=>{ge(se,"href",de),F(ke,`${z.currentSession.name??""} `),ge(ne,"href",oe),ge(ne,"aria-disabled",!z.currentProtocol),ge(B,"href",ce),ge(B,"aria-disabled",!z.currentProtocol||!e(s)),ge(Le,"href",Ze),ge(Le,"aria-disabled",!z.currentProtocol||!e(s)||z.processing.task==="detection"&&z.processing.progress<1),ge(lr,"href",et)},[()=>je("/(app)/sessions/[id]",{id:z.currentSession.id}),()=>je("/import"),()=>ut.route.id!=="/(app)/(sidepanel)/crop/[image]"&&z.imageOpenedInCropper?je("/(app)/(sidepanel)/crop/[image]",{image:z.imageOpenedInCropper}):je("/crop"),()=>je("/classify"),()=>je("/results")]),pr(1,Z,()=>fr,()=>({duration:100})),g(J,Z)},Qe=J=>{var Z=Bo(),se=w(Z);{const le=ne=>{var we=ue(),We=X(we);{var Te=Me=>{var I=No();g(Me,I)};te(We,Me=>{e(p).startsWith("/sessions")&&Me(Te)})}g(ne,we)};var ke=w(se);{let ne=n(()=>[le]),we=n(()=>e(E).c(380));Oe(ke,{get t(){return e(ne)},get x(){return e(we)}})}m(se)}var me=h(se,2);{const le=ne=>{var we=ue(),We=X(we);{var Te=Me=>{var I=qo();g(Me,I)};te(We,Me=>{e(p).startsWith("/protocols")&&Me(Te)})}g(ne,we)};var qe=w(me);{let ne=n(()=>[le]),we=n(()=>e(E).c(381));Oe(qe,{get t(){return e(ne)},get x(){return e(we)}})}m(me)}m(Z),q((le,ne)=>{ge(se,"href",le),ge(me,"href",ne)},[()=>je("/sessions"),()=>je("/protocols")]),pr(1,Z,()=>fr,()=>({duration:100})),g(J,Z)};te(ye,J=>{z.currentSession?J(Ue):J(Qe,!1)})}var Ne=h(ye,2);let $e;var pe=w(Ne);{var xe=J=>{var Z=Vo(),se=w(Z);{const me=le=>{zi(le,{})};let qe=n(()=>e(E)(350));di(se,{get help(){return e(qe)},onclick:async()=>{await ha(),ze("notifications",Cr())},_w_snippet_6:me,children:(le,ne)=>{{let we=n(()=>[me]),We=n(()=>e(E).c(351));Oe(le,{get t(){return e(we)},get x(){return e(We)}})}},$$slots:{_w_snippet_6:!0,default:!0}})}var ke=h(se,2);{let me=n(()=>e(E)(352));xt(ke,{onclick:()=>ze("notifications",!1),get help(){return e(me)},children:(qe,le)=>{li(qe,{})},$$slots:{default:!0}})}m(Z),g(J,Z)};te(pe,J=>{Kt().notifications===null&&J(xe)})}var Se=h(pe,2);fa(Se,{type:"bug"});var he=h(Se,2);fa(he,{type:"feature"});var Pe=h(he,2),Re=w(Pe);Zt(Re,()=>({"--navbar-height":`${e(y)??""}px`})),Eo(Re.lastChild,{get openPrepareForOfflineUse(){return r.openPrepareForOfflineUse},get openKeyboardShortcuts(){return r.openKeyboardShortcuts}}),m(Re),m(Pe),m(Ne),m(H),q(()=>$e=Er(Ne,1,"svelte-1nmekgl",null,$e,{native:e(C)})),Xr(H,"clientHeight",J=>ae(l,J)),g(T,H)};te(M,T=>{_()||T(O)})}m(k),q(()=>$=Er(k,1,"svelte-1nmekgl",null,$,{"native-window":e(C)})),Xr(k,"clientHeight",T=>ae(y,T)),g(t,x),ft()}xa(["click"]);async function Ko(t,r){const a=at.Protocol.state.filter(p=>t.includes(p.id));if(a.length<t.length)throw new Error(`Some protocols not found in ${t.join(", ")}`);const i=[...a.flatMap(p=>p.crop.infer?.map(s=>s.model)??[]),...a.flatMap(p=>p.metadata.map(s=>at.Metadata.getFromState(s)).filter(Ir).flatMap(({infer:s})=>s&&"neural"in s?s.neural.map(({model:y})=>y):[]))],_=await Promise.allSettled(i.map((p,s)=>si(p,{cacheAs:"model",onProgress({total:y,transferred:l}){r?.({done:l,total:y,modelNo:s,modelURL:Qr(p)})}})));if(_.some(p=>p.status==="rejected"))throw new Error("Could not download all models: "+_.map((p,s)=>{if(p.status!=="fulfilled")return`${Qr(i[s])}: ${p.reason}`}).filter(Ir).join("; "))}var Xo=N('<li class="svelte-au9nsu"><span class="url svelte-au9nsu"> </span> <!></li>'),Jo=N("<!> ",1),Yo=N('<p> </p> <ul class="bars svelte-au9nsu"></ul> <section class="state svelte-au9nsu"><!></section>',1);function Qo(t,r){pt(r,!0);const a=n(()=>$t("main"));let i=kt(r,"open",15),_=be(void 0),p=be(void 0);async function s(){await Ko(at.Protocol.state.map(b=>b.id),({modelNo:b,...D})=>{y.set(b,D)}).catch(b=>{ae(_,b,!0)})}Ge(()=>{e(l)&&y.values().every(b=>b.done>=b.total)&&ae(_,!0)});let y=new ba;const l=n(()=>y.size>0),f=n(()=>ai(e(_)===!0?"success":"error"));{const b=(C,P)=>{let E=()=>P?.().close;var x=ue(),A=X(x);{var R=$=>{Pr($,{get loading(){return e(l)},onclick:s,children:(S,L)=>{Ve();var M=Ie();q(O=>F(M,O),[()=>e(a)(75)]),g(S,M)},$$slots:{default:!0}})},k=$=>{Pr($,{onclick:()=>{y.clear(),ae(_,void 0),E()?.()},children:(S,L)=>{Ve();var M=Ie();q(O=>F(M,O),[()=>e(a)(93)]),g(S,M)},$$slots:{default:!0}})};te(A,$=>{e(_)!==!0?$(R):$(k,!1)})}g(C,x)};let D=n(()=>e(a)(136));ir(t,{key:"modal_prepare_for_offline",get title(){return e(D)},get open(){return i()},set open(C){i(C)},get close(){return e(p)},set close(C){ae(p,C,!0)},footer:b,children:(C,P)=>{var E=Yo(),x=X(E),A=w(x,!0);m(x);var R=h(x,2);Yt(R,21,()=>y,([O,{done:T,total:H,modelURL:V}])=>O,(O,T)=>{var H=n(()=>Or(e(T),2));let V=()=>e(H)[1].done,j=()=>e(H)[1].total,Q=()=>e(H)[1].modelURL;var G=Xo(),K=w(G),_e=w(K,!0);m(K);var ee=h(K,2);{let ye=n(()=>$a(V()/j(),0,1));Sa(ee,{alwaysActive:!0,get progress(){return e(ye)}})}m(G),q(()=>F(_e,Q())),g(O,G)}),m(R);var k=h(R,2);let $;var S=w(k);{var L=O=>{const T=H=>{var V=ue(),j=X(V);Ar(j,()=>e(f),(Q,G)=>{G(Q,{})}),g(H,V)};{let H=n(()=>[T]),V=n(()=>e(a).c(8));Oe(O,{get t(){return e(H)},get x(){return e(V)}})}},M=O=>{var T=ue(),H=X(T);{var V=Q=>{var G=Jo(),K=X(G);Ar(K,()=>e(f),(ee,ye)=>{ye(ee,{})});var _e=h(K);q(()=>F(_e,` ${e(_)??""}`)),g(Q,G)},j=Q=>{var G=ue(),K=X(G);{var _e=ee=>{const ye=Ue=>{$i(Ue,{})};{let Ue=n(()=>[ye]),Qe=n(()=>e(a).c(2));Oe(ee,{get t(){return e(Ue)},get x(){return e(Qe)}})}};te(K,ee=>{y.size>0&&ee(_e)},!0)}g(Q,G)};te(H,Q=>{e(_)!==void 0?Q(V):Q(j,!1)},!0)}g(O,T)};te(S,O=>{e(_)===!0?O(L):O(M,!1)})}m(k),q(O=>{F(A,O),$=ga(k,"",$,{color:`var(--fg-${e(_)===!0?"success":e(l)?"secondary":"error"})`})},[()=>e(a)(170)]),g(C,E)},$$slots:{footer:!0,default:!0}})}ft()}const Zo=new ba;let Ur=be("full");function Zs(t){Ge(()=>(ae(Ur,t,!0),()=>{ae(Ur,"full")}))}var es=N("<base/>"),ts=N('<!> <!> <!> <section class="toasts svelte-1v2axqk" data-testid="toasts-area"></section> <div><!></div>',1);function en(t,r){pt(r,!0);const a=n(()=>r.data.swarpc),i=n(()=>r.data.parallelism);Za({swarpc:e(a),cancellers:Zo,parallelism:e(i)}),ei.initialize(100);const _={capture(){return ni(z,"currentSessionId")},async restore({currentSessionId:k}){await _a(k)}},p=n(()=>at.Image.state.map(k=>k.fileId).filter(Ir));wa(()=>e(p),k=>{for(const $ of k)(async()=>z.hasPreviewURL($)||await Qa($))()});const s=n(()=>$t("main"));Qt("general",{"$mod+s":{help:"",hidden:!0,do:()=>Be.info(e(s)(131))},"i d e v":{help:e(s)(25),do:async()=>{await ze("showTechnicalMetadata",!er())}}}),Qt("debugmode",Object.fromEntries(["warn","error","info","debug","success"].map(k=>{const $={warn:()=>Be.warn("Example warning toast"),error:()=>Be.error("Example error toast"),info:()=>Be.info("Example info toast"),debug:()=>Be.add("debug","Example debug toast"),success:()=>Be.success("Example success toast")};return[`t t ${k.charAt(0)}`,{help:`Summon a ${k} toast`,debug:!0,allowInModals:!0,when:er,do:$[k]}]}))),Ge(()=>{document.documentElement.style.colorScheme=ka()}),Ua(()=>{navigator.serviceWorker.ready.then(k=>{localStorage.getItem("sw-version")!==Mr&&(localStorage.setItem("sw-version",Mr),Be.info(e(s)(363))),k.addEventListener("updatefound",()=>{console.info("Update found in service worker"),Be.info(e(s)(364),{lifetime:1/0,labels:{action:e(s)(365)},action(){location.reload()}})})})});let y=be(void 0),l=be(void 0);var f={snapshot:_},b=ts();Si("1v2axqk",k=>{var $=es();q(S=>ge($,"href",S),[()=>je("/")==="/"?"":je("/")+"index.html"]),g(k,$)});var D=X(b);Hi(D,{preventDefault:!0,get binds(){return z.keybinds},get openHelp(){return e(y)},set openHelp(k){ae(y,k,!0)}});var C=h(D,2);Qo(C,{get open(){return e(l)},set open(k){ae(l,k,!0)}});var P=h(C,2);{let k=n(()=>e(Ur)==="hidden");jo(P,{get openKeyboardShortcuts(){return e(y)},get openPrepareForOfflineUse(){return e(l)},get progressbarOnly(){return e(k)},get progress(){return z.processing.progress},get eta(){return z.eta}})}var E=h(P,2);Yt(E,21,()=>Be.items("default"),k=>k.id,(k,$)=>{{let S=n(()=>e($).callbacks.action instanceof URL?e($).callbacks.action:async()=>e($).callbacks.action?.(e($)));ii(k,ma(()=>e($),{get action(){return e($).labels.action},get dismiss(){return e($).labels.close},get onaction(){return e(S)},ondismiss:async()=>{await e($).callbacks.closed?.(e($)),Be.remove(e($).id)}}))}}),m(E);var x=h(E,2);let A;var R=w(x);return Wa(R,()=>r.children??dt),m(x),q(k=>A=Er(x,1,"contents svelte-1v2axqk",null,A,k),[()=>({padded:!ut.route.id?.includes("/(sidepanel)")&&!ut.route.id?.includes("protocols/[id]/")})]),g(t,b),ft(f)}export{en as _,Zs as n};
