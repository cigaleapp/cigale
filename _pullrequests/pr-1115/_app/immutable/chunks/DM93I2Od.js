import{a7 as R,E as M,bp as L,bq as B,y as H,br as U,bk as x,aR as j,B as q,J as N,A as W,bs as D,bt as G,aj as I,g as C,al as O}from"./Dt6m180S.js";import{b as J}from"./BqMK6M8M.js";import{D as K,F as V}from"./h9n_zjAt.js";import{m as Y,e as Q}from"./C0SiBqD8.js";const X=()=>performance.now(),b={tick:r=>requestAnimationFrame(r),now:()=>X(),tasks:new Set};function z(){const r=b.now();b.tasks.forEach(t=>{t.c(r)||(b.tasks.delete(t),t.f())}),b.tasks.size!==0&&b.tick(z)}function Z(r){let t;return b.tasks.size===0&&b.tick(z),{promise:new Promise(e=>{b.tasks.add(t={c:r,f:e})}),abort(){b.tasks.delete(t)}}}function g(r,t){x(()=>{r.dispatchEvent(new CustomEvent(t))})}function tt(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const t=r.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(e=>e[0].toUpperCase()+e.slice(1)).join("")}function S(r){const t={},e=r.split(";");for(const i of e){const[a,o]=i.split(":");if(!a||o===void 0)break;const s=tt(a.trim());t[s]=o.trim()}return t}const et=r=>r;function lt(r,t,e,i){var a=(r&D)!==0,o=(r&G)!==0,s=a&&o,u=(r&U)!==0,w=s?"both":a?"in":"out",c,f=t.inert,v=t.style.overflow,l,m;function _(){return x(()=>c??=e()(t,i?.()??{},{direction:w}))}var d={is_global:u,in(){if(t.inert=f,!a){m?.abort(),m?.reset?.();return}o||l?.abort(),g(t,"introstart"),l=P(t,_(),m,1,()=>{g(t,"introend"),l?.abort(),l=c=void 0,t.style.overflow=v})},out(y){if(!o){y?.(),c=void 0;return}t.inert=!0,g(t,"outrostart"),m=P(t,_(),l,0,()=>{g(t,"outroend"),y?.()})},stop:()=>{l?.abort(),m?.abort()}},h=R;if((h.nodes.t??=[]).push(d),a&&J){var n=u;if(!n){for(var p=h.parent;p&&(p.f&M)!==0;)for(;(p=p.parent)&&(p.f&L)===0;);n=!p||(p.f&B)!==0}n&&H(()=>{W(()=>d.in())})}}function P(r,t,e,i,a){var o=i===1;if(j(t)){var s,u=!1;return q(()=>{if(!u){var h=t({direction:o?"in":"out"});s=P(r,h,e,i,a)}}),{abort:()=>{u=!0,s?.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(e?.deactivate(),!t?.duration)return a(),{abort:N,deactivate:N,reset:N,t:()=>i};const{delay:w=0,css:c,tick:f,easing:v=et}=t;var l=[];if(o&&e===void 0&&(f&&f(0,1),c)){var m=S(c(0,1));l.push(m,m)}var _=()=>1-i,d=r.animate(l,{duration:w,fill:"forwards"});return d.onfinish=()=>{d.cancel();var h=e?.t()??1-i;e?.abort();var n=i-h,p=t.duration*Math.abs(n),y=[];if(p>0){var k=!1;if(c)for(var F=Math.ceil(p/16.666666666666668),T=0;T<=F;T+=1){var E=h+n*v(T/F),A=S(c(E,1-E));y.push(A),k||=A.overflow==="hidden"}k&&(r.style.overflow="hidden"),_=()=>{var $=d.currentTime;return h+n*v($/p)},f&&Z(()=>{if(d.playState!=="running")return!1;var $=_();return f($,1-$),!0})}d=r.animate(y,{duration:p,fill:"forwards"}),d.onfinish=()=>{_=()=>i,f?.(i,1-i),a()}},{abort:()=>{d&&(d.cancel(),d.effect=null,d.onfinish=N)},deactivate:()=>{a=N},reset:()=>{i===0&&f?.(1,0)},t:()=>_()}}function rt(r){return Math.trunc(r*K)}const it={default:{lifetime:3e3,capacity:3},exporter:{lifetime:1/0,capacity:1/0},protocolcreator:{lifetime:1/0,capacity:1/0}};class ot{#t=I();get pools(){return C(this.#t)}set pools(t){O(this.#t,t,!0)}#e=I();get currentPoolName(){return C(this.#e)}set currentPoolName(t){O(this.#e,t,!0)}constructor(t,e){this.currentPoolName=e,this.pools=Y(t,i=>({items:[],...i}))}get pool(){return this.pools[this.currentPoolName]}setCurrentPool(t){this.#r(t),this.freeze(this.currentPoolName),this.currentPoolName=t,this.unfreeze(this.currentPoolName)}items(t=void 0){return t&&this.#r(t),this.pools[t??this.currentPoolName].items}#r(t){if(!this.pools[t])throw new Error(`Toast pool ${t} does not exist`)}add(t,e,i){if(!e)return;const{labels:a,data:o,closed:s,action:u,lifetime:w="inferred",...c}=i??{},f={closed:s,action:u};if(Object.values(f).some(Boolean)&&!o)throw new Error("You must provide data if you're using callbacks");const v=V(),l={addedAt:new Date,id:v,message:e.replaceAll(`
`,"; "),type:t,labels:a??{},callbacks:f,data:o??null,lifetime:w==="inferred"?this.#o(e):w,...c};return Number.isFinite(l.lifetime)&&this.#i(l),this.pools[this.currentPoolName].items=[...this.items().slice(0,this.pool.capacity-1),l],v}withUndo(t,e,{undo:i,commit:a,...o}){if(!e)return;const s=this;return this.add(t,e,{lifetime:4*this.#o(e),data:[],...o,closed:a,action:u=>{i(),s.remove(u.id,s.currentPoolName,{silent:!0})},labels:{action:"Annuler"}})}info(t,e){return this.add("info",t,e)}warn(t,e){return this.add("warning",t,e)}error(t,e){return this.add("error",t?.toString()??"Erreur inattendue",{...e,lifetime:e?.lifetime??"inferred"})}success(t,e){return this.add("success",t,e)}async remove(t,e,{silent:i=!1}={}){for(const[a,{items:o}]of Q(this.pools)){if(e&&e!==a)continue;const s=o.find(u=>u.id===t);if(!s)return;i||await s.callbacks.closed?.(s),this.pools[a].items=this.items(a).filter(u=>u.id!==t)}}async clear(t=this.currentPoolName){const e=this.items(t);await Promise.all(e.map(i=>i.callbacks?.closed?i.callbacks.closed(i):Promise.resolve())),this.pools[t].items=[]}freeze(t=this.currentPoolName){for(const e of this.items(t).filter(i=>i.timeoutHandle))clearTimeout(e.timeoutHandle)}unfreeze(t=this.currentPoolName){for(const e of this.items(t).filter(i=>i.timeoutHandle))this.#i(e)}#i(t){t.timeoutHandle=setTimeout(()=>{this.remove(t.id)},t.lifetime)}#o(t){const e=t.split(" ").length+t.split(" ").length;return this.pool.lifetime+rt(e/300)}}const dt=new ot(it,"default"),at=r=>r;function st(r){const t=r-1;return t*t*t+1}function pt(r,{delay:t=0,duration:e=400,easing:i=at}={}){const a=+getComputedStyle(r).opacity;return{delay:t,duration:e,easing:i,css:o=>`opacity: ${o*a}`}}function mt(r,{delay:t=0,duration:e=400,easing:i=st,axis:a="y"}={}){const o=getComputedStyle(r),s=+o.opacity,u=a==="y"?"height":"width",w=parseFloat(o[u]),c=a==="y"?["top","bottom"]:["left","right"],f=c.map(n=>`${n[0].toUpperCase()}${n.slice(1)}`),v=parseFloat(o[`padding${f[0]}`]),l=parseFloat(o[`padding${f[1]}`]),m=parseFloat(o[`margin${f[0]}`]),_=parseFloat(o[`margin${f[1]}`]),d=parseFloat(o[`border${f[0]}Width`]),h=parseFloat(o[`border${f[1]}Width`]);return{delay:t,duration:e,easing:i,css:n=>`overflow: hidden;opacity: ${Math.min(n*20,1)*s};${u}: ${n*w}px;padding-${c[0]}: ${n*v}px;padding-${c[1]}: ${n*l}px;margin-${c[0]}: ${n*m}px;margin-${c[1]}: ${n*_}px;border-${c[0]}-width: ${n*d}px;border-${c[1]}-width: ${n*h}px;min-${u}: 0`}}export{lt as a,pt as f,mt as s,dt as t};
