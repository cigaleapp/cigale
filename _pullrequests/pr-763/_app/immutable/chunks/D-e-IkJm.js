import"./DsnmJJEf.js";import{p as b,b as v,g as r,u as a}from"./Bn_ZbADV.js";import{p as c,s as I,r as C}from"./dHQvgpC_.js";import{t as x}from"./CgGYYexj.js";import{C as M}from"./DN3Kp7NE.js";import{i as O}from"./KMAftsCj.js";import{u as i}from"./C6TF2dQr.js";import{n as g}from"./DvdFYW7d.js";function j(d,e){b(e,!0);const m=c(e,"highlighted",3,!1),u=C(e,["$$slots","$$events","$$legacy","observation","images","highlighted"]),o=a(()=>e.images.some(({id:t})=>i.queuedImages.has(t))?"queued":e.images.some(({id:t})=>i.loadingImages.has(t))?"loading":e.images.some(({id:t})=>i.erroredImages.has(t))?"errored":"ok"),l=a(()=>{if(r(o)==="errored")return e.images.map(({id:t})=>i.erroredImages.get(t)).filter(g).join("; ");if(O())return`${e.observation.id} @ ${e.observation.addedAt.toISOString()}`}),n=a(()=>e.images.length>0?e.images[0]:void 0);{let t=a(()=>r(n)?.fileId?i.previewURLs.get(r(n).fileId):void 0),f=a(()=>i.selection.includes(e.observation.id)),h=a(()=>e.images.map(s=>i.cropMetadataValueOf(s)?.value).filter(g).map(s=>x(s)));M(d,I({get id(){return e.observation.id},get title(){return e.observation.label},get image(){return r(t)},get selected(){return r(f)},get stacksize(){return e.observation.images.length},boxes:"apply-first",get tooltip(){return r(l)},get status(){return r(o)},get highlighted(){return m()}},()=>u,{get boundingBoxes(){return r(h)}}))}v()}export{j as C};
