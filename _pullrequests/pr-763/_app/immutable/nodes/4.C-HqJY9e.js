import"../chunks/DsnmJJEf.js";import{p as F,e as I,d as S,a as p,b as G,c as k,ay as o,az as n,r as s,aa as M,g as l,u as q,s as H,i as J}from"../chunks/Bn_ZbADV.js";import{a as _}from"../chunks/C0Q0tU0C.js";import{s as K}from"../chunks/D9gih6mG.js";import{a as N}from"../chunks/BgDQWD78.js";import{i as E}from"../chunks/dHQvgpC_.js";import{_ as O,g as Q,s as T}from"../chunks/ByTqR5TD.js";import{t as V,f as W}from"../chunks/D4q3eRn6.js";import{L as B}from"../chunks/i04FUm_M.js";import{P as X}from"../chunks/BbqYytGl.js";import{i as Y}from"../chunks/KMAftsCj.js";import{u as c}from"../chunks/C6TF2dQr.js";import{t as Z}from"../chunks/CM1wOxol.js";import{s as $}from"../chunks/DvdFYW7d.js";const D=P=>{var i=I(),d=S(i);{var h=u=>{const m=q(()=>{const{model:a}=c.cropModels[c.selectedCropModel];return{model:a}}),x=q(()=>new URL(typeof l(m).model=="string"?l(m).model:l(m).model?.url));var t=ee(),r=o(t),e=o(r,!0);s(r),s(t),M((a,v)=>{T(t,"href",a),_(e,v)},[()=>l(x).toString(),()=>l(x).pathname.split("/").at(-1)]),p(u,t)};E(d,u=>{c.cropInferenceAvailable&&u(h)})}p(P,i)};var ee=k('<a target="_blank" class="svelte-9zb7ys"><code class="svelte-9zb7ys"> </code></a>'),re=k('<pre class="svelte-9zb7ys"> </pre>'),te=k('<section class="loading errored svelte-9zb7ys"><!> <h2 class="svelte-9zb7ys"> </h2> <p class="svelte-9zb7ys"> </p> <p class="source svelte-9zb7ys"><!></p> <p class="message svelte-9zb7ys"> </p> <!></section>'),ae=k('<section class="loading svelte-9zb7ys"><!> <p> </p> <p class="source svelte-9zb7ys"><!></p> <div class="progressbar svelte-9zb7ys"><!></div></section>');function be(P,i){F(i,!0);const d=q(()=>O(Q("main")));let h=H(0);async function u(t){if(!c.currentProtocol||!c.cropInferenceAvailable)return;const r=c.currentProtocol.crop.infer?.[t]?.model;r&&await i.data.swarpc.loadModel.broadcast({protocolId:c.currentProtocol.id,request:r,task:"detection"},e=>{J(h,$(e.values())/i.data.parallelism)}).catch(e=>{console.error(e),Z.error(l(d).t(93))})}var m=I(),x=S(m);N(x,()=>u(c.selectedCropModel),t=>{var r=ae(),e=o(r);B(e,{loading:!0});var a=n(e,2),v=o(a,!0);s(a);var f=n(a,2),g=o(f);D(g),s(f);var w=n(f,2),b=o(w);X(b,{percentage:!0,alwaysActive:!0,get progress(){return l(h)}}),s(w),s(r),M(L=>_(v,L),[()=>l(d).t(57)]),V(1,r,()=>W,()=>({duration:100})),p(t,r)},(t,r)=>{var e=I(),a=S(e);K(a,()=>i.children),p(t,e)},(t,r)=>{var e=te(),a=o(e);B(a,{variant:"error"});var v=n(a,2),f=o(v,!0);s(v);var g=n(v,2),w=o(g,!0);s(g);var b=n(g,2),L=o(b);D(L),s(b);var A=n(b,2),R=o(A,!0);s(A);var U=n(A,2);{var j=y=>{var z=re(),C=o(z);s(z),M(()=>_(C,`
					${l(r)?.stack??"(no stack trace available)"??""}
				`)),p(y,z)};E(U,y=>{Y()&&y(j)})}s(e),M((y,z,C)=>{_(f,y),_(w,z),_(R,C)},[()=>l(d).t(141),()=>l(d).t(114),()=>l(r)?.toString()??"Erreur inattendue"]),p(t,e)}),p(P,m),G()}export{be as component};
