import"./DsnmJJEf.js";import{f as u,a as d,p as h,b as v,aa as M,ab as $,g as t,u as n,aB as b}from"./CKFr55HY.js";import{a as w,_ as P,g as S}from"./B0sfP6zc.js";import{r as j,p as y}from"./BnINZmlg.js";import{a as L}from"./BSJa-gCr.js";import{o as x,i as A,t as C}from"./BfjK8oC1.js";import{M as O}from"./D8CcyO4e.js";import{t as B}from"./C4Cali0V.js";var T=u('<svg><path fill="currentColor" d="M13 14h-2a9 9 0 0 0-7.968 4.81A10 10 0 0 1 3 18C3 12.477 7.477 8 13 8V2.5L23.5 11L13 19.5zm-2-2h4v3.308L20.321 11L15 6.692V10h-2a7.98 7.98 0 0 0-6.057 2.774A11 11 0 0 1 11 12"></path></svg>');function W(c,a){const o=j(a,["$$slots","$$events","$$legacy"]);var s=T();w(s,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...o})),d(c,s)}function q(c,a){h(a,!0);const o=n(()=>P(S("main")));let s=y(a,"open",15),i=n(()=>C.Protocol.getFromState(a.id));{let f=n(()=>t(o).t(207)),_=n(()=>t(o).t(31)),g=n(()=>t(o).t(143));O(c,{get title(){return t(f)},key:"modal_delete_protocol",get cancel(){return t(_)},get confirm(){return t(g)},onconfirm:async()=>{await x(["Protocol","Metadata","MetadataOption"],{},async e=>{if(!t(i))return;e.objectStore("Protocol").delete(t(i).id);const p=t(i).metadata.filter(r=>t(i)&&A(t(i).id,r)),l=await e.objectStore("MetadataOption").getAll();for(const r of p)e.objectStore("Metadata").delete(r),l.filter(m=>m.id.startsWith(`${r}:`)).forEach(m=>e.objectStore("MetadataOption").delete(m.id))}),B.success(t(o).t(148)),a.ondelete?.()},get open(){return s()},set open(e){s(e)},children:(e,p)=>{b();var l=M();$(r=>L(l,r),[()=>t(o).t(105)]),d(e,l)},$$slots:{default:!0}})}v()}export{q as M,W as S};
