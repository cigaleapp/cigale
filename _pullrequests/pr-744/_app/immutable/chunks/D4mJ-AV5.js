import"./DsnmJJEf.js";import{aG as E,al as v,a9 as w,z as I,m as q,o as T,aH as A,aI as V,y as z,q as k,p as C,c as D,l as G,ab as H,a as M,b as O,g as _,s as P,u as W,i as g}from"./CKFr55HY.js";import{e as x}from"./BSJa-gCr.js";import{a as j,t as B}from"./fs5VanAl.js";import{r as F,s as m,b as J}from"./B0sfP6zc.js";import{p as u}from"./BnINZmlg.js";import{g as K}from"./BfjK8oC1.js";function L(e,l,r=l){var o=new WeakSet;E(e,"input",async s=>{var c=s?e.defaultValue:e.value;if(c=b(e)?y(c):c,r(c),v!==null&&o.add(v),await w(),c!==(c=l())){var t=e.selectionStart,d=e.selectionEnd,f=e.value.length;if(e.value=c??"",d!==null){var a=e.value.length;t===d&&d===f&&a>f?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=t,e.selectionEnd=Math.min(d,a))}}}),(I&&e.defaultValue!==e.value||q(l)==null&&e.value)&&(r(b(e)?y(e.value):e.value),v!==null&&o.add(v)),T(()=>{var s=l();if(e===document.activeElement){var c=A??v;if(o.has(c))return}b(e)&&s===y(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}const h=new Set;function $(e,l,r,o,s=o){var c=r.getAttribute("type")==="checkbox",t=e;let d=!1;if(l!==null)for(var f of l)t=t[f]??=[];t.push(r),E(r,"change",()=>{var a=r.__value;c&&(a=S(t,a,r.checked)),s(a)},()=>s(c?[]:null)),T(()=>{var a=o();if(I&&r.defaultChecked!==r.checked){d=!0;return}c?(a=a||[],r.checked=a.includes(r.__value)):r.checked=V(r.__value,a)}),z(()=>{var a=t.indexOf(r);a!==-1&&t.splice(a,1)}),h.has(t)||(h.add(t),k(()=>{t.sort((a,i)=>a.compareDocumentPosition(i)===4?-1:1),h.delete(t)})),k(()=>{if(d){var a;if(c)a=S(t,a,r.checked);else{var i=t.find(n=>n.checked);a=i?.__value}s(a)}})}function S(e,l,r){for(var o=new Set,s=0;s<e.length;s+=1)e[s].checked&&o.add(e[s].__value);return r||o.delete(l),Array.from(o)}function b(e){var l=e.type;return l==="number"||l==="range"}function y(e){return e===""?null:+e}var N=D("<input/>");function ee(e,l){C(l,!0);let r=u(l,"value",15),o=u(l,"placeholder",3,""),s=u(l,"type",3,"text"),c=u(l,"Type",19,()=>K.string);const t=W(()=>typeof o()=="string"?{idle:o(),focused:o()}:o());let d=P(!1);var f=N();F(f);let a;j(f,(i,n)=>B?.(i,n),()=>l.discreet?l.label:void 0),G(()=>L(f,r)),H(()=>{m(f,"type",s()),m(f,"aria-label",l.label),a=J(f,1,"inline-input svelte-85fk79",null,a,{monospace:l.monospace,discreet:l.discreet}),m(f,"placeholder",_(d)?_(t).focused:_(t).idle)}),x("focus",f,()=>g(d,!0)),x("blur",f,async({currentTarget:i})=>{g(d,!1);try{await l.onblur(c().assert(i.value),n=>r(n))}catch(n){l.onerror?.(n)}}),M(e,f),O()}export{ee as I,L as a,$ as b};
