import"./DsnmJJEf.js";import{z as ze,A as De,K as Se,x as Ve,f as ke,a as t,p as Me,e as n,d as r,b as Re,g as e,u as v,c as I,az as H,aA as E,r as J,aa as ae,ab as N,i as ve,s as he}from"./CKFr55HY.js";import{a as te}from"./BSJa-gCr.js";import{s as O}from"./BnT1n4qy.js";import{a as Te}from"./CRIUswPx.js";import{r as we,i}from"./BnINZmlg.js";import{B as Ue}from"./BuOt_ll9.js";import{c as W}from"./_Ua9-HGN.js";import{a as xe,b as Ee,_ as Ie,g as Ke}from"./B0sfP6zc.js";import{R as fe}from"./PUfmrO2I.js";import{A as Qe}from"./CnQKqK84.js";import{h as Fe,u as Ge,A as He}from"./Y12U1EUt.js";import{E as Je}from"./B2R-qaQw.js";import{L as Ne}from"./B9ZlnstM.js";import{p as Oe}from"./CFsItWt6.js";import{B as We}from"./B0qXVrpE.js";import{L as Xe}from"./ChskKCUc.js";import{t as pe}from"./C4Cali0V.js";import{B as Ye}from"./EISLmZ-s.js";function Ze(U,a,s){ze&&De();var q=new Ue(U),X=!Se();Ve(()=>{var x=a();X&&x!==null&&typeof x=="object"&&(x={}),q.ensure(x,s)})}var $e=ke('<svg><path fill="currentColor" d="M4 12a8 8 0 1 1 16 0a8 8 0 0 1-16 0m8-10C6.477 2 2 6.477 2 12s4.477 10 10 10s10-4.477 10-10S17.523 2 12 2m5.457 7.457l-1.414-1.414L11 13.086l-2.793-2.793l-1.414 1.414L11 15.914z"></path></svg>');function ea(U,a){const s=we(a,["$$slots","$$events","$$legacy"]);var q=$e();xe(q,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...s})),t(U,q)}var aa=ke('<svg><path fill="currentColor" d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10m0-2a8 8 0 1 0 0-16a8 8 0 0 0 0 16m-1-5h2v2h-2zm2-1.645V14h-2v-1.5a1 1 0 0 1 1-1a1.5 1.5 0 1 0-1.471-1.794l-1.962-.393A3.501 3.501 0 1 1 13 13.355"></path></svg>');function be(U,a){const s=we(a,["$$slots","$$events","$$legacy"]);var q=aa();xe(q,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...s})),t(U,q)}var ta=I("<span><!></span>"),ra=I('<span class="version-check up-to-date svelte-1h004jq"><!> <!></span> <!>',1),na=I("<span><!> <!></span>"),oa=I('<span class="version-check error svelte-1h004jq"><!> <!></span>'),sa=I("<!> <!>",1),va=I('<span class="version-check not-applicable svelte-1h004jq"><!> <!></span>'),la=I('<span class="version-check not-applicable svelte-1h004jq"><!> <!></span>');function Pa(U,a){Me(a,!0);const s=v(()=>Ie(Ke("main"))),q=v(()=>Oe.data.swarpc);let X=he(0),x=he(!1);const K=v(()=>a.compact?Ye:We);var me=n(),je=r(me);{var ye=Q=>{var Y=n(),le=r(Y);Ze(le,()=>e(X),ie=>{var re=n(),V=r(re);Te(V,()=>Fe({id:a.id,version:a.version,source:a.source}),j=>{var y=n(),z=r(y);{var B=l=>{var f=n(),c=r(f);O(c,()=>a.button,()=>({onclick:()=>{},help:"Recherche de mise à jour…",state:"checking",current:a.version,newest:void 0})),t(l,f)},u=l=>{var f=n(),c=r(f);{let p=v(()=>e(s).t(158));W(c,()=>e(K),(m,b)=>{b(m,{get help(){return e(p)},disabled:!0,onclick:()=>{},children:(o,d)=>{var k=sa(),D=r(k);Ne(D,{});var A=E(D,2);{var g=_=>{var w=ae();N(C=>te(w,C),[()=>e(s).t(131)]),t(_,w)};i(A,_=>{a.compact||_(g)})}t(o,k)},$$slots:{default:!0}})})}t(l,f)};i(z,l=>{a.button?l(B):l(u,!1)})}t(j,y)},(j,y)=>{var z=v(()=>{var{upToDate:o,newVersion:d}=e(y);return{upToDate:o,newVersion:d}}),B=v(()=>e(z).upToDate),u=v(()=>e(z).newVersion);const l=v(()=>async()=>{e(B)?ve(X,Date.now(),!0):(ve(x,!0),await Ge({version:a.version,source:a.source,id:a.id,swarpc:e(q)}).then(({version:o})=>{pe.success(e(s).t(381,[o])),a.onupgrade?.(o)}).catch(o=>{pe.error(e(s).t(382,[o]))}).finally(()=>{ve(x,!1)}))}),f=v(()=>e(B)?`Le protocole est à jour (v${e(u)}). Cliquer pour vérifier à nouveau`:`Une mise à jour vers la v${e(u)} est disponible`);var c=n(),p=r(c);{var m=o=>{var d=n(),k=r(d);O(k,()=>a.button,()=>({onclick:e(l),help:e(f),state:"uptodate",current:a.version,newest:e(u)})),t(o,d)},b=o=>{var d=n(),k=r(d);{var D=g=>{var _=n(),w=r(_);W(w,()=>e(K),(C,M)=>{M(C,{get help(){return e(f)},onclick:e(l),children:(h,S)=>{var R=ra(),Z=r(R),ne=H(Z);ea(ne,{});var ce=E(ne,2);{var de=P=>{var T=ae();N($=>te(T,$),[()=>e(s).t(205)]),t(P,T)};i(ce,P=>{a.compact||P(de)})}J(Z);var F=E(Z,2);{var oe=P=>{var T=ta(),$=H(T);{let _e=v(()=>e(s).cx(202)),ue=v(()=>[a.version]);fe($,{get x(){return e(_e)},get a(){return e(ue)}})}J(T),t(P,T)};i(F,P=>{a.compact||P(oe)})}t(h,R)},$$slots:{default:!0}})}),t(g,_)},A=g=>{var _=n(),w=r(_);{var C=h=>{var S=n(),R=r(S);O(R,()=>a.button,()=>({onclick:e(l),help:e(f),state:e(x)?"upgrading":"available",current:a.version,newest:e(u)})),t(h,S)},M=h=>{var S=n(),R=r(S);W(R,()=>e(K),(Z,ne)=>{ne(Z,{onclick:e(l),get help(){return e(f)},children:(ce,de)=>{var F=na();let oe;var P=H(F);{var T=L=>{Xe(L,{})},$=L=>{He(L,{})};i(P,L=>{e(x)?L(T):L($,!1)})}var _e=E(P,2);{var ue=L=>{var ge=n(),Ae=r(ge);{var Ce=G=>{var se=ae();N(ee=>te(se,ee),[()=>e(s).t(132)]),t(G,se)},Pe=G=>{const se=ee=>{Qe(ee,{})};{let ee=v(()=>[se]),Le=v(()=>e(s).cx(203)),qe=v(()=>[a.version,e(u)]);fe(G,{get t(){return e(ee)},get x(){return e(Le)},get a(){return e(qe)}})}};i(Ae,G=>{e(x)?G(Ce):G(Pe,!1)})}t(L,ge)};i(_e,L=>{a.compact||L(ue)})}J(F),N(()=>oe=Ee(F,1,"version-check svelte-1h004jq",null,oe,{"update-available":!e(x)})),t(ce,F)},$$slots:{default:!0}})}),t(h,S)};i(w,h=>{a.button?h(C):h(M,!1)},!0)}t(g,_)};i(k,g=>{e(B)?g(D):g(A,!1)},!0)}t(o,d)};i(p,o=>{e(B)&&a.button?o(m):o(b,!1)})}t(j,c)},(j,y)=>{const z=v(()=>()=>{ve(X,Date.now(),!0)});var B=n(),u=r(B);{var l=c=>{var p=n(),m=r(p);O(m,()=>a.button,()=>({onclick:e(z),help:`Impossible de vérifier les mises à jour: ${e(y)}`,state:"error",current:a.version,newest:void 0})),t(c,p)},f=c=>{var p=n(),m=r(p);{let b=v(()=>e(s).t(226,[e(y)]));W(m,()=>e(K),(o,d)=>{d(o,{onclick:e(z),get help(){return e(b)},children:(k,D)=>{var A=oa(),g=H(A);Je(g,{});var _=E(g,2);{var w=C=>{var M=ae();N(h=>te(M,h),[()=>e(s).t(165)]),t(C,M)};i(_,C=>{a.compact||C(w)})}J(A),t(k,A)},$$slots:{default:!0}})})}t(c,p)};i(u,c=>{a.button?c(l):c(f,!1)})}t(j,B)}),t(ie,re)}),t(Q,Y)},Be=Q=>{var Y=n(),le=r(Y);{var ie=V=>{var j=n(),y=r(j);O(y,()=>a.button,()=>({onclick:()=>{},help:"Ce protocole ne supporte pas la vérification des mises à jour",state:"error",current:a.version,newest:void 0})),t(V,j)},re=V=>{var j=n(),y=r(j);{var z=u=>{var l=n(),f=r(l);{let c=v(()=>e(s).t(50));W(f,()=>e(K),(p,m)=>{m(p,{onclick:()=>{},get help(){return e(c)},children:(b,o)=>{var d=va(),k=H(d);be(k,{});var D=E(k,2);{var A=g=>{{let _=v(()=>e(s).cx(202)),w=v(()=>[a.version]);fe(g,{get x(){return e(_)},get a(){return e(w)}})}};i(D,g=>{a.compact||g(A)})}J(d),t(b,d)},$$slots:{default:!0}})})}t(u,l)},B=u=>{var l=n(),f=r(l);{var c=m=>{var b=n(),o=r(b);O(o,()=>a.button,()=>({onclick:()=>{},help:"Ce protocole n'est pas versionné, pour le mettre à jour, supprimer le et importez la nouvelle version",state:"error",current:void 0,newest:void 0})),t(m,b)},p=m=>{var b=n(),o=r(b);{let d=v(()=>e(s).t(49));W(o,()=>e(K),(k,D)=>{D(k,{onclick:()=>{},get help(){return e(d)},children:(A,g)=>{var _=la(),w=H(_);be(w,{});var C=E(w,2);{var M=h=>{var S=ae();N(R=>te(S,R),[()=>e(s).t(384)]),t(h,S)};i(C,h=>{a.compact||h(M)})}J(_),t(A,_)},$$slots:{default:!0}})})}t(m,b)};i(f,m=>{a.button?m(c):m(p,!1)},!0)}t(u,l)};i(y,u=>{a.version?u(z):u(B,!1)},!0)}t(V,j)};i(le,V=>{a.version&&a.button?V(ie):V(re,!1)},!0)}t(Q,Y)};i(je,Q=>{a.version&&a.source?Q(ye):Q(Be,!1)})}t(U,me),Re()}export{Pa as B,Ze as k};
