import"../chunks/DsnmJJEf.js";import{p as Z,c as p,a as u,b as $,az as o,g as e,u as n,r as i,d as B,aA as w,ab as E,e as ee}from"../chunks/CKFr55HY.js";import{s as ae}from"../chunks/BYsmyf-T.js";import{a as F,e as te}from"../chunks/BSJa-gCr.js";import{i as D}from"../chunks/BnINZmlg.js";import{e as re}from"../chunks/BfRwOU-Q.js";import{_ as ne,g as ie,r as se,d as oe}from"../chunks/B0sfP6zc.js";import{t as le,f as ue}from"../chunks/CQ7DZjSk.js";import{t as I,E as P,b as fe,A as de}from"../chunks/BfjK8oC1.js";import{a as A}from"../chunks/CJ0dtI1a.js";import{F as me}from"../chunks/DbQ7YyVi.js";import{R as ve}from"../chunks/1oi2qjKX.js";import{t as pe}from"../chunks/C4Cali0V.js";import{o as ce,k as _e}from"../chunks/BmYW83mJ.js";var be=p("<option> </option>"),he=p('<div class="field svelte-s8isad"><label><span class="label"> </span> <input type="text" list="exif-fields"/> <datalist id="exif-fields"></datalist></label></div>'),xe=p('<h3 class="svelte-s8isad"> </h3> <!>',1),ge=p('<div class="content"><!></div>');function Ue(j,c){Z(c,!0);const _=n(()=>ne(ie("main"))),R=n(()=>c.data.metadata),a=n(()=>e(R).infer),S=n(()=>e(R).id),q=[{key:"none",label:"Pas d'inférence"},{key:"neural",label:"Réseau neuronal"},{key:"exif",label:"EXIF"}],C=n(()=>!e(a)||!("neural"in e(a))||!e(a).neural.model?"":typeof e(a).neural.model=="string"?e(a).neural.model:e(a).neural.model.url),G={model:"http://example.com/model.onnx",input:{width:224,height:224,normalized:!0}},X=n(()=>e(a)?"exif"in e(a)?"exif":"neural"in e(a)?"neural":"none":"none");var f=ge(),H=o(f);ve(H,{get options(){return q},get value(){return e(X)},onchange:async b=>{b==="none"&&e(X)!=="none"&&(await I.Metadata.set(ce(c.data.metadata,"infer")),await A())},children:(b,z)=>{let L=()=>z?.().key,J=()=>z?.().label;var M=xe(),h=B(M),K=o(h,!0);i(h);var O=w(h,2);{var Q=s=>{{let d=n(()=>e(_).t(334));me(s,{check:!0,get label(){return e(d)},get value(){return e(C)},onblur:async m=>{if(!m)return;const x=ae(e(a)&&"neural"in e(a)&&e(a).neural?e(a).neural:{});await I.Metadata.update(e(S),"infer",{neural:{...G,...x,model:m}}),await A()}})}},V=s=>{var d=ee(),m=B(d);{var x=g=>{var y=he(),N=o(y),k=o(N),W=o(k,!0);i(k);var v=w(k,2);se(v);var T=w(v,2);re(T,20,()=>_e(P),t=>t,(t,r)=>{var l=be(),Y=o(l,!0);i(l);var U={};E(()=>{F(Y,P[r]),U!==(U=r)&&(l.value=(l.__value=r)??"")}),u(t,l)}),i(T),i(N),i(y),E(t=>{F(W,t),oe(v,e(a)&&"exif"in e(a)?e(a).exif:"")},[()=>e(_).t(335)]),te("blur",v,async({currentTarget:t})=>{const r=fe(t.value);if(r instanceof de){pe.error(e(_).t(336,[r.summary]));return}await I.Metadata.update(e(S),"infer",{exif:r}),await A()}),u(g,y)};D(m,g=>{L()==="exif"&&g(x)},!0)}u(s,d)};D(O,s=>{L()==="neural"?s(Q):s(V,!1)})}E(()=>F(K,J())),u(b,M)},$$slots:{default:!0}}),i(f),le(1,f,()=>ue,()=>({duration:100})),u(j,f),$()}export{Ue as component};
