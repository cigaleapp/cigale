import"../chunks/DsnmJJEf.js";import{f as Te,a as r,p as qe,c as f,d as w,az as v,g as e,r as l,aA as ae,ab as T,e as E,n as ce,b as He,u as n,ad as Ke,aE as Qe,aa as be,aZ as Ze,h as Xe,aB as Ie}from"../chunks/CKFr55HY.js";import{a as F}from"../chunks/BSJa-gCr.js";import{a as Me}from"../chunks/CRIUswPx.js";import{r as Le,i as h,s as Ye}from"../chunks/BnINZmlg.js";import{c as et}from"../chunks/Eu4gtx6U.js";import{a as Oe,b as we,s as ye,_ as Ue,g as We,c as tt}from"../chunks/B0sfP6zc.js";import{t as De,f as Ve}from"../chunks/CQ7DZjSk.js";import{R as ve}from"../chunks/PUfmrO2I.js";import{D as rt,g as Ge,t as Ne,F as at,z as st,B as ot,q as nt}from"../chunks/BfjK8oC1.js";import{C as lt}from"../chunks/B7lodkbW.js";import{h as vt,T as Ae}from"../chunks/Y12U1EUt.js";import{p as Be}from"../chunks/CFsItWt6.js";import{B as Ce}from"../chunks/B1ufcx3J.js";import{B as it}from"../chunks/DV4fPt-7.js";import{F as dt}from"../chunks/DsdZIrN8.js";import{E as _t,F as pt}from"../chunks/DbQ7YyVi.js";import{I as ft}from"../chunks/D4mJ-AV5.js";import{L as ut}from"../chunks/ChskKCUc.js";import{L as ct}from"../chunks/CKTUSNu_.js";import{e as gt,d as mt,c as ht}from"../chunks/BmYW83mJ.js";import{u as me}from"../chunks/Cwm2_l6E.js";import{e as he,i as Pe}from"../chunks/BfRwOU-Q.js";import{A as xt}from"../chunks/uMHR5rlx.js";import{A as wt}from"../chunks/B6sNxcRK.js";import{D as yt}from"../chunks/C9aioxm5.js";import{P as bt}from"../chunks/CliTAt7n.js";import{B as kt}from"../chunks/EISLmZ-s.js";import{a as Se}from"../chunks/bCylyxMO.js";var $t=Te('<svg><path fill="currentColor" d="m3.515 2.1l19.092 19.092l-1.415 1.415l-2.014-2.015A6 6 0 0 1 17 21H7A6 6 0 0 1 5.008 9.339a7 7 0 0 1 .353-2.563L2.1 3.514zM7 9q0 .122.006.243l.07 1.488l-1.404.494A4.002 4.002 0 0 0 7 19h10q.28 0 .548-.037L7.03 8.445Q7 8.718 7 9m5-7a7 7 0 0 1 6.992 7.339a6.003 6.003 0 0 1 3.212 8.65l-1.493-1.494a3.999 3.999 0 0 0-5.207-5.206L14.01 9.796A6 6 0 0 1 17 9a5 5 0 0 0-7.876-4.09l-1.43-1.43A6.97 6.97 0 0 1 12 2"></path></svg>');function zt(ie,c){const s=Le(c,["$$slots","$$events","$$legacy"]);var i=$t();Oe(i,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...s})),r(ie,i)}var Re,Fe;function Et(){if(Fe)return Re;Fe=1;var ie={diffString:function(c,s){var i=this.diff(c.split(/\s+/),s.split(/\s+/)),y=[],t=0,b=0,I,a=c.match(/\s+/g);a==null?a=[""]:a.push("");var U=s.match(/\s+/g);for(U==null?U=[""]:U.push("");t<i.o.length||b<i.n.length;){for(I={remove:"",add:""};t<i.o.length&&i.o[t].text==null;)I.remove+=i.o[t]+a[t],t++;for(;b<i.n.length&&i.n[b].text==null;)I.add+=i.n[b]+U[b],b++;for((I.add||I.remove)&&y.push(I),I={text:""};t<i.o.length&&b<i.n.length&&i.o[t].text!=null&&i.n[b].text!=null;)I.text+=i.o[t].text+a[t],t++,b++;I.text&&y.push(I)}return y},diff:function(c,s){for(var i=new Object,y=new Object,t=0;t<s.length;t++)i[s[t]]==null&&(i[s[t]]={rows:new Array,o:null}),i[s[t]].rows.push(t);for(var t=0;t<c.length;t++)y[c[t]]==null&&(y[c[t]]={rows:new Array,n:null}),y[c[t]].rows.push(t);for(var t in i)i[t].rows.length==1&&typeof y[t]<"u"&&y[t].rows.length==1&&(s[i[t].rows[0]]={text:s[i[t].rows[0]],row:y[t].rows[0]},c[y[t].rows[0]]={text:c[y[t].rows[0]],row:i[t].rows[0]});for(var t=0;t<s.length-1;t++)s[t].text!=null&&s[t+1].text==null&&s[t].row+1<c.length&&c[s[t].row+1].text==null&&s[t+1]==c[s[t].row+1]&&(s[t+1]={text:s[t+1],row:s[t].row+1},c[s[t].row+1]={text:c[s[t].row+1],row:t+1});for(var t=s.length-1;t>0;t--)s[t].text!=null&&s[t-1].text==null&&s[t].row>0&&c[s[t].row-1].text==null&&s[t-1]==c[s[t].row-1]&&(s[t-1]={text:s[t-1],row:s[t].row-1},c[s[t].row-1]={text:c[s[t].row-1],row:t-1});return{o:c,n:s}}};return Re=ie,Re}var jt=Et();const At=rt(jt);var Ct=Te('<svg><path fill="currentColor" d="m8.369 12l4.747-8.968l1.768.936L10.632 12l4.252 8.032l-1.768.936z"></path></svg>');function Rt(ie,c){const s=Le(c,["$$slots","$$events","$$legacy"]);var i=Ct();Oe(i,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...s})),r(ie,i)}var Mt=Te('<svg><path fill="currentColor" d="m15.632 12l-4.748-8.968l-1.768.936L13.368 12l-4.252 8.032l1.768.936z"></path></svg>');function Dt(ie,c){const s=Le(c,["$$slots","$$events","$$legacy"]);var i=Mt();Oe(i,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...s})),r(ie,i)}const Vt=(ie,c=ce)=>{var s=E(),i=w(s);he(i,17,c,Pe,(y,t)=>{var b=E(),I=w(b);{var a=q=>{var W=tr(),X=v(W,!0);l(W),T(()=>F(X,e(t).text)),r(q,W)},U=q=>{var W=sr(),X=w(W);{var Y=g=>{var j=rr(),z=v(j,!0);l(j),T(()=>F(z,e(t).remove)),r(g,j)};h(X,g=>{e(t).remove&&g(Y)})}var se=ae(X,2);{var oe=g=>{var j=ar(),z=v(j,!0);l(j),T(()=>F(z,e(t).add)),r(g,j)};h(se,g=>{e(t).add&&g(oe)})}r(q,W)};h(I,q=>{e(t).text?q(a):q(U,!1)})}r(y,b)}),r(ie,s)};var Bt=f('<span class="separator svelte-dmhzg9" aria-hidden="true"><!></span>'),Pt=f("<a> </a>"),Tt=f("<a> </a>"),Lt=f("<span> </span>"),Ot=f("<span> </span>"),It=f('<span class="index"><!></span>'),St=f("<span> </span>"),Ft=f("<!> <!>",1),qt=f('<span class="root">/</span>'),Ht=f('<div class="string url svelte-dmhzg9"> <!></div>'),Ut=f("<span><!></span>"),Wt=f('<span class="number svelte-dmhzg9"> </span>'),Gt=f('<span class="boolean svelte-dmhzg9"> </span>'),Nt=f('<span class="null svelte-dmhzg9">null</span>'),Jt=f("<li><!></li>"),Kt=f('<ul class="array svelte-dmhzg9"></ul>'),Qt=f('<div class="array empty svelte-dmhzg9"> </div>'),Zt=f('<dt class="key svelte-dmhzg9"> </dt> <dd class="svelte-dmhzg9"><!></dd>',1),Xt=f("<dl></dl>"),Yt=f('<span class="undefined">undefined</span>'),er=f('<span class="unknown"> </span>'),tr=f("<span> </span>"),rr=f('<span class="removed svelte-dmhzg9"> </span>'),ar=f('<span class="added svelte-dmhzg9"> </span>'),sr=f("<!> <!>",1),or=f('<dl class="changed"><dt class="svelte-dmhzg9"><!></dt> <dd class="svelte-dmhzg9"><!></dd> <dt class="svelte-dmhzg9"><!></dt> <dd class="svelte-dmhzg9"><!></dd></dl>'),nr=f('<dt><div class="icon svelte-dmhzg9"><!></div> <div class="path svelte-dmhzg9"><!></div></dt> <dd><!></dd>',1),lr=f("<dl></dl>");function vr(ie,c){qe(c,!0);const s=(I,a=ce,U)=>{let q=Ke(()=>Qe(U?.(),void 0));const W=n(()=>a()[0]==="metadata"?Ne.Metadata.getFromState(a()[1].toString()):void 0),X=n(()=>e(W)&&a()[2]==="options"&&e(q)?st("MetadataOption",ot(e(W).id,e(q))):void 0);var Y=E(),se=w(Y);he(se,17,a,Pe,(oe,g,j)=>{var z=Ft(),D=w(z);{var G=p=>{var o=Bt(),A=v(o);wt(A,{}),l(o),r(p,o)};h(D,p=>{j>0&&p(G)})}var ne=ae(D,2);{var ee=p=>{const o=n(()=>at(e(W).id));var A=E(),Q=w(A);{var S=d=>{var V=Pt(),te=v(V,!0);l(V),T((H,J)=>{ye(V,"title",H),ye(V,"href",J),F(te,e(W).label||e(o).id)},[()=>e(y).t(327),()=>Se("/(app)/protocols/[id]/metadata/[metadata]",{id:e(o).namespace??Be.params.id??"",metadata:e(o).id})]),r(d,V)},k=d=>{var V=E(),te=w(V);{var H=B=>{var Z=E(),de=w(Z);Me(de,()=>e(X),null,(le,L)=>{var R=E(),K=w(R);{var O=_=>{var u=Tt(),m=v(u,!0);l(u),T((M,$)=>{ye(u,"title",M),ye(u,"href",$),F(m,e(L).label||e(L).key)},[()=>e(y).t(328),()=>Se("/(app)/protocols/[id]/metadata/[metadata]/options/[option]",{id:e(o).namespace??Be.params.id??"",metadata:e(o).id,option:e(L).key})]),r(_,u)},x=_=>{var u=Lt(),m=v(u,!0);l(u),T(()=>F(m,e(g))),r(_,u)};h(K,_=>{e(L)?_(O):_(x,!1)})}r(le,R)}),r(B,Z)},J=B=>{var Z=Ot(),de=v(Z,!0);l(Z),T(()=>F(de,e(g))),r(B,Z)};h(te,B=>{j===3&&e(X)?B(H):B(J,!1)},!0)}r(d,V)};h(Q,d=>{j===1&&typeof e(g)=="string"?d(S):d(k,!1)})}r(p,A)},N=p=>{var o=E(),A=w(o);{var Q=k=>{var d=It(),V=v(d);{let te=n(()=>e(y).cx(329)),H=n(()=>[e(g)+1]);ve(V,{get x(){return e(te)},get a(){return e(H)}})}l(d),r(k,d)},S=k=>{var d=St(),V=v(d,!0);l(d),T(()=>F(V,e(g))),r(k,d)};h(A,k=>{typeof e(g)=="number"?k(Q):k(S,!1)},!0)}r(p,o)};h(ne,p=>{e(W)?p(ee):p(N,!1)})}r(oe,z)},oe=>{var g=qt();r(oe,g)}),r(I,Y)},i=(I,a=ce)=>{var U=E(),q=w(U);{var W=Y=>{var se=Ht(),oe=v(se),g=ae(oe);{let j=n(()=>e(y).t(330));kt(g,{get help(){return e(j)},onclick:()=>window.open(a(),"_blank","noopener"),children:(z,D)=>{_t(z,{})},$$slots:{default:!0}})}l(se),T(()=>F(oe,`${a()??""} `)),r(Y,se)},X=Y=>{var se=E(),oe=w(se);{var g=z=>{var D=Ut();let G;var ne=v(D);{var ee=p=>{var o=be();T(A=>F(o,A),[()=>e(y).t(331)]),r(p,o)},N=p=>{var o=be();T(()=>F(o,a())),r(p,o)};h(ne,p=>{a().length===0?p(ee):p(N,!1)})}l(D),T(()=>G=we(D,1,"string svelte-dmhzg9",null,G,{empty:a().length===0})),r(z,D)},j=z=>{var D=E(),G=w(D);{var ne=N=>{var p=Wt(),o=v(p,!0);l(p),T(()=>F(o,a())),r(N,p)},ee=N=>{var p=E(),o=w(p);{var A=S=>{var k=Gt(),d=v(k,!0);l(k),T(()=>F(d,a()?"true":"false")),r(S,k)},Q=S=>{var k=E(),d=w(k);{var V=H=>{var J=Nt();r(H,J)},te=H=>{var J=E(),B=w(J);{var Z=le=>{var L=E(),R=w(L);{var K=x=>{var _=Kt();he(_,21,a,Pe,(u,m)=>{var M=Jt(),$=v(M);i($,()=>e(m)),l(M),r(u,M)}),l(_),r(x,_)},O=x=>{var _=Qt(),u=v(_,!0);l(_),T(m=>F(u,m),[()=>e(y).t(331)]),r(x,_)};h(R,x=>{a().length>0?x(K):x(O,!1)})}r(le,L)},de=le=>{var L=E(),R=w(L);{var K=x=>{var _=Xt();let u;he(_,21,()=>gt(a()),([m,M])=>m,(m,M)=>{var $=n(()=>Ze(e(M),2));let C=()=>e($)[0],P=()=>e($)[1];var re=Zt(),_e=w(re),pe=v(_e,!0);l(_e);var fe=ae(_e,2),ue=v(fe);i(ue,P),l(fe),T(()=>F(pe,C())),r(m,re)}),l(_),T(m=>u=we(_,1,"object svelte-dmhzg9",null,u,m),[()=>({nested:Object.values(a()).some(m=>typeof m=="object"&&m!==null)})]),r(x,_)},O=x=>{var _=E(),u=w(_);{var m=$=>{var C=Yt();r($,C)},M=$=>{var C=er(),P=v(C,!0);l(C),T(()=>F(P,a())),r($,C)};h(u,$=>{typeof a()>"u"?$(m):$(M,!1)},!0)}r(x,_)};h(R,x=>{typeof a()=="object"?x(K):x(O,!1)},!0)}r(le,L)};h(B,le=>{Array.isArray(a())?le(Z):le(de,!1)},!0)}r(H,J)};h(d,H=>{a()===null?H(V):H(te,!1)},!0)}r(S,k)};h(o,S=>{typeof a()=="boolean"?S(A):S(Q,!1)},!0)}r(N,p)};h(G,N=>{typeof a()=="number"?N(ne):N(ee,!1)},!0)}r(z,D)};h(oe,z=>{typeof a()=="string"?z(g):z(j,!1)},!0)}r(Y,se)};h(q,Y=>{typeof a()=="string"&&URL.canParse(a())?Y(W):Y(X,!1)})}r(I,U)},y=n(()=>Ue(We("main"))),t=Ge({value:{key:"string | number"}});var b=lr();he(b,21,()=>c.changes,I=>I.path.join("."),(I,a)=>{var U=nr(),q=w(U);let W;var X=v(q),Y=v(X);{var se=o=>{yt(o,{})},oe=o=>{var A=E(),Q=w(A);{var S=d=>{xt(d,{})},k=d=>{bt(d,{})};h(Q,d=>{e(a).type==="CREATE"?d(S):d(k,!1)},!0)}r(o,A)};h(Y,o=>{e(a).type==="REMOVE"?o(se):o(oe,!1)})}l(X);var g=ae(X,2),j=v(g);{var z=o=>{s(o,()=>e(a).path,()=>e(a).value.key)},D=o=>{s(o,()=>e(a).path)};h(j,o=>{t.allows(e(a))?o(z):o(D,!1)})}l(g),l(q);var G=ae(q,2);let ne;var ee=v(G);{var N=o=>{i(o,()=>e(a).value)},p=o=>{var A=E(),Q=w(A);{var S=d=>{i(d,()=>e(a).oldValue)},k=d=>{var V=E(),te=w(V);{var H=B=>{{let Z=n(()=>At.diffString(e(a).oldValue,e(a).value));Vt(B,()=>e(Z))}},J=B=>{var Z=E(),de=w(Z);{var le=L=>{var R=or(),K=v(R);{const C=P=>{Rt(P,{})};var O=v(K);{let P=n(()=>[C]),re=n(()=>e(y).cx(325));ve(O,{get t(){return e(P)},get x(){return e(re)}})}l(K)}var x=ae(K,2),_=v(x);i(_,()=>e(a).oldValue),l(x);var u=ae(x,2);{const C=P=>{Dt(P,{})};var m=v(u);{let P=n(()=>[C]),re=n(()=>e(y).cx(326));ve(m,{get t(){return e(P)},get x(){return e(re)}})}l(u)}var M=ae(u,2),$=v(M);i($,()=>e(a).value),l(M),l(R),r(L,R)};h(de,L=>{e(a).type==="CHANGE"&&L(le)},!0)}r(B,Z)};h(te,B=>{e(a).type==="CHANGE"&&typeof e(a).oldValue=="string"&&typeof e(a).value=="string"?B(H):B(J,!1)},!0)}r(d,V)};h(Q,d=>{e(a).type==="REMOVE"?d(S):d(k,!1)},!0)}r(o,A)};h(ee,o=>{e(a).type==="CREATE"?o(N):o(p,!1)})}l(G),T(()=>{W=we(q,1,"svelte-dmhzg9",null,W,{"removed-key":e(a).type==="REMOVE","added-key":e(a).type==="CREATE","changed-key":e(a).type==="CHANGE"}),ne=we(G,1,"svelte-dmhzg9",null,ne,{removed:e(a).type==="REMOVE","removed-value":e(a).type==="REMOVE","added-value":e(a).type==="CREATE"})}),r(I,U)}),l(b),De(1,b,()=>Ve),r(ie,b),He()}var ir=f("<strong><!></strong>"),dr=f('<div class="action svelte-1cdpxjs"><!></div>'),_r=f('<div class="upgrade-check notice svelte-1cdpxjs"><!></div>'),pr=f('<div class="action svelte-1cdpxjs"><!></div>'),fr=f('<div class="upgrade-check warning svelte-1cdpxjs"><!></div>'),ur=f('<div class="upgrade-check ok svelte-1cdpxjs"><!></div>'),cr=f('<div class="upgrade-check warning svelte-1cdpxjs"><!></div>'),gr=f('<div class="upgrade-check loading svelte-1cdpxjs"><!></div>'),mr=f('<div class="action svelte-1cdpxjs"><!></div>'),hr=f('<div class="upgrade-check warning svelte-1cdpxjs"><!></div>'),xr=f('<span class="differences-count svelte-1cdpxjs"> </span>'),wr=f('<div class="loading svelte-1cdpxjs"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <div class="text"><p> </p> <code> </code></div></div>'),yr=f('<section class="changes-with-remote svelte-1cdpxjs"><h3 class="svelte-1cdpxjs"><!></h3> <!></section>'),br=f('<main class="svelte-1cdpxjs"><h2> </h2> <!> <!> <!></main>');function Xr(ie,c){qe(c,!0);const s=n(()=>Ue(We("main"))),i=n(()=>typeof c.data.source=="string"?c.data.source:c.data.source?.url);let y=n(()=>c.data.version),t=n(()=>c.data.id),b=Xe({hasMore:!1,changes:[],progress:0,get loading(){return this.progress>.02&&this.progress<1}});async function I(){const{changes:g,dirty:j}=await Be.data.swarpc.diffProtocolWithRemote({protocolId:e(t)},z=>{b.progress=z});return b.hasMore=g.length>100,b.changes=g.slice(0,100),b.progress=1,await Ne.Protocol.update(e(t),"dirty",j),b.changes}const a={checking:"",upgrading:"Mise à jour...",uptodate:"",available:"Mise à jour disponible",error:"Erreur lors de la mise à jour"};var U=br(),q=v(U),W=v(q,!0);l(q);var X=ae(q,2);{let g=n(()=>e(s).t(314)),j=n(()=>e(i)??""),z=n(()=>me((D,G)=>{G?D.source=G:delete D.source}));pt(X,{check:!0,get label(){return e(g)},get value(){return e(j)},get onblur(){return e(z)}})}var Y=ae(X,2);{const g=z=>{var D=E(),G=w(D);{var ne=ee=>{var N=E(),p=w(N);Me(p,()=>vt({version:e(y),source:e(i),id:e(t)}),null,(o,A)=>{var Q=n(()=>{var{upToDate:J,newVersion:B}=e(A);return{upToDate:J,newVersion:B}}),S=n(()=>e(Q).upToDate),k=n(()=>e(Q).newVersion),d=E(),V=w(d);{var te=J=>{var B=_r();{const de=R=>{zt(R,{})},le=(R,K=ce)=>{var O=ir(),x=v(O);{let _=n(()=>[e(k)]);ve(x,{get x(){return K()},n:!0,get a(){return e(_)}})}l(O),r(R,O)},L=(R,K=ce)=>{var O=dr();{const _=(u,m=ce)=>{{let M=n(()=>me($=>{$.version=e(k)}));Ce(u,{get onclick(){return e(M)},children:($,C)=>{Ie();var P=be();T(re=>F(P,re),[()=>e(s).tx(m())]),r($,P)},$$slots:{default:!0}})}};var x=v(O);{let u=n(()=>[_]);ve(x,{get t(){return e(u)},get x(){return K()},n:!0})}l(O)}r(R,O)};var Z=v(B);{let R=n(()=>[de,le,L]),K=n(()=>e(s).cx(317));ve(Z,{get t(){return e(R)},get x(){return e(K)}})}l(B)}r(J,B)},H=J=>{var B=E(),Z=w(B);{var de=L=>{var R=E(),K=w(R);Me(K,I,O=>{var x=gr();{const u=m=>{ut(m,{get progress(){return b.progress}})};var _=v(x);{let m=n(()=>[u]),M=n(()=>e(s).cx(320));ve(_,{get t(){return e(m)},get x(){return e(M)}})}l(x)}r(O,x)},(O,x)=>{var _=E(),u=w(_);{var m=$=>{var C=fr();{const re=pe=>{Ae(pe,{})},_e=(pe,fe=ce)=>{var ue=pr();{const $e=(ge,ze=ce)=>{{let Ee=n(()=>me(xe=>{xe.version=e(y)+1,close?.()}));Ce(ge,{get onclick(){return e(Ee)},children:(xe,je)=>{{let Je=n(()=>[e(y)+1]);ve(xe,{get x(){return ze()},n:!0,get a(){return e(Je)}})}},$$slots:{default:!0}})}};var ke=v(ue);{let ge=n(()=>[$e]);ve(ke,{get t(){return e(ge)},get x(){return fe()},n:!0})}l(ue)}r(pe,ue)};var P=v(C);{let pe=n(()=>[re,_e]),fe=n(()=>e(s).cx(318));ve(P,{get t(){return e(pe)},get x(){return e(fe)}})}l(C)}r($,C)},M=$=>{var C=ur();{const re=_e=>{lt(_e,{})};var P=v(C);{let _e=n(()=>[re]),pe=n(()=>e(s).cx(319));ve(P,{get t(){return e(_e)},get x(){return e(pe)}})}l(C)}r($,C)};h(u,$=>{e(x).length>0?$(m):$(M,!1)})}r(O,_)},(O,x)=>{var _=cr();{const m=M=>{Ae(M,{})};var u=v(_);{let M=n(()=>[m]),$=n(()=>e(s).cx(321)),C=n(()=>[e(x).message]);ve(u,{get t(){return e(M)},get x(){return e($)},get a(){return e(C)}})}l(_)}r(O,_)}),r(L,R)},le=L=>{var R=hr();{const O=_=>{Ae(_,{})},x=_=>{var u=mr(),m=v(u);{const M=(C,P)=>{let re=()=>P?.().state,_e=()=>P?.().help,pe=()=>P?.().onclick;const fe=n(()=>a[re()]);var ue=E(),ke=w(ue);{var $e=ge=>{{let ze=n(()=>re()==="upgrading");Ce(ge,{get disabled(){return e(ze)},get help(){return _e()},get onclick(){return pe()},children:(Ee,xe)=>{Ie();var je=be();T(()=>F(je,e(fe))),r(Ee,je)},$$slots:{default:!0}})}};h(ke,ge=>{e(fe)&&ge($e)})}r(C,ue)};let $=n(()=>me((C,P)=>{C.version=P}));it(m,Ye(()=>({id:e(t),version:e(y),source:e(i)}),{get onupgrade(){return e($)},button:M,$$slots:{button:!0}}))}l(u),r(_,u)};var K=v(R);{let _=n(()=>[O,x]),u=n(()=>e(s).cx(322)),m=n(()=>[e(k)]);ve(K,{get t(){return e(_)},get x(){return e(u)},get a(){return e(m)}})}l(R)}r(L,R)};h(Z,L=>{e(S)?L(de):L(le,!1)},!0)}r(J,B)};h(V,J=>{e(y)>e(k)?J(te):J(H,!1)})}r(o,d)}),r(ee,N)};h(G,ee=>{e(i)&&e(y)&&ee(ne)})}r(z,D)};let j=n(()=>e(s).t(315));dt(Y,{get label(){return e(j)},hint:g,children:(z,D)=>{{let G=n(()=>e(s).t(316)),ne=n(()=>Ge("string.integer.parse")),ee=n(()=>e(y)?.toString()??""),N=n(()=>me((p,o)=>{o!==void 0?p.version=o:delete p.version}));ft(z,{monospace:!0,get label(){return e(G)},get Type(){return e(ne)},get value(){return e(ee)},get onblur(){return e(N)}})}}})}var se=ae(Y,2);{var oe=g=>{const j=n(()=>{const{changes:p,hasMore:o}=b;return{changes:p,hasMore:o}});var z=yr(),D=v(z);{const p=o=>{var A=E(),Q=w(A);{var S=k=>{var d=xr();let V;var te=v(d);l(d),T(H=>{V=tt(d,"",V,H),F(te,`${e(j).changes.length??""}${e(j).hasMore?"+":""}`)},[()=>({color:mt(ht(e(j).changes.length/20,0,1),"fg-neutral","fg-warning","fg-error")})]),r(k,d)};h(Q,k=>{b.progress>=1&&k(S)})}r(o,A)};var G=v(D);{let o=n(()=>[p]),A=n(()=>e(s).cx(323));ve(G,{get t(){return e(o)},get x(){return e(A)}})}l(D)}var ne=ae(D,2);{var ee=p=>{var o=wr(),A=v(o);et(A,()=>({"--size":"5rem"})),ct(A.lastChild,{get drawpercent(){return b.progress}}),l(A);var Q=ae(A,2),S=v(Q),k=v(S,!0);l(S);var d=ae(S,2),V=v(d,!0);l(d),l(Q),l(o),T((te,H)=>{F(k,te),F(V,H)},[()=>e(s).t(324),()=>nt(b.progress)]),De(1,o,()=>Ve,()=>({duration:100})),r(p,o)},N=p=>{vr(p,{get changes(){return e(j).changes}})};h(ne,p=>{b.progress<1?p(ee):p(N,!1)})}l(z),r(g,z)};h(se,g=>{e(y)!==void 0&&(b.changes.length>0||b.loading)&&g(oe)})}l(U),T(g=>F(W,g),[()=>e(s).t(313)]),De(1,U,()=>Ve,()=>({duration:100})),r(ie,U),He()}export{Xr as component};
