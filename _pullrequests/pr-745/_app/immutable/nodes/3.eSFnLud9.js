import"../chunks/DsnmJJEf.js";import{p as Ie,e as G,d as H,g as i,u as d,a as c,b as Re,c as T,av as U,ax as ve,i as Dt,aX as rn,n as rt,aw as B,ay as y,r as _,f as _t,az as _r,aE as nn,a7 as Q,aY as wr,bB as sn,a6 as Ue,bC as an}from"../chunks/CEjrMSr3.js";import{s as Ae}from"../chunks/Bt4b35Jj.js";import{p as Z,i as z,r as Ee,s as We,u as rr}from"../chunks/BQwRB0hY.js";import{a as xe,b as Bt,s as be,_ as st,g as it,r as ht,d as nr}from"../chunks/CFKIlU8F.js";import{t as on,f as ln}from"../chunks/IkhSBAvL.js";import{w as yr}from"../chunks/sX0DUBw3.js";import{p as At}from"../chunks/55T8DwzO.js";import{t as un}from"../chunks/DSBtPKP_.js";import{p as cn}from"../chunks/hFci9Gn4.js";import{t as ce,n as sr,z as hn,B as dn,ac as pn,F as gn,l as fn,x as Tt,o as ir,p as dt}from"../chunks/Ckf_cnrE.js";import{o as vn,e as mn}from"../chunks/DrMJCvyF.js";import{b as bn,d as kn,n as xn,m as _n,i as wn,A as yn}from"../chunks/D6DjHfA_.js";import{d as Sn}from"../chunks/ByP6sT44.js";import{j as Me,k as In,m as Rn,b as Pn,l as ar,d as Cn,s as An}from"../chunks/CRLHZjzi.js";import{s as Tn}from"../chunks/eEn-YRt2.js";import{u as j}from"../chunks/DeF7JVqg.js";import{t as Ot}from"../chunks/CdFpUUK-.js";import{n as On,p as Nn,f as zn,b as Ln,M as Mn,P as En,S as Hn,c as or}from"../chunks/DjW5CIaf.js";import{o as qn,a as te,d as Sr,e as pt}from"../chunks/CzPTknfj.js";import{e as nt,i as Ir}from"../chunks/B5t4nw1a.js";import{R as Ke}from"../chunks/KtucAqHY.js";import{D as Dn}from"../chunks/BtwpRPni.js";import{C as Nt,h as lr,F as Bn}from"../chunks/CXD0etnG.js";import{I as Fn}from"../chunks/DdYGOKw-.js";import{S as Vn}from"../chunks/Craa4Ekb.js";import{B as gt}from"../chunks/CSXPGx0M.js";import{C as jn}from"../chunks/C4o8AgFE.js";import{a as zt,I as Zn}from"../chunks/9VRlXIzu.js";import{L as Lt}from"../chunks/B-ei7I0U.js";import{a as Ve,t as je}from"../chunks/DLjgCAwv.js";import{C as Rr}from"../chunks/B1DjANuF.js";import{C as Kn}from"../chunks/B6FvvaJA.js";import{S as Un}from"../chunks/BjSlKAoi.js";import{A as Wn}from"../chunks/CVZof6nJ.js";import{a as ur}from"../chunks/CS3lvyui.js";import{c as Ze}from"../chunks/kjmZGRhK.js";import{V as Gn}from"../chunks/BL4DxE0O.js";import{A as Qn}from"../chunks/CSZcEuzQ.js";import{i as Pr,a as $n}from"../chunks/C4k7jWy3.js";import{m as He,s as Xn,C as Cr,u as Ft,w as De,h as Ar,j as Je,k as vt,l as Yn,o as Jn,p as es,q as ts,r as rs,t as ns,M as ss,E as Tr,v as is,x as as,y as os,z as ls,B as us,D as cs,G as hs,H as ds,I as ps,J as gs,K as fs,L as vs,T as cr,N as ms,O as Or,Q as Nr,R as zr,U as Lr,V as Mr,g as Er,a as bs,W as ks,X as xs,Y as _s,Z as Hr,_ as ws,$ as ys,c as ne,n as Ge,f as Ss,b as Vt,F as Is,P as Rs,d as Ps}from"../chunks/C8KZL4cS.js";import{S as Cs}from"../chunks/BSn9OhkE.js";import{q as mt,w as hr}from"../chunks/DvdFYW7d.js";var As=T("<input/>"),Ts=T("<input/>");function Os(s,e){Ie(e,!0);let t=Z(e,"value",15),n=Ee(e,["$$slots","$$events","$$legacy","value"]);const r=d(()=>He(n,{"aria-hidden":"true",tabindex:-1,style:Xn}));var o=G(),a=H(o);{var l=u=>{var v=As();xe(v,()=>({...i(r),value:t()}),void 0,void 0,void 0,!0),c(u,v)},h=u=>{var v=Ts();xe(v,()=>({...i(r)}),void 0,void 0,void 0,!0),zt(v,t),c(u,v)};z(a,u=>{i(r).type==="checkbox"?u(l):u(h,!1)})}c(s,o),Re()}const dr=[Yn,Ar,Jn,es,ts,rs,ns,ss,Tr,is,as,os,ls,us,cs,hs,ds,ps,gs,fs,vs],Ns=[vt,Or,Nr],zs=[Je,zr,Lr],Ls=[...Ns,...zs];class qr{opts;#e=ve(!1);get touchedInput(){return i(this.#e)}set touchedInput(e){U(this.#e,e,!0)}#t=ve("");get inputValue(){return i(this.#t)}set inputValue(e){U(this.#t,e,!0)}#n=ve(null);get inputNode(){return i(this.#n)}set inputNode(e){U(this.#n,e,!0)}#r=ve(null);get contentNode(){return i(this.#r)}set contentNode(e){U(this.#r,e,!0)}#s=ve(null);get triggerNode(){return i(this.#s)}set triggerNode(e){U(this.#s,e,!0)}#i=ve("");get valueId(){return i(this.#i)}set valueId(e){U(this.#i,e,!0)}#a=ve(null);get highlightedNode(){return i(this.#a)}set highlightedNode(e){U(this.#a,e,!0)}#o=d(()=>this.highlightedNode?this.highlightedNode.getAttribute("data-value"):null);get highlightedValue(){return i(this.#o)}set highlightedValue(e){U(this.#o,e)}#l=d(()=>{if(this.highlightedNode)return this.highlightedNode.id});get highlightedId(){return i(this.#l)}set highlightedId(e){U(this.#l,e)}#u=d(()=>this.highlightedNode?this.highlightedNode.getAttribute("data-label"):null);get highlightedLabel(){return i(this.#u)}set highlightedLabel(e){U(this.#u,e)}isUsingKeyboard=!1;isCombobox=!1;bitsAttrs;constructor(e){this.opts=e,this.isCombobox=e.isCombobox,this.bitsAttrs=Gs(this),rn(()=>{this.opts.open.current||this.setHighlightedNode(null)})}setHighlightedNode(e,t=!1){this.highlightedNode=e,e&&(this.isUsingKeyboard||t)&&e.scrollIntoView({block:this.opts.scrollAlignment.current})}getCandidateNodes(){const e=this.contentNode;return e?Array.from(e.querySelectorAll(`[${this.bitsAttrs.item}]:not([data-disabled])`)):[]}setHighlightedToFirstCandidate(){this.setHighlightedNode(null);const e=this.getCandidateNodes();e.length&&this.setHighlightedNode(e[0])}getNodeByValue(e){return this.getCandidateNodes().find(n=>n.dataset.value===e)??null}setOpen(e){this.opts.open.current=e}toggleOpen(){this.opts.open.current=!this.opts.open.current}handleOpen(){this.setOpen(!0)}handleClose(){this.setHighlightedNode(null),this.setOpen(!1)}toggleMenu(){this.toggleOpen()}}class Ms extends qr{opts;isMulti=!1;#e=d(()=>this.opts.value.current!=="");get hasValue(){return i(this.#e)}set hasValue(e){U(this.#e,e)}#t=d(()=>this.opts.items.current.length?this.opts.items.current.find(t=>t.value===this.opts.value.current)?.label??"":"");get currentLabel(){return i(this.#t)}set currentLabel(e){U(this.#t,e)}#n=d(()=>this.opts.items.current.length?this.opts.items.current.filter(t=>!t.disabled).map(t=>t.label):[]);get candidateLabels(){return i(this.#n)}set candidateLabels(e){U(this.#n,e)}#r=d(()=>!(this.isMulti||this.opts.items.current.length===0));get dataTypeaheadEnabled(){return i(this.#r)}set dataTypeaheadEnabled(e){U(this.#r,e)}constructor(e){super(e),this.opts=e,Dt(()=>{!this.opts.open.current&&this.highlightedNode&&this.setHighlightedNode(null)}),De(()=>this.opts.open.current,()=>{this.opts.open.current&&this.setInitialHighlightedNode()})}includesItem(e){return this.opts.value.current===e}toggleItem(e,t=e){this.opts.value.current=this.includesItem(e)?"":e,this.inputValue=t}setInitialHighlightedNode(){Hr(()=>{if(this.highlightedNode&&document.contains(this.highlightedNode))return;if(this.opts.value.current!==""){const t=this.getNodeByValue(this.opts.value.current);if(t){this.setHighlightedNode(t,!0);return}}const e=this.getCandidateNodes()[0];e&&this.setHighlightedNode(e,!0)})}}class Es extends qr{opts;isMulti=!0;#e=d(()=>this.opts.value.current.length>0);get hasValue(){return i(this.#e)}set hasValue(e){U(this.#e,e)}constructor(e){super(e),this.opts=e,Dt(()=>{!this.opts.open.current&&this.highlightedNode&&this.setHighlightedNode(null)}),De(()=>this.opts.open.current,()=>{this.opts.open.current&&this.setInitialHighlightedNode()})}includesItem(e){return this.opts.value.current.includes(e)}toggleItem(e,t=e){this.includesItem(e)?this.opts.value.current=this.opts.value.current.filter(n=>n!==e):this.opts.value.current=[...this.opts.value.current,e],this.inputValue=t}setInitialHighlightedNode(){Hr(()=>{if(this.highlightedNode&&document.contains(this.highlightedNode))return;if(this.opts.value.current.length&&this.opts.value.current[0]!==""){const t=this.getNodeByValue(this.opts.value.current[0]);if(t){this.setHighlightedNode(t,!0);return}}const e=this.getCandidateNodes()[0];e&&this.setHighlightedNode(e,!0)})}}class Hs{opts;root;constructor(e,t){this.opts=e,this.root=t,Ft({...e,onRefChange:n=>{this.root.inputNode=n}}),this.onkeydown=this.onkeydown.bind(this),this.oninput=this.oninput.bind(this),De([()=>this.root.opts.value.current,()=>this.opts.clearOnDeselect.current],([n,r],[o])=>{r&&(Array.isArray(n)&&Array.isArray(o)?n.length===0&&o.length!==0&&(this.root.inputValue=""):n===""&&o!==""&&(this.root.inputValue=""))})}onkeydown(e){if(this.root.isUsingKeyboard=!0,e.key!==Ar){if((e.key===Je||e.key===vt)&&e.preventDefault(),!this.root.opts.open.current){if(dr.includes(e.key)||e.key===cr||e.key===ms&&this.root.inputValue===""||(this.root.handleOpen(),this.root.hasValue))return;const t=this.root.getCandidateNodes();if(!t.length)return;if(e.key===vt){const n=t[0];this.root.setHighlightedNode(n)}else if(e.key===Je){const n=t[t.length-1];this.root.setHighlightedNode(n)}return}if(e.key===cr){this.root.handleClose();return}if(e.key===Tr&&!e.isComposing){e.preventDefault();const t=this.root.highlightedValue===this.root.opts.value.current;if(!this.root.opts.allowDeselect.current&&t&&!this.root.isMulti){this.root.handleClose();return}this.root.highlightedValue&&this.root.toggleItem(this.root.highlightedValue,this.root.highlightedLabel??void 0),!this.root.isMulti&&!t&&this.root.handleClose()}if(e.key===Je&&e.altKey&&this.root.handleClose(),Ls.includes(e.key)){e.preventDefault();const t=this.root.getCandidateNodes(),n=this.root.highlightedNode,r=n?t.indexOf(n):-1,o=this.root.opts.loop.current;let a;if(e.key===vt?a=On(t,r,o):e.key===Je?a=Nn(t,r,o):e.key===zr?a=zn(t,r,10,o):e.key===Or?a=Ln(t,r,10,o):e.key===Nr?a=t[0]:e.key===Lr&&(a=t[t.length-1]),!a)return;this.root.setHighlightedNode(a);return}dr.includes(e.key)||this.root.highlightedNode||this.root.setHighlightedToFirstCandidate()}}oninput(e){this.root.inputValue=e.currentTarget.value,this.root.setHighlightedToFirstCandidate()}#e=d(()=>({id:this.opts.id.current,role:"combobox",disabled:this.root.opts.disabled.current?!0:void 0,"aria-activedescendant":this.root.highlightedId,"aria-autocomplete":"list","aria-expanded":bs(this.root.opts.open.current),"data-state":Er(this.root.opts.open.current),"data-disabled":Mr(this.root.opts.disabled.current),onkeydown:this.onkeydown,oninput:this.oninput,[this.root.bitsAttrs.input]:""}));get props(){return i(this.#e)}set props(e){U(this.#e,e)}}class qs{opts;root;#e=ve(null);get viewportNode(){return i(this.#e)}set viewportNode(e){U(this.#e,e,!0)}#t=ve(!1);get isPositioned(){return i(this.#t)}set isPositioned(e){U(this.#t,e,!0)}constructor(e,t){this.opts=e,this.root=t,Ft({...e,onRefChange:n=>{this.root.contentNode=n},deps:()=>this.root.opts.open.current}),ks(()=>{this.root.contentNode=null,this.isPositioned=!1}),De(()=>this.root.opts.open.current,()=>{this.root.opts.open.current||(this.isPositioned=!1)}),this.onpointermove=this.onpointermove.bind(this)}onpointermove(e){this.root.isUsingKeyboard=!1}#n=d(()=>{const e=this.root.isCombobox?"--bits-combobox":"--bits-select";return{[`${e}-content-transform-origin`]:"var(--bits-floating-transform-origin)",[`${e}-content-available-width`]:"var(--bits-floating-available-width)",[`${e}-content-available-height`]:"var(--bits-floating-available-height)",[`${e}-anchor-width`]:" var(--bits-floating-anchor-width)",[`${e}-anchor-height`]:"var(--bits-floating-anchor-height)"}});onInteractOutside=e=>{if(e.target===this.root.triggerNode||e.target===this.root.inputNode){e.preventDefault();return}this.opts.onInteractOutside.current(e),!e.defaultPrevented&&this.root.handleClose()};onEscapeKeydown=e=>{this.opts.onEscapeKeydown.current(e),!e.defaultPrevented&&this.root.handleClose()};onOpenAutoFocus=e=>{e.preventDefault()};onCloseAutoFocus=e=>{e.preventDefault()};#r=d(()=>({open:this.root.opts.open.current}));get snippetProps(){return i(this.#r)}set snippetProps(e){U(this.#r,e)}#s=d(()=>({id:this.opts.id.current,role:"listbox","aria-multiselectable":this.root.isMulti?"true":void 0,"data-state":Er(this.root.opts.open.current),[this.root.bitsAttrs.content]:"",style:{display:"flex",flexDirection:"column",outline:"none",boxSizing:"border-box",pointerEvents:"auto",...i(this.#n)},onpointermove:this.onpointermove}));get props(){return i(this.#s)}set props(e){U(this.#s,e)}popperProps={onInteractOutside:this.onInteractOutside,onEscapeKeydown:this.onEscapeKeydown,onOpenAutoFocus:this.onOpenAutoFocus,onCloseAutoFocus:this.onCloseAutoFocus,trapFocus:!1,loop:!1,onPlaced:()=>{this.root.opts.open.current&&(this.isPositioned=!0)}}}class Ds{opts;root;#e=d(()=>this.root.includesItem(this.opts.value.current));get isSelected(){return i(this.#e)}set isSelected(e){U(this.#e,e)}#t=d(()=>this.root.highlightedValue===this.opts.value.current);get isHighlighted(){return i(this.#t)}set isHighlighted(e){U(this.#t,e)}prevHighlighted=new xs(()=>this.isHighlighted);#n=ve(!1);get mounted(){return i(this.#n)}set mounted(e){U(this.#n,e,!0)}constructor(e,t){this.opts=e,this.root=t,Ft({...e,deps:()=>this.mounted}),De([()=>this.isHighlighted,()=>this.prevHighlighted.current],()=>{this.isHighlighted?this.opts.onHighlight.current():this.prevHighlighted.current&&this.opts.onUnhighlight.current()}),De(()=>this.mounted,()=>{this.mounted&&this.root.setInitialHighlightedNode()}),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this),this.onpointermove=this.onpointermove.bind(this)}handleSelect(){if(this.opts.disabled.current)return;const e=this.opts.value.current===this.root.opts.value.current;if(!this.root.opts.allowDeselect.current&&e&&!this.root.isMulti){this.root.handleClose();return}this.root.toggleItem(this.opts.value.current,this.opts.label.current),!this.root.isMulti&&!e&&this.root.handleClose()}#r=d(()=>({selected:this.isSelected,highlighted:this.isHighlighted}));get snippetProps(){return i(this.#r)}set snippetProps(e){U(this.#r,e)}onpointerdown(e){e.preventDefault()}onpointerup(e){if(!(e.defaultPrevented||!this.opts.ref.current)){if(e.pointerType==="touch"&&!_s){qn(this.opts.ref.current,"click",()=>{this.handleSelect(),this.root.setHighlightedNode(this.opts.ref.current)},{once:!0});return}e.preventDefault(),this.handleSelect(),e.pointerType==="touch"&&this.root.setHighlightedNode(this.opts.ref.current)}}onpointermove(e){e.pointerType!=="touch"&&this.root.highlightedNode!==this.opts.ref.current&&this.root.setHighlightedNode(this.opts.ref.current)}#s=d(()=>({id:this.opts.id.current,role:"option","aria-selected":this.root.includesItem(this.opts.value.current)?"true":void 0,"data-value":this.opts.value.current,"data-disabled":Mr(this.opts.disabled.current),"data-highlighted":this.root.highlightedValue===this.opts.value.current&&!this.opts.disabled.current?"":void 0,"data-selected":this.root.includesItem(this.opts.value.current)?"":void 0,"data-label":this.opts.label.current,[this.root.bitsAttrs.item]:"",onpointermove:this.onpointermove,onpointerdown:this.onpointerdown,onpointerup:this.onpointerup}));get props(){return i(this.#s)}set props(e){U(this.#s,e)}}class Bs{opts;root;#e=d(()=>this.root.opts.name.current!=="");get shouldRender(){return i(this.#e)}set shouldRender(e){U(this.#e,e)}constructor(e,t){this.opts=e,this.root=t,this.onfocus=this.onfocus.bind(this)}onfocus(e){e.preventDefault(),this.root.isCombobox?this.root.inputNode?.focus():this.root.triggerNode?.focus()}#t=d(()=>({disabled:ys(this.root.opts.disabled.current),required:ws(this.root.opts.required.current),name:this.root.opts.name.current,value:this.opts.value.current,onfocus:this.onfocus}));get props(){return i(this.#t)}set props(e){U(this.#t,e)}}const at=new Cr("Select.Root | Combobox.Root"),Fs=new Cr("Select.Content | Combobox.Content");function Vs(s){const{type:e,...t}=s,n=e==="single"?new Ms(t):new Es(t);return at.set(n)}function js(s){return new Hs(s,at.get())}function Zs(s){return Fs.set(new qs(s,at.get()))}function Ks(s){return new Ds(s,at.get())}function Us(s){return new Bs(s,at.get())}const Ws=["trigger","content","item","viewport","scroll-up-button","scroll-down-button","group","group-label","separator","arrow","input","content-wrapper","item-text","value"];function Gs(s){const e=s.isCombobox,t={};for(const n of Ws)t[n]=e?`data-combobox-${n}`:`data-select-${n}`;return t}function pr(s,e){Ie(e,!0);let t=Z(e,"value",15,"");const n=Us({value:ne.with(()=>t())});var r=G(),o=H(r);{var a=l=>{Os(l,We(()=>n.props,{get value(){return t()},set value(h){t(h)}}))};z(o,l=>{n.shouldRender&&l(a)})}c(s,r),Re()}var Qs=T("<!> <!>",1);function $s(s,e){Ie(e,!0);let t=Z(e,"value",15),n=Z(e,"onValueChange",3,Ge),r=Z(e,"name",3,""),o=Z(e,"disabled",3,!1),a=Z(e,"open",15,!1),l=Z(e,"onOpenChange",3,Ge),h=Z(e,"loop",3,!1),u=Z(e,"scrollAlignment",3,"nearest"),v=Z(e,"required",3,!1),S=Z(e,"items",19,()=>[]),I=Z(e,"allowDeselect",3,!0);if(t()===void 0){const x=e.type==="single"?"":[];t(x)}De.pre(()=>t(),()=>{t()===void 0&&t(e.type==="single"?"":[])});const F=Vs({type:e.type,value:ne.with(()=>t(),x=>{t(x),n()(x)}),disabled:ne.with(()=>o()),required:ne.with(()=>v()),open:ne.with(()=>a(),x=>{a(x),l()(x)}),loop:ne.with(()=>h()),scrollAlignment:ne.with(()=>u()),name:ne.with(()=>r()),isCombobox:!0,items:ne.with(()=>S()),allowDeselect:ne.with(()=>I())});var q=Qs(),C=H(q);Ss(C,{children:(x,w)=>{var b=G(),p=H(b);Ae(p,()=>e.children??rt),c(x,b)},$$slots:{default:!0}});var O=B(C,2);{var W=x=>{var w=G(),b=H(w);{var p=R=>{var L=G(),V=H(L);nt(V,17,()=>F.opts.value.current,Ir,(A,g)=>{pr(A,{get value(){return i(g)}})}),c(R,L)};z(b,R=>{F.opts.value.current.length&&R(p)})}c(x,w)},m=x=>{pr(x,{get value(){return F.opts.value.current},set value(w){F.opts.value.current=w}})};z(O,x=>{Array.isArray(F.opts.value.current)?x(W):x(m,!1)})}c(s,q),Re()}var Xs=T("<input/>");function Ys(s,e){Ie(e,!0);let t=Z(e,"id",19,Vt),n=Z(e,"ref",15,null),r=Z(e,"clearOnDeselect",3,!1),o=Ee(e,["$$slots","$$events","$$legacy","id","ref","child","defaultValue","clearOnDeselect"]);const a=js({id:ne.with(()=>t()),ref:ne.with(()=>n(),v=>n(v)),clearOnDeselect:ne.with(()=>r())});e.defaultValue&&(a.root.inputValue=e.defaultValue);const l=d(()=>He(o,a.props,{value:a.root.inputValue}));var h=G(),u=H(h);Ze(u,()=>Is,(v,S)=>{S(v,{get id(){return t()},children:(I,F)=>{var q=G(),C=H(q);{var O=m=>{var x=G(),w=H(x);Ae(w,()=>e.child,()=>({props:i(l)})),c(m,x)},W=m=>{var x=Xs();xe(x,()=>({...i(l)}),void 0,void 0,void 0,!0),c(m,x)};z(C,m=>{e.child?m(O):m(W,!1)})}c(I,q)},$$slots:{default:!0}})}),c(s,h),Re()}var Js=T("<div><div><!></div></div>"),ei=T("<div><div><!></div></div>");function ti(s,e){Ie(e,!0);let t=Z(e,"id",19,Vt),n=Z(e,"ref",15,null),r=Z(e,"forceMount",3,!1),o=Z(e,"side",3,"bottom"),a=Z(e,"onInteractOutside",3,Ge),l=Z(e,"onEscapeKeydown",3,Ge),h=Z(e,"preventScroll",3,!1),u=Ee(e,["$$slots","$$events","$$legacy","id","ref","forceMount","side","onInteractOutside","onEscapeKeydown","children","child","preventScroll"]);const v=Zs({id:ne.with(()=>t()),ref:ne.with(()=>n(),O=>n(O)),onInteractOutside:ne.with(()=>a()),onEscapeKeydown:ne.with(()=>l())}),S=d(()=>He(u,v.props));var I=G(),F=H(I);{var q=O=>{Rs(O,We(()=>i(S),()=>v.popperProps,{get side(){return o()},get enabled(){return v.root.opts.open.current},get id(){return t()},get preventScroll(){return h()},forceMount:!0,popper:(m,x)=>{let w=()=>x?.().props,b=()=>x?.().wrapperProps;const p=d(()=>He(w(),{style:v.props.style}));var R=G(),L=H(R);{var V=g=>{var f=G(),k=H(f);{let N=d(()=>({props:i(p),wrapperProps:b(),...v.snippetProps}));Ae(k,()=>e.child,()=>i(N))}c(g,f)},A=g=>{var f=Js();xe(f,()=>({...b()}));var k=y(f);xe(k,()=>({...i(p)}));var N=y(k);Ae(N,()=>e.children??rt),_(k),_(f),c(g,f)};z(L,g=>{e.child?g(V):g(A,!1)})}c(m,R)},$$slots:{popper:!0}}))},C=O=>{var W=G(),m=H(W);{var x=w=>{Ps(w,We(()=>i(S),()=>v.popperProps,{get side(){return o()},get present(){return v.root.opts.open.current},get id(){return t()},get preventScroll(){return h()},forceMount:!1,popper:(p,R)=>{let L=()=>R?.().props,V=()=>R?.().wrapperProps;const A=d(()=>He(L(),{style:v.props.style}));var g=G(),f=H(g);{var k=P=>{var E=G(),D=H(E);{let M=d(()=>({props:i(A),wrapperProps:V(),...v.snippetProps}));Ae(D,()=>e.child,()=>i(M))}c(P,E)},N=P=>{var E=ei();xe(E,()=>({...V()}));var D=y(E);xe(D,()=>({...i(A)}));var M=y(D);Ae(M,()=>e.children??rt),_(D),_(E),c(P,E)};z(f,P=>{e.child?P(k):P(N,!1)})}c(p,g)},$$slots:{popper:!0}}))};z(m,w=>{r()||w(x)},!0)}c(O,W)};z(F,O=>{r()?O(q):O(C,!1)})}c(s,I),Re()}var ri=T("<div><!></div>"),ni=T("<!> <!>",1);function si(s,e){Ie(e,!0);let t=Z(e,"id",19,Vt),n=Z(e,"ref",15,null),r=Z(e,"label",19,()=>e.value),o=Z(e,"disabled",3,!1),a=Z(e,"onHighlight",3,Ge),l=Z(e,"onUnhighlight",3,Ge),h=Ee(e,["$$slots","$$events","$$legacy","id","ref","value","label","disabled","children","child","onHighlight","onUnhighlight"]);const u=Ks({id:ne.with(()=>t()),ref:ne.with(()=>n(),O=>n(O)),value:ne.with(()=>e.value),disabled:ne.with(()=>o()),label:ne.with(()=>r()),onHighlight:ne.with(()=>a()),onUnhighlight:ne.with(()=>l())}),v=d(()=>He(h,u.props));var S=ni(),I=H(S);{var F=O=>{var W=G(),m=H(W);{let x=d(()=>({props:i(v),...u.snippetProps}));Ae(m,()=>e.child,()=>i(x))}c(O,W)},q=O=>{var W=ri();xe(W,()=>({...i(v)}));var m=y(W);Ae(m,()=>e.children??rt,()=>u.snippetProps),_(W),c(O,W)};z(I,O=>{e.child?O(F):O(q,!1)})}var C=B(I,2);Mn(C,{get mounted(){return u.mounted},set mounted(O){u.mounted=O}}),c(s,S),Re()}var gr=Object.prototype.hasOwnProperty;function Mt(s,e){var t,n;if(s===e)return!0;if(s&&e&&(t=s.constructor)===e.constructor){if(t===Date)return s.getTime()===e.getTime();if(t===RegExp)return s.toString()===e.toString();if(t===Array){if((n=s.length)===e.length)for(;n--&&Mt(s[n],e[n]););return n===-1}if(!t||typeof s=="object"){n=0;for(t in s)if(gr.call(s,t)&&++n&&!gr.call(e,t)||!(t in e)||!Mt(s[t],e[t]))return!1;return Object.keys(e).length===n}}return s!==s&&e!==e}var ii=_t('<svg><path fill="currentColor" d="M13 19.9a5 5 0 0 0 4-4.9v-3c0-.701-.144-1.378-.415-2h-9.17A5 5 0 0 0 7 12v3a5 5 0 0 0 4 4.9V14h2zm-7.464-2.21A7 7 0 0 1 5 15H2v-2h3v-1c0-.643.087-1.265.249-1.856L3.036 8.866l1-1.732L6.056 8.3a7 7 0 0 1 .199-.3h11.49q.103.148.199.3l2.02-1.166l1 1.732l-2.213 1.278c.162.59.249 1.213.249 1.856v1h3v2h-3a7 7 0 0 1-.536 2.69l2.5 1.444l-1 1.732l-2.526-1.458A6.99 6.99 0 0 1 12 22a6.99 6.99 0 0 1-5.438-2.592l-2.526 1.458l-1-1.732zM8 6a4 4 0 1 1 8 0z"></path></svg>');function ai(s,e){const t=Ee(e,["$$slots","$$events","$$legacy"]);var n=ii();xe(n,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t})),c(s,n)}var oi=_t('<svg><path fill="currentColor" d="M4 19h16v-7h2v8a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-8h2zm9-10v7h-2V9H6l6-6l6 6z"></path></svg>');function li(s,e){const t=Ee(e,["$$slots","$$events","$$legacy"]);var n=oi();xe(n,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t})),c(s,n)}var ui=_t('<svg><path fill="currentColor" d="m20.083 15.2l1.202.721a.5.5 0 0 1 0 .858l-8.77 5.262a1 1 0 0 1-1.03 0l-8.77-5.262a.5.5 0 0 1 0-.858l1.202-.721L12 20.05zm0-4.7l1.202.721a.5.5 0 0 1 0 .858L12 17.649l-9.285-5.57a.5.5 0 0 1 0-.858l1.202-.721L12 15.35zm-7.569-9.191l8.771 5.262a.5.5 0 0 1 0 .858L12 12.999L2.715 7.43a.5.5 0 0 1 0-.858l8.77-5.262a1 1 0 0 1 1.03 0M12 3.332L5.887 7L12 10.668L18.113 7z"></path></svg>');function ci(s,e){const t=Ee(e,["$$slots","$$events","$$legacy"]);var n=ui();xe(n,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t})),c(s,n)}var hi=_t('<svg><path fill="currentColor" d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10s-4.477 10-10 10m-1-7v2h2v-2zm0-8v6h2V7z"></path></svg>');function di(s,e){const t=Ee(e,["$$slots","$$events","$$legacy"]);var n=hi();xe(n,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...t})),c(s,n)}function jt(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Fe=jt();function Dr(s){Fe=s}var tt={exec:()=>null};function $(s,e=""){let t=typeof s=="string"?s:s.source,n={replace:(r,o)=>{let a=typeof o=="string"?o:o.source;return a=a.replace(me.caret,"$1"),t=t.replace(r,a),n},getRegex:()=>new RegExp(t,e)};return n}var me={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:s=>new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}#`),htmlBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}<(?:[a-z].*>|!--)`,"i")},pi=/^(?:[ \t]*(?:\n|$))+/,gi=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,fi=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ot=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,vi=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Zt=/(?:[*+-]|\d{1,9}[.)])/,Br=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Fr=$(Br).replace(/bull/g,Zt).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),mi=$(Br).replace(/bull/g,Zt).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Kt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,bi=/^[^\n]+/,Ut=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,ki=$(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Ut).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),xi=$(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Zt).getRegex(),wt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Wt=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,_i=$("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Wt).replace("tag",wt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Vr=$(Kt).replace("hr",ot).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wt).getRegex(),wi=$(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Vr).getRegex(),Gt={blockquote:wi,code:gi,def:ki,fences:fi,heading:vi,hr:ot,html:_i,lheading:Fr,list:xi,newline:pi,paragraph:Vr,table:tt,text:bi},fr=$("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ot).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wt).getRegex(),yi={...Gt,lheading:mi,table:fr,paragraph:$(Kt).replace("hr",ot).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",fr).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wt).getRegex()},Si={...Gt,html:$(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Wt).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:tt,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:$(Kt).replace("hr",ot).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Fr).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Ii=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ri=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,jr=/^( {2,}|\\)\n(?!\s*$)/,Pi=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,yt=/[\p{P}\p{S}]/u,Qt=/[\s\p{P}\p{S}]/u,Zr=/[^\s\p{P}\p{S}]/u,Ci=$(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Qt).getRegex(),Kr=/(?!~)[\p{P}\p{S}]/u,Ai=/(?!~)[\s\p{P}\p{S}]/u,Ti=/(?:[^\s\p{P}\p{S}]|~)/u,Oi=$(/link|code|html/,"g").replace("link",new RegExp("\\[(?:[^\\[\\]`]|(?<!`)(?<a>`+)[^`]+\\k<a>(?!`))*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)")).replace("code",new RegExp("(?<!`)(?<b>`+)[^`]+\\k<b>(?!`)")).replace("html",/<(?! )[^<>]*?>/).getRegex(),Ur=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Ni=$(Ur,"u").replace(/punct/g,yt).getRegex(),zi=$(Ur,"u").replace(/punct/g,Kr).getRegex(),Wr="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Li=$(Wr,"gu").replace(/notPunctSpace/g,Zr).replace(/punctSpace/g,Qt).replace(/punct/g,yt).getRegex(),Mi=$(Wr,"gu").replace(/notPunctSpace/g,Ti).replace(/punctSpace/g,Ai).replace(/punct/g,Kr).getRegex(),Ei=$("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Zr).replace(/punctSpace/g,Qt).replace(/punct/g,yt).getRegex(),Hi=$(/\\(punct)/,"gu").replace(/punct/g,yt).getRegex(),qi=$(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Di=$(Wt).replace("(?:-->|$)","-->").getRegex(),Bi=$("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Di).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),bt=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Fi=$(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",bt).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Gr=$(/^!?\[(label)\]\[(ref)\]/).replace("label",bt).replace("ref",Ut).getRegex(),Qr=$(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ut).getRegex(),Vi=$("reflink|nolink(?!\\()","g").replace("reflink",Gr).replace("nolink",Qr).getRegex(),vr=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,$t={_backpedal:tt,anyPunctuation:Hi,autolink:qi,blockSkip:Oi,br:jr,code:Ri,del:tt,emStrongLDelim:Ni,emStrongRDelimAst:Li,emStrongRDelimUnd:Ei,escape:Ii,link:Fi,nolink:Qr,punctuation:Ci,reflink:Gr,reflinkSearch:Vi,tag:Bi,text:Pi,url:tt},ji={...$t,link:$(/^!?\[(label)\]\((.*?)\)/).replace("label",bt).getRegex(),reflink:$(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",bt).getRegex()},Et={...$t,emStrongRDelimAst:Mi,emStrongLDelim:zi,url:$(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",vr).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:$(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",vr).getRegex()},Zi={...Et,br:$(jr).replace("{2,}","*").getRegex(),text:$(Et.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ft={normal:Gt,gfm:yi,pedantic:Si},Xe={normal:$t,gfm:Et,breaks:Zi,pedantic:ji},Ki={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mr=s=>Ki[s];function Ce(s,e){if(e){if(me.escapeTest.test(s))return s.replace(me.escapeReplace,mr)}else if(me.escapeTestNoEncode.test(s))return s.replace(me.escapeReplaceNoEncode,mr);return s}function br(s){try{s=encodeURI(s).replace(me.percentDecode,"%")}catch{return null}return s}function kr(s,e){let t=s.replace(me.findPipe,(o,a,l)=>{let h=!1,u=a;for(;--u>=0&&l[u]==="\\";)h=!h;return h?"|":" |"}),n=t.split(me.splitPipe),r=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(me.slashPipe,"|");return n}function Ye(s,e,t){let n=s.length;if(n===0)return"";let r=0;for(;r<n&&s.charAt(n-r-1)===e;)r++;return s.slice(0,n-r)}function Ui(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<s.length;n++)if(s[n]==="\\")n++;else if(s[n]===e[0])t++;else if(s[n]===e[1]&&(t--,t<0))return n;return t>0?-2:-1}function xr(s,e,t,n,r){let o=e.href,a=e.title||null,l=s[1].replace(r.other.outputLinkReplace,"$1");n.state.inLink=!0;let h={type:s[0].charAt(0)==="!"?"image":"link",raw:t,href:o,title:a,text:l,tokens:n.inlineTokens(l)};return n.state.inLink=!1,h}function Wi(s,e,t){let n=s.match(t.other.indentCodeCompensation);if(n===null)return e;let r=n[1];return e.split(`
`).map(o=>{let a=o.match(t.other.beginningSpace);if(a===null)return o;let[l]=a;return l.length>=r.length?o.slice(r.length):o}).join(`
`)}var kt=class{options;rules;lexer;constructor(s){this.options=s||Fe}space(s){let e=this.rules.block.newline.exec(s);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(s){let e=this.rules.block.code.exec(s);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Ye(t,`
`)}}}fences(s){let e=this.rules.block.fences.exec(s);if(e){let t=e[0],n=Wi(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(s){let e=this.rules.block.heading.exec(s);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let n=Ye(t,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(t=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(s){let e=this.rules.block.hr.exec(s);if(e)return{type:"hr",raw:Ye(e[0],`
`)}}blockquote(s){let e=this.rules.block.blockquote.exec(s);if(e){let t=Ye(e[0],`
`).split(`
`),n="",r="",o=[];for(;t.length>0;){let a=!1,l=[],h;for(h=0;h<t.length;h++)if(this.rules.other.blockquoteStart.test(t[h]))l.push(t[h]),a=!0;else if(!a)l.push(t[h]);else break;t=t.slice(h);let u=l.join(`
`),v=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${u}`:u,r=r?`${r}
${v}`:v;let S=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(v,o,!0),this.lexer.state.top=S,t.length===0)break;let I=o.at(-1);if(I?.type==="code")break;if(I?.type==="blockquote"){let F=I,q=F.raw+`
`+t.join(`
`),C=this.blockquote(q);o[o.length-1]=C,n=n.substring(0,n.length-F.raw.length)+C.raw,r=r.substring(0,r.length-F.text.length)+C.text;break}else if(I?.type==="list"){let F=I,q=F.raw+`
`+t.join(`
`),C=this.list(q);o[o.length-1]=C,n=n.substring(0,n.length-I.raw.length)+C.raw,r=r.substring(0,r.length-F.raw.length)+C.raw,t=q.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:o,text:r}}}list(s){let e=this.rules.block.list.exec(s);if(e){let t=e[1].trim(),n=t.length>1,r={type:"list",raw:"",ordered:n,start:n?+t.slice(0,-1):"",loose:!1,items:[]};t=n?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=n?t:"[*+-]");let o=this.rules.other.listItemRegex(t),a=!1;for(;s;){let h=!1,u="",v="";if(!(e=o.exec(s))||this.rules.block.hr.test(s))break;u=e[0],s=s.substring(u.length);let S=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,W=>" ".repeat(3*W.length)),I=s.split(`
`,1)[0],F=!S.trim(),q=0;if(this.options.pedantic?(q=2,v=S.trimStart()):F?q=e[1].length+1:(q=e[2].search(this.rules.other.nonSpaceChar),q=q>4?1:q,v=S.slice(q),q+=e[1].length),F&&this.rules.other.blankLine.test(I)&&(u+=I+`
`,s=s.substring(I.length+1),h=!0),!h){let W=this.rules.other.nextBulletRegex(q),m=this.rules.other.hrRegex(q),x=this.rules.other.fencesBeginRegex(q),w=this.rules.other.headingBeginRegex(q),b=this.rules.other.htmlBeginRegex(q);for(;s;){let p=s.split(`
`,1)[0],R;if(I=p,this.options.pedantic?(I=I.replace(this.rules.other.listReplaceNesting,"  "),R=I):R=I.replace(this.rules.other.tabCharGlobal,"    "),x.test(I)||w.test(I)||b.test(I)||W.test(I)||m.test(I))break;if(R.search(this.rules.other.nonSpaceChar)>=q||!I.trim())v+=`
`+R.slice(q);else{if(F||S.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||x.test(S)||w.test(S)||m.test(S))break;v+=`
`+I}!F&&!I.trim()&&(F=!0),u+=p+`
`,s=s.substring(p.length+1),S=R.slice(q)}}r.loose||(a?r.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(a=!0));let C=null,O;this.options.gfm&&(C=this.rules.other.listIsTask.exec(v),C&&(O=C[0]!=="[ ] ",v=v.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:u,task:!!C,checked:O,loose:!1,text:v,tokens:[]}),r.raw+=u}let l=r.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let h=0;h<r.items.length;h++)if(this.lexer.state.top=!1,r.items[h].tokens=this.lexer.blockTokens(r.items[h].text,[]),!r.loose){let u=r.items[h].tokens.filter(S=>S.type==="space"),v=u.length>0&&u.some(S=>this.rules.other.anyLine.test(S.raw));r.loose=v}if(r.loose)for(let h=0;h<r.items.length;h++)r.items[h].loose=!0;return r}}html(s){let e=this.rules.block.html.exec(s);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(s){let e=this.rules.block.def.exec(s);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:r}}}table(s){let e=this.rules.block.table.exec(s);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=kr(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===n.length){for(let a of n)this.rules.other.tableAlignRight.test(a)?o.align.push("right"):this.rules.other.tableAlignCenter.test(a)?o.align.push("center"):this.rules.other.tableAlignLeft.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<t.length;a++)o.header.push({text:t[a],tokens:this.lexer.inline(t[a]),header:!0,align:o.align[a]});for(let a of r)o.rows.push(kr(a,o.header.length).map((l,h)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[h]})));return o}}lheading(s){let e=this.rules.block.lheading.exec(s);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(s){let e=this.rules.block.paragraph.exec(s);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(s){let e=this.rules.block.text.exec(s);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(s){let e=this.rules.inline.escape.exec(s);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(s){let e=this.rules.inline.tag.exec(s);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(s){let e=this.rules.inline.link.exec(s);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let o=Ye(t.slice(0,-1),"\\");if((t.length-o.length)%2===0)return}else{let o=Ui(e[2],"()");if(o===-2)return;if(o>-1){let a=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let n=e[2],r="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(n);o&&(n=o[1],r=o[3])}else r=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?n=n.slice(1):n=n.slice(1,-1)),xr(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(s,e){let t;if((t=this.rules.inline.reflink.exec(s))||(t=this.rules.inline.nolink.exec(s))){let n=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[n.toLowerCase()];if(!r){let o=t[0].charAt(0);return{type:"text",raw:o,text:o}}return xr(t,r,t[0],this.lexer,this.rules)}}emStrong(s,e,t=""){let n=this.rules.inline.emStrongLDelim.exec(s);if(!(!n||n[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!t||this.rules.inline.punctuation.exec(t))){let r=[...n[0]].length-1,o,a,l=r,h=0,u=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*s.length+r);(n=u.exec(e))!=null;){if(o=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!o)continue;if(a=[...o].length,n[3]||n[4]){l+=a;continue}else if((n[5]||n[6])&&r%3&&!((r+a)%3)){h+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+h);let v=[...n[0]][0].length,S=s.slice(0,r+n.index+v+a);if(Math.min(r,a)%2){let F=S.slice(1,-1);return{type:"em",raw:S,text:F,tokens:this.lexer.inlineTokens(F)}}let I=S.slice(2,-2);return{type:"strong",raw:S,text:I,tokens:this.lexer.inlineTokens(I)}}}}codespan(s){let e=this.rules.inline.code.exec(s);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return n&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(s){let e=this.rules.inline.br.exec(s);if(e)return{type:"br",raw:e[0]}}del(s){let e=this.rules.inline.del.exec(s);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(s){let e=this.rules.inline.autolink.exec(s);if(e){let t,n;return e[2]==="@"?(t=e[1],n="mailto:"+t):(t=e[1],n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(s){let e;if(e=this.rules.inline.url.exec(s)){let t,n;if(e[2]==="@")t=e[0],n="mailto:"+t;else{let r;do r=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(r!==e[0]);t=e[0],e[1]==="www."?n="http://"+e[0]:n=e[0]}return{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(s){let e=this.rules.inline.text.exec(s);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},ye=class Ht{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Fe,this.options.tokenizer=this.options.tokenizer||new kt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:me,block:ft.normal,inline:Xe.normal};this.options.pedantic?(t.block=ft.pedantic,t.inline=Xe.pedantic):this.options.gfm&&(t.block=ft.gfm,this.options.breaks?t.inline=Xe.breaks:t.inline=Xe.gfm),this.tokenizer.rules=t}static get rules(){return{block:ft,inline:Xe}}static lex(e,t){return new Ht(t).lex(e)}static lexInline(e,t){return new Ht(t).inlineTokens(e)}lex(e){e=e.replace(me.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){for(this.options.pedantic&&(e=e.replace(me.tabCharGlobal,"    ").replace(me.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some(a=>(r=a.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let a=t.at(-1);r.raw.length===1&&a!==void 0?a.raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let a=t.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+r.raw,a.text+=`
`+r.text,this.inlineQueue.at(-1).src=a.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let a=t.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+r.raw,a.text+=`
`+r.raw,this.inlineQueue.at(-1).src=a.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},t.push(r));continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}let o=e;if(this.options.extensions?.startBlock){let a=1/0,l=e.slice(1),h;this.options.extensions.startBlock.forEach(u=>{h=u.call({lexer:this},l),typeof h=="number"&&h>=0&&(a=Math.min(a,h))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o))){let a=t.at(-1);n&&a?.type==="paragraph"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+r.raw,a.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):t.push(r),n=o.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let a=t.at(-1);a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+r.raw,a.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):t.push(r);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n=e,r=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)l.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let o=!1,a="";for(;e;){o||(a=""),o=!1;let l;if(this.options.extensions?.inline?.some(u=>(l=u.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);let u=t.at(-1);l.type==="text"&&u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):t.push(l);continue}if(l=this.tokenizer.emStrong(e,n,a)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),t.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),t.push(l);continue}let h=e;if(this.options.extensions?.startInline){let u=1/0,v=e.slice(1),S;this.options.extensions.startInline.forEach(I=>{S=I.call({lexer:this},v),typeof S=="number"&&S>=0&&(u=Math.min(u,S))}),u<1/0&&u>=0&&(h=e.substring(0,u+1))}if(l=this.tokenizer.inlineText(h)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),o=!0;let u=t.at(-1);u?.type==="text"?(u.raw+=l.raw,u.text+=l.text):t.push(l);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}},xt=class{options;parser;constructor(s){this.options=s||Fe}space(s){return""}code({text:s,lang:e,escaped:t}){let n=(e||"").match(me.notSpaceStart)?.[0],r=s.replace(me.endingNewline,"")+`
`;return n?'<pre><code class="language-'+Ce(n)+'">'+(t?r:Ce(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:Ce(r,!0))+`</code></pre>
`}blockquote({tokens:s}){return`<blockquote>
${this.parser.parse(s)}</blockquote>
`}html({text:s}){return s}def(s){return""}heading({tokens:s,depth:e}){return`<h${e}>${this.parser.parseInline(s)}</h${e}>
`}hr(s){return`<hr>
`}list(s){let e=s.ordered,t=s.start,n="";for(let a=0;a<s.items.length;a++){let l=s.items[a];n+=this.listitem(l)}let r=e?"ol":"ul",o=e&&t!==1?' start="'+t+'"':"";return"<"+r+o+`>
`+n+"</"+r+`>
`}listitem(s){let e="";if(s.task){let t=this.checkbox({checked:!!s.checked});s.loose?s.tokens[0]?.type==="paragraph"?(s.tokens[0].text=t+" "+s.tokens[0].text,s.tokens[0].tokens&&s.tokens[0].tokens.length>0&&s.tokens[0].tokens[0].type==="text"&&(s.tokens[0].tokens[0].text=t+" "+Ce(s.tokens[0].tokens[0].text),s.tokens[0].tokens[0].escaped=!0)):s.tokens.unshift({type:"text",raw:t+" ",text:t+" ",escaped:!0}):e+=t+" "}return e+=this.parser.parse(s.tokens,!!s.loose),`<li>${e}</li>
`}checkbox({checked:s}){return"<input "+(s?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:s}){return`<p>${this.parser.parseInline(s)}</p>
`}table(s){let e="",t="";for(let r=0;r<s.header.length;r++)t+=this.tablecell(s.header[r]);e+=this.tablerow({text:t});let n="";for(let r=0;r<s.rows.length;r++){let o=s.rows[r];t="";for(let a=0;a<o.length;a++)t+=this.tablecell(o[a]);n+=this.tablerow({text:t})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow({text:s}){return`<tr>
${s}</tr>
`}tablecell(s){let e=this.parser.parseInline(s.tokens),t=s.header?"th":"td";return(s.align?`<${t} align="${s.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:s}){return`<strong>${this.parser.parseInline(s)}</strong>`}em({tokens:s}){return`<em>${this.parser.parseInline(s)}</em>`}codespan({text:s}){return`<code>${Ce(s,!0)}</code>`}br(s){return"<br>"}del({tokens:s}){return`<del>${this.parser.parseInline(s)}</del>`}link({href:s,title:e,tokens:t}){let n=this.parser.parseInline(t),r=br(s);if(r===null)return n;s=r;let o='<a href="'+s+'"';return e&&(o+=' title="'+Ce(e)+'"'),o+=">"+n+"</a>",o}image({href:s,title:e,text:t,tokens:n}){n&&(t=this.parser.parseInline(n,this.parser.textRenderer));let r=br(s);if(r===null)return Ce(t);s=r;let o=`<img src="${s}" alt="${t}"`;return e&&(o+=` title="${Ce(e)}"`),o+=">",o}text(s){return"tokens"in s&&s.tokens?this.parser.parseInline(s.tokens):"escaped"in s&&s.escaped?s.text:Ce(s.text)}},Xt=class{strong({text:s}){return s}em({text:s}){return s}codespan({text:s}){return s}del({text:s}){return s}html({text:s}){return s}text({text:s}){return s}link({text:s}){return""+s}image({text:s}){return""+s}br(){return""}},Se=class qt{options;renderer;textRenderer;constructor(e){this.options=e||Fe,this.options.renderer=this.options.renderer||new xt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Xt}static parse(e,t){return new qt(t).parse(e)}static parseInline(e,t){return new qt(t).parseInline(e)}parse(e,t=!0){let n="";for(let r=0;r<e.length;r++){let o=e[r];if(this.options.extensions?.renderers?.[o.type]){let l=o,h=this.options.extensions.renderers[l.type].call({parser:this},l);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){n+=h||"";continue}}let a=o;switch(a.type){case"space":{n+=this.renderer.space(a);continue}case"hr":{n+=this.renderer.hr(a);continue}case"heading":{n+=this.renderer.heading(a);continue}case"code":{n+=this.renderer.code(a);continue}case"table":{n+=this.renderer.table(a);continue}case"blockquote":{n+=this.renderer.blockquote(a);continue}case"list":{n+=this.renderer.list(a);continue}case"html":{n+=this.renderer.html(a);continue}case"def":{n+=this.renderer.def(a);continue}case"paragraph":{n+=this.renderer.paragraph(a);continue}case"text":{let l=a,h=this.renderer.text(l);for(;r+1<e.length&&e[r+1].type==="text";)l=e[++r],h+=`
`+this.renderer.text(l);t?n+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):n+=h;continue}default:{let l='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return n}parseInline(e,t=this.renderer){let n="";for(let r=0;r<e.length;r++){let o=e[r];if(this.options.extensions?.renderers?.[o.type]){let l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=l||"";continue}}let a=o;switch(a.type){case"escape":{n+=t.text(a);break}case"html":{n+=t.html(a);break}case"link":{n+=t.link(a);break}case"image":{n+=t.image(a);break}case"strong":{n+=t.strong(a);break}case"em":{n+=t.em(a);break}case"codespan":{n+=t.codespan(a);break}case"br":{n+=t.br(a);break}case"del":{n+=t.del(a);break}case"text":{n+=t.text(a);break}default:{let l='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return n}},et=class{options;block;constructor(s){this.options=s||Fe}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(s){return s}postprocess(s){return s}processAllTokens(s){return s}emStrongMask(s){return s}provideLexer(){return this.block?ye.lex:ye.lexInline}provideParser(){return this.block?Se.parse:Se.parseInline}},Gi=class{defaults=jt();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Se;Renderer=xt;TextRenderer=Xt;Lexer=ye;Tokenizer=kt;Hooks=et;constructor(...s){this.use(...s)}walkTokens(s,e){let t=[];for(let n of s)switch(t=t.concat(e.call(this,n)),n.type){case"table":{let r=n;for(let o of r.header)t=t.concat(this.walkTokens(o.tokens,e));for(let o of r.rows)for(let a of o)t=t.concat(this.walkTokens(a.tokens,e));break}case"list":{let r=n;t=t.concat(this.walkTokens(r.items,e));break}default:{let r=n;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(o=>{let a=r[o].flat(1/0);t=t.concat(this.walkTokens(a,e))}):r.tokens&&(t=t.concat(this.walkTokens(r.tokens,e)))}}return t}use(...s){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return s.forEach(t=>{let n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let o=e.renderers[r.name];o?e.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=e[r.level];o?o.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),n.extensions=e),t.renderer){let r=this.defaults.renderer||new xt(this.defaults);for(let o in t.renderer){if(!(o in r))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=t.renderer[a],h=r[a];r[a]=(...u)=>{let v=l.apply(r,u);return v===!1&&(v=h.apply(r,u)),v||""}}n.renderer=r}if(t.tokenizer){let r=this.defaults.tokenizer||new kt(this.defaults);for(let o in t.tokenizer){if(!(o in r))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=t.tokenizer[a],h=r[a];r[a]=(...u)=>{let v=l.apply(r,u);return v===!1&&(v=h.apply(r,u)),v}}n.tokenizer=r}if(t.hooks){let r=this.defaults.hooks||new et;for(let o in t.hooks){if(!(o in r))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=t.hooks[a],h=r[a];et.passThroughHooks.has(o)?r[a]=u=>{if(this.defaults.async&&et.passThroughHooksRespectAsync.has(o))return(async()=>{let S=await l.call(r,u);return h.call(r,S)})();let v=l.call(r,u);return h.call(r,v)}:r[a]=(...u)=>{if(this.defaults.async)return(async()=>{let S=await l.apply(r,u);return S===!1&&(S=await h.apply(r,u)),S})();let v=l.apply(r,u);return v===!1&&(v=h.apply(r,u)),v}}n.hooks=r}if(t.walkTokens){let r=this.defaults.walkTokens,o=t.walkTokens;n.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),r&&(l=l.concat(r.call(this,a))),l}}this.defaults={...this.defaults,...n}}),this}setOptions(s){return this.defaults={...this.defaults,...s},this}lexer(s,e){return ye.lex(s,e??this.defaults)}parser(s,e){return Se.parse(s,e??this.defaults)}parseMarkdown(s){return(e,t)=>{let n={...t},r={...this.defaults,...n},o=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&n.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=s),r.async)return(async()=>{let a=r.hooks?await r.hooks.preprocess(e):e,l=await(r.hooks?await r.hooks.provideLexer():s?ye.lex:ye.lexInline)(a,r),h=r.hooks?await r.hooks.processAllTokens(l):l;r.walkTokens&&await Promise.all(this.walkTokens(h,r.walkTokens));let u=await(r.hooks?await r.hooks.provideParser():s?Se.parse:Se.parseInline)(h,r);return r.hooks?await r.hooks.postprocess(u):u})().catch(o);try{r.hooks&&(e=r.hooks.preprocess(e));let a=(r.hooks?r.hooks.provideLexer():s?ye.lex:ye.lexInline)(e,r);r.hooks&&(a=r.hooks.processAllTokens(a)),r.walkTokens&&this.walkTokens(a,r.walkTokens);let l=(r.hooks?r.hooks.provideParser():s?Se.parse:Se.parseInline)(a,r);return r.hooks&&(l=r.hooks.postprocess(l)),l}catch(a){return o(a)}}}onError(s,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,s){let n="<p>An error occurred:</p><pre>"+Ce(t.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(t);throw t}}},Be=new Gi;function J(s,e){return Be.parse(s,e)}J.options=J.setOptions=function(s){return Be.setOptions(s),J.defaults=Be.defaults,Dr(J.defaults),J};J.getDefaults=jt;J.defaults=Fe;J.use=function(...s){return Be.use(...s),J.defaults=Be.defaults,Dr(J.defaults),J};J.walkTokens=function(s,e){return Be.walkTokens(s,e)};J.parseInline=Be.parseInline;J.Parser=Se;J.parser=Se.parse;J.Renderer=xt;J.TextRenderer=Xt;J.Lexer=ye;J.lexer=ye.lex;J.Tokenizer=kt;J.Hooks=et;J.parse=J;J.options;J.setOptions;J.use;J.walkTokens;J.parseInline;Se.parse;ye.lex;var Qi=T("<input/>"),$i=T('<div><div class="check svelte-15tu99"><!></div> <span class="label"> </span> <div class="confidence svelte-15tu99"><!></div></div>'),Xi=T('<span class="no-results svelte-15tu99"> </span>'),Yi=T('<img alt="" class="thumb svelte-15tu99"/>'),Ji=T("<h2> </h2>"),ea=T('<p class="error svelte-15tu99"><!></p>'),ta=T("<!> ",1),ra=T('<section class="description svelte-15tu99"><!></section>'),na=T('<a target="_blank" class="learn-more svelte-15tu99"><!> <div class="text svelte-15tu99"><span> </span> <code class="domain svelte-15tu99"> </code></div></a>'),sa=T("<tr><td><!> </td><td> </td></tr>"),ia=T("<p><em> </em></p>"),aa=T("<table><tbody></tbody></table> <!>",1),oa=T('<p class="error"><!></p>'),la=T('<section class="empty svelte-15tu99"><!></section>'),ua=T('<div class="viewport svelte-15tu99" data-testid="metadata-combobox-viewport"><div class="items svelte-15tu99"><!> <!></div> <div class="docs svelte-15tu99"><!> <!> <!> <!> <!></div></div>'),ca=T("<!> <!>",1);function ha(s,e){Ie(e,!0);const t=d(()=>st(it("main")));let n=Z(e,"confidences",19,()=>({})),r=Z(e,"open",15,!1),o=Ee(e,["$$slots","$$events","$$legacy","options","confidences","value","open","inputProps","contentProps"]),a=ve("");const l=d(()=>e.options.some(w=>w.image)),h=d(()=>e.options.find(w=>w.key===e.value)?.label??""),u=d(()=>e.options.map(w=>({value:w.key,label:w.label}))),v=d(()=>i(a)===""?[...i(u).filter(({value:w})=>w in n()).toSorted((w,b)=>n()[b.value]-n()[w.value]),...i(u).filter(({value:w})=>!(w in n()))]:i(u).filter(w=>w.label.toLowerCase().includes(i(a).toLowerCase())));function S(w){U(a,w.currentTarget.value,!0)}function I(w){w||U(a,"")}const F=d(()=>He(o,{onOpenChange:I})),q=d(()=>He(e.inputProps,{oninput:S,onfocus:()=>r(!0),defaultValue:i(h)}));let C=ve(void 0),O=ve(_r({}));Dt(()=>{Object.keys(i(O)).length>4e3&&(console.debug("Halving cascadeLabels cache"),U(O,Object.fromEntries(Object.entries(i(O)).slice(2e3)),!0))});async function W(){const w=j.currentProtocol?.id;if(!w)return{};if(!i(C))return{};if(i(C).key in i(O))return i(O)[i(C).key];async function b(p,R,L,V=0){const A={};for(const[g,f]of Object.entries(R??{})){if(L.has(g))continue;L.add(g);const k=await ce.Metadata.get(sr(p,g));if(k)if(k.type==="enum"){const N=await hn("MetadataOption",dn(sr(p,k.id),f));if(!N)continue;A[k.id]={value:N.label,metadata:k.label,depth:V},Object.keys(N.cascade??{}).length>0&&await b(p,N.cascade??{},L,V+1).then(P=>{Object.assign(A,P)})}else A[k.id]={value:f,metadata:k.label,depth:V}}return A}return i(O)[i(C).key]=await b(w,i(C).cascade??{},new Set),i(O)[i(C).key]}var m=G(),x=H(m);Ze(x,()=>$s,(w,b)=>{b(w,We({get value(){return e.value}},()=>i(F),{get items(){return i(u)},get open(){return r()},set open(p){r(p)},children:(p,R)=>{var L=ca(),V=H(L);{const g=(f,k)=>{let N=()=>k?.().props.value,P=()=>sn(k?.().props,["value"]);var E=Qi();xe(E,()=>({...P(),value:r()?N():N()||i(h)}),void 0,void 0,"svelte-15tu99",!0),c(f,E)};Ze(V,()=>Ys,(f,k)=>{k(f,We(()=>i(q),{child:g,$$slots:{child:!0}}))})}var A=B(V,2);Ze(A,()=>En,(g,f)=>{f(g,{children:(k,N)=>{var P=G(),E=H(P);{let D=d(()=>i(l)?!0:void 0);Ze(E,()=>ti,(M,Y)=>{Y(M,We(()=>e.contentProps,{sideOffset:8,get"data-wide-docs"(){return i(D)},children:(se,re)=>{var he=ua(),K=y(he),ie=y(K);Gn(ie,{get items(){return i(v)},children:nn,$$slots:{default:(ee,X)=>{const ae=d(()=>X.item);var le=G(),oe=H(le);{const ue=(ge,Ne)=>{let de=()=>Ne?.().selected;var fe=$i();let we;var ze=y(fe),Le=y(ze);Rr(Le,{}),_(ze);var qe=B(ze,2),It=y(qe,!0);_(qe);var ut=B(qe,2),ct=y(ut);Nt(ct,{get value(){return n()[i(ae).value]}}),_(ut),_(fe),Q(()=>{we=Bt(fe,1,"item svelte-15tu99",null,we,{selected:de()}),te(It,i(ae).label)}),c(ge,fe)};Ze(oe,()=>si,(ge,Ne)=>{Ne(ge,{get value(){return i(ae).value},get label(){return i(ae).label},onHighlight:()=>{U(C,e.options.find(de=>de.key===i(ae).value),!0)},children:ue,$$slots:{default:!0}})})}c(ee,le)}}});var pe=B(ie,2);{var Pe=ee=>{var X=Xi(),ae=y(X,!0);_(X),Q(le=>te(ae,le),[()=>i(t).t(37)]),c(ee,X)};z(pe,ee=>{i(v).length===0&&ee(Pe)})}_(K);var Te=B(K,2),_e=y(Te);{var ke=ee=>{var X=Yi();Q(()=>be(X,"src",i(C).image)),c(ee,X)},Oe=ee=>{var X=G(),ae=H(X);{var le=oe=>{var ue=Ji(),ge=y(ue,!0);_(ue),Q(()=>te(ge,i(C).label)),c(oe,ue)};z(ae,oe=>{(i(C)?.description||i(C)?.learnMore)&&oe(le)},!0)}c(ee,X)};z(_e,ee=>{i(C)?.image?ee(ke):ee(Oe,!1)})}var lt=B(_e,2);{var Qe=ee=>{var X=ra(),ae=y(X);ur(ae,()=>J(i(C).description),null,(le,oe)=>{var ue=G(),ge=H(ue);lr(ge,()=>i(oe)),c(le,ue)},(le,oe)=>{var ue=ta(),ge=H(ue);{var Ne=fe=>{var we=ea(),ze=y(we);{let Le=d(()=>i(t).cx(127)),qe=d(()=>[i(oe)]);Ke(ze,{get x(){return i(Le)},get a(){return i(qe)}})}_(we),c(fe,we)};z(ge,fe=>{Pr()&&fe(Ne)})}var de=B(ge);Q(()=>te(de,` ${i(C).description??""}`)),c(le,ue)}),_(X),c(ee,X)};z(lt,ee=>{i(C)?.description&&ee(Qe)})}var $e=B(lt,2);{var St=ee=>{var X=na(),ae=y(X);Qn(ae,{});var le=B(ae,2),oe=y(le),ue=y(oe,!0);_(oe);var ge=B(oe,2),Ne=y(ge,!0);_(ge),_(le),_(X),Q(de=>{be(X,"href",i(C).learnMore),te(ue,de),te(Ne,new URL(i(C).learnMore).hostname)},[()=>i(t).t(86)]),c(ee,X)};z($e,ee=>{i(C)?.learnMore&&ee(St)})}var Yt=B($e,2);ur(Yt,W,null,(ee,X)=>{const ae=d(()=>Math.max(...Object.values(i(X)).map(de=>de.depth)));var le=aa(),oe=H(le),ue=y(oe);nt(ue,21,()=>Object.entries(i(X)).toReversed(),([de,{value:fe,metadata:we,depth:ze}])=>de,(de,fe,we,ze)=>{var Le=d(()=>wr(i(fe),2));let qe=()=>i(Le)[1].value,It=()=>i(Le)[1].metadata,ut=()=>i(Le)[1].depth;const ct=d(()=>i(ae)-ut());var Rt=sa(),Pt=y(Rt),Jt=y(Pt);{var Yr=Ct=>{var tr=G(),tn=H(tr);lr(tn,()=>"&nbsp;".repeat((i(ct)-1)*3)+"└─"),c(Ct,tr)};z(Jt,Ct=>{i(ct)>0&&Ct(Yr)})}var Jr=B(Jt);_(Pt);var er=B(Pt),en=y(er,!0);_(er),_(Rt),Q(()=>{te(Jr,` ${It()??""}`),te(en,qe())}),c(de,Rt)}),_(ue),_(oe);var ge=B(oe,2);{var Ne=de=>{var fe=ia(),we=y(fe),ze=y(we,!0);_(we),_(fe),Q(Le=>te(ze,Le),[()=>i(t).t(135)]),c(de,fe)};z(ge,de=>{Object.keys(i(X)).length>0&&de(Ne)})}c(ee,le)},(ee,X)=>{var ae=oa(),le=y(ae);{let oe=d(()=>i(t).cx(91)),ue=d(()=>[i(X)]);Ke(le,{get x(){return i(oe)},get a(){return i(ue)}})}_(ae),c(ee,ae)});var $r=B(Yt,2);{var Xr=ee=>{var X=la(),ae=y(X);Lt(ae,{variant:"empty"}),_(X),c(ee,X)};z($r,ee=>{!i(C)?.description&&!i(C)?.learnMore&&!i(C)?.image&&ee(Xr)})}_(Te),_(he),c(se,he)},$$slots:{default:!0}}))})}c(k,P)},$$slots:{default:!0}})}),c(p,L)},$$slots:{default:!0}}))}),c(s,m),Re()}var da=T('<div class="boolean-switch svelte-q62q36"><!> <!></div>'),pa=T('<input type="text" class="svelte-q62q36"/>'),ga=T('<input type="text" inputmode="numeric" class="svelte-q62q36"/> <button class="decrement"><!></button> <button class="increment"><!></button>',1),fa=T('<input type="date" class="svelte-q62q36"/>'),va=T('<input type="text" class="svelte-q62q36"/>'),ma=T('<div class="unrepresentable svelte-q62q36"><!> <p> </p></div>'),ba=T('<div class="metadata-input svelte-q62q36"><!></div>');function ka(s,e){Ie(e,!0);const t=d(()=>st(it("main")));let n=Z(e,"value",15),r=Z(e,"confidences",19,()=>({})),o=Z(e,"options",19,()=>[]);const{type:a}=e.definition;var l=ba(),h=y(l);{var u=S=>{{let I=d(()=>mt(n()?.toString())?.toString()??n());ha(S,{get id(){return e.id},get disabled(){return e.disabled},get options(){return o()},get confidences(){return r()},type:"single",get value(){return i(I)},onValueChange:F=>{if(F===void 0){e.onblur?.(void 0);return}e.onblur?.(F.toString())}})}},v=S=>{var I=G(),F=H(I);{var q=O=>{var W=da(),m=y(W);Cs(m,{get value(){return n()},onchange:p=>{e.onblur?.(p)}});var x=B(m,2);{var w=p=>{var R=Ue();Q(L=>te(R,L),[()=>i(t).t(142)]),c(p,R)},b=p=>{var R=G(),L=H(R);{var V=A=>{var g=Ue();Q(f=>te(g,f),[()=>i(t).t(139)]),c(A,g)};z(L,A=>{n()===!1&&A(V)},!0)}c(p,R)};z(x,p=>{n()?p(w):p(b,!1)})}_(W),c(O,W)},C=O=>{var W=G(),m=H(W);{var x=b=>{var p=pa();ht(p),Q(()=>{be(p,"id",e.id),p.disabled=e.disabled}),pt("blur",p,()=>e.onblur?.(n())),zt(p,n),c(b,p)},w=b=>{var p=G(),R=H(p);{var L=A=>{var g=ga(),f=H(g);ht(f);var k=B(f,2);k.__click=()=>{(n()===void 0||n()===null)&&n(0),rr(n,-1),n(hr(n(),5)),e.onblur?.(n())};var N=y(k);Hn(N,{}),_(k);var P=B(k,2);P.__click=()=>{(n()===void 0||n()===null)&&n(0),rr(n),n(hr(n(),5)),e.onblur?.(n())};var E=y(P);Wn(E,{}),_(P),Q((D,M,Y)=>{be(f,"id",e.id),f.disabled=e.disabled,nr(f,D),be(k,"aria-label",M),be(P,"aria-label",Y)},[()=>n()?.toString()??"",()=>i(t).t(76),()=>i(t).t(116)]),pt("blur",f,({currentTarget:D})=>{if(!(D instanceof HTMLInputElement))return;const M=D.value;if(!M){e.onblur?.(void 0);return}let Y=a==="integer"?Number.parseInt(M,10):Number.parseFloat(M);Number.isNaN(Y)&&(Y=void 0),e.onblur?.(Y)}),c(A,g)},V=A=>{var g=G(),f=H(g);{var k=P=>{var E=fa();ht(E),Q(()=>{be(E,"id",e.id),E.disabled=e.disabled}),pt("blur",E,()=>e.onblur?.(n())),zt(E,()=>{if(Me("date",a,n())&&n()!==void 0)return In(n(),"yyyy-MM-dd")},D=>{if(D===void 0){e.onblur?.(void 0);return}return e.onblur?.(pn(D,"yyyy-MM-dd",new Date)),D}),c(P,E)},N=P=>{var E=G(),D=H(E);{var M=se=>{var re=va();ht(re),Q(()=>{be(re,"id",e.id),re.disabled=e.disabled,nr(re,n()?`${n().latitude}, ${n().longitude}`:"")}),pt("blur",re,({currentTarget:he})=>{let K=he.value;if(K===void 0){e.onblur?.(void 0);return}if(!K.includes(",")||K.split(",").length>3)return;K.split(",").length===3&&(K=K.replace(",",".").replace(";",","));const[ie,pe]=K.split(",").map(Pe=>parseFloat(Pe.trim()));e.onblur?.({latitude:ie,longitude:pe})}),c(se,re)},Y=se=>{var re=ma(),he=y(re);di(he,{});var K=B(he,2),ie=y(K,!0);_(K),_(re),Ve(re,(pe,Pe)=>je?.(pe,Pe),()=>JSON.stringify(n(),null,2)),Q(pe=>te(ie,pe),[()=>i(t).t(118)]),c(se,re)};z(D,se=>{Me("location",a,n())?se(M):se(Y,!1)},!0)}c(P,E)};z(f,P=>{Me("date",a,n())?P(k):P(N,!1)},!0)}c(A,g)};z(R,A=>{Me("integer",a,n())||Me("float",a,n())?A(L):A(V,!1)},!0)}c(b,p)};z(m,b=>{Me("string",a,n())?b(x):b(w,!1)},!0)}c(O,W)};z(F,O=>{Me("boolean",a,n())?O(q):O(C,!1)},!0)}c(S,I)};z(h,S=>{Me("enum",a,n())?S(u):S(v,!1)})}_(l),Q(()=>{be(l,"data-type",a),be(l,"data-metadata-id",e.definition.id)}),c(s,l),Re()}Sr(["click"]);var xa=T('<div class="technical-indicator"><!></div> <code> </code>',1),_a=T('<div class="merged-indicator svelte-ev234i"><!></div>'),wa=T('<li class="svelte-ev234i"><div class="value svelte-ev234i"> </div> <!> <button class="svelte-ev234i"><!></button></li>'),ya=T('<section class="alternatives svelte-ev234i"><div class="title svelte-ev234i"> </div> <ul class="options svelte-ev234i"></ul></section>'),Sa=T("<p> </p>"),Ia=T('<a target="_blank"> </a>'),Ra=T('<section class="learnmore"><!> <!></section>'),Pa=T('<pre class="debug svelte-ev234i"> </pre>'),Ca=T('<div class="metadata svelte-ev234i"><section class="first-line svelte-ev234i"><label class="svelte-ev234i"><!></label> <div class="value svelte-ev234i"><!> <!> <!> <button class="clear svelte-ev234i"><!></button></div></section> <!> <!> <!></div>');function Aa(s,e){const t=an();Ie(e,!0);const n=d(()=>st(it("main")));let r=Z(e,"value",7),o=Z(e,"options",19,()=>[]),a=Z(e,"onchange",3,()=>{});var l=Ca(),h=y(l),u=y(h),v=y(u);{var S=g=>{var f=Ue();Q(()=>te(f,e.definition.label)),c(g,f)},I=g=>{var f=xa(),k=H(f),N=y(k);Un(N,{}),_(k),Ve(k,(D,M)=>je?.(D,M),()=>"Métadonnée technique");var P=B(k,2),E=y(P,!0);_(P),Q(()=>te(E,e.definition.id)),c(g,f)};z(v,g=>{e.definition.label?g(S):g(I,!1)})}_(u);var F=B(u,2),q=y(F);{let g=d(()=>r()?.value),f=d(()=>Object.fromEntries([...Object.entries(r()?.alternatives??{}).map(([k,N])=>[mt(k)?.toString(),N]),[mt(r()?.value)?.toString(),r()?.confidence]]));ka(q,{get id(){return t},get definition(){return e.definition},get options(){return o()},get value(){return i(g)},get onblur(){return a()},get merged(){return e.merged},get confidences(){return i(f)}})}var C=B(q,2);{var O=g=>{Nt(g,{get value(){return r().confidence}})};z(C,g=>{r()?.confidence&&g(O)})}var W=B(C,2);{var m=g=>{var f=_a(),k=y(f);ci(k,{}),_(f),Ve(f,(N,P)=>je?.(N,P),()=>"Valeur issue de la fusion de plusieurs valeurs différentes. Modifier cette valeur pour modifier toutes les valeurs de la sélection"),c(g,f)};z(W,g=>{e.merged&&g(m)})}var x=B(W,2);x.__click=()=>{r()&&(r(void 0),a()(void 0))};var w=y(x);Kn(w,{}),_(x),Ve(x,(g,f)=>je?.(g,f),()=>"Supprimer cette valeur"),_(F),_(h);var b=B(h,2);{var p=g=>{var f=ya(),k=y(f),N=y(k,!0);_(k);var P=B(k,2);nt(P,21,()=>Object.entries(r().alternatives).sort(([,E],[,D])=>D-E).slice(0,3),([E,D])=>E,(E,D)=>{var M=d(()=>wr(i(D),2));let Y=()=>i(M)[0],se=()=>i(M)[1];const re=d(()=>mt(Y())?.toString()),he=d(()=>Me("enum",e.definition.type,i(re))?o()?.find(({key:ke})=>ke===i(re)):void 0);var K=wa(),ie=y(K),pe=y(ie,!0);_(ie),Ve(ie,(ke,Oe)=>je?.(ke,Oe),()=>i(he)?.description);var Pe=B(ie,2);Nt(Pe,{get value(){return se()}});var Te=B(Pe,2);Te.__click=()=>{r({value:JSON.parse(Y()),confidence:se(),alternatives:r()?.alternatives??{}}),a()(r()?.value)};var _e=y(Te);Rr(_e,{}),_(Te),Ve(Te,(ke,Oe)=>je?.(ke,Oe),()=>"Sélectionner cette valeur"),_(K),Q(()=>te(pe,i(he)?.label||i(re))),c(E,K)}),_(P),_(f),Q(E=>te(N,E),[()=>i(n).t(29)]),c(g,f)};z(b,g=>{r()&&Object.keys(r().alternatives).length>0&&g(p)})}var R=B(b,2);{var L=g=>{var f=Ra(),k=y(f);{var N=D=>{var M=Sa(),Y=y(M,!0);_(M),Q(()=>te(Y,e.definition.description)),c(D,M)};z(k,D=>{e.definition.description&&D(N)})}var P=B(k,2);{var E=D=>{var M=Ia(),Y=y(M,!0);_(M),Q(se=>{be(M,"href",e.definition.learnMore),te(Y,se)},[()=>i(n).t(86)]),c(D,M)};z(P,D=>{e.definition.learnMore&&D(E)})}_(f),c(g,f)};z(R,g=>{(e.definition.description||e.definition.learnMore)&&g(L)})}var V=B(R,2);{var A=g=>{var f=Pa(),k=y(f,!0);_(f),Q(N=>te(k,N),[()=>JSON.stringify({...gn(e.definition.id),value:r()},null,2)]),c(g,f)};z(V,g=>{Pr()&&g(A)})}_(l),Q(()=>{be(u,"for",t),x.disabled=!r()}),c(s,l),Re()}Sr(["click"]);var Ta=T('<div class="liste svelte-6gm1gm"><!></div>');function Oa(s,e){var t=Ta(),n=y(t);Ae(n,()=>e.children),_(t),c(s,t)}var Na=T("<img/>"),za=T("<!> <!>",1),La=T("<!> ",1),Ma=T('<div class="images svelte-xtkozr"></div> <h2 class="svelte-xtkozr"><!></h2> <!>',1),Ea=T('<section class="empty-selection svelte-xtkozr"><!> <p> </p></section>'),Ha=T('<section class="empty-selection svelte-xtkozr"><!> <p> </p></section>'),qa=T('<div class="side-by-side svelte-xtkozr"><!> <!></div>'),Da=T('<aside data-testid="sidepanel"><!> <section class="button svelte-xtkozr"><!> <!> <!></section></aside>');function Ba(s,e){Ie(e,!0);const t=d(()=>st(it("main"))),n=d(()=>{const b=ce.Protocol.state.find(p=>p.id===j.currentProtocolId);return b?b.metadata.map(p=>ce.Metadata.state.find(R=>R.id===p)).filter(p=>p!==void 0).toSorted(Pn(b)):[]}),r={};let o=ve(!0);yr([()=>i(n)],()=>{if(Object.keys(r).length>0){U(o,!1);return}fn("MetadataOption",Rn(j.currentProtocolId,null)).then(b=>{if(Object.keys(r).length>0){U(o,!1);return}for(const{metadataId:p,key:R,...L}of b)r[p]??=[],r[p].push({key:R.toString(),...L});for(const p of Object.keys(r))r[p].sort((R,L)=>R.label.localeCompare(L.label));U(o,!1)})});const a=d(()=>$n().showTechnicalMetadata),l=d(()=>j.selection.length===1?ce.Observation.state.find(b=>b.id===j.selection[0]):void 0),h=d(()=>j.selection.length===1?ce.Image.state.find(b=>b.fileId===j.selection[0]):void 0),u=d(()=>({image:j.selection.filter(b=>ce.Image.state.some(p=>p.fileId===b)).length,observation:j.selection.filter(b=>ce.Observation.state.some(p=>p.id===b)).length,get all(){return this.image+this.observation}}));var v=Da();let S;var I=y(v);{var F=b=>{var p=Ma(),R=H(p);nt(R,21,()=>e.images,Ir,(k,N,P)=>{let E=()=>i(N).src,D=()=>i(N).box;const M=d(()=>i(l)?`Image ${P+1} de l'observation ${i(l).label}`:`Image ${P+1} de la sélection`);var Y=G(),se=H(Y);{var re=K=>{jn(K,{blurfill:!0,get src(){return E()},get alt(){return i(M)},get box(){return D()}})},he=K=>{var ie=Na();Q(()=>{be(ie,"src",E()),be(ie,"alt",i(M))}),c(K,ie)};z(se,K=>{D()?K(re):K(he,!1)})}c(k,Y)}),_(R);var L=B(R,2),V=y(L);{var A=k=>{var N=za(),P=H(N);ai(P,{});var E=B(P,2);{let D=d(()=>i(t).t(138));Zn(E,{get label(){return i(D)},get value(){return i(l).label},onblur:async M=>{M!==i(l).label&&await ce.Observation.update(i(l).id,"label",M)}})}c(k,N)},g=k=>{var N=G(),P=H(N);{var E=M=>{var Y=La(),se=H(Y);Fn(se,{});var re=B(se);Q(()=>te(re,` ${i(h).filename??""}`)),c(M,Y)},D=M=>{var Y=G(),se=H(Y);{var re=K=>{var ie=Ue();Q(pe=>te(ie,pe),[()=>Tt(i(u).all,i(t).tp(377),i(t)._.p)]),c(K,ie)},he=K=>{var ie=G(),pe=H(ie);{var Pe=_e=>{var ke=Ue();Q(Oe=>te(ke,Oe),[()=>Tt(i(u).image,i(t).tp(378),i(t)._.p)]),c(_e,ke)},Te=_e=>{var ke=G(),Oe=H(ke);{var lt=Qe=>{var $e=Ue();Q(St=>te($e,St),[()=>Tt(i(u).observation,i(t).tp(379),i(t)._.p)]),c(Qe,$e)};z(Oe,Qe=>{i(u).observation>0&&Qe(lt)},!0)}c(_e,ke)};z(pe,_e=>{i(u).image>0?_e(Pe):_e(Te,!1)},!0)}c(K,ie)};z(se,K=>{i(u).image>0&&i(u).observation>0?K(re):K(he,!1)},!0)}c(M,Y)};z(P,M=>{i(h)?M(E):M(D,!1)},!0)}c(k,N)};z(V,k=>{i(l)?k(A):k(g,!1)})}_(L);var f=B(L,2);Oa(f,{children:(k,N)=>{var P=G(),E=H(P);nt(E,17,()=>i(n),D=>D.id,(D,M)=>{const Y=d(()=>e.metadata[i(M).id]);var se=G(),re=H(se);{var he=K=>{{let ie=d(()=>i(Y)?.merged);Aa(K,{get merged(){return i(ie)},get definition(){return i(M)},get value(){return i(Y)},get options(){return r[i(M).id]},onchange:async pe=>{Mt(pe,i(Y)?.value)||e.onmetadatachange(i(M).id,pe)}})}};z(re,K=>{(i(M).label||i(a))&&K(he)})}c(D,se)}),c(k,P)}}),c(b,p)},q=b=>{var p=G(),R=H(p);{var L=A=>{var g=Ea(),f=y(g);Lt(f,{variant:"empty"});var k=B(f,2),N=y(k,!0);_(k),_(g),Q(P=>te(N,P),[()=>i(t).t(55)]),c(A,g)},V=A=>{var g=Ha(),f=y(g);Lt(f,{variant:"empty"});var k=B(f,2),N=y(k,!0);_(k),_(g),Q(P=>te(N,P),[()=>i(t).t(179)]),c(A,g)};z(R,A=>{i(o)?A(L):A(V,!1)},!0)}c(b,p)};z(I,b=>{e.images.length>0&&!i(o)?b(F):b(q,!1)})}var C=B(I,2),O=y(C);{var W=b=>{var p=qa(),R=y(p);{const V=f=>{Vn(f,{})};let A=d(()=>!e.canmerge),g=d(()=>i(t).t(159));gt(R,{get disabled(){return i(A)},get onclick(){return e.onmerge},keyboard:"$mod+g",get help(){return i(g)},_w_snippet_0:V,children:(f,k)=>{{let N=d(()=>[V]),P=d(()=>i(t).cx(10));Ke(f,{get t(){return i(N)},get x(){return i(P)}})}},$$slots:{_w_snippet_0:!0,default:!0}})}var L=B(R,2);{const V=f=>{Bn(f,{})};let A=d(()=>!e.cansplit),g=d(()=>i(t).t(180));gt(L,{get disabled(){return i(A)},get onclick(){return e.onsplit},keyboard:"$mod+Shift+g",get help(){return i(g)},_w_snippet_1:V,children:(f,k)=>{{let N=d(()=>[V]),P=d(()=>i(t).cx(17));Ke(f,{get t(){return i(N)},get x(){return i(P)}})}},$$slots:{_w_snippet_1:!0,default:!0}})}_(p),c(b,p)};z(O,b=>{e.onmerge&&e.onsplit&&b(W)})}var m=B(O,2);{var x=b=>{{const p=R=>{li(R,{})};gt(b,{get onclick(){return e.onimport},_w_snippet_2:p,children:(R,L)=>{{let V=d(()=>[p]),A=d(()=>i(t).cx(6));Ke(R,{get t(){return i(V)},get x(){return i(A)}})}},$$slots:{_w_snippet_2:!0,default:!0}})}};z(m,b=>{e.onimport&&b(x)})}var w=B(m,2);{const b=L=>{Dn(L,{})};let p=d(()=>e.images.length===0),R=d(()=>i(t).t(175));gt(w,{get disabled(){return i(p)},get onclick(){return e.ondelete},keyboard:"Delete",get help(){return i(R)},danger:!0,_w_snippet_3:b,children:(L,V)=>{{let A=d(()=>[b]),g=d(()=>i(t).cx(16)),f=d(()=>[e.images.length]);Ke(L,{get t(){return i(A)},get x(){return i(g)},get a(){return i(f)}})}},$$slots:{_w_snippet_3:!0,default:!0}})}_(C),_(v),Q(()=>S=Bt(v,1,"sidepanel svelte-xtkozr",null,S,{empty:e.images.length===0||i(o)})),c(s,v),Re()}var Fa=T('<div><main data-testid="app-main" class="svelte-di4wkt"><!></main> <!></div>');function No(s,e){Ie(e,!0);const t=d(()=>st(it("main")));Tn({title:i(t).t(108)});async function n(){wn(await cn({accept:yn,multiple:!0}))}async function r(){const m=await _n(j.selection);j.setSelection?.([m])}async function o(){const m=[],x=j.currentProtocol;if(!x)throw new Error("No protocol selected");await ce.Observation.do(async w=>{for(const b of j.selection){const p=ce.Observation.getFromState(b);if(p){w.delete(b);for(const R of p.images){const L=await ce.Image.raw.get(R);if(!L)continue;const V=xn(L,x);w.add(V),m.push(V.id)}}}}),j.setSelection?.(m)}async function a(){await ir(["Image","Observation","ImageFile","ImagePreviewFile"],{},async m=>{for(const x of j.selection)bn(x,"Cancelled by user"),await kn(x,{tx:m,notFoundOk:!0,recursive:!0}),await mn(x,m,!0)}),j.setSelection?.([])}Sn("observations",{"x x":{help:i(t).t(210),debug:!0,do(){for(const m of j.selection)j.erroredImages.has(m)||j.erroredImages.set(m,"Errored!")}},"x u":{help:i(t).t(211),debug:!0,do(){for(const m of j.selection)j.erroredImages.delete(m)}},"x f":{help:i(t).t(212),debug:!0,do(){j.processing.files.push({id:vn(),name:"Debug image.jpeg",addedAt:new Date})}},"$mod+u":{help:i(t).t(174),async do(){Ot.warn(i(t).t(168)),await ir(["Image","ImageFile","ImagePreviewFile","Observation"],{},m=>{m.objectStore("Observation").clear(),m.objectStore("ImageFile").clear(),j.previewURLs.clear(),m.objectStore("Image").clear(),j.queuedImages.clear(),j.erroredImages.clear(),j.loadingImages.clear(),j.processing.files=[],j.setSelection?.([]),or.forEach(x=>x("Cancelled by user")),or.clear()})}},"$mod+g":{help:i(t).t(99),do:r},"$mod+Shift+g":{help:i(t).t(180),do:o},Delete:{help:i(t).t(172),do:a}});let l=d(()=>j.processing.files.length+ce.Observation.state.length+ce.Image.state.length>0);const h=d(()=>j.selection.flatMap(m=>{const x=ce.Image.state.find(w=>w.fileId===m);return x?[x]:ce.Observation.state.find(w=>w.id===m)?.images.map(w=>ce.Image.state.find(b=>b.id===w)).filter(w=>w!==void 0)}).filter(m=>m!==void 0)),u=d(()=>j.selection.map(m=>ce.Observation.state.find(x=>x.id===m)).filter(m=>m!==void 0)),v=d(()=>i(h).map(m=>{if(!m.fileId)return;const x=j.previewURLs.get(m.fileId);if(!x)return;const w=j.cropMetadataValueOf(m)?.value;return{src:x,box:w?un(w):void 0}}).filter(m=>m!==void 0));let S=ve(_r({}));yr([()=>i(h),()=>i(u)],()=>{ar(dt(),i(h),i(u)).then(m=>{U(S,m,!0)}).catch(m=>Ot.error(m))});var I=Fa();let F;var q=y(I),C=y(q);Ae(C,()=>e.children??rt),_(q);var O=B(q,2);{var W=m=>{{let x=d(()=>j.selection.length>0),w=d(()=>At.route.id?.endsWith("classify")?r:void 0),b=d(()=>j.selection.some(L=>ce.Observation.state.some(V=>V.id===L))),p=d(()=>At.route.id?.endsWith("classify")?o:void 0),R=d(()=>At.route.id?.endsWith("import")?n:void 0);Ba(m,{get images(){return i(v)},get metadata(){return i(S)},get canmerge(){return i(x)},get onmerge(){return i(w)},get cansplit(){return i(b)},get onsplit(){return i(p)},get onimport(){return i(R)},ondelete:a,onaddmetadata:()=>{},onmetadatachange:async(L,V)=>{if(j.currentProtocol){for(const A of j.selection)V===void 0?await Cn({db:dt(),subjectId:A,metadataId:L,recursive:!0}):await An({db:dt(),subjectId:A,metadataId:L,confidence:1,manuallyModified:!0,value:V});await ar(dt(),i(h),i(u)).then(A=>{U(S,A,!0)}).catch(A=>Ot.error(A))}}})}};z(O,m=>{i(l)&&m(W)})}_(I),Q(()=>F=Bt(I,1,"main-and-sidepanel svelte-di4wkt",null,F,{"has-sidepanel":i(l)})),on(1,I,()=>ln,()=>({duration:100})),c(s,I),Re()}export{No as component};
