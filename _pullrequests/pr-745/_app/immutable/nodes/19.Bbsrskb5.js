import{_ as ge,a as k,g as Te}from"../chunks/CFKIlU8F.js";import{k as Ve,H as Ae,t as pe}from"../chunks/Ckf_cnrE.js";import"../chunks/DsnmJJEf.js";import{f as R,a as _,p as Fe,g as e,u,az as Le,c as h,n as _e,aw as d,a7 as J,b as ke,ay as n,r as l,d as F,a9 as Re,aB as De,aY as Ye}from"../chunks/CEjrMSr3.js";import{a as x}from"../chunks/CzPTknfj.js";import{r as D,i as le}from"../chunks/BQwRB0hY.js";import{e as me}from"../chunks/B5t4nw1a.js";import{c as ue}from"../chunks/kjmZGRhK.js";import{t as Ge,f as Ke}from"../chunks/IkhSBAvL.js";import{R as L}from"../chunks/KtucAqHY.js";import{C as Qe}from"../chunks/DXJpb3ce.js";import{F as Ue}from"../chunks/Bxzp7_7J.js";import{I as We}from"../chunks/DdYGOKw-.js";import{p as Xe}from"../chunks/55T8DwzO.js";import{I as ie}from"../chunks/9VRlXIzu.js";import{s as Ze}from"../chunks/eEn-YRt2.js";import{a as et}from"../chunks/C4k7jWy3.js";import{t as fe}from"../chunks/CdFpUUK-.js";import{e as tt}from"../chunks/DvdFYW7d.js";function T({tree:p,path:c,provenance:v,isDirectory:t=!1,help:$=""}){const[f,...b]=at(c);if(b.length===0){t?p.push({folder:f,provenance:v,children:[]}):p.push({filename:f,help:$,provenance:v});return}let y=p.find(q=>"folder"in q&&q.folder===f);if(y||(p.push({folder:f,children:[]}),y=p[p.length-1]),!("children"in y))throw new Error(`Expected folder "${f}" to have a children array`);T({tree:y.children,path:b.join("/"),provenance:v,help:$})}function at(p){let c=[],v="",t=p.split(""),$="",f="",b=!1;for(;t.length>0;)f=t.shift(),f==="{"&&$==="{"&&(b=!0),b&&f==="}"&&$==="}"&&(b=!1),!b&&f==="/"?(v&&c.push(v),v=""):v+=f,$=f;return v&&c.push(v),c}async function rt({parent:p}){const c=ge(Ve("js")),v=await p(),t=[],{images:{cropped:$,original:f},metadata:{csv:b,json:y}}=v.exports??{images:{cropped:{toJSON:()=>"cropped/{{ sequence }}.{{ extension image.filename }}"},original:{toJSON:()=>"original/{{ sequence }}.{{ extension image.filename }}"}},metadata:{csv:"metadata.csv",json:"metadata.json"}};return T({tree:t,provenance:"metadata.csv",path:b,help:c.t(366)}),T({tree:t,provenance:"metadata.json",path:y,help:c.t(367)}),T({tree:t,provenance:"images.cropped",path:$.toJSON(),help:c.t(368)}),T({tree:t,provenance:"images.original",path:f.toJSON(),help:c.t(369)}),{protocol:v,initialTree:t}}const Yt=Object.freeze(Object.defineProperty({__proto__:null,load:rt},Symbol.toStringTag,{value:"Module"}));var ot=R('<svg><path fill="currentColor" d="M11 7h2v10h-2zm4 4h2v6h-2zm-8 2h2v4H7zm8-9H5v16h14V8h-4zM3 2.992C3 2.444 3.447 2 3.999 2H16l5 5v13.993A1 1 0 0 1 20.007 22H3.993A1 1 0 0 1 3 21.008z"></path></svg>');function st(p,c){const v=D(c,["$$slots","$$events","$$legacy"]);var t=ot();k(t,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...v})),_(p,t)}var nt=R('<svg><path fill="currentColor" d="M15 4H5v16h14V8h-4zM3 2.992C3 2.444 3.447 2 3.999 2H16l5 5v13.993A1 1 0 0 1 20.007 22H3.993A1 1 0 0 1 3 21.008zM17.657 12l-3.536 3.536l-1.414-1.415L14.828 12l-2.12-2.121l1.413-1.415zM6.343 12L9.88 8.464l1.414 1.415L9.172 12l2.12 2.121l-1.413 1.415z"></path></svg>');function lt(p,c){const v=D(c,["$$slots","$$events","$$legacy"]);var t=nt();k(t,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...v})),_(p,t)}var it=R('<svg><path fill="currentColor" d="M12.414 5H21a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h7.414zM20 11H4v8h16zm0-2V7h-8.414l-2-2H4v4z"></path></svg>');function vt(p,c){const v=D(c,["$$slots","$$events","$$legacy"]);var t=it();k(t,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...v})),_(p,t)}var ct=R('<svg><path fill="currentColor" d="M12.414 5H21a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h7.414zM4 5v14h16V7h-8.414l-2-2zm7 7V9h2v3h3v2h-3v3h-2v-3H8v-2z"></path></svg>');function dt(p,c){const v=D(c,["$$slots","$$events","$$legacy"]);var t=ct();k(t,()=>({class:"icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...v})),_(p,t)}var pt=h('<!> <div class="text svelte-1aq0bmb"><!></div>',1),_t=h('<!> <div class="text svelte-1aq0bmb"><span class="filename"><!></span> <span class="help svelte-1aq0bmb"> </span></div>',1),mt=h('<li class="svelte-1aq0bmb"><!></li> <!>',1),ut=h('<ul class="tree svelte-1aq0bmb"><li class="new-folder svelte-1aq0bmb"><button class="svelte-1aq0bmb"><!> <!></button></li> <!></ul>'),ft=h("<strong><code></code></strong>"),gt=h('<a target="_blank" href="https://handlebarsjs.com/guide/"> </a>'),ht=h("<br/>"),bt=h("<br/>"),xt=h("<br/>"),$t=h("<br/>"),wt=h("<br/>"),zt=h("<br/>"),yt=h("<dt> <br/> </dt> <dd> </dd>",1),Ht=h('<pre class="debug svelte-1aq0bmb"> </pre>'),qt=h('<main class="svelte-1aq0bmb"><h2> </h2> <ul class="tree svelte-1aq0bmb"><li class="svelte-1aq0bmb"><!> <span class="filename"> </span></li> <!></ul> <p><!></p> <p><!></p> <h3> </h3> <dl class="variables-docs svelte-1aq0bmb"><dt><!></dt> <dd> </dd> <dt><!></dt> <dd> </dd> <dt></dt> <dd> </dd> <!></dl> <!></main>');function Gt(p,c){Fe(c,!0);const v=(i,o=_e,r)=>{let a=Re(()=>De(r?.(),""));var s=ut(),g=n(s),H=n(g),j=n(H);dt(j,{});var V=d(j,2);{let w=u(()=>e(t).t(296)),m=u(()=>e(t).t(297));ie(V,{discreet:!0,value:"",get placeholder(){return e(w)},get label(){return e(m)},onblur:(S,C)=>{if(!S.trim()){fe.error(e(t).t(298));return}C(""),o().push({folder:S,children:[]})}})}l(H),l(g);var oe=d(g,2);me(oe,17,o,w=>"folder"in w?w.folder:w.filename,(w,m,S)=>{var C=mt(),O=F(C),Ee=n(O);{var Ne=z=>{const se=u(()=>e(m).icon??vt);var E=pt(),N=F(E);ue(N,()=>e(se),(I,M)=>{M(I,{})});var P=d(N,2),B=n(P);{let I=u(()=>e(t).t(299));ie(B,{discreet:!0,get value(){return e(m).folder},get label(){return e(I)},onblur:async M=>{e(m).folder=M,await y(e(m).children,`${e(a)}/${M}`)}})}l(P),_(z,E)},Pe=z=>{const se=u(()=>$(e(m).provenance));var E=_t(),N=F(E);ue(N,()=>e(se),(ne,A)=>{A(ne,{})});var P=d(N,2),B=n(P),I=n(B);{let ne=u(()=>e(t).t(300));ie(I,{discreet:!0,get value(){return e(m).filename},get label(){return e(ne)},onblur:async A=>{e(m).filename=A,await b(e(m).provenance,`${e(a)}/${A}`)}})}l(B);var M=d(B,2),Je=n(M,!0);l(M),l(P),J(()=>x(Je,e(m).help)),_(z,E)};le(Ee,z=>{"folder"in e(m)?z(Ne):z(Pe,!1)})}l(O);var Be=d(O,2);{var Ie=z=>{v(z,()=>e(m).children,()=>`${e(a)}/${e(m).folder}`)};le(Be,z=>{"children"in e(m)&&z(Ie)})}_(w,C)}),l(s),_(i,s)},t=u(()=>ge(Te("main"))),$=i=>{switch(i){case"metadata.csv":return st;case"metadata.json":return lt;case"images.cropped":return Qe;case"images.original":return We}};Ze({title:e(t).t(285,[Xe.params.id])});const f=Le(c.data.initialTree??[]);async function b(i,o){const[r,a]=i.split("."),{id:s,exports:g}=c.data.protocol;if(!g){fe.error(e(t).t(286));return}const H={images:{cropped:g.images.cropped.toJSON(),original:g.images.original.toJSON()},metadata:{csv:g.metadata.csv,json:g.metadata.json}};H[r][a]=o.replace(/^\//,"").replace(/\/$/,""),await pe.Protocol.update(s,"exports",H)}async function y(i,o){for(const r of i)"folder"in r?await y(r.children,`${o}/${r.folder}`):await b(r.provenance,`${o}/${r.filename}`)}var q=qt(),Y=n(q),he=n(Y,!0);l(Y);var G=d(Y,2),K=n(G),ve=n(K);Ue(ve,{});var ce=d(ve,2),be=n(ce,!0);l(ce),l(K);var xe=d(K,2);v(xe,()=>f,()=>""),l(G);var Q=d(G,2);{const i=o=>{var r=ft(),a=n(r);a.textContent="{{ comme_ceci }}",l(r),_(o,r)};var $e=n(Q);{let o=u(()=>[i]),r=u(()=>e(t).cx(289));L($e,{get t(){return e(o)},get x(){return e(r)}})}l(Q)}var U=d(Q,2);{const i=(o,r=_e)=>{var a=gt(),s=n(a,!0);l(a),J(g=>x(s,g),[()=>e(t).tx(r())]),_(o,a)};var we=n(U);{let o=u(()=>[i]),r=u(()=>e(t).cx(290));L(we,{get t(){return e(o)},get x(){return e(r)},a:["{{}}"]})}l(U)}var W=d(U,2),ze=n(W,!0);l(W);var X=d(W,2),Z=n(X);{const i=a=>{var s=ht();_(a,s)},o=a=>{var s=bt();_(a,s)},r=a=>{var s=xt();_(a,s)};var ye=n(Z);{let a=u(()=>[i,o,r]),s=u(()=>e(t).cx(292));L(ye,{get t(){return e(a)},get x(){return e(s)},a:["{{ observation }}","{{ observation.label }}","{{ observation.protocolMetadata.species.confidence }}"]})}l(Z)}var ee=d(Z,2),He=n(ee,!0);l(ee);var te=d(ee,2);{const i=a=>{var s=$t();_(a,s)},o=a=>{var s=wt();_(a,s)},r=a=>{var s=zt();_(a,s)};var qe=n(te);{let a=u(()=>[i,o,r]),s=u(()=>e(t).cx(292));L(qe,{get t(){return e(a)},get x(){return e(s)},a:["{{ image }}","{{ image.filename }}","{{ image.protocolMetadata.shoot_date.value }}"]})}l(te)}var ae=d(te,2),Me=n(ae,!0);l(ae);var de=d(ae,2);de.textContent="{{ sequence }}";var re=d(de,2),je=n(re,!0);l(re);var Ce=d(re,2);me(Ce,17,()=>tt(Ae),([i,{documentation:o,usage:r}])=>i,(i,o)=>{var r=u(()=>Ye(e(o),2));let a=()=>e(r)[1].documentation,s=()=>e(r)[1].usage;const g=u(()=>{const[S,C]=s().split("->").map(O=>O.trim());return{call:S,result:C}});var H=yt(),j=F(H),V=n(j,!0),oe=d(V,2);l(j);var w=d(j,2),m=n(w,!0);l(w),J(()=>{x(V,e(g).call),x(oe,` â†’ ${e(g).result??""}`),x(m,a())}),_(i,H)}),l(X);var Se=d(X,2);{var Oe=i=>{var o=Ht(),r=n(o,!0);l(o),J(a=>x(r,a),[()=>JSON.stringify(pe.Protocol.state.find(a=>a.id===c.data.protocol.id)?.exports,null,2)]),_(i,o)};le(Se,i=>{et().showTechnicalMetadata&&i(Oe)})}l(q),J((i,o,r,a,s,g)=>{x(he,i),x(be,o),x(ze,r),x(He,a),x(Me,s),x(je,g)},[()=>e(t).t(287),()=>e(t).t(288),()=>e(t).t(291),()=>e(t).t(293),()=>e(t).t(294),()=>e(t).t(295)]),Ge(1,q,()=>Ke,()=>({duration:100})),_(p,q),ke()}export{Gt as component,Yt as universal};
