import"../chunks/DsnmJJEf.js";import{p as Z,c as p,a as u,b as $,ay as o,g as e,u as n,r as i,d as B,aw as w,a7 as E,e as ee}from"../chunks/CEjrMSr3.js";import{s as ae}from"../chunks/B2edZ37G.js";import{a as F,e as te}from"../chunks/CzPTknfj.js";import{i as D}from"../chunks/BQwRB0hY.js";import{e as re}from"../chunks/B5t4nw1a.js";import{_ as ne,g as ie,r as se,d as oe}from"../chunks/CFKIlU8F.js";import{t as le,f as ue}from"../chunks/IkhSBAvL.js";import{t as I,E as P,c as fe,A as de}from"../chunks/Ckf_cnrE.js";import{a as R}from"../chunks/B8cK6Xik.js";import{F as me}from"../chunks/CM2jXWJl.js";import{R as ve}from"../chunks/D_tAhQv4.js";import{t as pe}from"../chunks/CdFpUUK-.js";import{o as ce,k as _e}from"../chunks/DvdFYW7d.js";var he=p("<option> </option>"),xe=p('<div class="field svelte-s8isad"><label><span class="label"> </span> <input type="text" list="exif-fields"/> <datalist id="exif-fields"></datalist></label></div>'),be=p('<h3 class="svelte-s8isad"> </h3> <!>',1),ge=p('<div class="content"><!></div>');function ze(j,c){Z(c,!0);const _=n(()=>ne(ie("main"))),A=n(()=>c.data.metadata),a=n(()=>e(A).infer),S=n(()=>e(A).id),q=[{key:"none",label:"Pas d'inférence"},{key:"neural",label:"Réseau neuronal"},{key:"exif",label:"EXIF"}],C=n(()=>!e(a)||!("neural"in e(a))||!e(a).neural.model?"":typeof e(a).neural.model=="string"?e(a).neural.model:e(a).neural.model.url),G={model:"http://example.com/model.onnx",input:{width:224,height:224,normalized:!0}},X=n(()=>e(a)?"exif"in e(a)?"exif":"neural"in e(a)?"neural":"none":"none");var f=ge(),H=o(f);ve(H,{get options(){return q},get value(){return e(X)},onchange:async h=>{h==="none"&&e(X)!=="none"&&(await I.Metadata.set(ce(c.data.metadata,"infer")),await R())},children:(h,L)=>{let M=()=>L?.().key,J=()=>L?.().label;var N=be(),x=B(N),K=o(x,!0);i(x);var O=w(x,2);{var Q=s=>{{let d=n(()=>e(_).t(334));me(s,{check:!0,get label(){return e(d)},get value(){return e(C)},onblur:async m=>{if(!m)return;const b=ae(e(a)&&"neural"in e(a)&&e(a).neural?e(a).neural:{});await I.Metadata.update(e(S),"infer",{neural:{...G,...b,model:m}}),await R()}})}},V=s=>{var d=ee(),m=B(d);{var b=g=>{var y=xe(),T=o(y),k=o(T),W=o(k,!0);i(k);var v=w(k,2);se(v);var U=w(v,2);re(U,20,()=>_e(P),t=>t,(t,r)=>{var l=he(),Y=o(l,!0);i(l);var z={};E(()=>{F(Y,P[r]),z!==(z=r)&&(l.value=(l.__value=r)??"")}),u(t,l)}),i(U),i(T),i(y),E(t=>{F(W,t),oe(v,e(a)&&"exif"in e(a)?e(a).exif:"")},[()=>e(_).t(335)]),te("blur",v,async({currentTarget:t})=>{const r=fe(t.value);if(r instanceof de){pe.error(e(_).t(336,[r.summary]));return}await I.Metadata.update(e(S),"infer",{exif:r}),await R()}),u(g,y)};D(m,g=>{M()==="exif"&&g(b)},!0)}u(s,d)};D(O,s=>{M()==="neural"?s(Q):s(V,!1)})}E(()=>F(K,J())),u(h,N)},$$slots:{default:!0}}),i(f),le(1,f,()=>ue,()=>({duration:100})),u(j,f),$()}export{ze as component};
