import{c as d,o as u}from"./CzPTknfj.js";import{aX as w,i as m,m as p}from"./CEjrMSr3.js";const h=typeof window<"u"?window:void 0;function v(t){let e=t.activeElement;for(;e?.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}class b{#e;#t;constructor(e={}){const{window:n=h,document:i=n?.document}=e;n!==void 0&&(this.#e=i,this.#t=d(c=>{const o=u(n,"focusin",c),r=u(n,"focusout",c);return()=>{o(),r()}}))}get current(){return this.#t?.(),this.#e?v(this.#e):null}}new b;function y(t,e){switch(t){case"post":m(e);break;case"pre":w(e);break}}function a(t,e,n,i={}){const{lazy:c=!1}=i;let o=!c,r=Array.isArray(t)?[]:void 0;y(e,()=>{const s=Array.isArray(t)?t.map(l=>l()):t();if(!o){o=!0,r=s;return}const f=p(()=>n(s,r));return r=s,f})}function A(t,e,n){a(t,"post",e,n)}function E(t,e,n){a(t,"pre",e,n)}A.pre=E;export{A as w};
