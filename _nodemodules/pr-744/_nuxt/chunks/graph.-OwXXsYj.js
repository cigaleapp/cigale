import{Dt as e,Ht as t,Nt as n,Tt as r,cn as i,g as a}from"../entry.CUq7HivD.js";import{d as o}from"./current.DC8NWKuj.js";import{n as s,t as c}from"./composables.BHkaCjSq.js";import"./PackageBorder.DRGNKOOj.js";var l=n({__name:`graph`,setup(n){let c=o.filtered,l=r(()=>{let e=a.state.focus?.length?a.state.focus.map(c.get).filter(e=>!!e):c.packages.filter(e=>e.workspace);e.length||(e=c.packages.filter(e=>e.depth<=1));let t=new Set;function n(e){if(e&&!t.has(e)){t.add(e);for(let t of e.dependencies)n(c.get(t))}}for(let t of e)n(t);let r=new Set(c.packages.filter(e=>!t.has(e)).sort((e,t)=>e.depth-t.depth)),i=!0;for(;i;){i=!1;for(let e of r)c.dependents(e).some(e=>r.has(e))&&(r.delete(e),i=!0)}for(let t of r)e.push(t);return Array.from(e).sort((e,t)=>e.depth-t.depth||t.flatDependencies.size-e.flatDependencies.size)});return(n,r)=>{let a=s;return t(),e(a,{payload:i(o).filtered,"root-packages":l.value},null,8,[`payload`,`root-packages`])}}});export{l as default};