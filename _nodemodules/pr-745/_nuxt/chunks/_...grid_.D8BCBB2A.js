import{$t as e,A as t,Ct as n,D as r,Dt as i,Et as a,Gt as o,Ht as s,I as c,It as l,Mt as u,N as d,Nt as f,Ot as p,Tt as m,Wt as h,Yt as g,cn as _,fn as v,i as y,jt as b,k as x,kt as S,ln as C,n as w,nt as T,r as E}from"../entry.CUq7HivD.js";import{t as D}from"./nuxt-link.hV4hwteT.js";import{c as O,d as k,n as A,r as j,t as M}from"./current.DC8NWKuj.js";import{n as N,t as P}from"./SafeImage.ClLtvZMY.js";import{t as F}from"./SourceTypeBadge.Ca65fnzz.js";import{t as I}from"./PackageBorder.DRGNKOOj.js";var L={flex:`~ wrap gap-2 items-center`,"text-sm":``},R=f({__name:`Item`,props:{pkg:{}},setup(t){return(n,r)=>{let o=A,l=w,d=E,f=j,m=N,h=F,g=I;return s(),i(g,{pkg:t.pkg,as:`button`,outer:`border rounded-lg`,inner:`flex flex-col gap-2 justify-center h-full hover:bg-active p2 px3`,onClick:r[0]||=e=>M.value=t.pkg===_(M)?void 0:t.pkg},{default:e(()=>[u(o,{pkg:t.pkg,"text-left":``},null,8,[`pkg`]),a(`div`,L,[u(l,{pkg:t.pkg},null,8,[`pkg`]),_(k).available.flatDependents(t.pkg).length?(s(),i(d,{key:0,number:_(k).available.flatDependents(t.pkg).length,icon:`i-ph-arrow-elbow-down-right-duotone text-xs`,"rounded-full":``,"text-sm":``},null,8,[`number`])):p(``,!0),_(k).available.flatDependencies(t.pkg).length?(s(),i(d,{key:1,number:_(k).available.flatDependencies(t.pkg).length,icon:`i-ph-lego-duotone text-xs`,"rounded-full":``,"text-sm":``},null,8,[`number`])):p(``,!0),_(c).showInstallSizeBadge&&t.pkg.resolved.installSize?.bytes?(s(),i(f,{key:2,bytes:t.pkg.resolved.installSize.bytes,digits:0,"rounded-full":``,"text-sm":``},null,8,[`bytes`])):p(``,!0),_(c).showPublishTimeBadge?(s(),i(m,{key:3,pkg:t.pkg,"rounded-full":``,"text-sm":``},null,8,[`pkg`])):p(``,!0),u(h,{pkg:t.pkg},null,8,[`pkg`])])]),_:1},8,[`pkg`])}}}),z=Object.assign(R,{__name:`GridItem`}),B={grid:`~ cols-minmax-320px gap-2`},V=f({__name:`Container`,props:{packages:{}},setup(e){return(t,r)=>{let a=z;return s(),S(`div`,B,[(s(!0),S(n,null,h(e.packages,e=>(s(),i(a,{key:e.spec,pkg:e},null,8,[`pkg`]))),128))])}}}),H=Object.assign(V,{__name:`GridContainer`}),U=[`open`],W={"text-xl":``,flex:`~ wrap items-center gap-2`,"cursor-pointer":``,"select-none":``,"hover:bg-active":``,rounded:``,p1:``},G=f({__name:`Expand`,props:l({packages:{}},{moduleValue:{type:Boolean,default:!0},moduleValueModifiers:{}}),emits:[`update:moduleValue`],setup(e){let t=g(e,`moduleValue`);return(n,r)=>{let c=H;return s(),S(`details`,{flex:`~ col gap-2`,open:t.value,onToggle:r[0]||=e=>t.value=e.target.open},[a(`summary`,W,[a(`div`,{"i-ph-caret-down":``,transition:``,"duration-300":``,"op-fade":``,"ml--5":``,"text-base":``,class:C(t.value?``:`rotate--90`)},null,2),o(n.$slots,`title`)]),t.value?(s(),i(c,{key:0,packages:e.packages,mb4:``},null,8,[`packages`])):p(``,!0)],40,U)}}}),K=Object.assign(G,{__name:`GridExpand`}),q={flex:`~ col gap-2`},J={flex:`~ gap-2 items-center wrap`,mb4:``},Y={flex:`~ items-center gap-1`},X={key:3,op75:``},Z=5,Q=f({__name:`[...grid]`,setup(o){let c=T().params,l=m(()=>c.grid?.[0]||`depth`),f=window.location,g=m(()=>{if(l.value===`module-type`){let e=new Map;for(let t of k.filtered.packages){let n=d(t);e.has(n)||e.set(n,[]),e.get(n)?.push(t)}return[...e.entries()].sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>({name:e,module:e,packages:t,expanded:!1}))}else if(l.value===`clusters`){let e=new Map;for(let t of k.filtered.packages){let n=k.filtered.flatClusters(t);for(let r of n)e.has(r)||e.set(r,[]),e.get(r)?.push(t)}return[...e.entries()].sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>({name:e,cluster:e,packages:t,expanded:!1}))}else if(l.value===`authors`){let e=new Map;for(let t of k.filtered.packages){let n=r(t)||[];n.length||n.push({name:`<Unspecified>`,url:void 0});for(let r of n)e.has(r.name)||e.set(r.name,[]),e.get(r.name)?.push(t)}return[...e.entries()].sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>({name:e,author:e,packages:t,expanded:!1}))}else if(l.value===`licenses`){let e=new Map;for(let t of k.filtered.packages){let n=x(t).license||`<Unspecified>`;e.has(n)||e.set(n,[]),e.get(n)?.push(t)}return[...e.entries()].sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>({name:e,license:e,packages:t,expanded:!1}))}else if(l.value===`github`){let e=new Map;for(let n of k.filtered.packages){let r=t(n)?.org||`<Unspecified>`;e.has(r)||e.set(r,[]),e.get(r)?.push(n)}return[...e.entries()].sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>({name:e,org:e,packages:t,expanded:!1}))}else if(l.value===`provenance`){let e=new Map([[`Trusted Publisher`,[]],[`Provenance`,[]],[`None`,[]]]);for(let t of k.filtered.packages){let n=O(t),r=n?.provenance===`trustedPublisher`?`Trusted Publisher`:n?.provenance===!0?`Provenance`:`None`;e.get(r).push(t)}return[...e.entries()].map(([e,t])=>({name:e,provenance:e,packages:t,expanded:e!==`None`}))}else{let e=new Map;for(let t of k.filtered.packages){let n=t.depth;n>=Z&&(n=Z),e.has(n)||e.set(n,[]),e.get(n)?.push(t)}return[...e.entries()].sort(([e],[t])=>e-t).map(([e,t])=>({name:e===0?`Workspace Packages`:`Depth ${e}`,packages:t,expanded:e<3}))}});return(t,r)=>{let o=D,c=y,l=w,d=E,m=K;return s(),S(`div`,q,[a(`div`,J,[r[7]||=a(`div`,{"op-fade":``},` Group by `,-1),u(o,{"btn-action":``,as:`button`,to:{path:`/grid/depth`,hash:_(f).hash},"active-class":`text-primary bg-primary:5`},{default:e(()=>[...r[0]||=[a(`div`,{"i-ph-stack-simple-duotone":``},null,-1),b(` Depth `,-1)]]),_:1},8,[`to`]),u(o,{"btn-action":``,as:`button`,to:{path:`/grid/module-type`,hash:_(f).hash},"active-class":`text-primary bg-primary:5`},{default:e(()=>[...r[1]||=[a(`div`,{"i-ph-file-code-duotone":``},null,-1),b(` Module Type `,-1)]]),_:1},8,[`to`]),u(o,{"btn-action":``,as:`button`,to:{path:`/grid/clusters`,hash:_(f).hash},"active-class":`text-primary bg-primary:5`},{default:e(()=>[...r[2]||=[a(`div`,{"i-ph-exclude-duotone":``},null,-1),b(` Clusters `,-1)]]),_:1},8,[`to`]),u(o,{"btn-action":``,as:`button`,to:{path:`/grid/authors`,hash:_(f).hash},"active-class":`text-primary bg-primary:5`},{default:e(()=>[...r[3]||=[a(`div`,{"i-ph-user-circle-duotone":``},null,-1),b(` Authors `,-1)]]),_:1},8,[`to`]),u(o,{"btn-action":``,as:`button`,to:{path:`/grid/licenses`,hash:_(f).hash},"active-class":`text-primary bg-primary:5`},{default:e(()=>[...r[4]||=[a(`div`,{"i-ph-file-text-duotone":``},null,-1),b(` License `,-1)]]),_:1},8,[`to`]),u(o,{"btn-action":``,as:`button`,to:{path:`/grid/github`,hash:_(f).hash},"active-class":`text-primary bg-primary:5`},{default:e(()=>[...r[5]||=[a(`div`,{"i-ph-users-duotone":``},null,-1),b(` GitHub Slug `,-1)]]),_:1},8,[`to`]),u(o,{"btn-action":``,as:`button`,to:{path:`/grid/provenance`,hash:_(f).hash},"active-class":`text-primary bg-primary:5`},{default:e(()=>[...r[6]||=[a(`div`,{"i-ph:circle-wavy-check-duotone":``},null,-1),b(` Provenance `,-1)]]),_:1},8,[`to`])]),(s(!0),S(n,null,h(g.value,(t,n)=>(s(),i(m,{key:n,packages:t.packages,"module-value":t.expanded},{title:e(()=>[a(`div`,Y,[t.org?(s(),i(P,{key:0,src:`https://avatars.antfu.dev/gh/${t.org}`,"bg-active":``,border:`~ base rounded-full`,w6:``,h6:``,crossorigin:`anonymous`},null,8,[`src`])):p(``,!0),t.cluster?(s(),i(c,{key:1,cluster:t.cluster},null,8,[`cluster`])):t.module?(s(),i(l,{key:2,pkg:t.module},null,8,[`pkg`])):(s(),S(`span`,X,v(t.name),1))]),u(d,{number:t.packages.length,"rounded-full":``,ml2:``,"text-base":``},null,8,[`number`])]),_:2},1032,[`packages`,`module-value`]))),128))])}}});export{Q as default};